var Fx=Object.defineProperty;var Bx=(n,e,t)=>e in n?Fx(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Pr=(n,e,t)=>Bx(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function c_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dg={exports:{}},Ju={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ow;function Hx(){if(ow)return Ju;ow=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var f in s)f!=="key"&&(o[f]=s[f])}else o=s;return s=o.ref,{$$typeof:n,type:r,key:c,ref:s!==void 0?s:null,props:o}}return Ju.Fragment=e,Ju.jsx=t,Ju.jsxs=t,Ju}var lw;function qx(){return lw||(lw=1,dg.exports=Hx()),dg.exports}var b=qx(),mg={exports:{}},He={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw;function $x(){if(uw)return He;uw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function w(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,G={};function V(M,ue,be){this.props=M,this.context=ue,this.refs=G,this.updater=be||C}V.prototype.isReactComponent={},V.prototype.setState=function(M,ue){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ue,"setState")},V.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function Y(){}Y.prototype=V.prototype;function Z(M,ue,be){this.props=M,this.context=ue,this.refs=G,this.updater=be||C}var se=Z.prototype=new Y;se.constructor=Z,N(se,V.prototype),se.isPureReactComponent=!0;var te=Array.isArray,oe={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function k(M,ue,be,pe,ye,Ue){return be=Ue.ref,{$$typeof:n,type:M,key:ue,ref:be!==void 0?be:null,props:Ue}}function I(M,ue){return k(M.type,ue,void 0,void 0,void 0,M.props)}function A(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function O(M){var ue={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(be){return ue[be]})}var L=/\/+/g;function B(M,ue){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):ue.toString(36)}function D(){}function St(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(D,D):(M.status="pending",M.then(function(ue){M.status==="pending"&&(M.status="fulfilled",M.value=ue)},function(ue){M.status==="pending"&&(M.status="rejected",M.reason=ue)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function xt(M,ue,be,pe,ye){var Ue=typeof M;(Ue==="undefined"||Ue==="boolean")&&(M=null);var Me=!1;if(M===null)Me=!0;else switch(Ue){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(M.$$typeof){case n:case e:Me=!0;break;case _:return Me=M._init,xt(Me(M._payload),ue,be,pe,ye)}}if(Me)return ye=ye(M),Me=pe===""?"."+B(M,0):pe,te(ye)?(be="",Me!=null&&(be=Me.replace(L,"$&/")+"/"),xt(ye,ue,be,"",function(Lt){return Lt})):ye!=null&&(A(ye)&&(ye=I(ye,be+(ye.key==null||M&&M.key===ye.key?"":(""+ye.key).replace(L,"$&/")+"/")+Me)),ue.push(ye)),1;Me=0;var Ut=pe===""?".":pe+":";if(te(M))for(var nt=0;nt<M.length;nt++)pe=M[nt],Ue=Ut+B(pe,nt),Me+=xt(pe,ue,be,Ue,ye);else if(nt=w(M),typeof nt=="function")for(M=nt.call(M),nt=0;!(pe=M.next()).done;)pe=pe.value,Ue=Ut+B(pe,nt++),Me+=xt(pe,ue,be,Ue,ye);else if(Ue==="object"){if(typeof M.then=="function")return xt(St(M),ue,be,pe,ye);throw ue=String(M),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return Me}function fe(M,ue,be){if(M==null)return M;var pe=[],ye=0;return xt(M,pe,"","",function(Ue){return ue.call(be,Ue,ye++)}),pe}function De(M){if(M._status===-1){var ue=M._result;ue=ue(),ue.then(function(be){(M._status===0||M._status===-1)&&(M._status=1,M._result=be)},function(be){(M._status===0||M._status===-1)&&(M._status=2,M._result=be)}),M._status===-1&&(M._status=0,M._result=ue)}if(M._status===1)return M._result.default;throw M._result}var Ce=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function We(){}return He.Children={map:fe,forEach:function(M,ue,be){fe(M,function(){ue.apply(this,arguments)},be)},count:function(M){var ue=0;return fe(M,function(){ue++}),ue},toArray:function(M){return fe(M,function(ue){return ue})||[]},only:function(M){if(!A(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},He.Component=V,He.Fragment=t,He.Profiler=s,He.PureComponent=Z,He.StrictMode=r,He.Suspense=m,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=oe,He.act=function(){throw Error("act(...) is not supported in production builds of React.")},He.cache=function(M){return function(){return M.apply(null,arguments)}},He.cloneElement=function(M,ue,be){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var pe=N({},M.props),ye=M.key,Ue=void 0;if(ue!=null)for(Me in ue.ref!==void 0&&(Ue=void 0),ue.key!==void 0&&(ye=""+ue.key),ue)!j.call(ue,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&ue.ref===void 0||(pe[Me]=ue[Me]);var Me=arguments.length-2;if(Me===1)pe.children=be;else if(1<Me){for(var Ut=Array(Me),nt=0;nt<Me;nt++)Ut[nt]=arguments[nt+2];pe.children=Ut}return k(M.type,ye,void 0,void 0,Ue,pe)},He.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},He.createElement=function(M,ue,be){var pe,ye={},Ue=null;if(ue!=null)for(pe in ue.key!==void 0&&(Ue=""+ue.key),ue)j.call(ue,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(ye[pe]=ue[pe]);var Me=arguments.length-2;if(Me===1)ye.children=be;else if(1<Me){for(var Ut=Array(Me),nt=0;nt<Me;nt++)Ut[nt]=arguments[nt+2];ye.children=Ut}if(M&&M.defaultProps)for(pe in Me=M.defaultProps,Me)ye[pe]===void 0&&(ye[pe]=Me[pe]);return k(M,Ue,void 0,void 0,null,ye)},He.createRef=function(){return{current:null}},He.forwardRef=function(M){return{$$typeof:f,render:M}},He.isValidElement=A,He.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:De}},He.memo=function(M,ue){return{$$typeof:p,type:M,compare:ue===void 0?null:ue}},He.startTransition=function(M){var ue=oe.T,be={};oe.T=be;try{var pe=M(),ye=oe.S;ye!==null&&ye(be,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(We,Ce)}catch(Ue){Ce(Ue)}finally{oe.T=ue}},He.unstable_useCacheRefresh=function(){return oe.H.useCacheRefresh()},He.use=function(M){return oe.H.use(M)},He.useActionState=function(M,ue,be){return oe.H.useActionState(M,ue,be)},He.useCallback=function(M,ue){return oe.H.useCallback(M,ue)},He.useContext=function(M){return oe.H.useContext(M)},He.useDebugValue=function(){},He.useDeferredValue=function(M,ue){return oe.H.useDeferredValue(M,ue)},He.useEffect=function(M,ue){return oe.H.useEffect(M,ue)},He.useId=function(){return oe.H.useId()},He.useImperativeHandle=function(M,ue,be){return oe.H.useImperativeHandle(M,ue,be)},He.useInsertionEffect=function(M,ue){return oe.H.useInsertionEffect(M,ue)},He.useLayoutEffect=function(M,ue){return oe.H.useLayoutEffect(M,ue)},He.useMemo=function(M,ue){return oe.H.useMemo(M,ue)},He.useOptimistic=function(M,ue){return oe.H.useOptimistic(M,ue)},He.useReducer=function(M,ue,be){return oe.H.useReducer(M,ue,be)},He.useRef=function(M){return oe.H.useRef(M)},He.useState=function(M){return oe.H.useState(M)},He.useSyncExternalStore=function(M,ue,be){return oe.H.useSyncExternalStore(M,ue,be)},He.useTransition=function(){return oe.H.useTransition()},He.version="19.0.0",He}var cw;function h_(){return cw||(cw=1,mg.exports=$x()),mg.exports}var F=h_();const he=c_(F);var pg={exports:{}},ec={},gg={exports:{}},yg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw;function Gx(){return hw||(hw=1,function(n){function e(fe,De){var Ce=fe.length;fe.push(De);e:for(;0<Ce;){var We=Ce-1>>>1,M=fe[We];if(0<s(M,De))fe[We]=De,fe[Ce]=M,Ce=We;else break e}}function t(fe){return fe.length===0?null:fe[0]}function r(fe){if(fe.length===0)return null;var De=fe[0],Ce=fe.pop();if(Ce!==De){fe[0]=Ce;e:for(var We=0,M=fe.length,ue=M>>>1;We<ue;){var be=2*(We+1)-1,pe=fe[be],ye=be+1,Ue=fe[ye];if(0>s(pe,Ce))ye<M&&0>s(Ue,pe)?(fe[We]=Ue,fe[ye]=Ce,We=ye):(fe[We]=pe,fe[be]=Ce,We=be);else if(ye<M&&0>s(Ue,Ce))fe[We]=Ue,fe[ye]=Ce,We=ye;else break e}}return De}function s(fe,De){var Ce=fe.sortIndex-De.sortIndex;return Ce!==0?Ce:fe.id-De.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],p=[],_=1,T=null,w=3,C=!1,N=!1,G=!1,V=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function se(fe){for(var De=t(p);De!==null;){if(De.callback===null)r(p);else if(De.startTime<=fe)r(p),De.sortIndex=De.expirationTime,e(m,De);else break;De=t(p)}}function te(fe){if(G=!1,se(fe),!N)if(t(m)!==null)N=!0,St();else{var De=t(p);De!==null&&xt(te,De.startTime-fe)}}var oe=!1,j=-1,k=5,I=-1;function A(){return!(n.unstable_now()-I<k)}function O(){if(oe){var fe=n.unstable_now();I=fe;var De=!0;try{e:{N=!1,G&&(G=!1,Y(j),j=-1),C=!0;var Ce=w;try{t:{for(se(fe),T=t(m);T!==null&&!(T.expirationTime>fe&&A());){var We=T.callback;if(typeof We=="function"){T.callback=null,w=T.priorityLevel;var M=We(T.expirationTime<=fe);if(fe=n.unstable_now(),typeof M=="function"){T.callback=M,se(fe),De=!0;break t}T===t(m)&&r(m),se(fe)}else r(m);T=t(m)}if(T!==null)De=!0;else{var ue=t(p);ue!==null&&xt(te,ue.startTime-fe),De=!1}}break e}finally{T=null,w=Ce,C=!1}De=void 0}}finally{De?L():oe=!1}}}var L;if(typeof Z=="function")L=function(){Z(O)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,D=B.port2;B.port1.onmessage=O,L=function(){D.postMessage(null)}}else L=function(){V(O,0)};function St(){oe||(oe=!0,L())}function xt(fe,De){j=V(function(){fe(n.unstable_now())},De)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(fe){fe.callback=null},n.unstable_continueExecution=function(){N||C||(N=!0,St())},n.unstable_forceFrameRate=function(fe){0>fe||125<fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<fe?Math.floor(1e3/fe):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(fe){switch(w){case 1:case 2:case 3:var De=3;break;default:De=w}var Ce=w;w=De;try{return fe()}finally{w=Ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(fe,De){switch(fe){case 1:case 2:case 3:case 4:case 5:break;default:fe=3}var Ce=w;w=fe;try{return De()}finally{w=Ce}},n.unstable_scheduleCallback=function(fe,De,Ce){var We=n.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?We+Ce:We):Ce=We,fe){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=Ce+M,fe={id:_++,callback:De,priorityLevel:fe,startTime:Ce,expirationTime:M,sortIndex:-1},Ce>We?(fe.sortIndex=Ce,e(p,fe),t(m)===null&&fe===t(p)&&(G?(Y(j),j=-1):G=!0,xt(te,Ce-We))):(fe.sortIndex=M,e(m,fe),N||C||(N=!0,St())),fe},n.unstable_shouldYield=A,n.unstable_wrapCallback=function(fe){var De=w;return function(){var Ce=w;w=De;try{return fe.apply(this,arguments)}finally{w=Ce}}}}(yg)),yg}var fw;function Wx(){return fw||(fw=1,gg.exports=Gx()),gg.exports}var _g={exports:{}},kn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dw;function Kx(){if(dw)return kn;dw=1;var n=h_();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(m,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:T==null?null:""+T,children:m,containerInfo:p,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,kn.createPortal=function(m,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(m,p,null,_)},kn.flushSync=function(m){var p=c.T,_=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=p,r.p=_,r.d.f()}},kn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},kn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},kn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var _=p.as,T=f(_,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,C=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:w,fetchPriority:C}):_==="script"&&r.d.X(m,{crossOrigin:T,integrity:w,fetchPriority:C,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},kn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=f(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},kn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,T=f(_,p.crossOrigin);r.d.L(m,_,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},kn.preloadModule=function(m,p){if(typeof m=="string")if(p){var _=f(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},kn.requestFormReset=function(m){r.d.r(m)},kn.unstable_batchedUpdates=function(m,p){return m(p)},kn.useFormState=function(m,p,_){return c.H.useFormState(m,p,_)},kn.useFormStatus=function(){return c.H.useHostTransitionStatus()},kn.version="19.0.0",kn}var mw;function aR(){if(mw)return _g.exports;mw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),_g.exports=Kx(),_g.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pw;function Qx(){if(pw)return ec;pw=1;var n=Wx(),e=h_(),t=aR();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var o=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),C=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),te=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function j(i){return i===null||typeof i!="object"?null:(i=oe&&i[oe]||i["@@iterator"],typeof i=="function"?i:null)}var k=Symbol.for("react.client.reference");function I(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===k?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case m:return"Fragment";case f:return"Portal";case _:return"Profiler";case p:return"StrictMode";case G:return"Suspense";case V:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case C:return(i.displayName||"Context")+".Provider";case w:return(i._context.displayName||"Context")+".Consumer";case N:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Y:return a=i.displayName||null,a!==null?a:I(i.type)||"Memo";case Z:a=i._payload,i=i._init;try{return I(i(a))}catch{}}return null}var A=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=Object.assign,L,B;function D(i){if(L===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);L=a&&a[1]||"",B=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+L+i+B}var St=!1;function xt(i,a){if(!i||St)return"";St=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(J){var Q=J}Reflect.construct(i,[],le)}else{try{le.call()}catch(J){Q=J}i.call(le.prototype)}}else{try{throw Error()}catch(J){Q=J}(le=i())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(J){if(J&&Q&&typeof J.stack=="string")return[J.stack,Q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],S=g[1];if(E&&S){var x=E.split(`
`),z=S.split(`
`);for(d=u=0;u<x.length&&!x[u].includes("DetermineComponentFrameRoot");)u++;for(;d<z.length&&!z[d].includes("DetermineComponentFrameRoot");)d++;if(u===x.length||d===z.length)for(u=x.length-1,d=z.length-1;1<=u&&0<=d&&x[u]!==z[d];)d--;for(;1<=u&&0<=d;u--,d--)if(x[u]!==z[d]){if(u!==1||d!==1)do if(u--,d--,0>d||x[u]!==z[d]){var ee=`
`+x[u].replace(" at new "," at ");return i.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",i.displayName)),ee}while(1<=u&&0<=d);break}}}finally{St=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?D(l):""}function fe(i){switch(i.tag){case 26:case 27:case 5:return D(i.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 15:return i=xt(i.type,!1),i;case 11:return i=xt(i.type.render,!1),i;case 1:return i=xt(i.type,!0),i;default:return""}}function De(i){try{var a="";do a+=fe(i),i=i.return;while(i);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Ce(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function We(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function M(i){if(Ce(i)!==i)throw Error(r(188))}function ue(i){var a=i.alternate;if(!a){if(a=Ce(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,u=a;;){var d=l.return;if(d===null)break;var g=d.alternate;if(g===null){if(u=d.return,u!==null){l=u;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===l)return M(d),i;if(g===u)return M(d),a;g=g.sibling}throw Error(r(188))}if(l.return!==u.return)l=d,u=g;else{for(var E=!1,S=d.child;S;){if(S===l){E=!0,l=d,u=g;break}if(S===u){E=!0,u=d,l=g;break}S=S.sibling}if(!E){for(S=g.child;S;){if(S===l){E=!0,l=g,u=d;break}if(S===u){E=!0,u=g,l=d;break}S=S.sibling}if(!E)throw Error(r(189))}}if(l.alternate!==u)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function be(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=be(i),a!==null)return a;i=i.sibling}return null}var pe=Array.isArray,ye=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ue={pending:!1,data:null,method:null,action:null},Me=[],Ut=-1;function nt(i){return{current:i}}function Lt(i){0>Ut||(i.current=Me[Ut],Me[Ut]=null,Ut--)}function ze(i,a){Ut++,Me[Ut]=i.current,i.current=a}var zt=nt(null),mr=nt(null),Wn=nt(null),On=nt(null);function ri(i,a){switch(ze(Wn,a),ze(mr,i),ze(zt,null),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)&&(a=a.namespaceURI)?LT(a):0;break;default:if(i=i===8?a.parentNode:a,a=i.tagName,i=i.namespaceURI)i=LT(i),a=VT(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Lt(zt),ze(zt,a)}function Ur(){Lt(zt),Lt(mr),Lt(Wn)}function vs(i){i.memoizedState!==null&&ze(On,i);var a=zt.current,l=VT(a,i.type);a!==l&&(ze(mr,i),ze(zt,l))}function Es(i){mr.current===i&&(Lt(zt),Lt(mr)),On.current===i&&(Lt(On),Ku._currentValue=Ue)}var Ts=Object.prototype.hasOwnProperty,Pi=n.unstable_scheduleCallback,ws=n.unstable_cancelCallback,zr=n.unstable_shouldYield,Fr=n.unstable_requestPaint,Tn=n.unstable_now,bs=n.unstable_getCurrentPriorityLevel,vt=n.unstable_ImmediatePriority,Et=n.unstable_UserBlockingPriority,pr=n.unstable_NormalPriority,Ss=n.unstable_LowPriority,xa=n.unstable_IdlePriority,gr=n.log,ii=n.unstable_setDisableYieldValue,Br=null,rn=null;function Na(i){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Br,i,void 0,(i.current.flags&128)===128)}catch{}}function er(i){if(typeof gr=="function"&&ii(i),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(Br,i)}catch{}}var Qt=Math.clz32?Math.clz32:xo,Rs=Math.log,As=Math.LN2;function xo(i){return i>>>=0,i===0?32:31-(Rs(i)/As|0)|0}var tr=128,si=4194304;function Kn(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function wn(i,a){var l=i.pendingLanes;if(l===0)return 0;var u=0,d=i.suspendedLanes,g=i.pingedLanes,E=i.warmLanes;i=i.finishedLanes!==0;var S=l&134217727;return S!==0?(l=S&~d,l!==0?u=Kn(l):(g&=S,g!==0?u=Kn(g):i||(E=S&~E,E!==0&&(u=Kn(E))))):(S=l&~d,S!==0?u=Kn(S):g!==0?u=Kn(g):i||(E=l&~E,E!==0&&(u=Kn(E)))),u===0?0:a!==0&&a!==u&&(a&d)===0&&(d=u&-u,E=a&-a,d>=E||d===32&&(E&4194176)!==0)?a:u}function nr(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Cs(i,a){switch(i){case 1:case 2:case 4:case 8:return a+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oa(){var i=tr;return tr<<=1,(tr&4194176)===0&&(tr=128),i}function P(){var i=si;return si<<=1,(si&62914560)===0&&(si=4194304),i}function H(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function W(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function ce(i,a,l,u,d,g){var E=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var S=i.entanglements,x=i.expirationTimes,z=i.hiddenUpdates;for(l=E&~l;0<l;){var ee=31-Qt(l),le=1<<ee;S[ee]=0,x[ee]=-1;var Q=z[ee];if(Q!==null)for(z[ee]=null,ee=0;ee<Q.length;ee++){var J=Q[ee];J!==null&&(J.lane&=-536870913)}l&=~le}u!==0&&_e(i,u,0),g!==0&&d===0&&i.tag!==0&&(i.suspendedLanes|=g&~(E&~a))}function _e(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var u=31-Qt(a);i.entangledLanes|=a,i.entanglements[u]=i.entanglements[u]|1073741824|l&4194218}function Se(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var u=31-Qt(l),d=1<<u;d&a|i[u]&a&&(i[u]|=a),l&=~d}}function ke(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Te(){var i=ye.p;return i!==0?i:(i=window.event,i===void 0?32:tw(i.type))}function we(i,a){var l=ye.p;try{return ye.p=i,a()}finally{ye.p=l}}var me=Math.random().toString(36).slice(2),Ae="__reactFiber$"+me,xe="__reactProps$"+me,rt="__reactContainer$"+me,Nt="__reactEvents$"+me,pt="__reactListeners$"+me,Ye="__reactHandles$"+me,Ot="__reactResources$"+me,Fn="__reactMarker$"+me;function rr(i){delete i[Ae],delete i[xe],delete i[Nt],delete i[pt],delete i[Ye]}function $t(i){var a=i[Ae];if(a)return a;for(var l=i.parentNode;l;){if(a=l[rt]||l[Ae]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=zT(i);i!==null;){if(l=i[Ae])return l;i=zT(i)}return a}i=l,l=i.parentNode}return null}function Yt(i){if(i=i[Ae]||i[rt]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function yr(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function Qn(i){var a=i[Ot];return a||(a=i[Ot]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function dt(i){i[Fn]=!0}var ai=new Set,Hr={};function qe(i,a){mt(i,a),mt(i+"Capture",a)}function mt(i,a){for(Hr[i]=a,i=0;i<a.length;i++)ai.add(a[i])}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),At={},_r={};function Da(i){return Ts.call(_r,i)?!0:Ts.call(At,i)?!1:Mi.test(i)?_r[i]=!0:(At[i]=!0,!1)}function oi(i,a,l){if(Da(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Is(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function vr(i,a,l,u){if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+u)}}function Bn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ch(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function _m(i){var a=ch(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),u=""+i[a];if(!i.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,g=l.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return d.call(this)},set:function(E){u=""+E,g.call(this,E)}}),Object.defineProperty(i,a,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function ka(i){i._valueTracker||(i._valueTracker=_m(i))}function iu(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return i&&(u=ch(i)?i.checked?"true":"false":i.value),i=u,i!==l?(a.setValue(i),!0):!1}function No(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Li=/[\n"\\]/g;function Ft(i){return i.replace(Li,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function xs(i,a,l,u,d,g,E,S){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),a!=null?E==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Bn(a)):i.value!==""+Bn(a)&&(i.value=""+Bn(a)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),a!=null?Oo(i,E,Bn(a)):l!=null?Oo(i,E,Bn(l)):u!=null&&i.removeAttribute("value"),d==null&&g!=null&&(i.defaultChecked=!!g),d!=null&&(i.checked=d&&typeof d!="function"&&typeof d!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.name=""+Bn(S):i.removeAttribute("name")}function Pa(i,a,l,u,d,g,E,S){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),a!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||a!=null))return;l=l!=null?""+Bn(l):"",a=a!=null?""+Bn(a):l,S||a===i.value||(i.value=a),i.defaultValue=a}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=S?i.checked:!!u,i.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E)}function Oo(i,a,l){a==="number"&&No(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function ct(i,a,l,u){if(i=i.options,a){a={};for(var d=0;d<l.length;d++)a["$"+l[d]]=!0;for(l=0;l<i.length;l++)d=a.hasOwnProperty("$"+i[l].value),i[l].selected!==d&&(i[l].selected=d),d&&u&&(i[l].defaultSelected=!0)}else{for(l=""+Bn(l),a=null,d=0;d<i.length;d++){if(i[d].value===l){i[d].selected=!0,u&&(i[d].defaultSelected=!0);return}a!==null||i[d].disabled||(a=i[d])}a!==null&&(a.selected=!0)}}function Ma(i,a,l){if(a!=null&&(a=""+Bn(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+Bn(l):""}function Ns(i,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(r(92));if(pe(u)){if(1<u.length)throw Error(r(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=Bn(a),i.defaultValue=l,u=i.textContent,u===l&&u!==""&&u!==null&&(i.value=u)}function Er(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var vm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function su(i,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":u?i.setProperty(a,l):typeof l!="number"||l===0||vm.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function hh(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var d in a)u=a[d],a.hasOwnProperty(d)&&l[d]!==u&&su(i,d,u)}else for(var g in a)a.hasOwnProperty(g)&&su(i,g,a[g])}function au(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Em=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function li(i){return Tm.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Tr=null;function Do(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Vi=null,ji=null;function Ui(i){var a=Yt(i);if(a&&(i=a.stateNode)){var l=i[xe]||null;e:switch(i=a.stateNode,a.type){case"input":if(xs(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ft(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==i&&u.form===i.form){var d=u[xe]||null;if(!d)throw Error(r(90));xs(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===i.form&&iu(u)}break e;case"textarea":Ma(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&ct(i,!!l.multiple,a,!1)}}}var ou=!1;function fh(i,a,l){if(ou)return i(a,l);ou=!0;try{var u=i(a);return u}finally{if(ou=!1,(Vi!==null||ji!==null)&&(rf(),Vi&&(a=Vi,i=ji,ji=Vi=null,Ui(a),i)))for(a=0;a<i.length;a++)Ui(i[a])}}function La(i,a){var l=i.stateNode;if(l===null)return null;var u=l[xe]||null;if(u===null)return null;l=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var wr=!1;if(hn)try{var Va={};Object.defineProperty(Va,"passive",{get:function(){wr=!0}}),window.addEventListener("test",Va,Va),window.removeEventListener("test",Va,Va)}catch{wr=!1}var ui=null,Os=null,zi=null;function lu(){if(zi)return zi;var i,a=Os,l=a.length,u,d="value"in ui?ui.value:ui.textContent,g=d.length;for(i=0;i<l&&a[i]===d[i];i++);var E=l-i;for(u=1;u<=E&&a[l-u]===d[g-u];u++);return zi=d.slice(i,1<u?1-u:void 0)}function ci(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function hi(){return!0}function uu(){return!1}function fn(i){function a(l,u,d,g,E){this._reactName=l,this._targetInst=d,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(l=i[S],this[S]=l?l(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?hi:uu,this.isPropagationStopped=uu,this}return O(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=hi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=hi)},persist:function(){},isPersistent:hi}),a}var gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ko=fn(gt),ja=O({},gt,{view:0,detail:0}),dh=fn(ja),Po,Mo,fi,Ua=O({},ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ba,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==fi&&(fi&&i.type==="mousemove"?(Po=i.screenX-fi.screenX,Mo=i.screenY-fi.screenY):Mo=Po=0,fi=i),Po)},movementY:function(i){return"movementY"in i?i.movementY:Mo}}),br=fn(Ua),mh=O({},Ua,{dataTransfer:0}),wm=fn(mh),za=O({},ja,{relatedTarget:0}),Lo=fn(za),cu=O({},gt,{animationName:0,elapsedTime:0,pseudoElement:0}),Vo=fn(cu),ph=O({},gt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),jo=fn(ph),bm=O({},gt,{data:0}),hu=fn(bm),Fa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fu(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=yh[i])?!!a[i]:!1}function Ba(){return fu}var _h=O({},ja,{key:function(i){if(i.key){var a=Fa[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=ci(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?gh[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ba,charCode:function(i){return i.type==="keypress"?ci(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ci(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Uo=fn(_h),vh=O({},Ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),du=fn(vh),Fi=O({},ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ba}),Eh=fn(Fi),Th=O({},gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),wh=fn(Th),bh=O({},Ua,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),zo=fn(bh),Hn=O({},gt,{newState:0,oldState:0}),Sh=fn(Hn),Rh=[9,13,27,32],di=hn&&"CompositionEvent"in window,h=null;hn&&"documentMode"in document&&(h=document.documentMode);var y=hn&&"TextEvent"in window&&!h,v=hn&&(!di||h&&8<h&&11>=h),R=" ",$=!1;function X(i,a){switch(i){case"keyup":return Rh.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function de(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var it=!1;function sn(i,a){switch(i){case"compositionend":return de(a);case"keypress":return a.which!==32?null:($=!0,R);case"textInput":return i=a.data,i===R&&$?null:i;default:return null}}function st(i,a){if(it)return i==="compositionend"||!di&&X(i,a)?(i=lu(),zi=Os=ui=null,it=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return v&&a.locale!=="ko"?null:a.data;default:return null}}var dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function an(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!dn[i.type]:a==="textarea"}function Bi(i,a,l,u){Vi?ji?ji.push(u):ji=[u]:Vi=u,a=uf(a,"onChange"),0<a.length&&(l=new ko("onChange","change",null,l,u),i.push({event:l,listeners:a}))}var bn=null,mi=null;function mu(i){OT(i,0)}function Ah(i){var a=yr(i);if(iu(a))return i}function a0(i,a){if(i==="change")return a}var o0=!1;if(hn){var Sm;if(hn){var Rm="oninput"in document;if(!Rm){var l0=document.createElement("div");l0.setAttribute("oninput","return;"),Rm=typeof l0.oninput=="function"}Sm=Rm}else Sm=!1;o0=Sm&&(!document.documentMode||9<document.documentMode)}function u0(){bn&&(bn.detachEvent("onpropertychange",c0),mi=bn=null)}function c0(i){if(i.propertyName==="value"&&Ah(mi)){var a=[];Bi(a,mi,i,Do(i)),fh(mu,a)}}function yI(i,a,l){i==="focusin"?(u0(),bn=a,mi=l,bn.attachEvent("onpropertychange",c0)):i==="focusout"&&u0()}function _I(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ah(mi)}function vI(i,a){if(i==="click")return Ah(a)}function EI(i,a){if(i==="input"||i==="change")return Ah(a)}function TI(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var ir=typeof Object.is=="function"?Object.is:TI;function pu(i,a){if(ir(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var d=l[u];if(!Ts.call(a,d)||!ir(i[d],a[d]))return!1}return!0}function h0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function f0(i,a){var l=h0(i);i=0;for(var u;l;){if(l.nodeType===3){if(u=i+l.textContent.length,i<=a&&u>=a)return{node:l,offset:a-i};i=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=h0(l)}}function d0(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?d0(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function m0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=No(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=No(i.document)}return a}function Am(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function wI(i,a){var l=m0(a);a=i.focusedElem;var u=i.selectionRange;if(l!==a&&a&&a.ownerDocument&&d0(a.ownerDocument.documentElement,a)){if(u!==null&&Am(a)){if(i=u.start,l=u.end,l===void 0&&(l=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(l,a.value.length);else if(l=(i=a.ownerDocument||document)&&i.defaultView||window,l.getSelection){l=l.getSelection();var d=a.textContent.length,g=Math.min(u.start,d);u=u.end===void 0?g:Math.min(u.end,d),!l.extend&&g>u&&(d=u,u=g,g=d),d=f0(a,g);var E=f0(a,u);d&&E&&(l.rangeCount!==1||l.anchorNode!==d.node||l.anchorOffset!==d.offset||l.focusNode!==E.node||l.focusOffset!==E.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),l.removeAllRanges(),g>u?(l.addRange(i),l.extend(E.node,E.offset)):(i.setEnd(E.node,E.offset),l.addRange(i)))}}for(i=[],l=a;l=l.parentNode;)l.nodeType===1&&i.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)l=i[a],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var bI=hn&&"documentMode"in document&&11>=document.documentMode,Fo=null,Cm=null,gu=null,Im=!1;function p0(i,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Im||Fo==null||Fo!==No(u)||(u=Fo,"selectionStart"in u&&Am(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),gu&&pu(gu,u)||(gu=u,u=uf(Cm,"onSelect"),0<u.length&&(a=new ko("onSelect","select",null,a,l),i.push({event:a,listeners:u}),a.target=Fo)))}function Ha(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var Bo={animationend:Ha("Animation","AnimationEnd"),animationiteration:Ha("Animation","AnimationIteration"),animationstart:Ha("Animation","AnimationStart"),transitionrun:Ha("Transition","TransitionRun"),transitionstart:Ha("Transition","TransitionStart"),transitioncancel:Ha("Transition","TransitionCancel"),transitionend:Ha("Transition","TransitionEnd")},xm={},g0={};hn&&(g0=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function qa(i){if(xm[i])return xm[i];if(!Bo[i])return i;var a=Bo[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in g0)return xm[i]=a[l];return i}var y0=qa("animationend"),_0=qa("animationiteration"),v0=qa("animationstart"),SI=qa("transitionrun"),RI=qa("transitionstart"),AI=qa("transitioncancel"),E0=qa("transitionend"),T0=new Map,w0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function qr(i,a){T0.set(i,a),qe(a,[i])}var Sr=[],Ho=0,Nm=0;function Ch(){for(var i=Ho,a=Nm=Ho=0;a<i;){var l=Sr[a];Sr[a++]=null;var u=Sr[a];Sr[a++]=null;var d=Sr[a];Sr[a++]=null;var g=Sr[a];if(Sr[a++]=null,u!==null&&d!==null){var E=u.pending;E===null?d.next=d:(d.next=E.next,E.next=d),u.pending=d}g!==0&&b0(l,d,g)}}function Ih(i,a,l,u){Sr[Ho++]=i,Sr[Ho++]=a,Sr[Ho++]=l,Sr[Ho++]=u,Nm|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Om(i,a,l,u){return Ih(i,a,l,u),xh(i)}function Ds(i,a){return Ih(i,null,null,a),xh(i)}function b0(i,a,l){i.lanes|=l;var u=i.alternate;u!==null&&(u.lanes|=l);for(var d=!1,g=i.return;g!==null;)g.childLanes|=l,u=g.alternate,u!==null&&(u.childLanes|=l),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(d=!0)),i=g,g=g.return;d&&a!==null&&i.tag===3&&(g=i.stateNode,d=31-Qt(l),g=g.hiddenUpdates,i=g[d],i===null?g[d]=[a]:i.push(a),a.lane=l|536870912)}function xh(i){if(50<Fu)throw Fu=0,Vp=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var qo={},S0=new WeakMap;function Rr(i,a){if(typeof i=="object"&&i!==null){var l=S0.get(i);return l!==void 0?l:(a={value:i,source:a,stack:De(a)},S0.set(i,a),a)}return{value:i,source:a,stack:De(a)}}var $o=[],Go=0,Nh=null,Oh=0,Ar=[],Cr=0,$a=null,Hi=1,qi="";function Ga(i,a){$o[Go++]=Oh,$o[Go++]=Nh,Nh=i,Oh=a}function R0(i,a,l){Ar[Cr++]=Hi,Ar[Cr++]=qi,Ar[Cr++]=$a,$a=i;var u=Hi;i=qi;var d=32-Qt(u)-1;u&=~(1<<d),l+=1;var g=32-Qt(a)+d;if(30<g){var E=d-d%5;g=(u&(1<<E)-1).toString(32),u>>=E,d-=E,Hi=1<<32-Qt(a)+d|l<<d|u,qi=g+i}else Hi=1<<g|l<<d|u,qi=i}function Dm(i){i.return!==null&&(Ga(i,1),R0(i,1,0))}function km(i){for(;i===Nh;)Nh=$o[--Go],$o[Go]=null,Oh=$o[--Go],$o[Go]=null;for(;i===$a;)$a=Ar[--Cr],Ar[Cr]=null,qi=Ar[--Cr],Ar[Cr]=null,Hi=Ar[--Cr],Ar[Cr]=null}var qn=null,Sn=null,ht=!1,$r=null,pi=!1,Pm=Error(r(519));function Wa(i){var a=Error(r(418,""));throw vu(Rr(a,i)),Pm}function A0(i){var a=i.stateNode,l=i.type,u=i.memoizedProps;switch(a[Ae]=i,a[xe]=u,l){case"dialog":Ze("cancel",a),Ze("close",a);break;case"iframe":case"object":case"embed":Ze("load",a);break;case"video":case"audio":for(l=0;l<Hu.length;l++)Ze(Hu[l],a);break;case"source":Ze("error",a);break;case"img":case"image":case"link":Ze("error",a),Ze("load",a);break;case"details":Ze("toggle",a);break;case"input":Ze("invalid",a),Pa(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),ka(a);break;case"select":Ze("invalid",a);break;case"textarea":Ze("invalid",a),Ns(a,u.value,u.defaultValue,u.children),ka(a)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||MT(a.textContent,l)?(u.popover!=null&&(Ze("beforetoggle",a),Ze("toggle",a)),u.onScroll!=null&&Ze("scroll",a),u.onScrollEnd!=null&&Ze("scrollend",a),u.onClick!=null&&(a.onclick=cf),a=!0):a=!1,a||Wa(i)}function C0(i){for(qn=i.return;qn;)switch(qn.tag){case 3:case 27:pi=!0;return;case 5:case 13:pi=!1;return;default:qn=qn.return}}function yu(i){if(i!==qn)return!1;if(!ht)return C0(i),ht=!0,!1;var a=!1,l;if((l=i.tag!==3&&i.tag!==27)&&((l=i.tag===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||eg(i.type,i.memoizedProps)),l=!l),l&&(a=!0),a&&Sn&&Wa(i),C0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(a===0){Sn=Wr(i.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;i=i.nextSibling}Sn=null}}else Sn=qn?Wr(i.stateNode.nextSibling):null;return!0}function _u(){Sn=qn=null,ht=!1}function vu(i){$r===null?$r=[i]:$r.push(i)}var Eu=Error(r(460)),I0=Error(r(474)),Mm={then:function(){}};function x0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Dh(){}function N0(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Dh,Dh),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,i===Eu?Error(r(483)):i;default:if(typeof a.status=="string")a.then(Dh,Dh);else{if(i=Ct,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(u){if(a.status==="pending"){var d=a;d.status="fulfilled",d.value=u}},function(u){if(a.status==="pending"){var d=a;d.status="rejected",d.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,i===Eu?Error(r(483)):i}throw Tu=a,Eu}}var Tu=null;function O0(){if(Tu===null)throw Error(r(459));var i=Tu;return Tu=null,i}var Wo=null,wu=0;function kh(i){var a=wu;return wu+=1,Wo===null&&(Wo=[]),N0(Wo,i,a)}function bu(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Ph(i,a){throw a.$$typeof===o?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function D0(i){var a=i._init;return a(i._payload)}function k0(i){function a(q,U){if(i){var K=q.deletions;K===null?(q.deletions=[U],q.flags|=16):K.push(U)}}function l(q,U){if(!i)return null;for(;U!==null;)a(q,U),U=U.sibling;return null}function u(q){for(var U=new Map;q!==null;)q.key!==null?U.set(q.key,q):U.set(q.index,q),q=q.sibling;return U}function d(q,U){return q=qs(q,U),q.index=0,q.sibling=null,q}function g(q,U,K){return q.index=K,i?(K=q.alternate,K!==null?(K=K.index,K<U?(q.flags|=33554434,U):K):(q.flags|=33554434,U)):(q.flags|=1048576,U)}function E(q){return i&&q.alternate===null&&(q.flags|=33554434),q}function S(q,U,K,re){return U===null||U.tag!==6?(U=xp(K,q.mode,re),U.return=q,U):(U=d(U,K),U.return=q,U)}function x(q,U,K,re){var Re=K.type;return Re===m?ee(q,U,K.props.children,re,K.key):U!==null&&(U.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Z&&D0(Re)===U.type)?(U=d(U,K.props),bu(U,K),U.return=q,U):(U=Zh(K.type,K.key,K.props,null,q.mode,re),bu(U,K),U.return=q,U)}function z(q,U,K,re){return U===null||U.tag!==4||U.stateNode.containerInfo!==K.containerInfo||U.stateNode.implementation!==K.implementation?(U=Np(K,q.mode,re),U.return=q,U):(U=d(U,K.children||[]),U.return=q,U)}function ee(q,U,K,re,Re){return U===null||U.tag!==7?(U=ro(K,q.mode,re,Re),U.return=q,U):(U=d(U,K),U.return=q,U)}function le(q,U,K){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=xp(""+U,q.mode,K),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case c:return K=Zh(U.type,U.key,U.props,null,q.mode,K),bu(K,U),K.return=q,K;case f:return U=Np(U,q.mode,K),U.return=q,U;case Z:var re=U._init;return U=re(U._payload),le(q,U,K)}if(pe(U)||j(U))return U=ro(U,q.mode,K,null),U.return=q,U;if(typeof U.then=="function")return le(q,kh(U),K);if(U.$$typeof===C)return le(q,Qh(q,U),K);Ph(q,U)}return null}function Q(q,U,K,re){var Re=U!==null?U.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Re!==null?null:S(q,U,""+K,re);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case c:return K.key===Re?x(q,U,K,re):null;case f:return K.key===Re?z(q,U,K,re):null;case Z:return Re=K._init,K=Re(K._payload),Q(q,U,K,re)}if(pe(K)||j(K))return Re!==null?null:ee(q,U,K,re,null);if(typeof K.then=="function")return Q(q,U,kh(K),re);if(K.$$typeof===C)return Q(q,U,Qh(q,K),re);Ph(q,K)}return null}function J(q,U,K,re,Re){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return q=q.get(K)||null,S(U,q,""+re,Re);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case c:return q=q.get(re.key===null?K:re.key)||null,x(U,q,re,Re);case f:return q=q.get(re.key===null?K:re.key)||null,z(U,q,re,Re);case Z:var Ge=re._init;return re=Ge(re._payload),J(q,U,K,re,Re)}if(pe(re)||j(re))return q=q.get(K)||null,ee(U,q,re,Re,null);if(typeof re.then=="function")return J(q,U,K,kh(re),Re);if(re.$$typeof===C)return J(q,U,K,Qh(U,re),Re);Ph(U,re)}return null}function Ie(q,U,K,re){for(var Re=null,Ge=null,Ne=U,Pe=U=0,gn=null;Ne!==null&&Pe<K.length;Pe++){Ne.index>Pe?(gn=Ne,Ne=null):gn=Ne.sibling;var ft=Q(q,Ne,K[Pe],re);if(ft===null){Ne===null&&(Ne=gn);break}i&&Ne&&ft.alternate===null&&a(q,Ne),U=g(ft,U,Pe),Ge===null?Re=ft:Ge.sibling=ft,Ge=ft,Ne=gn}if(Pe===K.length)return l(q,Ne),ht&&Ga(q,Pe),Re;if(Ne===null){for(;Pe<K.length;Pe++)Ne=le(q,K[Pe],re),Ne!==null&&(U=g(Ne,U,Pe),Ge===null?Re=Ne:Ge.sibling=Ne,Ge=Ne);return ht&&Ga(q,Pe),Re}for(Ne=u(Ne);Pe<K.length;Pe++)gn=J(Ne,q,Pe,K[Pe],re),gn!==null&&(i&&gn.alternate!==null&&Ne.delete(gn.key===null?Pe:gn.key),U=g(gn,U,Pe),Ge===null?Re=gn:Ge.sibling=gn,Ge=gn);return i&&Ne.forEach(function(Xs){return a(q,Xs)}),ht&&Ga(q,Pe),Re}function Be(q,U,K,re){if(K==null)throw Error(r(151));for(var Re=null,Ge=null,Ne=U,Pe=U=0,gn=null,ft=K.next();Ne!==null&&!ft.done;Pe++,ft=K.next()){Ne.index>Pe?(gn=Ne,Ne=null):gn=Ne.sibling;var Xs=Q(q,Ne,ft.value,re);if(Xs===null){Ne===null&&(Ne=gn);break}i&&Ne&&Xs.alternate===null&&a(q,Ne),U=g(Xs,U,Pe),Ge===null?Re=Xs:Ge.sibling=Xs,Ge=Xs,Ne=gn}if(ft.done)return l(q,Ne),ht&&Ga(q,Pe),Re;if(Ne===null){for(;!ft.done;Pe++,ft=K.next())ft=le(q,ft.value,re),ft!==null&&(U=g(ft,U,Pe),Ge===null?Re=ft:Ge.sibling=ft,Ge=ft);return ht&&Ga(q,Pe),Re}for(Ne=u(Ne);!ft.done;Pe++,ft=K.next())ft=J(Ne,q,Pe,ft.value,re),ft!==null&&(i&&ft.alternate!==null&&Ne.delete(ft.key===null?Pe:ft.key),U=g(ft,U,Pe),Ge===null?Re=ft:Ge.sibling=ft,Ge=ft);return i&&Ne.forEach(function(zx){return a(q,zx)}),ht&&Ga(q,Pe),Re}function qt(q,U,K,re){if(typeof K=="object"&&K!==null&&K.type===m&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case c:e:{for(var Re=K.key;U!==null;){if(U.key===Re){if(Re=K.type,Re===m){if(U.tag===7){l(q,U.sibling),re=d(U,K.props.children),re.return=q,q=re;break e}}else if(U.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Z&&D0(Re)===U.type){l(q,U.sibling),re=d(U,K.props),bu(re,K),re.return=q,q=re;break e}l(q,U);break}else a(q,U);U=U.sibling}K.type===m?(re=ro(K.props.children,q.mode,re,K.key),re.return=q,q=re):(re=Zh(K.type,K.key,K.props,null,q.mode,re),bu(re,K),re.return=q,q=re)}return E(q);case f:e:{for(Re=K.key;U!==null;){if(U.key===Re)if(U.tag===4&&U.stateNode.containerInfo===K.containerInfo&&U.stateNode.implementation===K.implementation){l(q,U.sibling),re=d(U,K.children||[]),re.return=q,q=re;break e}else{l(q,U);break}else a(q,U);U=U.sibling}re=Np(K,q.mode,re),re.return=q,q=re}return E(q);case Z:return Re=K._init,K=Re(K._payload),qt(q,U,K,re)}if(pe(K))return Ie(q,U,K,re);if(j(K)){if(Re=j(K),typeof Re!="function")throw Error(r(150));return K=Re.call(K),Be(q,U,K,re)}if(typeof K.then=="function")return qt(q,U,kh(K),re);if(K.$$typeof===C)return qt(q,U,Qh(q,K),re);Ph(q,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,U!==null&&U.tag===6?(l(q,U.sibling),re=d(U,K),re.return=q,q=re):(l(q,U),re=xp(K,q.mode,re),re.return=q,q=re),E(q)):l(q,U)}return function(q,U,K,re){try{wu=0;var Re=qt(q,U,K,re);return Wo=null,Re}catch(Ne){if(Ne===Eu)throw Ne;var Ge=Or(29,Ne,null,q.mode);return Ge.lanes=re,Ge.return=q,Ge}finally{}}}var Ka=k0(!0),P0=k0(!1),Ko=nt(null),Mh=nt(0);function M0(i,a){i=ts,ze(Mh,i),ze(Ko,a),ts=i|a.baseLanes}function Lm(){ze(Mh,ts),ze(Ko,Ko.current)}function Vm(){ts=Mh.current,Lt(Ko),Lt(Mh)}var Ir=nt(null),gi=null;function ks(i){var a=i.alternate;ze(on,on.current&1),ze(Ir,i),gi===null&&(a===null||Ko.current!==null||a.memoizedState!==null)&&(gi=i)}function L0(i){if(i.tag===22){if(ze(on,on.current),ze(Ir,i),gi===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(gi=i)}}else Ps()}function Ps(){ze(on,on.current),ze(Ir,Ir.current)}function $i(i){Lt(Ir),gi===i&&(gi=null),Lt(on)}var on=nt(0);function Lh(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var CI=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,u){i.push(u)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},II=n.unstable_scheduleCallback,xI=n.unstable_NormalPriority,ln={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jm(){return{controller:new CI,data:new Map,refCount:0}}function Su(i){i.refCount--,i.refCount===0&&II(xI,function(){i.controller.abort()})}var Ru=null,Um=0,Qo=0,Yo=null;function NI(i,a){if(Ru===null){var l=Ru=[];Um=0,Qo=$p(),Yo={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Um++,a.then(V0,V0),a}function V0(){if(--Um===0&&Ru!==null){Yo!==null&&(Yo.status="fulfilled");var i=Ru;Ru=null,Qo=0,Yo=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function OI(i,a){var l=[],u={status:"pending",value:null,reason:null,then:function(d){l.push(d)}};return i.then(function(){u.status="fulfilled",u.value=a;for(var d=0;d<l.length;d++)(0,l[d])(a)},function(d){for(u.status="rejected",u.reason=d,d=0;d<l.length;d++)(0,l[d])(void 0)}),u}var j0=A.S;A.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&NI(i,a),j0!==null&&j0(i,a)};var Qa=nt(null);function zm(){var i=Qa.current;return i!==null?i:Ct.pooledCache}function Vh(i,a){a===null?ze(Qa,Qa.current):ze(Qa,a.pool)}function U0(){var i=zm();return i===null?null:{parent:ln._currentValue,pool:i}}var Ms=0,$e=null,Tt=null,Xt=null,jh=!1,Xo=!1,Ya=!1,Uh=0,Au=0,Zo=null,DI=0;function Gt(){throw Error(r(321))}function Fm(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!ir(i[l],a[l]))return!1;return!0}function Bm(i,a,l,u,d,g){return Ms=g,$e=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,A.H=i===null||i.memoizedState===null?Xa:Ls,Ya=!1,g=l(u,d),Ya=!1,Xo&&(g=F0(a,l,u,d)),z0(i),g}function z0(i){A.H=yi;var a=Tt!==null&&Tt.next!==null;if(Ms=0,Xt=Tt=$e=null,jh=!1,Au=0,Zo=null,a)throw Error(r(300));i===null||mn||(i=i.dependencies,i!==null&&Kh(i)&&(mn=!0))}function F0(i,a,l,u){$e=i;var d=0;do{if(Xo&&(Zo=null),Au=0,Xo=!1,25<=d)throw Error(r(301));if(d+=1,Xt=Tt=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}A.H=Za,g=a(l,u)}while(Xo);return g}function kI(){var i=A.H,a=i.useState()[0];return a=typeof a.then=="function"?Cu(a):a,i=i.useState()[0],(Tt!==null?Tt.memoizedState:null)!==i&&($e.flags|=1024),a}function Hm(){var i=Uh!==0;return Uh=0,i}function qm(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function $m(i){if(jh){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}jh=!1}Ms=0,Xt=Tt=$e=null,Xo=!1,Au=Uh=0,Zo=null}function Yn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?$e.memoizedState=Xt=i:Xt=Xt.next=i,Xt}function Zt(){if(Tt===null){var i=$e.alternate;i=i!==null?i.memoizedState:null}else i=Tt.next;var a=Xt===null?$e.memoizedState:Xt.next;if(a!==null)Xt=a,Tt=i;else{if(i===null)throw $e.alternate===null?Error(r(467)):Error(r(310));Tt=i,i={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Xt===null?$e.memoizedState=Xt=i:Xt=Xt.next=i}return Xt}var zh;zh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Cu(i){var a=Au;return Au+=1,Zo===null&&(Zo=[]),i=N0(Zo,i,a),a=$e,(Xt===null?a.memoizedState:Xt.next)===null&&(a=a.alternate,A.H=a===null||a.memoizedState===null?Xa:Ls),i}function Fh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Cu(i);if(i.$$typeof===C)return Dn(i)}throw Error(r(438,String(i)))}function Gm(i){var a=null,l=$e.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=$e.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(d){return d.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=zh(),$e.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),u=0;u<i;u++)l[u]=te;return a.index++,l}function Gi(i,a){return typeof a=="function"?a(i):a}function Bh(i){var a=Zt();return Wm(a,Tt,i)}function Wm(i,a,l){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=l;var d=i.baseQueue,g=u.pending;if(g!==null){if(d!==null){var E=d.next;d.next=g.next,g.next=E}a.baseQueue=d=g,u.pending=null}if(g=i.baseState,d===null)i.memoizedState=g;else{a=d.next;var S=E=null,x=null,z=a,ee=!1;do{var le=z.lane&-536870913;if(le!==z.lane?(at&le)===le:(Ms&le)===le){var Q=z.revertLane;if(Q===0)x!==null&&(x=x.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),le===Qo&&(ee=!0);else if((Ms&Q)===Q){z=z.next,Q===Qo&&(ee=!0);continue}else le={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},x===null?(S=x=le,E=g):x=x.next=le,$e.lanes|=Q,$s|=Q;le=z.action,Ya&&l(g,le),g=z.hasEagerState?z.eagerState:l(g,le)}else Q={lane:le,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},x===null?(S=x=Q,E=g):x=x.next=Q,$e.lanes|=le,$s|=le;z=z.next}while(z!==null&&z!==a);if(x===null?E=g:x.next=S,!ir(g,i.memoizedState)&&(mn=!0,ee&&(l=Yo,l!==null)))throw l;i.memoizedState=g,i.baseState=E,i.baseQueue=x,u.lastRenderedState=g}return d===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Km(i){var a=Zt(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var u=l.dispatch,d=l.pending,g=a.memoizedState;if(d!==null){l.pending=null;var E=d=d.next;do g=i(g,E.action),E=E.next;while(E!==d);ir(g,a.memoizedState)||(mn=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),l.lastRenderedState=g}return[g,u]}function B0(i,a,l){var u=$e,d=Zt(),g=ht;if(g){if(l===void 0)throw Error(r(407));l=l()}else l=a();var E=!ir((Tt||d).memoizedState,l);if(E&&(d.memoizedState=l,mn=!0),d=d.queue,Xm($0.bind(null,u,d,i),[i]),d.getSnapshot!==a||E||Xt!==null&&Xt.memoizedState.tag&1){if(u.flags|=2048,Jo(9,q0.bind(null,u,d,l,a),{destroy:void 0},null),Ct===null)throw Error(r(349));g||(Ms&60)!==0||H0(u,a,l)}return l}function H0(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=$e.updateQueue,a===null?(a=zh(),$e.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function q0(i,a,l,u){a.value=l,a.getSnapshot=u,G0(a)&&W0(i)}function $0(i,a,l){return l(function(){G0(a)&&W0(i)})}function G0(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!ir(i,l)}catch{return!0}}function W0(i){var a=Ds(i,2);a!==null&&$n(a,i,2)}function Qm(i){var a=Yn();if(typeof i=="function"){var l=i;if(i=l(),Ya){er(!0);try{l()}finally{er(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:i},a}function K0(i,a,l,u){return i.baseState=l,Wm(i,Tt,typeof u=="function"?u:Gi)}function PI(i,a,l,u,d){if($h(i))throw Error(r(485));if(i=a.action,i!==null){var g={payload:d,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};A.T!==null?l(!0):g.isTransition=!1,u(g),l=a.pending,l===null?(g.next=a.pending=g,Q0(a,g)):(g.next=l.next,a.pending=l.next=g)}}function Q0(i,a){var l=a.action,u=a.payload,d=i.state;if(a.isTransition){var g=A.T,E={};A.T=E;try{var S=l(d,u),x=A.S;x!==null&&x(E,S),Y0(i,a,S)}catch(z){Ym(i,a,z)}finally{A.T=g}}else try{g=l(d,u),Y0(i,a,g)}catch(z){Ym(i,a,z)}}function Y0(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){X0(i,a,u)},function(u){return Ym(i,a,u)}):X0(i,a,l)}function X0(i,a,l){a.status="fulfilled",a.value=l,Z0(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,Q0(i,l)))}function Ym(i,a,l){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,Z0(a),a=a.next;while(a!==u)}i.action=null}function Z0(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function J0(i,a){return a}function eE(i,a){if(ht){var l=Ct.formState;if(l!==null){e:{var u=$e;if(ht){if(Sn){t:{for(var d=Sn,g=pi;d.nodeType!==8;){if(!g){d=null;break t}if(d=Wr(d.nextSibling),d===null){d=null;break t}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){Sn=Wr(d.nextSibling),u=d.data==="F!";break e}}Wa(u)}u=!1}u&&(a=l[0])}}return l=Yn(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:J0,lastRenderedState:a},l.queue=u,l=_E.bind(null,$e,u),u.dispatch=l,u=Qm(!1),g=np.bind(null,$e,!1,u.queue),u=Yn(),d={state:a,dispatch:null,action:i,pending:null},u.queue=d,l=PI.bind(null,$e,d,g,l),d.dispatch=l,u.memoizedState=i,[a,l,!1]}function tE(i){var a=Zt();return nE(a,Tt,i)}function nE(i,a,l){a=Wm(i,a,J0)[0],i=Bh(Gi)[0],a=typeof a=="object"&&a!==null&&typeof a.then=="function"?Cu(a):a;var u=Zt(),d=u.queue,g=d.dispatch;return l!==u.memoizedState&&($e.flags|=2048,Jo(9,MI.bind(null,d,l),{destroy:void 0},null)),[a,g,i]}function MI(i,a){i.action=a}function rE(i){var a=Zt(),l=Tt;if(l!==null)return nE(a,l,i);Zt(),a=a.memoizedState,l=Zt();var u=l.queue.dispatch;return l.memoizedState=i,[a,u,!1]}function Jo(i,a,l,u){return i={tag:i,create:a,inst:l,deps:u,next:null},a=$e.updateQueue,a===null&&(a=zh(),$e.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(u=l.next,l.next=i,i.next=u,a.lastEffect=i),i}function iE(){return Zt().memoizedState}function Hh(i,a,l,u){var d=Yn();$e.flags|=i,d.memoizedState=Jo(1|a,l,{destroy:void 0},u===void 0?null:u)}function qh(i,a,l,u){var d=Zt();u=u===void 0?null:u;var g=d.memoizedState.inst;Tt!==null&&u!==null&&Fm(u,Tt.memoizedState.deps)?d.memoizedState=Jo(a,l,g,u):($e.flags|=i,d.memoizedState=Jo(1|a,l,g,u))}function sE(i,a){Hh(8390656,8,i,a)}function Xm(i,a){qh(2048,8,i,a)}function aE(i,a){return qh(4,2,i,a)}function oE(i,a){return qh(4,4,i,a)}function lE(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function uE(i,a,l){l=l!=null?l.concat([i]):null,qh(4,4,lE.bind(null,a,i),l)}function Zm(){}function cE(i,a){var l=Zt();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&Fm(a,u[1])?u[0]:(l.memoizedState=[i,a],i)}function hE(i,a){var l=Zt();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&Fm(a,u[1]))return u[0];if(u=i(),Ya){er(!0);try{i()}finally{er(!1)}}return l.memoizedState=[u,a],u}function Jm(i,a,l){return l===void 0||(Ms&1073741824)!==0?i.memoizedState=a:(i.memoizedState=l,i=dT(),$e.lanes|=i,$s|=i,l)}function fE(i,a,l,u){return ir(l,a)?l:Ko.current!==null?(i=Jm(i,l,u),ir(i,a)||(mn=!0),i):(Ms&42)===0?(mn=!0,i.memoizedState=l):(i=dT(),$e.lanes|=i,$s|=i,a)}function dE(i,a,l,u,d){var g=ye.p;ye.p=g!==0&&8>g?g:8;var E=A.T,S={};A.T=S,np(i,!1,a,l);try{var x=d(),z=A.S;if(z!==null&&z(S,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var ee=OI(x,u);Iu(i,a,ee,lr(i))}else Iu(i,a,u,lr(i))}catch(le){Iu(i,a,{then:function(){},status:"rejected",reason:le},lr())}finally{ye.p=g,A.T=E}}function LI(){}function ep(i,a,l,u){if(i.tag!==5)throw Error(r(476));var d=mE(i).queue;dE(i,d,a,Ue,l===null?LI:function(){return pE(i),l(u)})}function mE(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Ue,baseState:Ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:Ue},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function pE(i){var a=mE(i).next.queue;Iu(i,a,{},lr())}function tp(){return Dn(Ku)}function gE(){return Zt().memoizedState}function yE(){return Zt().memoizedState}function VI(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=lr();i=Us(l);var u=zs(a,i,l);u!==null&&($n(u,a,l),Ou(u,a,l)),a={cache:jm()},i.payload=a;return}a=a.return}}function jI(i,a,l){var u=lr();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},$h(i)?vE(a,l):(l=Om(i,a,l,u),l!==null&&($n(l,i,u),EE(l,a,u)))}function _E(i,a,l){var u=lr();Iu(i,a,l,u)}function Iu(i,a,l,u){var d={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if($h(i))vE(a,d);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var E=a.lastRenderedState,S=g(E,l);if(d.hasEagerState=!0,d.eagerState=S,ir(S,E))return Ih(i,a,d,0),Ct===null&&Ch(),!1}catch{}finally{}if(l=Om(i,a,d,u),l!==null)return $n(l,i,u),EE(l,a,u),!0}return!1}function np(i,a,l,u){if(u={lane:2,revertLane:$p(),action:u,hasEagerState:!1,eagerState:null,next:null},$h(i)){if(a)throw Error(r(479))}else a=Om(i,l,u,2),a!==null&&$n(a,i,2)}function $h(i){var a=i.alternate;return i===$e||a!==null&&a===$e}function vE(i,a){Xo=jh=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function EE(i,a,l){if((l&4194176)!==0){var u=a.lanes;u&=i.pendingLanes,l|=u,a.lanes=l,Se(i,l)}}var yi={readContext:Dn,use:Fh,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useLayoutEffect:Gt,useInsertionEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useSyncExternalStore:Gt,useId:Gt};yi.useCacheRefresh=Gt,yi.useMemoCache=Gt,yi.useHostTransitionStatus=Gt,yi.useFormState=Gt,yi.useActionState=Gt,yi.useOptimistic=Gt;var Xa={readContext:Dn,use:Fh,useCallback:function(i,a){return Yn().memoizedState=[i,a===void 0?null:a],i},useContext:Dn,useEffect:sE,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Hh(4194308,4,lE.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Hh(4194308,4,i,a)},useInsertionEffect:function(i,a){Hh(4,2,i,a)},useMemo:function(i,a){var l=Yn();a=a===void 0?null:a;var u=i();if(Ya){er(!0);try{i()}finally{er(!1)}}return l.memoizedState=[u,a],u},useReducer:function(i,a,l){var u=Yn();if(l!==void 0){var d=l(a);if(Ya){er(!0);try{l(a)}finally{er(!1)}}}else d=a;return u.memoizedState=u.baseState=d,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:d},u.queue=i,i=i.dispatch=jI.bind(null,$e,i),[u.memoizedState,i]},useRef:function(i){var a=Yn();return i={current:i},a.memoizedState=i},useState:function(i){i=Qm(i);var a=i.queue,l=_E.bind(null,$e,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:Zm,useDeferredValue:function(i,a){var l=Yn();return Jm(l,i,a)},useTransition:function(){var i=Qm(!1);return i=dE.bind(null,$e,i.queue,!0,!1),Yn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var u=$e,d=Yn();if(ht){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),Ct===null)throw Error(r(349));(at&60)!==0||H0(u,a,l)}d.memoizedState=l;var g={value:l,getSnapshot:a};return d.queue=g,sE($0.bind(null,u,g,i),[i]),u.flags|=2048,Jo(9,q0.bind(null,u,g,l,a),{destroy:void 0},null),l},useId:function(){var i=Yn(),a=Ct.identifierPrefix;if(ht){var l=qi,u=Hi;l=(u&~(1<<32-Qt(u)-1)).toString(32)+l,a=":"+a+"R"+l,l=Uh++,0<l&&(a+="H"+l.toString(32)),a+=":"}else l=DI++,a=":"+a+"r"+l.toString(32)+":";return i.memoizedState=a},useCacheRefresh:function(){return Yn().memoizedState=VI.bind(null,$e)}};Xa.useMemoCache=Gm,Xa.useHostTransitionStatus=tp,Xa.useFormState=eE,Xa.useActionState=eE,Xa.useOptimistic=function(i){var a=Yn();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=np.bind(null,$e,!0,l),l.dispatch=a,[i,a]};var Ls={readContext:Dn,use:Fh,useCallback:cE,useContext:Dn,useEffect:Xm,useImperativeHandle:uE,useInsertionEffect:aE,useLayoutEffect:oE,useMemo:hE,useReducer:Bh,useRef:iE,useState:function(){return Bh(Gi)},useDebugValue:Zm,useDeferredValue:function(i,a){var l=Zt();return fE(l,Tt.memoizedState,i,a)},useTransition:function(){var i=Bh(Gi)[0],a=Zt().memoizedState;return[typeof i=="boolean"?i:Cu(i),a]},useSyncExternalStore:B0,useId:gE};Ls.useCacheRefresh=yE,Ls.useMemoCache=Gm,Ls.useHostTransitionStatus=tp,Ls.useFormState=tE,Ls.useActionState=tE,Ls.useOptimistic=function(i,a){var l=Zt();return K0(l,Tt,i,a)};var Za={readContext:Dn,use:Fh,useCallback:cE,useContext:Dn,useEffect:Xm,useImperativeHandle:uE,useInsertionEffect:aE,useLayoutEffect:oE,useMemo:hE,useReducer:Km,useRef:iE,useState:function(){return Km(Gi)},useDebugValue:Zm,useDeferredValue:function(i,a){var l=Zt();return Tt===null?Jm(l,i,a):fE(l,Tt.memoizedState,i,a)},useTransition:function(){var i=Km(Gi)[0],a=Zt().memoizedState;return[typeof i=="boolean"?i:Cu(i),a]},useSyncExternalStore:B0,useId:gE};Za.useCacheRefresh=yE,Za.useMemoCache=Gm,Za.useHostTransitionStatus=tp,Za.useFormState=rE,Za.useActionState=rE,Za.useOptimistic=function(i,a){var l=Zt();return Tt!==null?K0(l,Tt,i,a):(l.baseState=i,[i,l.queue.dispatch])};function rp(i,a,l,u){a=i.memoizedState,l=l(u,a),l=l==null?a:O({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var ip={isMounted:function(i){return(i=i._reactInternals)?Ce(i)===i:!1},enqueueSetState:function(i,a,l){i=i._reactInternals;var u=lr(),d=Us(u);d.payload=a,l!=null&&(d.callback=l),a=zs(i,d,u),a!==null&&($n(a,i,u),Ou(a,i,u))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var u=lr(),d=Us(u);d.tag=1,d.payload=a,l!=null&&(d.callback=l),a=zs(i,d,u),a!==null&&($n(a,i,u),Ou(a,i,u))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=lr(),u=Us(l);u.tag=2,a!=null&&(u.callback=a),a=zs(i,u,l),a!==null&&($n(a,i,l),Ou(a,i,l))}};function TE(i,a,l,u,d,g,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,g,E):a.prototype&&a.prototype.isPureReactComponent?!pu(l,u)||!pu(d,g):!0}function wE(i,a,l,u){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==i&&ip.enqueueReplaceState(a,a.state,null)}function Ja(i,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(i=i.defaultProps){l===a&&(l=O({},l));for(var d in i)l[d]===void 0&&(l[d]=i[d])}return l}var Gh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function bE(i){Gh(i)}function SE(i){console.error(i)}function RE(i){Gh(i)}function Wh(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function AE(i,a,l){try{var u=i.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function sp(i,a,l){return l=Us(l),l.tag=3,l.payload={element:null},l.callback=function(){Wh(i,a)},l}function CE(i){return i=Us(i),i.tag=3,i}function IE(i,a,l,u){var d=l.type.getDerivedStateFromError;if(typeof d=="function"){var g=u.value;i.payload=function(){return d(g)},i.callback=function(){AE(a,l,u)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){AE(a,l,u),typeof d!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function UI(i,a,l,u,d){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&Nu(a,l,d,!0),l=Ir.current,l!==null){switch(l.tag){case 13:return gi===null?zp():l.alternate===null&&Ht===0&&(Ht=3),l.flags&=-257,l.flags|=65536,l.lanes=d,u===Mm?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),Bp(i,u,d)),!1;case 22:return l.flags|=65536,u===Mm?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),Bp(i,u,d)),!1}throw Error(r(435,l.tag))}return Bp(i,u,d),zp(),!1}if(ht)return a=Ir.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=d,u!==Pm&&(i=Error(r(422),{cause:u}),vu(Rr(i,l)))):(u!==Pm&&(a=Error(r(423),{cause:u}),vu(Rr(a,l))),i=i.current.alternate,i.flags|=65536,d&=-d,i.lanes|=d,u=Rr(u,l),d=sp(i.stateNode,u,d),Ep(i,d),Ht!==4&&(Ht=2)),!1;var g=Error(r(520),{cause:u});if(g=Rr(g,l),Uu===null?Uu=[g]:Uu.push(g),Ht!==4&&(Ht=2),a===null)return!0;u=Rr(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=d&-d,l.lanes|=i,i=sp(l.stateNode,u,i),Ep(l,i),!1;case 1:if(a=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Gs===null||!Gs.has(g))))return l.flags|=65536,d&=-d,l.lanes|=d,d=CE(d),IE(d,i,l,u),Ep(l,d),!1}l=l.return}while(l!==null);return!1}var xE=Error(r(461)),mn=!1;function Rn(i,a,l,u){a.child=i===null?P0(a,null,l,u):Ka(a,i.child,l,u)}function NE(i,a,l,u,d){l=l.render;var g=a.ref;if("ref"in u){var E={};for(var S in u)S!=="ref"&&(E[S]=u[S])}else E=u;return to(a),u=Bm(i,a,l,E,g,d),S=Hm(),i!==null&&!mn?(qm(i,a,d),Wi(i,a,d)):(ht&&S&&Dm(a),a.flags|=1,Rn(i,a,u,d),a.child)}function OE(i,a,l,u,d){if(i===null){var g=l.type;return typeof g=="function"&&!Ip(g)&&g.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=g,DE(i,a,g,u,d)):(i=Zh(l.type,null,u,a,a.mode,d),i.ref=a.ref,i.return=a,a.child=i)}if(g=i.child,!mp(i,d)){var E=g.memoizedProps;if(l=l.compare,l=l!==null?l:pu,l(E,u)&&i.ref===a.ref)return Wi(i,a,d)}return a.flags|=1,i=qs(g,u),i.ref=a.ref,i.return=a,a.child=i}function DE(i,a,l,u,d){if(i!==null){var g=i.memoizedProps;if(pu(g,u)&&i.ref===a.ref)if(mn=!1,a.pendingProps=u=g,mp(i,d))(i.flags&131072)!==0&&(mn=!0);else return a.lanes=i.lanes,Wi(i,a,d)}return ap(i,a,l,u,d)}function kE(i,a,l){var u=a.pendingProps,d=u.children,g=(a.stateNode._pendingVisibility&2)!==0,E=i!==null?i.memoizedState:null;if(xu(i,a),u.mode==="hidden"||g){if((a.flags&128)!==0){if(u=E!==null?E.baseLanes|l:l,i!==null){for(d=a.child=i.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;a.childLanes=g&~u}else a.childLanes=0,a.child=null;return PE(i,a,u,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Vh(a,E!==null?E.cachePool:null),E!==null?M0(a,E):Lm(),L0(a);else return a.lanes=a.childLanes=536870912,PE(i,a,E!==null?E.baseLanes|l:l,l)}else E!==null?(Vh(a,E.cachePool),M0(a,E),Ps(),a.memoizedState=null):(i!==null&&Vh(a,null),Lm(),Ps());return Rn(i,a,d,l),a.child}function PE(i,a,l,u){var d=zm();return d=d===null?null:{parent:ln._currentValue,pool:d},a.memoizedState={baseLanes:l,cachePool:d},i!==null&&Vh(a,null),Lm(),L0(a),i!==null&&Nu(i,a,u,!0),null}function xu(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=2097664)}}function ap(i,a,l,u,d){return to(a),l=Bm(i,a,l,u,void 0,d),u=Hm(),i!==null&&!mn?(qm(i,a,d),Wi(i,a,d)):(ht&&u&&Dm(a),a.flags|=1,Rn(i,a,l,d),a.child)}function ME(i,a,l,u,d,g){return to(a),a.updateQueue=null,l=F0(a,u,l,d),z0(i),u=Hm(),i!==null&&!mn?(qm(i,a,g),Wi(i,a,g)):(ht&&u&&Dm(a),a.flags|=1,Rn(i,a,l,g),a.child)}function LE(i,a,l,u,d){if(to(a),a.stateNode===null){var g=qo,E=l.contextType;typeof E=="object"&&E!==null&&(g=Dn(E)),g=new l(u,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=ip,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=u,g.state=a.memoizedState,g.refs={},_p(a),E=l.contextType,g.context=typeof E=="object"&&E!==null?Dn(E):qo,g.state=a.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(rp(a,l,E,u),g.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&ip.enqueueReplaceState(g,g.state,null),ku(a,u,g,d),Du(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(i===null){g=a.stateNode;var S=a.memoizedProps,x=Ja(l,S);g.props=x;var z=g.context,ee=l.contextType;E=qo,typeof ee=="object"&&ee!==null&&(E=Dn(ee));var le=l.getDerivedStateFromProps;ee=typeof le=="function"||typeof g.getSnapshotBeforeUpdate=="function",S=a.pendingProps!==S,ee||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S||z!==E)&&wE(a,g,u,E),js=!1;var Q=a.memoizedState;g.state=Q,ku(a,u,g,d),Du(),z=a.memoizedState,S||Q!==z||js?(typeof le=="function"&&(rp(a,l,le,u),z=a.memoizedState),(x=js||TE(a,l,x,u,Q,z,E))?(ee||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=z),g.props=u,g.state=z,g.context=E,u=x):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{g=a.stateNode,vp(i,a),E=a.memoizedProps,ee=Ja(l,E),g.props=ee,le=a.pendingProps,Q=g.context,z=l.contextType,x=qo,typeof z=="object"&&z!==null&&(x=Dn(z)),S=l.getDerivedStateFromProps,(z=typeof S=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==le||Q!==x)&&wE(a,g,u,x),js=!1,Q=a.memoizedState,g.state=Q,ku(a,u,g,d),Du();var J=a.memoizedState;E!==le||Q!==J||js||i!==null&&i.dependencies!==null&&Kh(i.dependencies)?(typeof S=="function"&&(rp(a,l,S,u),J=a.memoizedState),(ee=js||TE(a,l,ee,u,Q,J,x)||i!==null&&i.dependencies!==null&&Kh(i.dependencies))?(z||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,J,x),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,J,x)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=J),g.props=u,g.state=J,g.context=x,u=ee):(typeof g.componentDidUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(a.flags|=1024),u=!1)}return g=u,xu(i,a),u=(a.flags&128)!==0,g||u?(g=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,i!==null&&u?(a.child=Ka(a,i.child,null,d),a.child=Ka(a,null,l,d)):Rn(i,a,l,d),a.memoizedState=g.state,i=a.child):i=Wi(i,a,d),i}function VE(i,a,l,u){return _u(),a.flags|=256,Rn(i,a,l,u),a.child}var op={dehydrated:null,treeContext:null,retryLane:0};function lp(i){return{baseLanes:i,cachePool:U0()}}function up(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=Dr),i}function jE(i,a,l){var u=a.pendingProps,d=!1,g=(a.flags&128)!==0,E;if((E=g)||(E=i!==null&&i.memoizedState===null?!1:(on.current&2)!==0),E&&(d=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,i===null){if(ht){if(d?ks(a):Ps(),ht){var S=Sn,x;if(x=S){e:{for(x=S,S=pi;x.nodeType!==8;){if(!S){S=null;break e}if(x=Wr(x.nextSibling),x===null){S=null;break e}}S=x}S!==null?(a.memoizedState={dehydrated:S,treeContext:$a!==null?{id:Hi,overflow:qi}:null,retryLane:536870912},x=Or(18,null,null,0),x.stateNode=S,x.return=a,a.child=x,qn=a,Sn=null,x=!0):x=!1}x||Wa(a)}if(S=a.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return S.data==="$!"?a.lanes=16:a.lanes=536870912,null;$i(a)}return S=u.children,u=u.fallback,d?(Ps(),d=a.mode,S=hp({mode:"hidden",children:S},d),u=ro(u,d,l,null),S.return=a,u.return=a,S.sibling=u,a.child=S,d=a.child,d.memoizedState=lp(l),d.childLanes=up(i,E,l),a.memoizedState=op,u):(ks(a),cp(a,S))}if(x=i.memoizedState,x!==null&&(S=x.dehydrated,S!==null)){if(g)a.flags&256?(ks(a),a.flags&=-257,a=fp(i,a,l)):a.memoizedState!==null?(Ps(),a.child=i.child,a.flags|=128,a=null):(Ps(),d=u.fallback,S=a.mode,u=hp({mode:"visible",children:u.children},S),d=ro(d,S,l,null),d.flags|=2,u.return=a,d.return=a,u.sibling=d,a.child=u,Ka(a,i.child,null,l),u=a.child,u.memoizedState=lp(l),u.childLanes=up(i,E,l),a.memoizedState=op,a=d);else if(ks(a),S.data==="$!"){if(E=S.nextSibling&&S.nextSibling.dataset,E)var z=E.dgst;E=z,u=Error(r(419)),u.stack="",u.digest=E,vu({value:u,source:null,stack:null}),a=fp(i,a,l)}else if(mn||Nu(i,a,l,!1),E=(l&i.childLanes)!==0,mn||E){if(E=Ct,E!==null){if(u=l&-l,(u&42)!==0)u=1;else switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=64;break;case 268435456:u=134217728;break;default:u=0}if(u=(u&(E.suspendedLanes|l))!==0?0:u,u!==0&&u!==x.retryLane)throw x.retryLane=u,Ds(i,u),$n(E,i,u),xE}S.data==="$?"||zp(),a=fp(i,a,l)}else S.data==="$?"?(a.flags|=128,a.child=i.child,a=ex.bind(null,i),S._reactRetry=a,a=null):(i=x.treeContext,Sn=Wr(S.nextSibling),qn=a,ht=!0,$r=null,pi=!1,i!==null&&(Ar[Cr++]=Hi,Ar[Cr++]=qi,Ar[Cr++]=$a,Hi=i.id,qi=i.overflow,$a=a),a=cp(a,u.children),a.flags|=4096);return a}return d?(Ps(),d=u.fallback,S=a.mode,x=i.child,z=x.sibling,u=qs(x,{mode:"hidden",children:u.children}),u.subtreeFlags=x.subtreeFlags&31457280,z!==null?d=qs(z,d):(d=ro(d,S,l,null),d.flags|=2),d.return=a,u.return=a,u.sibling=d,a.child=u,u=d,d=a.child,S=i.child.memoizedState,S===null?S=lp(l):(x=S.cachePool,x!==null?(z=ln._currentValue,x=x.parent!==z?{parent:z,pool:z}:x):x=U0(),S={baseLanes:S.baseLanes|l,cachePool:x}),d.memoizedState=S,d.childLanes=up(i,E,l),a.memoizedState=op,u):(ks(a),l=i.child,i=l.sibling,l=qs(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,i!==null&&(E=a.deletions,E===null?(a.deletions=[i],a.flags|=16):E.push(i)),a.child=l,a.memoizedState=null,l)}function cp(i,a){return a=hp({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function hp(i,a){return cT(i,a,0,null)}function fp(i,a,l){return Ka(a,i.child,null,l),i=cp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function UE(i,a,l){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a),gp(i.return,a,l)}function dp(i,a,l,u,d){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:d}:(g.isBackwards=a,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=l,g.tailMode=d)}function zE(i,a,l){var u=a.pendingProps,d=u.revealOrder,g=u.tail;if(Rn(i,a,u.children,l),u=on.current,(u&2)!==0)u=u&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&UE(i,l,a);else if(i.tag===19)UE(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(ze(on,u),d){case"forwards":for(l=a.child,d=null;l!==null;)i=l.alternate,i!==null&&Lh(i)===null&&(d=l),l=l.sibling;l=d,l===null?(d=a.child,a.child=null):(d=l.sibling,l.sibling=null),dp(a,!1,d,l,g);break;case"backwards":for(l=null,d=a.child,a.child=null;d!==null;){if(i=d.alternate,i!==null&&Lh(i)===null){a.child=d;break}i=d.sibling,d.sibling=l,l=d,d=i}dp(a,!0,l,null,g);break;case"together":dp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Wi(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),$s|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(Nu(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=qs(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=qs(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function mp(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Kh(i)))}function zI(i,a,l){switch(a.tag){case 3:ri(a,a.stateNode.containerInfo),Vs(a,ln,i.memoizedState.cache),_u();break;case 27:case 5:vs(a);break;case 4:ri(a,a.stateNode.containerInfo);break;case 10:Vs(a,a.type,a.memoizedProps.value);break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(ks(a),a.flags|=128,null):(l&a.child.childLanes)!==0?jE(i,a,l):(ks(a),i=Wi(i,a,l),i!==null?i.sibling:null);ks(a);break;case 19:var d=(i.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(Nu(i,a,l,!1),u=(l&a.childLanes)!==0),d){if(u)return zE(i,a,l);a.flags|=128}if(d=a.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ze(on,on.current),u)break;return null;case 22:case 23:return a.lanes=0,kE(i,a,l);case 24:Vs(a,ln,i.memoizedState.cache)}return Wi(i,a,l)}function FE(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)mn=!0;else{if(!mp(i,l)&&(a.flags&128)===0)return mn=!1,zI(i,a,l);mn=(i.flags&131072)!==0}else mn=!1,ht&&(a.flags&1048576)!==0&&R0(a,Oh,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var u=a.elementType,d=u._init;if(u=d(u._payload),a.type=u,typeof u=="function")Ip(u)?(i=Ja(u,i),a.tag=1,a=LE(null,a,u,i,l)):(a.tag=0,a=ap(null,a,u,i,l));else{if(u!=null){if(d=u.$$typeof,d===N){a.tag=11,a=NE(null,a,u,i,l);break e}else if(d===Y){a.tag=14,a=OE(null,a,u,i,l);break e}}throw a=I(u)||u,Error(r(306,a,""))}}return a;case 0:return ap(i,a,a.type,a.pendingProps,l);case 1:return u=a.type,d=Ja(u,a.pendingProps),LE(i,a,u,d,l);case 3:e:{if(ri(a,a.stateNode.containerInfo),i===null)throw Error(r(387));var g=a.pendingProps;d=a.memoizedState,u=d.element,vp(i,a),ku(a,g,null,l);var E=a.memoizedState;if(g=E.cache,Vs(a,ln,g),g!==d.cache&&yp(a,[ln],l,!0),Du(),g=E.element,d.isDehydrated)if(d={element:g,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=d,a.memoizedState=d,a.flags&256){a=VE(i,a,g,l);break e}else if(g!==u){u=Rr(Error(r(424)),a),vu(u),a=VE(i,a,g,l);break e}else for(Sn=Wr(a.stateNode.containerInfo.firstChild),qn=a,ht=!0,$r=null,pi=!0,l=P0(a,null,g,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(_u(),g===u){a=Wi(i,a,l);break e}Rn(i,a,g,l)}a=a.child}return a;case 26:return xu(i,a),i===null?(l=qT(a.type,null,a.pendingProps,null))?a.memoizedState=l:ht||(l=a.type,i=a.pendingProps,u=hf(Wn.current).createElement(l),u[Ae]=a,u[xe]=i,An(u,l,i),dt(u),a.stateNode=u):a.memoizedState=qT(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return vs(a),i===null&&ht&&(u=a.stateNode=FT(a.type,a.pendingProps,Wn.current),qn=a,pi=!0,Sn=Wr(u.firstChild)),u=a.pendingProps.children,i!==null||ht?Rn(i,a,u,l):a.child=Ka(a,null,u,l),xu(i,a),a.child;case 5:return i===null&&ht&&((d=u=Sn)&&(u=gx(u,a.type,a.pendingProps,pi),u!==null?(a.stateNode=u,qn=a,Sn=Wr(u.firstChild),pi=!1,d=!0):d=!1),d||Wa(a)),vs(a),d=a.type,g=a.pendingProps,E=i!==null?i.memoizedProps:null,u=g.children,eg(d,g)?u=null:E!==null&&eg(d,E)&&(a.flags|=32),a.memoizedState!==null&&(d=Bm(i,a,kI,null,null,l),Ku._currentValue=d),xu(i,a),Rn(i,a,u,l),a.child;case 6:return i===null&&ht&&((i=l=Sn)&&(l=yx(l,a.pendingProps,pi),l!==null?(a.stateNode=l,qn=a,Sn=null,i=!0):i=!1),i||Wa(a)),null;case 13:return jE(i,a,l);case 4:return ri(a,a.stateNode.containerInfo),u=a.pendingProps,i===null?a.child=Ka(a,null,u,l):Rn(i,a,u,l),a.child;case 11:return NE(i,a,a.type,a.pendingProps,l);case 7:return Rn(i,a,a.pendingProps,l),a.child;case 8:return Rn(i,a,a.pendingProps.children,l),a.child;case 12:return Rn(i,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,Vs(a,a.type,u.value),Rn(i,a,u.children,l),a.child;case 9:return d=a.type._context,u=a.pendingProps.children,to(a),d=Dn(d),u=u(d),a.flags|=1,Rn(i,a,u,l),a.child;case 14:return OE(i,a,a.type,a.pendingProps,l);case 15:return DE(i,a,a.type,a.pendingProps,l);case 19:return zE(i,a,l);case 22:return kE(i,a,l);case 24:return to(a),u=Dn(ln),i===null?(d=zm(),d===null&&(d=Ct,g=jm(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=l),d=g),a.memoizedState={parent:u,cache:d},_p(a),Vs(a,ln,d)):((i.lanes&l)!==0&&(vp(i,a),ku(a,null,null,l),Du()),d=i.memoizedState,g=a.memoizedState,d.parent!==u?(d={parent:u,cache:u},a.memoizedState=d,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=d),Vs(a,ln,u)):(u=g.cache,Vs(a,ln,u),u!==d.cache&&yp(a,[ln],l,!0))),Rn(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}var pp=nt(null),eo=null,Ki=null;function Vs(i,a,l){ze(pp,a._currentValue),a._currentValue=l}function Qi(i){i._currentValue=pp.current,Lt(pp)}function gp(i,a,l){for(;i!==null;){var u=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),i===l)break;i=i.return}}function yp(i,a,l,u){var d=i.child;for(d!==null&&(d.return=i);d!==null;){var g=d.dependencies;if(g!==null){var E=d.child;g=g.firstContext;e:for(;g!==null;){var S=g;g=d;for(var x=0;x<a.length;x++)if(S.context===a[x]){g.lanes|=l,S=g.alternate,S!==null&&(S.lanes|=l),gp(g.return,l,i),u||(E=null);break e}g=S.next}}else if(d.tag===18){if(E=d.return,E===null)throw Error(r(341));E.lanes|=l,g=E.alternate,g!==null&&(g.lanes|=l),gp(E,l,i),E=null}else E=d.child;if(E!==null)E.return=d;else for(E=d;E!==null;){if(E===i){E=null;break}if(d=E.sibling,d!==null){d.return=E.return,E=d;break}E=E.return}d=E}}function Nu(i,a,l,u){i=null;for(var d=a,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var E=d.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var S=d.type;ir(d.pendingProps.value,E.value)||(i!==null?i.push(S):i=[S])}}else if(d===On.current){if(E=d.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(i!==null?i.push(Ku):i=[Ku])}d=d.return}i!==null&&yp(a,i,l,u),a.flags|=262144}function Kh(i){for(i=i.firstContext;i!==null;){if(!ir(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function to(i){eo=i,Ki=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Dn(i){return BE(eo,i)}function Qh(i,a){return eo===null&&to(i),BE(i,a)}function BE(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Ki===null){if(i===null)throw Error(r(308));Ki=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Ki=Ki.next=a;return l}var js=!1;function _p(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vp(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Us(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function zs(i,a,l){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(jt&2)!==0){var d=u.pending;return d===null?a.next=a:(a.next=d.next,d.next=a),u.pending=a,a=xh(i),b0(i,null,l),a}return Ih(i,u,a,l),xh(i)}function Ou(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194176)!==0)){var u=a.lanes;u&=i.pendingLanes,l|=u,a.lanes=l,Se(i,l)}}function Ep(i,a){var l=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var d=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?d=g=E:g=g.next=E,l=l.next}while(l!==null);g===null?d=g=a:g=g.next=a}else d=g=a;l={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Tp=!1;function Du(){if(Tp){var i=Yo;if(i!==null)throw i}}function ku(i,a,l,u){Tp=!1;var d=i.updateQueue;js=!1;var g=d.firstBaseUpdate,E=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var x=S,z=x.next;x.next=null,E===null?g=z:E.next=z,E=x;var ee=i.alternate;ee!==null&&(ee=ee.updateQueue,S=ee.lastBaseUpdate,S!==E&&(S===null?ee.firstBaseUpdate=z:S.next=z,ee.lastBaseUpdate=x))}if(g!==null){var le=d.baseState;E=0,ee=z=x=null,S=g;do{var Q=S.lane&-536870913,J=Q!==S.lane;if(J?(at&Q)===Q:(u&Q)===Q){Q!==0&&Q===Qo&&(Tp=!0),ee!==null&&(ee=ee.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Ie=i,Be=S;Q=a;var qt=l;switch(Be.tag){case 1:if(Ie=Be.payload,typeof Ie=="function"){le=Ie.call(qt,le,Q);break e}le=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Be.payload,Q=typeof Ie=="function"?Ie.call(qt,le,Q):Ie,Q==null)break e;le=O({},le,Q);break e;case 2:js=!0}}Q=S.callback,Q!==null&&(i.flags|=64,J&&(i.flags|=8192),J=d.callbacks,J===null?d.callbacks=[Q]:J.push(Q))}else J={lane:Q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ee===null?(z=ee=J,x=le):ee=ee.next=J,E|=Q;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;J=S,S=J.next,J.next=null,d.lastBaseUpdate=J,d.shared.pending=null}}while(!0);ee===null&&(x=le),d.baseState=x,d.firstBaseUpdate=z,d.lastBaseUpdate=ee,g===null&&(d.shared.lanes=0),$s|=E,i.lanes=E,i.memoizedState=le}}function HE(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function qE(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)HE(l[i],a)}function Pu(i,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var d=u.next;l=d;do{if((l.tag&i)===i){u=void 0;var g=l.create,E=l.inst;u=g(),E.destroy=u}l=l.next}while(l!==d)}}catch(S){Rt(a,a.return,S)}}function Fs(i,a,l){try{var u=a.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var g=d.next;u=g;do{if((u.tag&i)===i){var E=u.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,d=a;var x=l;try{S()}catch(z){Rt(d,x,z)}}}u=u.next}while(u!==g)}}catch(z){Rt(a,a.return,z)}}function $E(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{qE(a,l)}catch(u){Rt(i,i.return,u)}}}function GE(i,a,l){l.props=Ja(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(u){Rt(i,a,u)}}function no(i,a){try{var l=i.ref;if(l!==null){var u=i.stateNode;switch(i.tag){case 26:case 27:case 5:var d=u;break;default:d=u}typeof l=="function"?i.refCleanup=l(d):l.current=d}}catch(g){Rt(i,a,g)}}function sr(i,a){var l=i.ref,u=i.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(d){Rt(i,a,d)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(d){Rt(i,a,d)}else l.current=null}function WE(i){var a=i.type,l=i.memoizedProps,u=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(d){Rt(i,i.return,d)}}function KE(i,a,l){try{var u=i.stateNode;hx(u,i.type,l,a),u[xe]=a}catch(d){Rt(i,i.return,d)}}function QE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function wp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||QE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function bp(i,a,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,a?l.nodeType===8?l.parentNode.insertBefore(i,a):l.insertBefore(i,a):(l.nodeType===8?(a=l.parentNode,a.insertBefore(i,l)):(a=l,a.appendChild(i)),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=cf));else if(u!==4&&u!==27&&(i=i.child,i!==null))for(bp(i,a,l),i=i.sibling;i!==null;)bp(i,a,l),i=i.sibling}function Yh(i,a,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(u!==4&&u!==27&&(i=i.child,i!==null))for(Yh(i,a,l),i=i.sibling;i!==null;)Yh(i,a,l),i=i.sibling}var Yi=!1,Bt=!1,Sp=!1,YE=typeof WeakSet=="function"?WeakSet:Set,pn=null,XE=!1;function FI(i,a){if(i=i.containerInfo,Zp=yf,i=m0(i),Am(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var d=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var E=0,S=-1,x=-1,z=0,ee=0,le=i,Q=null;t:for(;;){for(var J;le!==l||d!==0&&le.nodeType!==3||(S=E+d),le!==g||u!==0&&le.nodeType!==3||(x=E+u),le.nodeType===3&&(E+=le.nodeValue.length),(J=le.firstChild)!==null;)Q=le,le=J;for(;;){if(le===i)break t;if(Q===l&&++z===d&&(S=E),Q===g&&++ee===u&&(x=E),(J=le.nextSibling)!==null)break;le=Q,Q=le.parentNode}le=J}l=S===-1||x===-1?null:{start:S,end:x}}else l=null}l=l||{start:0,end:0}}else l=null;for(Jp={focusedElem:i,selectionRange:l},yf=!1,pn=a;pn!==null;)if(a=pn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,pn=i;else for(;pn!==null;){switch(a=pn,g=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,l=a,d=g.memoizedProps,g=g.memoizedState,u=l.stateNode;try{var Ie=Ja(l.type,d,l.elementType===l.type);i=u.getSnapshotBeforeUpdate(Ie,g),u.__reactInternalSnapshotBeforeUpdate=i}catch(Be){Rt(l,l.return,Be)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)rg(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":rg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,pn=i;break}pn=a.return}return Ie=XE,XE=!1,Ie}function ZE(i,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Zi(i,l),u&4&&Pu(5,l);break;case 1:if(Zi(i,l),u&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(S){Rt(l,l.return,S)}else{var d=Ja(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(d,a,i.__reactInternalSnapshotBeforeUpdate)}catch(S){Rt(l,l.return,S)}}u&64&&$E(l),u&512&&no(l,l.return);break;case 3:if(Zi(i,l),u&64&&(u=l.updateQueue,u!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{qE(u,i)}catch(S){Rt(l,l.return,S)}}break;case 26:Zi(i,l),u&512&&no(l,l.return);break;case 27:case 5:Zi(i,l),a===null&&u&4&&WE(l),u&512&&no(l,l.return);break;case 12:Zi(i,l);break;case 13:Zi(i,l),u&4&&tT(i,l);break;case 22:if(d=l.memoizedState!==null||Yi,!d){a=a!==null&&a.memoizedState!==null||Bt;var g=Yi,E=Bt;Yi=d,(Bt=a)&&!E?Bs(i,l,(l.subtreeFlags&8772)!==0):Zi(i,l),Yi=g,Bt=E}u&512&&(l.memoizedProps.mode==="manual"?no(l,l.return):sr(l,l.return));break;default:Zi(i,l)}}function JE(i){var a=i.alternate;a!==null&&(i.alternate=null,JE(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&rr(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Jt=null,ar=!1;function Xi(i,a,l){for(l=l.child;l!==null;)eT(i,a,l),l=l.sibling}function eT(i,a,l){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Br,l)}catch{}switch(l.tag){case 26:Bt||sr(l,a),Xi(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Bt||sr(l,a);var u=Jt,d=ar;for(Jt=l.stateNode,Xi(i,a,l),l=l.stateNode,a=l.attributes;a.length;)l.removeAttributeNode(a[0]);rr(l),Jt=u,ar=d;break;case 5:Bt||sr(l,a);case 6:d=Jt;var g=ar;if(Jt=null,Xi(i,a,l),Jt=d,ar=g,Jt!==null)if(ar)try{i=Jt,u=l.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)}catch(E){Rt(l,a,E)}else try{Jt.removeChild(l.stateNode)}catch(E){Rt(l,a,E)}break;case 18:Jt!==null&&(ar?(a=Jt,l=l.stateNode,a.nodeType===8?ng(a.parentNode,l):a.nodeType===1&&ng(a,l),Zu(a)):ng(Jt,l.stateNode));break;case 4:u=Jt,d=ar,Jt=l.stateNode.containerInfo,ar=!0,Xi(i,a,l),Jt=u,ar=d;break;case 0:case 11:case 14:case 15:Bt||Fs(2,l,a),Bt||Fs(4,l,a),Xi(i,a,l);break;case 1:Bt||(sr(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&GE(l,a,u)),Xi(i,a,l);break;case 21:Xi(i,a,l);break;case 22:Bt||sr(l,a),Bt=(u=Bt)||l.memoizedState!==null,Xi(i,a,l),Bt=u;break;default:Xi(i,a,l)}}function tT(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Zu(i)}catch(l){Rt(a,a.return,l)}}function BI(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new YE),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new YE),a;default:throw Error(r(435,i.tag))}}function Rp(i,a){var l=BI(i);a.forEach(function(u){var d=tx.bind(null,i,u);l.has(u)||(l.add(u),u.then(d,d))})}function xr(i,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var d=l[u],g=i,E=a,S=E;e:for(;S!==null;){switch(S.tag){case 27:case 5:Jt=S.stateNode,ar=!1;break e;case 3:Jt=S.stateNode.containerInfo,ar=!0;break e;case 4:Jt=S.stateNode.containerInfo,ar=!0;break e}S=S.return}if(Jt===null)throw Error(r(160));eT(g,E,d),Jt=null,ar=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)nT(a,i),a=a.sibling}var Gr=null;function nT(i,a){var l=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:xr(a,i),Nr(i),u&4&&(Fs(3,i,i.return),Pu(3,i),Fs(5,i,i.return));break;case 1:xr(a,i),Nr(i),u&512&&(Bt||l===null||sr(l,l.return)),u&64&&Yi&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var d=Gr;if(xr(a,i),Nr(i),u&512&&(Bt||l===null||sr(l,l.return)),u&4){var g=l!==null?l.memoizedState:null;if(u=i.memoizedState,l===null)if(u===null)if(i.stateNode===null){e:{u=i.type,l=i.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":g=d.getElementsByTagName("title")[0],(!g||g[Fn]||g[Ae]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(u),d.head.insertBefore(g,d.querySelector("head > title"))),An(g,u,l),g[Ae]=i,dt(g),u=g;break e;case"link":var E=WT("link","href",d).get(u+(l.href||""));if(E){for(var S=0;S<E.length;S++)if(g=E[S],g.getAttribute("href")===(l.href==null?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(S,1);break t}}g=d.createElement(u),An(g,u,l),d.head.appendChild(g);break;case"meta":if(E=WT("meta","content",d).get(u+(l.content||""))){for(S=0;S<E.length;S++)if(g=E[S],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(S,1);break t}}g=d.createElement(u),An(g,u,l),d.head.appendChild(g);break;default:throw Error(r(468,u))}g[Ae]=i,dt(g),u=g}i.stateNode=u}else KT(d,i.type,i.stateNode);else i.stateNode=GT(d,u,i.memoizedProps);else g!==u?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,u===null?KT(d,i.type,i.stateNode):GT(d,u,i.memoizedProps)):u===null&&i.stateNode!==null&&KE(i,i.memoizedProps,l.memoizedProps)}break;case 27:if(u&4&&i.alternate===null){d=i.stateNode,g=i.memoizedProps;try{for(var x=d.firstChild;x;){var z=x.nextSibling,ee=x.nodeName;x[Fn]||ee==="HEAD"||ee==="BODY"||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&x.rel.toLowerCase()==="stylesheet"||d.removeChild(x),x=z}for(var le=i.type,Q=d.attributes;Q.length;)d.removeAttributeNode(Q[0]);An(d,le,g),d[Ae]=i,d[xe]=g}catch(Ie){Rt(i,i.return,Ie)}}case 5:if(xr(a,i),Nr(i),u&512&&(Bt||l===null||sr(l,l.return)),i.flags&32){d=i.stateNode;try{Er(d,"")}catch(Ie){Rt(i,i.return,Ie)}}u&4&&i.stateNode!=null&&(d=i.memoizedProps,KE(i,d,l!==null?l.memoizedProps:d)),u&1024&&(Sp=!0);break;case 6:if(xr(a,i),Nr(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,l=i.stateNode;try{l.nodeValue=u}catch(Ie){Rt(i,i.return,Ie)}}break;case 3:if(mf=null,d=Gr,Gr=ff(a.containerInfo),xr(a,i),Gr=d,Nr(i),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Zu(a.containerInfo)}catch(Ie){Rt(i,i.return,Ie)}Sp&&(Sp=!1,rT(i));break;case 4:u=Gr,Gr=ff(i.stateNode.containerInfo),xr(a,i),Nr(i),Gr=u;break;case 12:xr(a,i),Nr(i);break;case 13:xr(a,i),Nr(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Pp=Tn()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Rp(i,u)));break;case 22:if(u&512&&(Bt||l===null||sr(l,l.return)),x=i.memoizedState!==null,z=l!==null&&l.memoizedState!==null,ee=Yi,le=Bt,Yi=ee||x,Bt=le||z,xr(a,i),Bt=le,Yi=ee,Nr(i),a=i.stateNode,a._current=i,a._visibility&=-3,a._visibility|=a._pendingVisibility&2,u&8192&&(a._visibility=x?a._visibility&-2:a._visibility|1,x&&(a=Yi||Bt,l===null||z||a||el(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))e:for(l=null,a=i;;){if(a.tag===5||a.tag===26||a.tag===27){if(l===null){z=l=a;try{if(d=z.stateNode,x)g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{E=z.stateNode,S=z.memoizedProps.style;var J=S!=null&&S.hasOwnProperty("display")?S.display:null;E.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Ie){Rt(z,z.return,Ie)}}}else if(a.tag===6){if(l===null){z=a;try{z.stateNode.nodeValue=x?"":z.memoizedProps}catch(Ie){Rt(z,z.return,Ie)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=i.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Rp(i,l))));break;case 19:xr(a,i),Nr(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Rp(i,u)));break;case 21:break;default:xr(a,i),Nr(i)}}function Nr(i){var a=i.flags;if(a&2){try{if(i.tag!==27){e:{for(var l=i.return;l!==null;){if(QE(l)){var u=l;break e}l=l.return}throw Error(r(160))}switch(u.tag){case 27:var d=u.stateNode,g=wp(i);Yh(i,g,d);break;case 5:var E=u.stateNode;u.flags&32&&(Er(E,""),u.flags&=-33);var S=wp(i);Yh(i,S,E);break;case 3:case 4:var x=u.stateNode.containerInfo,z=wp(i);bp(i,z,x);break;default:throw Error(r(161))}}}catch(ee){Rt(i,i.return,ee)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function rT(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;rT(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Zi(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)ZE(i,a.alternate,a),a=a.sibling}function el(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Fs(4,a,a.return),el(a);break;case 1:sr(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&GE(a,a.return,l),el(a);break;case 26:case 27:case 5:sr(a,a.return),el(a);break;case 22:sr(a,a.return),a.memoizedState===null&&el(a);break;default:el(a)}i=i.sibling}}function Bs(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,d=i,g=a,E=g.flags;switch(g.tag){case 0:case 11:case 15:Bs(d,g,l),Pu(4,g);break;case 1:if(Bs(d,g,l),u=g,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(z){Rt(u,u.return,z)}if(u=g,d=u.updateQueue,d!==null){var S=u.stateNode;try{var x=d.shared.hiddenCallbacks;if(x!==null)for(d.shared.hiddenCallbacks=null,d=0;d<x.length;d++)HE(x[d],S)}catch(z){Rt(u,u.return,z)}}l&&E&64&&$E(g),no(g,g.return);break;case 26:case 27:case 5:Bs(d,g,l),l&&u===null&&E&4&&WE(g),no(g,g.return);break;case 12:Bs(d,g,l);break;case 13:Bs(d,g,l),l&&E&4&&tT(d,g);break;case 22:g.memoizedState===null&&Bs(d,g,l),no(g,g.return);break;default:Bs(d,g,l)}a=a.sibling}}function Ap(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Su(l))}function Cp(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Su(i))}function Hs(i,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)iT(i,a,l,u),a=a.sibling}function iT(i,a,l,u){var d=a.flags;switch(a.tag){case 0:case 11:case 15:Hs(i,a,l,u),d&2048&&Pu(9,a);break;case 3:Hs(i,a,l,u),d&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Su(i)));break;case 12:if(d&2048){Hs(i,a,l,u),i=a.stateNode;try{var g=a.memoizedProps,E=g.id,S=g.onPostCommit;typeof S=="function"&&S(E,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(x){Rt(a,a.return,x)}}else Hs(i,a,l,u);break;case 23:break;case 22:g=a.stateNode,a.memoizedState!==null?g._visibility&4?Hs(i,a,l,u):Mu(i,a):g._visibility&4?Hs(i,a,l,u):(g._visibility|=4,tl(i,a,l,u,(a.subtreeFlags&10256)!==0)),d&2048&&Ap(a.alternate,a);break;case 24:Hs(i,a,l,u),d&2048&&Cp(a.alternate,a);break;default:Hs(i,a,l,u)}}function tl(i,a,l,u,d){for(d=d&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var g=i,E=a,S=l,x=u,z=E.flags;switch(E.tag){case 0:case 11:case 15:tl(g,E,S,x,d),Pu(8,E);break;case 23:break;case 22:var ee=E.stateNode;E.memoizedState!==null?ee._visibility&4?tl(g,E,S,x,d):Mu(g,E):(ee._visibility|=4,tl(g,E,S,x,d)),d&&z&2048&&Ap(E.alternate,E);break;case 24:tl(g,E,S,x,d),d&&z&2048&&Cp(E.alternate,E);break;default:tl(g,E,S,x,d)}a=a.sibling}}function Mu(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,u=a,d=u.flags;switch(u.tag){case 22:Mu(l,u),d&2048&&Ap(u.alternate,u);break;case 24:Mu(l,u),d&2048&&Cp(u.alternate,u);break;default:Mu(l,u)}a=a.sibling}}var Lu=8192;function nl(i){if(i.subtreeFlags&Lu)for(i=i.child;i!==null;)sT(i),i=i.sibling}function sT(i){switch(i.tag){case 26:nl(i),i.flags&Lu&&i.memoizedState!==null&&Nx(Gr,i.memoizedState,i.memoizedProps);break;case 5:nl(i);break;case 3:case 4:var a=Gr;Gr=ff(i.stateNode.containerInfo),nl(i),Gr=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=Lu,Lu=16777216,nl(i),Lu=a):nl(i));break;default:nl(i)}}function aT(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Vu(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];pn=u,lT(u,i)}aT(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)oT(i),i=i.sibling}function oT(i){switch(i.tag){case 0:case 11:case 15:Vu(i),i.flags&2048&&Fs(9,i,i.return);break;case 3:Vu(i);break;case 12:Vu(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&4&&(i.return===null||i.return.tag!==13)?(a._visibility&=-5,Xh(i)):Vu(i);break;default:Vu(i)}}function Xh(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];pn=u,lT(u,i)}aT(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Fs(8,a,a.return),Xh(a);break;case 22:l=a.stateNode,l._visibility&4&&(l._visibility&=-5,Xh(a));break;default:Xh(a)}i=i.sibling}}function lT(i,a){for(;pn!==null;){var l=pn;switch(l.tag){case 0:case 11:case 15:Fs(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Su(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,pn=u;else e:for(l=i;pn!==null;){u=pn;var d=u.sibling,g=u.return;if(JE(u),u===l){pn=null;break e}if(d!==null){d.return=g,pn=d;break e}pn=g}}}function HI(i,a,l,u){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(i,a,l,u){return new HI(i,a,l,u)}function Ip(i){return i=i.prototype,!(!i||!i.isReactComponent)}function qs(i,a){var l=i.alternate;return l===null?(l=Or(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&31457280,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function uT(i,a){i.flags&=31457282;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Zh(i,a,l,u,d,g){var E=0;if(u=i,typeof i=="function")Ip(i)&&(E=1);else if(typeof i=="string")E=Ix(i,l,zt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case m:return ro(l.children,d,g,a);case p:E=8,d|=24;break;case _:return i=Or(12,l,a,d|2),i.elementType=_,i.lanes=g,i;case G:return i=Or(13,l,a,d),i.elementType=G,i.lanes=g,i;case V:return i=Or(19,l,a,d),i.elementType=V,i.lanes=g,i;case se:return cT(l,d,g,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case T:case C:E=10;break e;case w:E=9;break e;case N:E=11;break e;case Y:E=14;break e;case Z:E=16,u=null;break e}E=29,l=Error(r(130,i===null?"null":typeof i,"")),u=null}return a=Or(E,l,a,d),a.elementType=i,a.type=u,a.lanes=g,a}function ro(i,a,l,u){return i=Or(7,i,u,a),i.lanes=l,i}function cT(i,a,l,u){i=Or(22,i,u,a),i.elementType=se,i.lanes=l;var d={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var g=d._current;if(g===null)throw Error(r(456));if((d._pendingVisibility&2)===0){var E=Ds(g,2);E!==null&&(d._pendingVisibility|=2,$n(E,g,2))}},attach:function(){var g=d._current;if(g===null)throw Error(r(456));if((d._pendingVisibility&2)!==0){var E=Ds(g,2);E!==null&&(d._pendingVisibility&=-3,$n(E,g,2))}}};return i.stateNode=d,i}function xp(i,a,l){return i=Or(6,i,null,a),i.lanes=l,i}function Np(i,a,l){return a=Or(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function Ji(i){i.flags|=4}function hT(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!QT(a)){if(a=Ir.current,a!==null&&((at&4194176)===at?gi!==null:(at&62914560)!==at&&(at&536870912)===0||a!==gi))throw Tu=Mm,I0;i.flags|=8192}}function Jh(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?P():536870912,i.lanes|=a,il|=a)}function ju(i,a){if(!ht)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Vt(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,u=0;if(a)for(var d=i.child;d!==null;)l|=d.lanes|d.childLanes,u|=d.subtreeFlags&31457280,u|=d.flags&31457280,d.return=i,d=d.sibling;else for(d=i.child;d!==null;)l|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=i,d=d.sibling;return i.subtreeFlags|=u,i.childLanes=l,a}function qI(i,a,l){var u=a.pendingProps;switch(km(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(a),null;case 1:return Vt(a),null;case 3:return l=a.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Qi(ln),Ur(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(yu(a)?Ji(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,$r!==null&&(jp($r),$r=null))),Vt(a),null;case 26:return l=a.memoizedState,i===null?(Ji(a),l!==null?(Vt(a),hT(a,l)):(Vt(a),a.flags&=-16777217)):l?l!==i.memoizedState?(Ji(a),Vt(a),hT(a,l)):(Vt(a),a.flags&=-16777217):(i.memoizedProps!==u&&Ji(a),Vt(a),a.flags&=-16777217),null;case 27:Es(a),l=Wn.current;var d=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==u&&Ji(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return Vt(a),null}i=zt.current,yu(a)?A0(a):(i=FT(d,u,l),a.stateNode=i,Ji(a))}return Vt(a),null;case 5:if(Es(a),l=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==u&&Ji(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return Vt(a),null}if(i=zt.current,yu(a))A0(a);else{switch(d=hf(Wn.current),i){case 1:i=d.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=d.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=d.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?d.createElement("select",{is:u.is}):d.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?d.createElement(l,{is:u.is}):d.createElement(l)}}i[Ae]=a,i[xe]=u;e:for(d=a.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break e;for(;d.sibling===null;){if(d.return===null||d.return===a)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}a.stateNode=i;e:switch(An(i,l,u),l){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ji(a)}}return Vt(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==u&&Ji(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(r(166));if(i=Wn.current,yu(a)){if(i=a.stateNode,l=a.memoizedProps,u=null,d=qn,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}i[Ae]=a,i=!!(i.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||MT(i.nodeValue,l)),i||Wa(a)}else i=hf(i).createTextNode(u),i[Ae]=a,a.stateNode=i}return Vt(a),null;case 13:if(u=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(d=yu(a),u!==null&&u.dehydrated!==null){if(i===null){if(!d)throw Error(r(318));if(d=a.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Ae]=a}else _u(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Vt(a),d=!1}else $r!==null&&(jp($r),$r=null),d=!0;if(!d)return a.flags&256?($i(a),a):($i(a),null)}if($i(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=u!==null,i=i!==null&&i.memoizedState!==null,l){u=a.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==d&&(u.flags|=2048)}return l!==i&&l&&(a.child.flags|=8192),Jh(a,a.updateQueue),Vt(a),null;case 4:return Ur(),i===null&&Qp(a.stateNode.containerInfo),Vt(a),null;case 10:return Qi(a.type),Vt(a),null;case 19:if(Lt(on),d=a.memoizedState,d===null)return Vt(a),null;if(u=(a.flags&128)!==0,g=d.rendering,g===null)if(u)ju(d,!1);else{if(Ht!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(g=Lh(i),g!==null){for(a.flags|=128,ju(d,!1),i=g.updateQueue,a.updateQueue=i,Jh(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)uT(l,i),l=l.sibling;return ze(on,on.current&1|2),a.child}i=i.sibling}d.tail!==null&&Tn()>ef&&(a.flags|=128,u=!0,ju(d,!1),a.lanes=4194304)}else{if(!u)if(i=Lh(g),i!==null){if(a.flags|=128,u=!0,i=i.updateQueue,a.updateQueue=i,Jh(a,i),ju(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!ht)return Vt(a),null}else 2*Tn()-d.renderingStartTime>ef&&l!==536870912&&(a.flags|=128,u=!0,ju(d,!1),a.lanes=4194304);d.isBackwards?(g.sibling=a.child,a.child=g):(i=d.last,i!==null?i.sibling=g:a.child=g,d.last=g)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=Tn(),a.sibling=null,i=on.current,ze(on,u?i&1|2:i&1),a):(Vt(a),null);case 22:case 23:return $i(a),Vm(),u=a.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(Vt(a),a.subtreeFlags&6&&(a.flags|=8192)):Vt(a),l=a.updateQueue,l!==null&&Jh(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),i!==null&&Lt(Qa),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Qi(ln),Vt(a),null;case 25:return null}throw Error(r(156,a.tag))}function $I(i,a){switch(km(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Qi(ln),Ur(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Es(a),null;case 13:if($i(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));_u()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Lt(on),null;case 4:return Ur(),null;case 10:return Qi(a.type),null;case 22:case 23:return $i(a),Vm(),i!==null&&Lt(Qa),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Qi(ln),null;case 25:return null;default:return null}}function fT(i,a){switch(km(a),a.tag){case 3:Qi(ln),Ur();break;case 26:case 27:case 5:Es(a);break;case 4:Ur();break;case 13:$i(a);break;case 19:Lt(on);break;case 10:Qi(a.type);break;case 22:case 23:$i(a),Vm(),i!==null&&Lt(Qa);break;case 24:Qi(ln)}}var GI={getCacheForType:function(i){var a=Dn(ln),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l}},WI=typeof WeakMap=="function"?WeakMap:Map,jt=0,Ct=null,Ke=null,at=0,It=0,or=null,es=!1,rl=!1,Op=!1,ts=0,Ht=0,$s=0,io=0,Dp=0,Dr=0,il=0,Uu=null,_i=null,kp=!1,Pp=0,ef=1/0,tf=null,Gs=null,nf=!1,so=null,zu=0,Mp=0,Lp=null,Fu=0,Vp=null;function lr(){if((jt&2)!==0&&at!==0)return at&-at;if(A.T!==null){var i=Qo;return i!==0?i:$p()}return Te()}function dT(){Dr===0&&(Dr=(at&536870912)===0||ht?Oa():536870912);var i=Ir.current;return i!==null&&(i.flags|=32),Dr}function $n(i,a,l){(i===Ct&&It===2||i.cancelPendingCommit!==null)&&(sl(i,0),ns(i,at,Dr,!1)),W(i,l),((jt&2)===0||i!==Ct)&&(i===Ct&&((jt&2)===0&&(io|=l),Ht===4&&ns(i,at,Dr,!1)),vi(i))}function mT(i,a,l){if((jt&6)!==0)throw Error(r(327));var u=!l&&(a&60)===0&&(a&i.expiredLanes)===0||nr(i,a),d=u?YI(i,a):Fp(i,a,!0),g=u;do{if(d===0){rl&&!u&&ns(i,a,0,!1);break}else if(d===6)ns(i,a,0,!es);else{if(l=i.current.alternate,g&&!KI(l)){d=Fp(i,a,!1),g=!1;continue}if(d===2){if(g=a,i.errorRecoveryDisabledLanes&g)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;e:{var S=i;d=Uu;var x=S.current.memoizedState.isDehydrated;if(x&&(sl(S,E).flags|=256),E=Fp(S,E,!1),E!==2){if(Op&&!x){S.errorRecoveryDisabledLanes|=g,io|=g,d=4;break e}g=_i,_i=d,g!==null&&jp(g)}d=E}if(g=!1,d!==2)continue}}if(d===1){sl(i,0),ns(i,a,0,!0);break}e:{switch(u=i,d){case 0:case 1:throw Error(r(345));case 4:if((a&4194176)===a){ns(u,a,Dr,!es);break e}break;case 2:_i=null;break;case 3:case 5:break;default:throw Error(r(329))}if(u.finishedWork=l,u.finishedLanes=a,(a&62914560)===a&&(g=Pp+300-Tn(),10<g)){if(ns(u,a,Dr,!es),wn(u,0)!==0)break e;u.timeoutHandle=jT(pT.bind(null,u,l,_i,tf,kp,a,Dr,io,il,es,2,-0,0),g);break e}pT(u,l,_i,tf,kp,a,Dr,io,il,es,0,-0,0)}}break}while(!0);vi(i)}function jp(i){_i===null?_i=i:_i.push.apply(_i,i)}function pT(i,a,l,u,d,g,E,S,x,z,ee,le,Q){var J=a.subtreeFlags;if((J&8192||(J&16785408)===16785408)&&(Wu={stylesheets:null,count:0,unsuspend:xx},sT(a),a=Ox(),a!==null)){i.cancelPendingCommit=a(wT.bind(null,i,l,u,d,E,S,x,1,le,Q)),ns(i,g,E,!z);return}wT(i,l,u,d,E,S,x,ee,le,Q)}function KI(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var d=l[u],g=d.getSnapshot;d=d.value;try{if(!ir(g(),d))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ns(i,a,l,u){a&=~Dp,a&=~io,i.suspendedLanes|=a,i.pingedLanes&=~a,u&&(i.warmLanes|=a),u=i.expirationTimes;for(var d=a;0<d;){var g=31-Qt(d),E=1<<g;u[g]=-1,d&=~E}l!==0&&_e(i,l,a)}function rf(){return(jt&6)===0?(Bu(0),!1):!0}function Up(){if(Ke!==null){if(It===0)var i=Ke.return;else i=Ke,Ki=eo=null,$m(i),Wo=null,wu=0,i=Ke;for(;i!==null;)fT(i.alternate,i),i=i.return;Ke=null}}function sl(i,a){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,dx(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Up(),Ct=i,Ke=l=qs(i.current,null),at=a,It=0,or=null,es=!1,rl=nr(i,a),Op=!1,il=Dr=Dp=io=$s=Ht=0,_i=Uu=null,kp=!1,(a&8)!==0&&(a|=a&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=a;0<u;){var d=31-Qt(u),g=1<<d;a|=i[d],u&=~g}return ts=a,Ch(),l}function gT(i,a){$e=null,A.H=yi,a===Eu?(a=O0(),It=3):a===I0?(a=O0(),It=4):It=a===xE?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,or=a,Ke===null&&(Ht=1,Wh(i,Rr(a,i.current)))}function yT(){var i=A.H;return A.H=yi,i===null?yi:i}function _T(){var i=A.A;return A.A=GI,i}function zp(){Ht=4,es||(at&4194176)!==at&&Ir.current!==null||(rl=!0),($s&134217727)===0&&(io&134217727)===0||Ct===null||ns(Ct,at,Dr,!1)}function Fp(i,a,l){var u=jt;jt|=2;var d=yT(),g=_T();(Ct!==i||at!==a)&&(tf=null,sl(i,a)),a=!1;var E=Ht;e:do try{if(It!==0&&Ke!==null){var S=Ke,x=or;switch(It){case 8:Up(),E=6;break e;case 3:case 2:case 6:Ir.current===null&&(a=!0);var z=It;if(It=0,or=null,al(i,S,x,z),l&&rl){E=0;break e}break;default:z=It,It=0,or=null,al(i,S,x,z)}}QI(),E=Ht;break}catch(ee){gT(i,ee)}while(!0);return a&&i.shellSuspendCounter++,Ki=eo=null,jt=u,A.H=d,A.A=g,Ke===null&&(Ct=null,at=0,Ch()),E}function QI(){for(;Ke!==null;)vT(Ke)}function YI(i,a){var l=jt;jt|=2;var u=yT(),d=_T();Ct!==i||at!==a?(tf=null,ef=Tn()+500,sl(i,a)):rl=nr(i,a);e:do try{if(It!==0&&Ke!==null){a=Ke;var g=or;t:switch(It){case 1:It=0,or=null,al(i,a,g,1);break;case 2:if(x0(g)){It=0,or=null,ET(a);break}a=function(){It===2&&Ct===i&&(It=7),vi(i)},g.then(a,a);break e;case 3:It=7;break e;case 4:It=5;break e;case 7:x0(g)?(It=0,or=null,ET(a)):(It=0,or=null,al(i,a,g,7));break;case 5:var E=null;switch(Ke.tag){case 26:E=Ke.memoizedState;case 5:case 27:var S=Ke;if(!E||QT(E)){It=0,or=null;var x=S.sibling;if(x!==null)Ke=x;else{var z=S.return;z!==null?(Ke=z,sf(z)):Ke=null}break t}}It=0,or=null,al(i,a,g,5);break;case 6:It=0,or=null,al(i,a,g,6);break;case 8:Up(),Ht=6;break e;default:throw Error(r(462))}}XI();break}catch(ee){gT(i,ee)}while(!0);return Ki=eo=null,A.H=u,A.A=d,jt=l,Ke!==null?0:(Ct=null,at=0,Ch(),Ht)}function XI(){for(;Ke!==null&&!zr();)vT(Ke)}function vT(i){var a=FE(i.alternate,i,ts);i.memoizedProps=i.pendingProps,a===null?sf(i):Ke=a}function ET(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=ME(l,a,a.pendingProps,a.type,void 0,at);break;case 11:a=ME(l,a,a.pendingProps,a.type.render,a.ref,at);break;case 5:$m(a);default:fT(l,a),a=Ke=uT(a,ts),a=FE(l,a,ts)}i.memoizedProps=i.pendingProps,a===null?sf(i):Ke=a}function al(i,a,l,u){Ki=eo=null,$m(a),Wo=null,wu=0;var d=a.return;try{if(UI(i,d,a,l,at)){Ht=1,Wh(i,Rr(l,i.current)),Ke=null;return}}catch(g){if(d!==null)throw Ke=d,g;Ht=1,Wh(i,Rr(l,i.current)),Ke=null;return}a.flags&32768?(ht||u===1?i=!0:rl||(at&536870912)!==0?i=!1:(es=i=!0,(u===2||u===3||u===6)&&(u=Ir.current,u!==null&&u.tag===13&&(u.flags|=16384))),TT(a,i)):sf(a)}function sf(i){var a=i;do{if((a.flags&32768)!==0){TT(a,es);return}i=a.return;var l=qI(a.alternate,a,ts);if(l!==null){Ke=l;return}if(a=a.sibling,a!==null){Ke=a;return}Ke=a=i}while(a!==null);Ht===0&&(Ht=5)}function TT(i,a){do{var l=$I(i.alternate,i);if(l!==null){l.flags&=32767,Ke=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){Ke=i;return}Ke=i=l}while(i!==null);Ht=6,Ke=null}function wT(i,a,l,u,d,g,E,S,x,z){var ee=A.T,le=ye.p;try{ye.p=2,A.T=null,ZI(i,a,l,u,le,d,g,E,S,x,z)}finally{A.T=ee,ye.p=le}}function ZI(i,a,l,u,d,g,E,S){do ol();while(so!==null);if((jt&6)!==0)throw Error(r(327));var x=i.finishedWork;if(u=i.finishedLanes,x===null)return null;if(i.finishedWork=null,i.finishedLanes=0,x===i.current)throw Error(r(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var z=x.lanes|x.childLanes;if(z|=Nm,ce(i,u,z,g,E,S),i===Ct&&(Ke=Ct=null,at=0),(x.subtreeFlags&10256)===0&&(x.flags&10256)===0||nf||(nf=!0,Mp=z,Lp=l,nx(pr,function(){return ol(),null})),l=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||l?(l=A.T,A.T=null,g=ye.p,ye.p=2,E=jt,jt|=4,FI(i,x),nT(x,i),wI(Jp,i.containerInfo),yf=!!Zp,Jp=Zp=null,i.current=x,ZE(i,x.alternate,x),Fr(),jt=E,ye.p=g,A.T=l):i.current=x,nf?(nf=!1,so=i,zu=u):bT(i,z),z=i.pendingLanes,z===0&&(Gs=null),Na(x.stateNode),vi(i),a!==null)for(d=i.onRecoverableError,x=0;x<a.length;x++)z=a[x],d(z.value,{componentStack:z.stack});return(zu&3)!==0&&ol(),z=i.pendingLanes,(u&4194218)!==0&&(z&42)!==0?i===Vp?Fu++:(Fu=0,Vp=i):Fu=0,Bu(0),null}function bT(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Su(a)))}function ol(){if(so!==null){var i=so,a=Mp;Mp=0;var l=ke(zu),u=A.T,d=ye.p;try{if(ye.p=32>l?32:l,A.T=null,so===null)var g=!1;else{l=Lp,Lp=null;var E=so,S=zu;if(so=null,zu=0,(jt&6)!==0)throw Error(r(331));var x=jt;if(jt|=4,oT(E.current),iT(E,E.current,S,l),jt=x,Bu(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Br,E)}catch{}g=!0}return g}finally{ye.p=d,A.T=u,bT(i,a)}}return!1}function ST(i,a,l){a=Rr(l,a),a=sp(i.stateNode,a,2),i=zs(i,a,2),i!==null&&(W(i,2),vi(i))}function Rt(i,a,l){if(i.tag===3)ST(i,i,l);else for(;a!==null;){if(a.tag===3){ST(a,i,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Gs===null||!Gs.has(u))){i=Rr(l,i),l=CE(2),u=zs(a,l,2),u!==null&&(IE(l,u,a,i),W(u,2),vi(u));break}}a=a.return}}function Bp(i,a,l){var u=i.pingCache;if(u===null){u=i.pingCache=new WI;var d=new Set;u.set(a,d)}else d=u.get(a),d===void 0&&(d=new Set,u.set(a,d));d.has(l)||(Op=!0,d.add(l),i=JI.bind(null,i,a,l),a.then(i,i))}function JI(i,a,l){var u=i.pingCache;u!==null&&u.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Ct===i&&(at&l)===l&&(Ht===4||Ht===3&&(at&62914560)===at&&300>Tn()-Pp?(jt&2)===0&&sl(i,0):Dp|=l,il===at&&(il=0)),vi(i)}function RT(i,a){a===0&&(a=P()),i=Ds(i,a),i!==null&&(W(i,a),vi(i))}function ex(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),RT(i,l)}function tx(i,a){var l=0;switch(i.tag){case 13:var u=i.stateNode,d=i.memoizedState;d!==null&&(l=d.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(a),RT(i,l)}function nx(i,a){return Pi(i,a)}var af=null,ll=null,Hp=!1,of=!1,qp=!1,ao=0;function vi(i){i!==ll&&i.next===null&&(ll===null?af=ll=i:ll=ll.next=i),of=!0,Hp||(Hp=!0,ix(rx))}function Bu(i,a){if(!qp&&of){qp=!0;do for(var l=!1,u=af;u!==null;){if(i!==0){var d=u.pendingLanes;if(d===0)var g=0;else{var E=u.suspendedLanes,S=u.pingedLanes;g=(1<<31-Qt(42|i)+1)-1,g&=d&~(E&~S),g=g&201326677?g&201326677|1:g?g|2:0}g!==0&&(l=!0,IT(u,g))}else g=at,g=wn(u,u===Ct?g:0),(g&3)===0||nr(u,g)||(l=!0,IT(u,g));u=u.next}while(l);qp=!1}}function rx(){of=Hp=!1;var i=0;ao!==0&&(fx()&&(i=ao),ao=0);for(var a=Tn(),l=null,u=af;u!==null;){var d=u.next,g=AT(u,a);g===0?(u.next=null,l===null?af=d:l.next=d,d===null&&(ll=l)):(l=u,(i!==0||(g&3)!==0)&&(of=!0)),u=d}Bu(i)}function AT(i,a){for(var l=i.suspendedLanes,u=i.pingedLanes,d=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var E=31-Qt(g),S=1<<E,x=d[E];x===-1?((S&l)===0||(S&u)!==0)&&(d[E]=Cs(S,a)):x<=a&&(i.expiredLanes|=S),g&=~S}if(a=Ct,l=at,l=wn(i,i===a?l:0),u=i.callbackNode,l===0||i===a&&It===2||i.cancelPendingCommit!==null)return u!==null&&u!==null&&ws(u),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||nr(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(u!==null&&ws(u),ke(l)){case 2:case 8:l=Et;break;case 32:l=pr;break;case 268435456:l=xa;break;default:l=pr}return u=CT.bind(null,i),l=Pi(l,u),i.callbackPriority=a,i.callbackNode=l,a}return u!==null&&u!==null&&ws(u),i.callbackPriority=2,i.callbackNode=null,2}function CT(i,a){var l=i.callbackNode;if(ol()&&i.callbackNode!==l)return null;var u=at;return u=wn(i,i===Ct?u:0),u===0?null:(mT(i,u,a),AT(i,Tn()),i.callbackNode!=null&&i.callbackNode===l?CT.bind(null,i):null)}function IT(i,a){if(ol())return null;mT(i,a,!0)}function ix(i){mx(function(){(jt&6)!==0?Pi(vt,i):i()})}function $p(){return ao===0&&(ao=Oa()),ao}function xT(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:li(""+i)}function NT(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function sx(i,a,l,u,d){if(a==="submit"&&l&&l.stateNode===d){var g=xT((d[xe]||null).action),E=u.submitter;E&&(a=(a=E[xe]||null)?xT(a.formAction):E.getAttribute("formAction"),a!==null&&(g=a,E=null));var S=new ko("action","action",null,u,d);i.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ao!==0){var x=E?NT(d,E):new FormData(d);ep(l,{pending:!0,data:x,method:d.method,action:g},null,x)}}else typeof g=="function"&&(S.preventDefault(),x=E?NT(d,E):new FormData(d),ep(l,{pending:!0,data:x,method:d.method,action:g},g,x))},currentTarget:d}]})}}for(var Gp=0;Gp<w0.length;Gp++){var Wp=w0[Gp],ax=Wp.toLowerCase(),ox=Wp[0].toUpperCase()+Wp.slice(1);qr(ax,"on"+ox)}qr(y0,"onAnimationEnd"),qr(_0,"onAnimationIteration"),qr(v0,"onAnimationStart"),qr("dblclick","onDoubleClick"),qr("focusin","onFocus"),qr("focusout","onBlur"),qr(SI,"onTransitionRun"),qr(RI,"onTransitionStart"),qr(AI,"onTransitionCancel"),qr(E0,"onTransitionEnd"),mt("onMouseEnter",["mouseout","mouseover"]),mt("onMouseLeave",["mouseout","mouseover"]),mt("onPointerEnter",["pointerout","pointerover"]),mt("onPointerLeave",["pointerout","pointerover"]),qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hu));function OT(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var u=i[l],d=u.event;u=u.listeners;e:{var g=void 0;if(a)for(var E=u.length-1;0<=E;E--){var S=u[E],x=S.instance,z=S.currentTarget;if(S=S.listener,x!==g&&d.isPropagationStopped())break e;g=S,d.currentTarget=z;try{g(d)}catch(ee){Gh(ee)}d.currentTarget=null,g=x}else for(E=0;E<u.length;E++){if(S=u[E],x=S.instance,z=S.currentTarget,S=S.listener,x!==g&&d.isPropagationStopped())break e;g=S,d.currentTarget=z;try{g(d)}catch(ee){Gh(ee)}d.currentTarget=null,g=x}}}}function Ze(i,a){var l=a[Nt];l===void 0&&(l=a[Nt]=new Set);var u=i+"__bubble";l.has(u)||(DT(a,i,2,!1),l.add(u))}function Kp(i,a,l){var u=0;a&&(u|=4),DT(l,i,u,a)}var lf="_reactListening"+Math.random().toString(36).slice(2);function Qp(i){if(!i[lf]){i[lf]=!0,ai.forEach(function(l){l!=="selectionchange"&&(lx.has(l)||Kp(l,!1,i),Kp(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[lf]||(a[lf]=!0,Kp("selectionchange",!1,a))}}function DT(i,a,l,u){switch(tw(a)){case 2:var d=Px;break;case 8:d=Mx;break;default:d=lg}l=d.bind(null,a,l,i),d=void 0,!wr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(d=!0),u?d!==void 0?i.addEventListener(a,l,{capture:!0,passive:d}):i.addEventListener(a,l,!0):d!==void 0?i.addEventListener(a,l,{passive:d}):i.addEventListener(a,l,!1)}function Yp(i,a,l,u,d){var g=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var S=u.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(E===4)for(E=u.return;E!==null;){var x=E.tag;if((x===3||x===4)&&(x=E.stateNode.containerInfo,x===d||x.nodeType===8&&x.parentNode===d))return;E=E.return}for(;S!==null;){if(E=$t(S),E===null)return;if(x=E.tag,x===5||x===6||x===26||x===27){u=g=E;continue e}S=S.parentNode}}u=u.return}fh(function(){var z=g,ee=Do(l),le=[];e:{var Q=T0.get(i);if(Q!==void 0){var J=ko,Ie=i;switch(i){case"keypress":if(ci(l)===0)break e;case"keydown":case"keyup":J=Uo;break;case"focusin":Ie="focus",J=Lo;break;case"focusout":Ie="blur",J=Lo;break;case"beforeblur":case"afterblur":J=Lo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=br;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=wm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Eh;break;case y0:case _0:case v0:J=Vo;break;case E0:J=wh;break;case"scroll":case"scrollend":J=dh;break;case"wheel":J=zo;break;case"copy":case"cut":case"paste":J=jo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=du;break;case"toggle":case"beforetoggle":J=Sh}var Be=(a&4)!==0,qt=!Be&&(i==="scroll"||i==="scrollend"),q=Be?Q!==null?Q+"Capture":null:Q;Be=[];for(var U=z,K;U!==null;){var re=U;if(K=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||K===null||q===null||(re=La(U,q),re!=null&&Be.push(qu(U,re,K))),qt)break;U=U.return}0<Be.length&&(Q=new J(Q,Ie,null,l,ee),le.push({event:Q,listeners:Be}))}}if((a&7)===0){e:{if(Q=i==="mouseover"||i==="pointerover",J=i==="mouseout"||i==="pointerout",Q&&l!==Tr&&(Ie=l.relatedTarget||l.fromElement)&&($t(Ie)||Ie[rt]))break e;if((J||Q)&&(Q=ee.window===ee?ee:(Q=ee.ownerDocument)?Q.defaultView||Q.parentWindow:window,J?(Ie=l.relatedTarget||l.toElement,J=z,Ie=Ie?$t(Ie):null,Ie!==null&&(qt=Ce(Ie),Be=Ie.tag,Ie!==qt||Be!==5&&Be!==27&&Be!==6)&&(Ie=null)):(J=null,Ie=z),J!==Ie)){if(Be=br,re="onMouseLeave",q="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(Be=du,re="onPointerLeave",q="onPointerEnter",U="pointer"),qt=J==null?Q:yr(J),K=Ie==null?Q:yr(Ie),Q=new Be(re,U+"leave",J,l,ee),Q.target=qt,Q.relatedTarget=K,re=null,$t(ee)===z&&(Be=new Be(q,U+"enter",Ie,l,ee),Be.target=K,Be.relatedTarget=qt,re=Be),qt=re,J&&Ie)t:{for(Be=J,q=Ie,U=0,K=Be;K;K=ul(K))U++;for(K=0,re=q;re;re=ul(re))K++;for(;0<U-K;)Be=ul(Be),U--;for(;0<K-U;)q=ul(q),K--;for(;U--;){if(Be===q||q!==null&&Be===q.alternate)break t;Be=ul(Be),q=ul(q)}Be=null}else Be=null;J!==null&&kT(le,Q,J,Be,!1),Ie!==null&&qt!==null&&kT(le,qt,Ie,Be,!0)}}e:{if(Q=z?yr(z):window,J=Q.nodeName&&Q.nodeName.toLowerCase(),J==="select"||J==="input"&&Q.type==="file")var Re=a0;else if(an(Q))if(o0)Re=EI;else{Re=_I;var Ge=yI}else J=Q.nodeName,!J||J.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?z&&au(z.elementType)&&(Re=a0):Re=vI;if(Re&&(Re=Re(i,z))){Bi(le,Re,l,ee);break e}Ge&&Ge(i,Q,z),i==="focusout"&&z&&Q.type==="number"&&z.memoizedProps.value!=null&&Oo(Q,"number",Q.value)}switch(Ge=z?yr(z):window,i){case"focusin":(an(Ge)||Ge.contentEditable==="true")&&(Fo=Ge,Cm=z,gu=null);break;case"focusout":gu=Cm=Fo=null;break;case"mousedown":Im=!0;break;case"contextmenu":case"mouseup":case"dragend":Im=!1,p0(le,l,ee);break;case"selectionchange":if(bI)break;case"keydown":case"keyup":p0(le,l,ee)}var Ne;if(di)e:{switch(i){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else it?X(i,l)&&(Pe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Pe="onCompositionStart");Pe&&(v&&l.locale!=="ko"&&(it||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&it&&(Ne=lu()):(ui=ee,Os="value"in ui?ui.value:ui.textContent,it=!0)),Ge=uf(z,Pe),0<Ge.length&&(Pe=new hu(Pe,i,null,l,ee),le.push({event:Pe,listeners:Ge}),Ne?Pe.data=Ne:(Ne=de(l),Ne!==null&&(Pe.data=Ne)))),(Ne=y?sn(i,l):st(i,l))&&(Pe=uf(z,"onBeforeInput"),0<Pe.length&&(Ge=new hu("onBeforeInput","beforeinput",null,l,ee),le.push({event:Ge,listeners:Pe}),Ge.data=Ne)),sx(le,i,z,l,ee)}OT(le,a)})}function qu(i,a,l){return{instance:i,listener:a,currentTarget:l}}function uf(i,a){for(var l=a+"Capture",u=[];i!==null;){var d=i,g=d.stateNode;d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=La(i,l),d!=null&&u.unshift(qu(i,d,g)),d=La(i,a),d!=null&&u.push(qu(i,d,g))),i=i.return}return u}function ul(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function kT(i,a,l,u,d){for(var g=a._reactName,E=[];l!==null&&l!==u;){var S=l,x=S.alternate,z=S.stateNode;if(S=S.tag,x!==null&&x===u)break;S!==5&&S!==26&&S!==27||z===null||(x=z,d?(z=La(l,g),z!=null&&E.unshift(qu(l,z,x))):d||(z=La(l,g),z!=null&&E.push(qu(l,z,x)))),l=l.return}E.length!==0&&i.push({event:a,listeners:E})}var ux=/\r\n?/g,cx=/\u0000|\uFFFD/g;function PT(i){return(typeof i=="string"?i:""+i).replace(ux,`
`).replace(cx,"")}function MT(i,a){return a=PT(a),PT(i)===a}function cf(){}function wt(i,a,l,u,d,g){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Er(i,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Er(i,""+u);break;case"className":Is(i,"class",u);break;case"tabIndex":Is(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Is(i,l,u);break;case"style":hh(i,u,g);break;case"data":if(a!=="object"){Is(i,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=li(""+u),i.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(a!=="input"&&wt(i,a,"name",d.name,d,null),wt(i,a,"formEncType",d.formEncType,d,null),wt(i,a,"formMethod",d.formMethod,d,null),wt(i,a,"formTarget",d.formTarget,d,null)):(wt(i,a,"encType",d.encType,d,null),wt(i,a,"method",d.method,d,null),wt(i,a,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=li(""+u),i.setAttribute(l,u);break;case"onClick":u!=null&&(i.onclick=cf);break;case"onScroll":u!=null&&Ze("scroll",i);break;case"onScrollEnd":u!=null&&Ze("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(d.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}l=li(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""+u):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":u===!0?i.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,u):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(l,u):i.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(l):i.setAttribute(l,u);break;case"popover":Ze("beforetoggle",i),Ze("toggle",i),oi(i,"popover",u);break;case"xlinkActuate":vr(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":vr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":vr(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":vr(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":vr(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":vr(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":vr(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":vr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":vr(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":oi(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Em.get(l)||l,oi(i,l,u))}}function Xp(i,a,l,u,d,g){switch(l){case"style":hh(i,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(d.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof u=="string"?Er(i,u):(typeof u=="number"||typeof u=="bigint")&&Er(i,""+u);break;case"onScroll":u!=null&&Ze("scroll",i);break;case"onScrollEnd":u!=null&&Ze("scrollend",i);break;case"onClick":u!=null&&(i.onclick=cf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hr.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(d=l.endsWith("Capture"),a=l.slice(2,d?l.length-7:void 0),g=i[xe]||null,g=g!=null?g[l]:null,typeof g=="function"&&i.removeEventListener(a,g,d),typeof u=="function")){typeof g!="function"&&g!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,u,d);break e}l in i?i[l]=u:u===!0?i.setAttribute(l,""):oi(i,l,u)}}}function An(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",i),Ze("load",i);var u=!1,d=!1,g;for(g in l)if(l.hasOwnProperty(g)){var E=l[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:wt(i,a,g,E,l,null)}}d&&wt(i,a,"srcSet",l.srcSet,l,null),u&&wt(i,a,"src",l.src,l,null);return;case"input":Ze("invalid",i);var S=g=E=d=null,x=null,z=null;for(u in l)if(l.hasOwnProperty(u)){var ee=l[u];if(ee!=null)switch(u){case"name":d=ee;break;case"type":E=ee;break;case"checked":x=ee;break;case"defaultChecked":z=ee;break;case"value":g=ee;break;case"defaultValue":S=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,a));break;default:wt(i,a,u,ee,l,null)}}Pa(i,g,S,x,z,E,d,!1),ka(i);return;case"select":Ze("invalid",i),u=E=g=null;for(d in l)if(l.hasOwnProperty(d)&&(S=l[d],S!=null))switch(d){case"value":g=S;break;case"defaultValue":E=S;break;case"multiple":u=S;default:wt(i,a,d,S,l,null)}a=g,l=E,i.multiple=!!u,a!=null?ct(i,!!u,a,!1):l!=null&&ct(i,!!u,l,!0);return;case"textarea":Ze("invalid",i),g=d=u=null;for(E in l)if(l.hasOwnProperty(E)&&(S=l[E],S!=null))switch(E){case"value":u=S;break;case"defaultValue":d=S;break;case"children":g=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:wt(i,a,E,S,l,null)}Ns(i,u,d,g),ka(i);return;case"option":for(x in l)if(l.hasOwnProperty(x)&&(u=l[x],u!=null))switch(x){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:wt(i,a,x,u,l,null)}return;case"dialog":Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":Ze("load",i);break;case"video":case"audio":for(u=0;u<Hu.length;u++)Ze(Hu[u],i);break;case"image":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"embed":case"source":case"link":Ze("error",i),Ze("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in l)if(l.hasOwnProperty(z)&&(u=l[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:wt(i,a,z,u,l,null)}return;default:if(au(a)){for(ee in l)l.hasOwnProperty(ee)&&(u=l[ee],u!==void 0&&Xp(i,a,ee,u,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(u=l[S],u!=null&&wt(i,a,S,u,l,null))}function hx(i,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,E=null,S=null,x=null,z=null,ee=null;for(J in l){var le=l[J];if(l.hasOwnProperty(J)&&le!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":x=le;default:u.hasOwnProperty(J)||wt(i,a,J,null,u,le)}}for(var Q in u){var J=u[Q];if(le=l[Q],u.hasOwnProperty(Q)&&(J!=null||le!=null))switch(Q){case"type":g=J;break;case"name":d=J;break;case"checked":z=J;break;case"defaultChecked":ee=J;break;case"value":E=J;break;case"defaultValue":S=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,a));break;default:J!==le&&wt(i,a,Q,J,u,le)}}xs(i,E,S,x,z,ee,g,d);return;case"select":J=E=S=Q=null;for(g in l)if(x=l[g],l.hasOwnProperty(g)&&x!=null)switch(g){case"value":break;case"multiple":J=x;default:u.hasOwnProperty(g)||wt(i,a,g,null,u,x)}for(d in u)if(g=u[d],x=l[d],u.hasOwnProperty(d)&&(g!=null||x!=null))switch(d){case"value":Q=g;break;case"defaultValue":S=g;break;case"multiple":E=g;default:g!==x&&wt(i,a,d,g,u,x)}a=S,l=E,u=J,Q!=null?ct(i,!!l,Q,!1):!!u!=!!l&&(a!=null?ct(i,!!l,a,!0):ct(i,!!l,l?[]:"",!1));return;case"textarea":J=Q=null;for(S in l)if(d=l[S],l.hasOwnProperty(S)&&d!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:wt(i,a,S,null,u,d)}for(E in u)if(d=u[E],g=l[E],u.hasOwnProperty(E)&&(d!=null||g!=null))switch(E){case"value":Q=d;break;case"defaultValue":J=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==g&&wt(i,a,E,d,u,g)}Ma(i,Q,J);return;case"option":for(var Ie in l)if(Q=l[Ie],l.hasOwnProperty(Ie)&&Q!=null&&!u.hasOwnProperty(Ie))switch(Ie){case"selected":i.selected=!1;break;default:wt(i,a,Ie,null,u,Q)}for(x in u)if(Q=u[x],J=l[x],u.hasOwnProperty(x)&&Q!==J&&(Q!=null||J!=null))switch(x){case"selected":i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:wt(i,a,x,Q,u,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in l)Q=l[Be],l.hasOwnProperty(Be)&&Q!=null&&!u.hasOwnProperty(Be)&&wt(i,a,Be,null,u,Q);for(z in u)if(Q=u[z],J=l[z],u.hasOwnProperty(z)&&Q!==J&&(Q!=null||J!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,a));break;default:wt(i,a,z,Q,u,J)}return;default:if(au(a)){for(var qt in l)Q=l[qt],l.hasOwnProperty(qt)&&Q!==void 0&&!u.hasOwnProperty(qt)&&Xp(i,a,qt,void 0,u,Q);for(ee in u)Q=u[ee],J=l[ee],!u.hasOwnProperty(ee)||Q===J||Q===void 0&&J===void 0||Xp(i,a,ee,Q,u,J);return}}for(var q in l)Q=l[q],l.hasOwnProperty(q)&&Q!=null&&!u.hasOwnProperty(q)&&wt(i,a,q,null,u,Q);for(le in u)Q=u[le],J=l[le],!u.hasOwnProperty(le)||Q===J||Q==null&&J==null||wt(i,a,le,Q,u,J)}var Zp=null,Jp=null;function hf(i){return i.nodeType===9?i:i.ownerDocument}function LT(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function VT(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function eg(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var tg=null;function fx(){var i=window.event;return i&&i.type==="popstate"?i===tg?!1:(tg=i,!0):(tg=null,!1)}var jT=typeof setTimeout=="function"?setTimeout:void 0,dx=typeof clearTimeout=="function"?clearTimeout:void 0,UT=typeof Promise=="function"?Promise:void 0,mx=typeof queueMicrotask=="function"?queueMicrotask:typeof UT<"u"?function(i){return UT.resolve(null).then(i).catch(px)}:jT;function px(i){setTimeout(function(){throw i})}function ng(i,a){var l=a,u=0;do{var d=l.nextSibling;if(i.removeChild(l),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(u===0){i.removeChild(d),Zu(a);return}u--}else l!=="$"&&l!=="$?"&&l!=="$!"||u++;l=d}while(l);Zu(a)}function rg(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":rg(l),rr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function gx(i,a,l,u){for(;i.nodeType===1;){var d=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Fn])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==d.rel||i.getAttribute("href")!==(d.href==null?null:d.href)||i.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||i.getAttribute("title")!==(d.title==null?null:d.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(d.src==null?null:d.src)||i.getAttribute("type")!==(d.type==null?null:d.type)||i.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=Wr(i.nextSibling),i===null)break}return null}function yx(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Wr(i.nextSibling),i===null))return null;return i}function Wr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}function zT(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return i;a--}else l==="/$"&&a++}i=i.previousSibling}return null}function FT(i,a,l){switch(a=hf(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}var kr=new Map,BT=new Set;function ff(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var rs=ye.d;ye.d={f:_x,r:vx,D:Ex,C:Tx,L:wx,m:bx,X:Rx,S:Sx,M:Ax};function _x(){var i=rs.f(),a=rf();return i||a}function vx(i){var a=Yt(i);a!==null&&a.tag===5&&a.type==="form"?pE(a):rs.r(i)}var cl=typeof document>"u"?null:document;function HT(i,a,l){var u=cl;if(u&&typeof a=="string"&&a){var d=Ft(a);d='link[rel="'+i+'"][href="'+d+'"]',typeof l=="string"&&(d+='[crossorigin="'+l+'"]'),BT.has(d)||(BT.add(d),i={rel:i,crossOrigin:l,href:a},u.querySelector(d)===null&&(a=u.createElement("link"),An(a,"link",i),dt(a),u.head.appendChild(a)))}}function Ex(i){rs.D(i),HT("dns-prefetch",i,null)}function Tx(i,a){rs.C(i,a),HT("preconnect",i,a)}function wx(i,a,l){rs.L(i,a,l);var u=cl;if(u&&i&&a){var d='link[rel="preload"][as="'+Ft(a)+'"]';a==="image"&&l&&l.imageSrcSet?(d+='[imagesrcset="'+Ft(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(d+='[imagesizes="'+Ft(l.imageSizes)+'"]')):d+='[href="'+Ft(i)+'"]';var g=d;switch(a){case"style":g=hl(i);break;case"script":g=fl(i)}kr.has(g)||(i=O({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),kr.set(g,i),u.querySelector(d)!==null||a==="style"&&u.querySelector($u(g))||a==="script"&&u.querySelector(Gu(g))||(a=u.createElement("link"),An(a,"link",i),dt(a),u.head.appendChild(a)))}}function bx(i,a){rs.m(i,a);var l=cl;if(l&&i){var u=a&&typeof a.as=="string"?a.as:"script",d='link[rel="modulepreload"][as="'+Ft(u)+'"][href="'+Ft(i)+'"]',g=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=fl(i)}if(!kr.has(g)&&(i=O({rel:"modulepreload",href:i},a),kr.set(g,i),l.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Gu(g)))return}u=l.createElement("link"),An(u,"link",i),dt(u),l.head.appendChild(u)}}}function Sx(i,a,l){rs.S(i,a,l);var u=cl;if(u&&i){var d=Qn(u).hoistableStyles,g=hl(i);a=a||"default";var E=d.get(g);if(!E){var S={loading:0,preload:null};if(E=u.querySelector($u(g)))S.loading=5;else{i=O({rel:"stylesheet",href:i,"data-precedence":a},l),(l=kr.get(g))&&ig(i,l);var x=E=u.createElement("link");dt(x),An(x,"link",i),x._p=new Promise(function(z,ee){x.onload=z,x.onerror=ee}),x.addEventListener("load",function(){S.loading|=1}),x.addEventListener("error",function(){S.loading|=2}),S.loading|=4,df(E,a,u)}E={type:"stylesheet",instance:E,count:1,state:S},d.set(g,E)}}}function Rx(i,a){rs.X(i,a);var l=cl;if(l&&i){var u=Qn(l).hoistableScripts,d=fl(i),g=u.get(d);g||(g=l.querySelector(Gu(d)),g||(i=O({src:i,async:!0},a),(a=kr.get(d))&&sg(i,a),g=l.createElement("script"),dt(g),An(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(d,g))}}function Ax(i,a){rs.M(i,a);var l=cl;if(l&&i){var u=Qn(l).hoistableScripts,d=fl(i),g=u.get(d);g||(g=l.querySelector(Gu(d)),g||(i=O({src:i,async:!0,type:"module"},a),(a=kr.get(d))&&sg(i,a),g=l.createElement("script"),dt(g),An(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(d,g))}}function qT(i,a,l,u){var d=(d=Wn.current)?ff(d):null;if(!d)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=hl(l.href),l=Qn(d).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=hl(l.href);var g=Qn(d).hoistableStyles,E=g.get(i);if(E||(d=d.ownerDocument||d,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,E),(g=d.querySelector($u(i)))&&!g._p&&(E.instance=g,E.state.loading=5),kr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},kr.set(i,l),g||Cx(d,i,l,E.state))),a&&u===null)throw Error(r(528,""));return E}if(a&&u!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=fl(l),l=Qn(d).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function hl(i){return'href="'+Ft(i)+'"'}function $u(i){return'link[rel="stylesheet"]['+i+"]"}function $T(i){return O({},i,{"data-precedence":i.precedence,precedence:null})}function Cx(i,a,l,u){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=i.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),An(a,"link",l),dt(a),i.head.appendChild(a))}function fl(i){return'[src="'+Ft(i)+'"]'}function Gu(i){return"script[async]"+i}function GT(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=i.querySelector('style[data-href~="'+Ft(l.href)+'"]');if(u)return a.instance=u,dt(u),u;var d=O({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),dt(u),An(u,"style",d),df(u,l.precedence,i),a.instance=u;case"stylesheet":d=hl(l.href);var g=i.querySelector($u(d));if(g)return a.state.loading|=4,a.instance=g,dt(g),g;u=$T(l),(d=kr.get(d))&&ig(u,d),g=(i.ownerDocument||i).createElement("link"),dt(g);var E=g;return E._p=new Promise(function(S,x){E.onload=S,E.onerror=x}),An(g,"link",u),a.state.loading|=4,df(g,l.precedence,i),a.instance=g;case"script":return g=fl(l.src),(d=i.querySelector(Gu(g)))?(a.instance=d,dt(d),d):(u=l,(d=kr.get(g))&&(u=O({},l),sg(u,d)),i=i.ownerDocument||i,d=i.createElement("script"),dt(d),An(d,"link",u),i.head.appendChild(d),a.instance=d);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,df(u,l.precedence,i));return a.instance}function df(i,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,g=d,E=0;E<u.length;E++){var S=u[E];if(S.dataset.precedence===a)g=S;else if(g!==d)break}g?g.parentNode.insertBefore(i,g.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function ig(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function sg(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var mf=null;function WT(i,a,l){if(mf===null){var u=new Map,d=mf=new Map;d.set(l,u)}else d=mf,u=d.get(l),u||(u=new Map,d.set(l,u));if(u.has(i))return u;for(u.set(i,null),l=l.getElementsByTagName(i),d=0;d<l.length;d++){var g=l[d];if(!(g[Fn]||g[Ae]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(a)||"";E=i+E;var S=u.get(E);S?S.push(g):u.set(E,[g])}}return u}function KT(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function Ix(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function QT(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Wu=null;function xx(){}function Nx(i,a,l){if(Wu===null)throw Error(r(475));var u=Wu;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=hl(l.href),g=i.querySelector($u(d));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=pf.bind(u),i.then(u,u)),a.state.loading|=4,a.instance=g,dt(g);return}g=i.ownerDocument||i,l=$T(l),(d=kr.get(d))&&ig(l,d),g=g.createElement("link"),dt(g);var E=g;E._p=new Promise(function(S,x){E.onload=S,E.onerror=x}),An(g,"link",l),a.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(u.count++,a=pf.bind(u),i.addEventListener("load",a),i.addEventListener("error",a))}}function Ox(){if(Wu===null)throw Error(r(475));var i=Wu;return i.stylesheets&&i.count===0&&ag(i,i.stylesheets),0<i.count?function(a){var l=setTimeout(function(){if(i.stylesheets&&ag(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(l)}}:null}function pf(){if(this.count--,this.count===0){if(this.stylesheets)ag(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var gf=null;function ag(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,gf=new Map,a.forEach(Dx,i),gf=null,pf.call(i))}function Dx(i,a){if(!(a.state.loading&4)){var l=gf.get(i);if(l)var u=l.get(null);else{l=new Map,gf.set(i,l);for(var d=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var E=d[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),u=E)}u&&l.set(null,u)}d=a.instance,E=d.getAttribute("data-precedence"),g=l.get(E)||u,g===u&&l.set(null,d),l.set(E,d),this.count++,u=pf.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),g?g.parentNode.insertBefore(d,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(d,i.firstChild)),a.state.loading|=4}}var Ku={$$typeof:C,Provider:null,Consumer:null,_currentValue:Ue,_currentValue2:Ue,_threadCount:0};function kx(i,a,l,u,d,g,E,S){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=H(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H(0),this.hiddenUpdates=H(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function YT(i,a,l,u,d,g,E,S,x,z,ee,le){return i=new kx(i,a,l,E,S,x,z,le),a=1,g===!0&&(a|=24),g=Or(3,null,null,a),i.current=g,g.stateNode=i,a=jm(),a.refCount++,i.pooledCache=a,a.refCount++,g.memoizedState={element:u,isDehydrated:l,cache:a},_p(g),i}function XT(i){return i?(i=qo,i):qo}function ZT(i,a,l,u,d,g){d=XT(d),u.context===null?u.context=d:u.pendingContext=d,u=Us(a),u.payload={element:l},g=g===void 0?null:g,g!==null&&(u.callback=g),l=zs(i,u,a),l!==null&&($n(l,i,a),Ou(l,i,a))}function JT(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function og(i,a){JT(i,a),(i=i.alternate)&&JT(i,a)}function ew(i){if(i.tag===13){var a=Ds(i,67108864);a!==null&&$n(a,i,67108864),og(i,67108864)}}var yf=!0;function Px(i,a,l,u){var d=A.T;A.T=null;var g=ye.p;try{ye.p=2,lg(i,a,l,u)}finally{ye.p=g,A.T=d}}function Mx(i,a,l,u){var d=A.T;A.T=null;var g=ye.p;try{ye.p=8,lg(i,a,l,u)}finally{ye.p=g,A.T=d}}function lg(i,a,l,u){if(yf){var d=ug(u);if(d===null)Yp(i,a,u,_f,l),nw(i,u);else if(Vx(d,i,a,l,u))u.stopPropagation();else if(nw(i,u),a&4&&-1<Lx.indexOf(i)){for(;d!==null;){var g=Yt(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=Kn(g.pendingLanes);if(E!==0){var S=g;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var x=1<<31-Qt(E);S.entanglements[1]|=x,E&=~x}vi(g),(jt&6)===0&&(ef=Tn()+500,Bu(0))}}break;case 13:S=Ds(g,2),S!==null&&$n(S,g,2),rf(),og(g,2)}if(g=ug(u),g===null&&Yp(i,a,u,_f,l),g===d)break;d=g}d!==null&&u.stopPropagation()}else Yp(i,a,u,null,l)}}function ug(i){return i=Do(i),cg(i)}var _f=null;function cg(i){if(_f=null,i=$t(i),i!==null){var a=Ce(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=We(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return _f=i,null}function tw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bs()){case vt:return 2;case Et:return 8;case pr:case Ss:return 32;case xa:return 268435456;default:return 32}default:return 32}}var hg=!1,Ws=null,Ks=null,Qs=null,Qu=new Map,Yu=new Map,Ys=[],Lx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nw(i,a){switch(i){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":Qu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yu.delete(a.pointerId)}}function Xu(i,a,l,u,d,g){return i===null||i.nativeEvent!==g?(i={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:g,targetContainers:[d]},a!==null&&(a=Yt(a),a!==null&&ew(a)),i):(i.eventSystemFlags|=u,a=i.targetContainers,d!==null&&a.indexOf(d)===-1&&a.push(d),i)}function Vx(i,a,l,u,d){switch(a){case"focusin":return Ws=Xu(Ws,i,a,l,u,d),!0;case"dragenter":return Ks=Xu(Ks,i,a,l,u,d),!0;case"mouseover":return Qs=Xu(Qs,i,a,l,u,d),!0;case"pointerover":var g=d.pointerId;return Qu.set(g,Xu(Qu.get(g)||null,i,a,l,u,d)),!0;case"gotpointercapture":return g=d.pointerId,Yu.set(g,Xu(Yu.get(g)||null,i,a,l,u,d)),!0}return!1}function rw(i){var a=$t(i.target);if(a!==null){var l=Ce(a);if(l!==null){if(a=l.tag,a===13){if(a=We(l),a!==null){i.blockedOn=a,we(i.priority,function(){if(l.tag===13){var u=lr(),d=Ds(l,u);d!==null&&$n(d,l,u),og(l,u)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function vf(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=ug(i.nativeEvent);if(l===null){l=i.nativeEvent;var u=new l.constructor(l.type,l);Tr=u,l.target.dispatchEvent(u),Tr=null}else return a=Yt(l),a!==null&&ew(a),i.blockedOn=l,!1;a.shift()}return!0}function iw(i,a,l){vf(i)&&l.delete(a)}function jx(){hg=!1,Ws!==null&&vf(Ws)&&(Ws=null),Ks!==null&&vf(Ks)&&(Ks=null),Qs!==null&&vf(Qs)&&(Qs=null),Qu.forEach(iw),Yu.forEach(iw)}function Ef(i,a){i.blockedOn===a&&(i.blockedOn=null,hg||(hg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,jx)))}var Tf=null;function sw(i){Tf!==i&&(Tf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Tf===i&&(Tf=null);for(var a=0;a<i.length;a+=3){var l=i[a],u=i[a+1],d=i[a+2];if(typeof u!="function"){if(cg(u||l)===null)continue;break}var g=Yt(l);g!==null&&(i.splice(a,3),a-=3,ep(g,{pending:!0,data:d,method:l.method,action:u},u,d))}}))}function Zu(i){function a(x){return Ef(x,i)}Ws!==null&&Ef(Ws,i),Ks!==null&&Ef(Ks,i),Qs!==null&&Ef(Qs,i),Qu.forEach(a),Yu.forEach(a);for(var l=0;l<Ys.length;l++){var u=Ys[l];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Ys.length&&(l=Ys[0],l.blockedOn===null);)rw(l),l.blockedOn===null&&Ys.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var d=l[u],g=l[u+1],E=d[xe]||null;if(typeof g=="function")E||sw(l);else if(E){var S=null;if(g&&g.hasAttribute("formAction")){if(d=g,E=g[xe]||null)S=E.formAction;else if(cg(d)!==null)continue}else S=E.action;typeof S=="function"?l[u+1]=S:(l.splice(u,3),u-=3),sw(l)}}}function fg(i){this._internalRoot=i}wf.prototype.render=fg.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,u=lr();ZT(l,u,i,a,null,null)},wf.prototype.unmount=fg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;i.tag===0&&ol(),ZT(i.current,2,null,i,null,null),rf(),a[rt]=null}};function wf(i){this._internalRoot=i}wf.prototype.unstable_scheduleHydration=function(i){if(i){var a=Te();i={blockedOn:null,target:i,priority:a};for(var l=0;l<Ys.length&&a!==0&&a<Ys[l].priority;l++);Ys.splice(l,0,i),l===0&&rw(i)}};var aw=e.version;if(aw!=="19.0.0")throw Error(r(527,aw,"19.0.0"));ye.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=ue(a),i=i!==null?be(i):null,i=i===null?null:i.stateNode,i};var Ux={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:A,findFiberByHostInstance:$t,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bf.isDisabled&&bf.supportsFiber)try{Br=bf.inject(Ux),rn=bf}catch{}}return ec.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,u="",d=bE,g=SE,E=RE,S=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(S=a.unstable_transitionCallbacks)),a=YT(i,1,!1,null,null,l,u,d,g,E,S,null),i[rt]=a.current,Qp(i.nodeType===8?i.parentNode:i),new fg(a)},ec.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var u=!1,d="",g=bE,E=SE,S=RE,x=null,z=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(x=l.unstable_transitionCallbacks),l.formState!==void 0&&(z=l.formState)),a=YT(i,1,!0,a,l??null,u,d,g,E,S,x,z),a.context=XT(null),l=a.current,u=lr(),d=Us(u),d.callback=null,zs(l,d,u),a.current.lanes=u,W(a,u),vi(a),i[rt]=a.current,Qp(i),new wf(a)},ec.version="19.0.0",ec}var gw;function Yx(){if(gw)return pg.exports;gw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),pg.exports=Qx(),pg.exports}var Xx=Yx();const Zx=c_(Xx);var tc={},yw;function Jx(){if(yw)return tc;yw=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.parse=c,tc.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function c(w,C){const N=new o,G=w.length;if(G<2)return N;const V=(C==null?void 0:C.decode)||_;let Y=0;do{const Z=w.indexOf("=",Y);if(Z===-1)break;const se=w.indexOf(";",Y),te=se===-1?G:se;if(Z>te){Y=w.lastIndexOf(";",Z-1)+1;continue}const oe=f(w,Y,Z),j=m(w,Z,oe),k=w.slice(oe,j);if(N[k]===void 0){let I=f(w,Z+1,te),A=m(w,te,I);const O=V(w.slice(I,A));N[k]=O}Y=te+1}while(Y<G);return N}function f(w,C,N){do{const G=w.charCodeAt(C);if(G!==32&&G!==9)return C}while(++C<N);return N}function m(w,C,N){for(;C>N;){const G=w.charCodeAt(--C);if(G!==32&&G!==9)return C+1}return N}function p(w,C,N){const G=(N==null?void 0:N.encode)||encodeURIComponent;if(!n.test(w))throw new TypeError(`argument name is invalid: ${w}`);const V=G(C);if(!e.test(V))throw new TypeError(`argument val is invalid: ${C}`);let Y=w+"="+V;if(!N)return Y;if(N.maxAge!==void 0){if(!Number.isInteger(N.maxAge))throw new TypeError(`option maxAge is invalid: ${N.maxAge}`);Y+="; Max-Age="+N.maxAge}if(N.domain){if(!t.test(N.domain))throw new TypeError(`option domain is invalid: ${N.domain}`);Y+="; Domain="+N.domain}if(N.path){if(!r.test(N.path))throw new TypeError(`option path is invalid: ${N.path}`);Y+="; Path="+N.path}if(N.expires){if(!T(N.expires)||!Number.isFinite(N.expires.valueOf()))throw new TypeError(`option expires is invalid: ${N.expires}`);Y+="; Expires="+N.expires.toUTCString()}if(N.httpOnly&&(Y+="; HttpOnly"),N.secure&&(Y+="; Secure"),N.partitioned&&(Y+="; Partitioned"),N.priority)switch(typeof N.priority=="string"?N.priority.toLowerCase():void 0){case"low":Y+="; Priority=Low";break;case"medium":Y+="; Priority=Medium";break;case"high":Y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${N.priority}`)}if(N.sameSite)switch(typeof N.sameSite=="string"?N.sameSite.toLowerCase():N.sameSite){case!0:case"strict":Y+="; SameSite=Strict";break;case"lax":Y+="; SameSite=Lax";break;case"none":Y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${N.sameSite}`)}return Y}function _(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function T(w){return s.call(w)==="[object Date]"}return tc}Jx();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _w="popstate";function eN(n={}){function e(r,s){let{pathname:o,search:c,hash:f}=r.location;return Ic("",{pathname:o,search:c,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:ma(s)}return nN(e,t,null,n)}function tt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function xn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tN(){return Math.random().toString(36).substring(2,10)}function vw(n,e){return{usr:n.state,key:n.key,idx:e}}function Ic(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ba(e):e,state:t,key:e&&e.key||r||tN()}}function ma({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ba(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function nN(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,c=s.history,f="POP",m=null,p=_();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function _(){return(c.state||{idx:null}).idx}function T(){f="POP";let V=_(),Y=V==null?null:V-p;p=V,m&&m({action:f,location:G.location,delta:Y})}function w(V,Y){f="PUSH";let Z=Ic(G.location,V,Y);p=_()+1;let se=vw(Z,p),te=G.createHref(Z);try{c.pushState(se,"",te)}catch(oe){if(oe instanceof DOMException&&oe.name==="DataCloneError")throw oe;s.location.assign(te)}o&&m&&m({action:f,location:G.location,delta:1})}function C(V,Y){f="REPLACE";let Z=Ic(G.location,V,Y);p=_();let se=vw(Z,p),te=G.createHref(Z);c.replaceState(se,"",te),o&&m&&m({action:f,location:G.location,delta:0})}function N(V){let Y=s.location.origin!=="null"?s.location.origin:s.location.href,Z=typeof V=="string"?V:ma(V);return Z=Z.replace(/ $/,"%20"),tt(Y,`No window.location.(origin|href) available to create URL for href: ${Z}`),new URL(Z,Y)}let G={get action(){return f},get location(){return n(s,c)},listen(V){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(_w,T),m=V,()=>{s.removeEventListener(_w,T),m=null}},createHref(V){return e(s,V)},createURL:N,encodeLocation(V){let Y=N(V);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:w,replace:C,go(V){return c.go(V)}};return G}var rN=new Set(["lazy","caseSensitive","path","id","index","children"]);function iN(n){return n.index===!0}function Zf(n,e,t=[],r={}){return n.map((s,o)=>{let c=[...t,String(o)],f=typeof s.id=="string"?s.id:c.join("-");if(tt(s.index!==!0||!s.children,"Cannot specify children on an index route"),tt(!r[f],`Found a route id collision on id "${f}".  Route id's must be globally unique within Data Router usages`),iN(s)){let m={...s,...e(s),id:f};return r[f]=m,m}else{let m={...s,...e(s),id:f,children:void 0};return r[f]=m,s.children&&(m.children=Zf(s.children,e,c,r)),m}})}function ta(n,e,t="/"){return Vf(n,e,t,!1)}function Vf(n,e,t,r){let s=typeof e=="string"?ba(e):e,o=ei(s.pathname||"/",t);if(o==null)return null;let c=oR(n);aN(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let p=yN(o);f=pN(c[m],p,r)}return f}function sN(n,e){let{route:t,pathname:r,params:s}=n;return{id:t.id,pathname:r,params:s,data:e[t.id],handle:t.handle}}function oR(n,e=[],t=[],r=""){let s=(o,c,f)=>{let m={relativePath:f===void 0?o.path||"":f,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};m.relativePath.startsWith("/")&&(tt(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let p=wi([r,m.relativePath]),_=t.concat(m);o.children&&o.children.length>0&&(tt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),oR(o.children,e,_,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:dN(p,o.index),routesMeta:_})};return n.forEach((o,c)=>{var f;if(o.path===""||!((f=o.path)!=null&&f.includes("?")))s(o,c);else for(let m of lR(o.path))s(o,c,m)}),e}function lR(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let c=lR(r.join("/")),f=[];return f.push(...c.map(m=>m===""?o:[o,m].join("/"))),s&&f.push(...c),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function aN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:mN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var oN=/^:[\w-]+$/,lN=3,uN=2,cN=1,hN=10,fN=-2,Ew=n=>n==="*";function dN(n,e){let t=n.split("/"),r=t.length;return t.some(Ew)&&(r+=fN),e&&(r+=uN),t.filter(s=>!Ew(s)).reduce((s,o)=>s+(oN.test(o)?lN:o===""?cN:hN),r)}function mN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function pN(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",c=[];for(let f=0;f<r.length;++f){let m=r[f],p=f===r.length-1,_=o==="/"?e:e.slice(o.length)||"/",T=Jf({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},_),w=m.route;if(!T&&p&&t&&!r[r.length-1].route.index&&(T=Jf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!T)return null;Object.assign(s,T.params),c.push({params:s,pathname:wi([o,T.pathname]),pathnameBase:EN(wi([o,T.pathnameBase])),route:w}),T.pathnameBase!=="/"&&(o=wi([o,T.pathnameBase]))}return c}function Jf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=gN(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:r.reduce((p,{paramName:_,isOptional:T},w)=>{if(_==="*"){let N=f[w]||"";c=o.slice(0,o.length-N.length).replace(/(.)\/+$/,"$1")}const C=f[w];return T&&!C?p[_]=void 0:p[_]=(C||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:c,pattern:n}}function gN(n,e=!1,t=!0){xn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(r.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function yN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ei(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function _N(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?ba(n):n;return{pathname:t?t.startsWith("/")?t:vN(t,e):e,search:TN(r),hash:wN(s)}}function vN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function vg(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function uR(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function f_(n){let e=uR(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function d_(n,e,t,r=!1){let s;typeof n=="string"?s=ba(n):(s={...n},tt(!s.pathname||!s.pathname.includes("?"),vg("?","pathname","search",s)),tt(!s.pathname||!s.pathname.includes("#"),vg("#","pathname","hash",s)),tt(!s.search||!s.search.includes("#"),vg("#","search","hash",s)));let o=n===""||s.pathname==="",c=o?"/":s.pathname,f;if(c==null)f=t;else{let T=e.length-1;if(!r&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),T-=1;s.pathname=w.join("/")}f=T>=0?e[T]:"/"}let m=_N(s,f),p=c&&c!=="/"&&c.endsWith("/"),_=(o||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||_)&&(m.pathname+="/"),m}var wi=n=>n.join("/").replace(/\/\/+/g,"/"),EN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),TN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,wN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,ed=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function xc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var cR=["POST","PUT","PATCH","DELETE"],bN=new Set(cR),SN=["GET",...cR],RN=new Set(SN),AN=new Set([301,302,303,307,308]),CN=new Set([307,308]),Eg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IN={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},nc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},m_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xN=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),hR="remix-router-transitions",fR=Symbol("ResetLoaderData");function NN(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";tt(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=n.mapRouteProperties||xN,s={},o=Zf(n.routes,r,void 0,s),c,f=n.basename||"/",m=n.dataStrategy||MN,p=n.patchRoutesOnNavigation,_={...n.future},T=null,w=new Set,C=null,N=null,G=null,V=n.hydrationData!=null,Y=ta(o,n.history.location,f),Z=!1,se=null;if(Y==null&&!p){let P=Mr(404,{pathname:n.history.location.pathname}),{matches:H,route:W}=Ow(o);Y=H,se={[W.id]:P}}Y&&!n.hydrationData&&wn(Y,o,n.history.location.pathname).active&&(Y=null);let te;if(Y)if(Y.some(P=>P.route.lazy))te=!1;else if(!Y.some(P=>P.route.loader))te=!0;else{let P=n.hydrationData?n.hydrationData.loaderData:null,H=n.hydrationData?n.hydrationData.errors:null;if(H){let W=Y.findIndex(ce=>H[ce.route.id]!==void 0);te=Y.slice(0,W+1).every(ce=>!Wg(ce.route,P,H))}else te=Y.every(W=>!Wg(W.route,P,H))}else{te=!1,Y=[];let P=wn(null,o,n.history.location.pathname);P.active&&P.matches&&(Z=!0,Y=P.matches)}let oe,j={historyAction:n.history.action,location:n.history.location,matches:Y,initialized:te,navigation:Eg,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||se,fetchers:new Map,blockers:new Map},k="POP",I=!1,A,O=!1,L=new Map,B=null,D=!1,St=!1,xt=new Set,fe=new Map,De=0,Ce=-1,We=new Map,M=new Set,ue=new Map,be=new Map,pe=new Set,ye=new Map,Ue,Me=null;function Ut(){if(T=n.history.listen(({action:P,location:H,delta:W})=>{if(Ue){Ue(),Ue=void 0;return}xn(ye.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ce=Rs({currentLocation:j.location,nextLocation:H,historyAction:P});if(ce&&W!=null){let _e=new Promise(Se=>{Ue=Se});n.history.go(W*-1),Qt(ce,{state:"blocked",location:H,proceed(){Qt(ce,{state:"proceeding",proceed:void 0,reset:void 0,location:H}),_e.then(()=>n.history.go(W))},reset(){let Se=new Map(j.blockers);Se.set(ce,nc),ze({blockers:Se})}});return}return On(P,H)}),t){GN(e,L);let P=()=>WN(e,L);e.addEventListener("pagehide",P),B=()=>e.removeEventListener("pagehide",P)}return j.initialized||On("POP",j.location,{initialHydration:!0}),oe}function nt(){T&&T(),B&&B(),w.clear(),A&&A.abort(),j.fetchers.forEach((P,H)=>Ss(H)),j.blockers.forEach((P,H)=>er(H))}function Lt(P){return w.add(P),()=>w.delete(P)}function ze(P,H={}){j={...j,...P};let W=[],ce=[];j.fetchers.forEach((_e,Se)=>{_e.state==="idle"&&(pe.has(Se)?W.push(Se):ce.push(Se))}),pe.forEach(_e=>{!j.fetchers.has(_e)&&!fe.has(_e)&&W.push(_e)}),[...w].forEach(_e=>_e(j,{deletedFetchers:W,viewTransitionOpts:H.viewTransitionOpts,flushSync:H.flushSync===!0})),W.forEach(_e=>Ss(_e)),ce.forEach(_e=>j.fetchers.delete(_e))}function zt(P,H,{flushSync:W}={}){var me,Ae;let ce=j.actionData!=null&&j.navigation.formMethod!=null&&Kr(j.navigation.formMethod)&&j.navigation.state==="loading"&&((me=P.state)==null?void 0:me._isRedirect)!==!0,_e;H.actionData?Object.keys(H.actionData).length>0?_e=H.actionData:_e=null:ce?_e=j.actionData:_e=null;let Se=H.loaderData?xw(j.loaderData,H.loaderData,H.matches||[],H.errors):j.loaderData,ke=j.blockers;ke.size>0&&(ke=new Map(ke),ke.forEach((xe,rt)=>ke.set(rt,nc)));let Te=I===!0||j.navigation.formMethod!=null&&Kr(j.navigation.formMethod)&&((Ae=P.state)==null?void 0:Ae._isRedirect)!==!0;c&&(o=c,c=void 0),D||k==="POP"||(k==="PUSH"?n.history.push(P,P.state):k==="REPLACE"&&n.history.replace(P,P.state));let we;if(k==="POP"){let xe=L.get(j.location.pathname);xe&&xe.has(P.pathname)?we={currentLocation:j.location,nextLocation:P}:L.has(P.pathname)&&(we={currentLocation:P,nextLocation:j.location})}else if(O){let xe=L.get(j.location.pathname);xe?xe.add(P.pathname):(xe=new Set([P.pathname]),L.set(j.location.pathname,xe)),we={currentLocation:j.location,nextLocation:P}}ze({...H,actionData:_e,loaderData:Se,historyAction:k,location:P,initialized:!0,navigation:Eg,revalidation:"idle",restoreScrollPosition:Kn(P,H.matches||j.matches),preventScrollReset:Te,blockers:ke},{viewTransitionOpts:we,flushSync:W===!0}),k="POP",I=!1,O=!1,D=!1,St=!1,Me==null||Me.resolve(),Me=null}async function mr(P,H){if(typeof P=="number"){n.history.go(P);return}let W=Gg(j.location,j.matches,f,P,H==null?void 0:H.fromRouteId,H==null?void 0:H.relative),{path:ce,submission:_e,error:Se}=Tw(!1,W,H),ke=j.location,Te=Ic(j.location,ce,H&&H.state);Te={...Te,...n.history.encodeLocation(Te)};let we=H&&H.replace!=null?H.replace:void 0,me="PUSH";we===!0?me="REPLACE":we===!1||_e!=null&&Kr(_e.formMethod)&&_e.formAction===j.location.pathname+j.location.search&&(me="REPLACE");let Ae=H&&"preventScrollReset"in H?H.preventScrollReset===!0:void 0,xe=(H&&H.flushSync)===!0,rt=Rs({currentLocation:ke,nextLocation:Te,historyAction:me});if(rt){Qt(rt,{state:"blocked",location:Te,proceed(){Qt(rt,{state:"proceeding",proceed:void 0,reset:void 0,location:Te}),mr(P,H)},reset(){let Nt=new Map(j.blockers);Nt.set(rt,nc),ze({blockers:Nt})}});return}await On(me,Te,{submission:_e,pendingError:Se,preventScrollReset:Ae,replace:H&&H.replace,enableViewTransition:H&&H.viewTransition,flushSync:xe})}function Wn(){Me||(Me=KN()),bs(),ze({revalidation:"loading"});let P=Me.promise;return j.navigation.state==="submitting"?P:j.navigation.state==="idle"?(On(j.historyAction,j.location,{startUninterruptedRevalidation:!0}),P):(On(k||j.historyAction,j.navigation.location,{overrideNavigation:j.navigation,enableViewTransition:O===!0}),P)}async function On(P,H,W){A&&A.abort(),A=null,k=P,D=(W&&W.startUninterruptedRevalidation)===!0,si(j.location,j.matches),I=(W&&W.preventScrollReset)===!0,O=(W&&W.enableViewTransition)===!0;let ce=c||o,_e=W&&W.overrideNavigation,Se=W!=null&&W.initialHydration&&j.matches&&j.matches.length>0&&!Z?j.matches:ta(ce,H,f),ke=(W&&W.flushSync)===!0;if(Se&&j.initialized&&!St&&FN(j.location,H)&&!(W&&W.submission&&Kr(W.submission.formMethod))){zt(H,{matches:Se},{flushSync:ke});return}let Te=wn(Se,ce,H.pathname);if(Te.active&&Te.matches&&(Se=Te.matches),!Se){let{error:pt,notFoundMatches:Ye,route:Ot}=As(H.pathname);zt(H,{matches:Ye,loaderData:{},errors:{[Ot.id]:pt}},{flushSync:ke});return}A=new AbortController;let we=dl(n.history,H,A.signal,W&&W.submission),me;if(W&&W.pendingError)me=[uo(Se).route.id,{type:"error",error:W.pendingError}];else if(W&&W.submission&&Kr(W.submission.formMethod)){let pt=await ri(we,H,W.submission,Se,Te.active,{replace:W.replace,flushSync:ke});if(pt.shortCircuited)return;if(pt.pendingActionResult){let[Ye,Ot]=pt.pendingActionResult;if(ur(Ot)&&xc(Ot.error)&&Ot.error.status===404){A=null,zt(H,{matches:pt.matches,loaderData:{},errors:{[Ye]:Ot.error}});return}}Se=pt.matches||Se,me=pt.pendingActionResult,_e=Tg(H,W.submission),ke=!1,Te.active=!1,we=dl(n.history,we.url,we.signal)}let{shortCircuited:Ae,matches:xe,loaderData:rt,errors:Nt}=await Ur(we,H,Se,Te.active,_e,W&&W.submission,W&&W.fetcherSubmission,W&&W.replace,W&&W.initialHydration===!0,ke,me);Ae||(A=null,zt(H,{matches:xe||Se,...Nw(me),loaderData:rt,errors:Nt}))}async function ri(P,H,W,ce,_e,Se={}){bs();let ke=qN(H,W);if(ze({navigation:ke},{flushSync:Se.flushSync===!0}),_e){let me=await nr(ce,H.pathname,P.signal);if(me.type==="aborted")return{shortCircuited:!0};if(me.type==="error"){let Ae=uo(me.partialMatches).route.id;return{matches:me.partialMatches,pendingActionResult:[Ae,{type:"error",error:me.error}]}}else if(me.matches)ce=me.matches;else{let{notFoundMatches:Ae,error:xe,route:rt}=As(H.pathname);return{matches:Ae,pendingActionResult:[rt.id,{type:"error",error:xe}]}}}let Te,we=hc(ce,H);if(!we.route.action&&!we.route.lazy)Te={type:"error",error:Mr(405,{method:P.method,pathname:H.pathname,routeId:we.route.id})};else if(Te=(await Fr("action",j,P,[we],ce,null))[we.route.id],P.signal.aborted)return{shortCircuited:!0};if(co(Te)){let me;return Se&&Se.replace!=null?me=Se.replace:me=Aw(Te.response.headers.get("Location"),new URL(P.url),f)===j.location.pathname+j.location.search,await zr(P,Te,!0,{submission:W,replace:me}),{shortCircuited:!0}}if(ur(Te)){let me=uo(ce,we.route.id);return(Se&&Se.replace)!==!0&&(k="PUSH"),{matches:ce,pendingActionResult:[me.route.id,Te]}}return{matches:ce,pendingActionResult:[we.route.id,Te]}}async function Ur(P,H,W,ce,_e,Se,ke,Te,we,me,Ae){let xe=_e||Tg(H,Se),rt=Se||ke||kw(xe),Nt=!D&&!we;if(ce){if(Nt){let mt=vs(Ae);ze({navigation:xe,...mt!==void 0?{actionData:mt}:{}},{flushSync:me})}let qe=await nr(W,H.pathname,P.signal);if(qe.type==="aborted")return{shortCircuited:!0};if(qe.type==="error"){let mt=uo(qe.partialMatches).route.id;return{matches:qe.partialMatches,loaderData:{},errors:{[mt]:qe.error}}}else if(qe.matches)W=qe.matches;else{let{error:mt,notFoundMatches:hn,route:Mi}=As(H.pathname);return{matches:hn,loaderData:{},errors:{[Mi.id]:mt}}}}let pt=c||o,[Ye,Ot]=bw(n.history,j,W,rt,H,we===!0,St,xt,pe,ue,M,pt,f,Ae);if(Ce=++De,Ye.length===0&&Ot.length===0){let qe=Br();return zt(H,{matches:W,loaderData:{},errors:Ae&&ur(Ae[1])?{[Ae[0]]:Ae[1].error}:null,...Nw(Ae),...qe?{fetchers:new Map(j.fetchers)}:{}},{flushSync:me}),{shortCircuited:!0}}if(Nt){let qe={};if(!ce){qe.navigation=xe;let mt=vs(Ae);mt!==void 0&&(qe.actionData=mt)}Ot.length>0&&(qe.fetchers=Es(Ot)),ze(qe,{flushSync:me})}Ot.forEach(qe=>{gr(qe.key),qe.controller&&fe.set(qe.key,qe.controller)});let Fn=()=>Ot.forEach(qe=>gr(qe.key));A&&A.signal.addEventListener("abort",Fn);let{loaderResults:rr,fetcherResults:$t}=await Tn(j,W,Ye,Ot,P);if(P.signal.aborted)return{shortCircuited:!0};A&&A.signal.removeEventListener("abort",Fn),Ot.forEach(qe=>fe.delete(qe.key));let Yt=Sf(rr);if(Yt)return await zr(P,Yt.result,!0,{replace:Te}),{shortCircuited:!0};if(Yt=Sf($t),Yt)return M.add(Yt.key),await zr(P,Yt.result,!0,{replace:Te}),{shortCircuited:!0};let{loaderData:yr,errors:Qn}=Iw(j,W,rr,Ae,Ot,$t);we&&j.errors&&(Qn={...j.errors,...Qn});let dt=Br(),ai=rn(Ce),Hr=dt||ai||Ot.length>0;return{matches:W,loaderData:yr,errors:Qn,...Hr?{fetchers:new Map(j.fetchers)}:{}}}function vs(P){if(P&&!ur(P[1]))return{[P[0]]:P[1].data};if(j.actionData)return Object.keys(j.actionData).length===0?null:j.actionData}function Es(P){return P.forEach(H=>{let W=j.fetchers.get(H.key),ce=rc(void 0,W?W.data:void 0);j.fetchers.set(H.key,ce)}),new Map(j.fetchers)}async function Ts(P,H,W,ce){gr(P);let _e=(ce&&ce.flushSync)===!0,Se=c||o,ke=Gg(j.location,j.matches,f,W,H,ce==null?void 0:ce.relative),Te=ta(Se,ke,f),we=wn(Te,Se,ke);if(we.active&&we.matches&&(Te=we.matches),!Te){Et(P,H,Mr(404,{pathname:ke}),{flushSync:_e});return}let{path:me,submission:Ae,error:xe}=Tw(!0,ke,ce);if(xe){Et(P,H,xe,{flushSync:_e});return}let rt=hc(Te,me),Nt=(ce&&ce.preventScrollReset)===!0;if(Ae&&Kr(Ae.formMethod)){await Pi(P,H,me,rt,Te,we.active,_e,Nt,Ae);return}ue.set(P,{routeId:H,path:me}),await ws(P,H,me,rt,Te,we.active,_e,Nt,Ae)}async function Pi(P,H,W,ce,_e,Se,ke,Te,we){bs(),ue.delete(P);function me(At){if(!At.route.action&&!At.route.lazy){let _r=Mr(405,{method:we.formMethod,pathname:W,routeId:H});return Et(P,H,_r,{flushSync:ke}),!0}return!1}if(!Se&&me(ce))return;let Ae=j.fetchers.get(P);vt(P,$N(we,Ae),{flushSync:ke});let xe=new AbortController,rt=dl(n.history,W,xe.signal,we);if(Se){let At=await nr(_e,W,rt.signal);if(At.type==="aborted")return;if(At.type==="error"){Et(P,H,At.error,{flushSync:ke});return}else if(At.matches){if(_e=At.matches,ce=hc(_e,W),me(ce))return}else{Et(P,H,Mr(404,{pathname:W}),{flushSync:ke});return}}fe.set(P,xe);let Nt=De,Ye=(await Fr("action",j,rt,[ce],_e,P))[ce.route.id];if(rt.signal.aborted){fe.get(P)===xe&&fe.delete(P);return}if(pe.has(P)){if(co(Ye)||ur(Ye)){vt(P,Js(void 0));return}}else{if(co(Ye))if(fe.delete(P),Ce>Nt){vt(P,Js(void 0));return}else return M.add(P),vt(P,rc(we)),zr(rt,Ye,!1,{fetcherSubmission:we,preventScrollReset:Te});if(ur(Ye)){Et(P,H,Ye.error);return}}let Ot=j.navigation.location||j.location,Fn=dl(n.history,Ot,xe.signal),rr=c||o,$t=j.navigation.state!=="idle"?ta(rr,j.navigation.location,f):j.matches;tt($t,"Didn't find any matches after fetcher action");let Yt=++De;We.set(P,Yt);let yr=rc(we,Ye.data);j.fetchers.set(P,yr);let[Qn,dt]=bw(n.history,j,$t,we,Ot,!1,St,xt,pe,ue,M,rr,f,[ce.route.id,Ye]);dt.filter(At=>At.key!==P).forEach(At=>{let _r=At.key,Da=j.fetchers.get(_r),oi=rc(void 0,Da?Da.data:void 0);j.fetchers.set(_r,oi),gr(_r),At.controller&&fe.set(_r,At.controller)}),ze({fetchers:new Map(j.fetchers)});let ai=()=>dt.forEach(At=>gr(At.key));xe.signal.addEventListener("abort",ai);let{loaderResults:Hr,fetcherResults:qe}=await Tn(j,$t,Qn,dt,Fn);if(xe.signal.aborted)return;xe.signal.removeEventListener("abort",ai),We.delete(P),fe.delete(P),dt.forEach(At=>fe.delete(At.key));let mt=Sf(Hr);if(mt)return zr(Fn,mt.result,!1,{preventScrollReset:Te});if(mt=Sf(qe),mt)return M.add(mt.key),zr(Fn,mt.result,!1,{preventScrollReset:Te});let{loaderData:hn,errors:Mi}=Iw(j,$t,Hr,void 0,dt,qe);if(j.fetchers.has(P)){let At=Js(Ye.data);j.fetchers.set(P,At)}rn(Yt),j.navigation.state==="loading"&&Yt>Ce?(tt(k,"Expected pending action"),A&&A.abort(),zt(j.navigation.location,{matches:$t,loaderData:hn,errors:Mi,fetchers:new Map(j.fetchers)})):(ze({errors:Mi,loaderData:xw(j.loaderData,hn,$t,Mi),fetchers:new Map(j.fetchers)}),St=!1)}async function ws(P,H,W,ce,_e,Se,ke,Te,we){let me=j.fetchers.get(P);vt(P,rc(we,me?me.data:void 0),{flushSync:ke});let Ae=new AbortController,xe=dl(n.history,W,Ae.signal);if(Se){let Ye=await nr(_e,W,xe.signal);if(Ye.type==="aborted")return;if(Ye.type==="error"){Et(P,H,Ye.error,{flushSync:ke});return}else if(Ye.matches)_e=Ye.matches,ce=hc(_e,W);else{Et(P,H,Mr(404,{pathname:W}),{flushSync:ke});return}}fe.set(P,Ae);let rt=De,pt=(await Fr("loader",j,xe,[ce],_e,P))[ce.route.id];if(fe.get(P)===Ae&&fe.delete(P),!xe.signal.aborted){if(pe.has(P)){vt(P,Js(void 0));return}if(co(pt))if(Ce>rt){vt(P,Js(void 0));return}else{M.add(P),await zr(xe,pt,!1,{preventScrollReset:Te});return}if(ur(pt)){Et(P,H,pt.error);return}vt(P,Js(pt.data))}}async function zr(P,H,W,{submission:ce,fetcherSubmission:_e,preventScrollReset:Se,replace:ke}={}){H.response.headers.has("X-Remix-Revalidate")&&(St=!0);let Te=H.response.headers.get("Location");tt(Te,"Expected a Location header on the redirect Response"),Te=Aw(Te,new URL(P.url),f);let we=Ic(j.location,Te,{_isRedirect:!0});if(t){let pt=!1;if(H.response.headers.has("X-Remix-Reload-Document"))pt=!0;else if(m_.test(Te)){const Ye=n.history.createURL(Te);pt=Ye.origin!==e.location.origin||ei(Ye.pathname,f)==null}if(pt){ke?e.location.replace(Te):e.location.assign(Te);return}}A=null;let me=ke===!0||H.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ae,formAction:xe,formEncType:rt}=j.navigation;!ce&&!_e&&Ae&&xe&&rt&&(ce=kw(j.navigation));let Nt=ce||_e;if(CN.has(H.response.status)&&Nt&&Kr(Nt.formMethod))await On(me,we,{submission:{...Nt,formAction:Te},preventScrollReset:Se||I,enableViewTransition:W?O:void 0});else{let pt=Tg(we,ce);await On(me,we,{overrideNavigation:pt,fetcherSubmission:_e,preventScrollReset:Se||I,enableViewTransition:W?O:void 0})}}async function Fr(P,H,W,ce,_e,Se){let ke,Te={};try{ke=await LN(m,P,H,W,ce,_e,Se,s,r)}catch(we){return ce.forEach(me=>{Te[me.route.id]={type:"error",error:we}}),Te}for(let[we,me]of Object.entries(ke))if(BN(me)){let Ae=me.result;Te[we]={type:"redirect",response:UN(Ae,W,we,_e,f)}}else Te[we]=await jN(me);return Te}async function Tn(P,H,W,ce,_e){let Se=Fr("loader",P,_e,W,H,null),ke=Promise.all(ce.map(async me=>{if(me.matches&&me.match&&me.controller){let xe=(await Fr("loader",P,dl(n.history,me.path,me.controller.signal),[me.match],me.matches,me.key))[me.match.route.id];return{[me.key]:xe}}else return Promise.resolve({[me.key]:{type:"error",error:Mr(404,{pathname:me.path})}})})),Te=await Se,we=(await ke).reduce((me,Ae)=>Object.assign(me,Ae),{});return{loaderResults:Te,fetcherResults:we}}function bs(){St=!0,ue.forEach((P,H)=>{fe.has(H)&&xt.add(H),gr(H)})}function vt(P,H,W={}){j.fetchers.set(P,H),ze({fetchers:new Map(j.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function Et(P,H,W,ce={}){let _e=uo(j.matches,H);Ss(P),ze({errors:{[_e.route.id]:W},fetchers:new Map(j.fetchers)},{flushSync:(ce&&ce.flushSync)===!0})}function pr(P){return be.set(P,(be.get(P)||0)+1),pe.has(P)&&pe.delete(P),j.fetchers.get(P)||IN}function Ss(P){let H=j.fetchers.get(P);fe.has(P)&&!(H&&H.state==="loading"&&We.has(P))&&gr(P),ue.delete(P),We.delete(P),M.delete(P),pe.delete(P),xt.delete(P),j.fetchers.delete(P)}function xa(P){let H=(be.get(P)||0)-1;H<=0?(be.delete(P),pe.add(P)):be.set(P,H),ze({fetchers:new Map(j.fetchers)})}function gr(P){let H=fe.get(P);H&&(H.abort(),fe.delete(P))}function ii(P){for(let H of P){let W=pr(H),ce=Js(W.data);j.fetchers.set(H,ce)}}function Br(){let P=[],H=!1;for(let W of M){let ce=j.fetchers.get(W);tt(ce,`Expected fetcher: ${W}`),ce.state==="loading"&&(M.delete(W),P.push(W),H=!0)}return ii(P),H}function rn(P){let H=[];for(let[W,ce]of We)if(ce<P){let _e=j.fetchers.get(W);tt(_e,`Expected fetcher: ${W}`),_e.state==="loading"&&(gr(W),We.delete(W),H.push(W))}return ii(H),H.length>0}function Na(P,H){let W=j.blockers.get(P)||nc;return ye.get(P)!==H&&ye.set(P,H),W}function er(P){j.blockers.delete(P),ye.delete(P)}function Qt(P,H){let W=j.blockers.get(P)||nc;tt(W.state==="unblocked"&&H.state==="blocked"||W.state==="blocked"&&H.state==="blocked"||W.state==="blocked"&&H.state==="proceeding"||W.state==="blocked"&&H.state==="unblocked"||W.state==="proceeding"&&H.state==="unblocked",`Invalid blocker state transition: ${W.state} -> ${H.state}`);let ce=new Map(j.blockers);ce.set(P,H),ze({blockers:ce})}function Rs({currentLocation:P,nextLocation:H,historyAction:W}){if(ye.size===0)return;ye.size>1&&xn(!1,"A router only supports one blocker at a time");let ce=Array.from(ye.entries()),[_e,Se]=ce[ce.length-1],ke=j.blockers.get(_e);if(!(ke&&ke.state==="proceeding")&&Se({currentLocation:P,nextLocation:H,historyAction:W}))return _e}function As(P){let H=Mr(404,{pathname:P}),W=c||o,{matches:ce,route:_e}=Ow(W);return{notFoundMatches:ce,route:_e,error:H}}function xo(P,H,W){if(C=P,G=H,N=W||null,!V&&j.navigation===Eg){V=!0;let ce=Kn(j.location,j.matches);ce!=null&&ze({restoreScrollPosition:ce})}return()=>{C=null,G=null,N=null}}function tr(P,H){return N&&N(P,H.map(ce=>sN(ce,j.loaderData)))||P.key}function si(P,H){if(C&&G){let W=tr(P,H);C[W]=G()}}function Kn(P,H){if(C){let W=tr(P,H),ce=C[W];if(typeof ce=="number")return ce}return null}function wn(P,H,W){if(p)if(P){if(Object.keys(P[0].params).length>0)return{active:!0,matches:Vf(H,W,f,!0)}}else return{active:!0,matches:Vf(H,W,f,!0)||[]};return{active:!1,matches:null}}async function nr(P,H,W){if(!p)return{type:"success",matches:P};let ce=P;for(;;){let _e=c==null,Se=c||o,ke=s;try{await p({signal:W,path:H,matches:ce,patch:(me,Ae)=>{W.aborted||Rw(me,Ae,Se,ke,r)}})}catch(me){return{type:"error",error:me,partialMatches:ce}}finally{_e&&!W.aborted&&(o=[...o])}if(W.aborted)return{type:"aborted"};let Te=ta(Se,H,f);if(Te)return{type:"success",matches:Te};let we=Vf(Se,H,f,!0);if(!we||ce.length===we.length&&ce.every((me,Ae)=>me.route.id===we[Ae].route.id))return{type:"success",matches:null};ce=we}}function Cs(P){s={},c=Zf(P,r,void 0,s)}function Oa(P,H){let W=c==null;Rw(P,H,c||o,s,r),W&&(o=[...o],ze({}))}return oe={get basename(){return f},get future(){return _},get state(){return j},get routes(){return o},get window(){return e},initialize:Ut,subscribe:Lt,enableScrollRestoration:xo,navigate:mr,fetch:Ts,revalidate:Wn,createHref:P=>n.history.createHref(P),encodeLocation:P=>n.history.encodeLocation(P),getFetcher:pr,deleteFetcher:xa,dispose:nt,getBlocker:Na,deleteBlocker:er,patchRoutes:Oa,_internalFetchControllers:fe,_internalSetRoutes:Cs},oe}function ON(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Gg(n,e,t,r,s,o){let c,f;if(s){c=[];for(let p of e)if(c.push(p),p.route.id===s){f=p;break}}else c=e,f=e[e.length-1];let m=d_(r||".",f_(c),ei(n.pathname,t)||n.pathname,o==="path");if(r==null&&(m.search=n.search,m.hash=n.hash),(r==null||r===""||r===".")&&f){let p=p_(m.search);if(f.route.index&&!p)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!f.route.index&&p){let _=new URLSearchParams(m.search),T=_.getAll("index");_.delete("index"),T.filter(C=>C).forEach(C=>_.append("index",C));let w=_.toString();m.search=w?`?${w}`:""}}return t!=="/"&&(m.pathname=m.pathname==="/"?t:wi([t,m.pathname])),ma(m)}function Tw(n,e,t){if(!t||!ON(t))return{path:e};if(t.formMethod&&!HN(t.formMethod))return{path:e,error:Mr(405,{method:t.formMethod})};let r=()=>({path:e,error:Mr(400,{type:"invalid-body"})}),o=(t.formMethod||"get").toUpperCase(),c=mR(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Kr(o))return r();let T=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((w,[C,N])=>`${w}${C}=${N}
`,""):String(t.body);return{path:e,submission:{formMethod:o,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:T}}}else if(t.formEncType==="application/json"){if(!Kr(o))return r();try{let T=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:o,formAction:c,formEncType:t.formEncType,formData:void 0,json:T,text:void 0}}}catch{return r()}}}tt(typeof FormData=="function","FormData is not available in this environment");let f,m;if(t.formData)f=Kg(t.formData),m=t.formData;else if(t.body instanceof FormData)f=Kg(t.body),m=t.body;else if(t.body instanceof URLSearchParams)f=t.body,m=Cw(f);else if(t.body==null)f=new URLSearchParams,m=new FormData;else try{f=new URLSearchParams(t.body),m=Cw(f)}catch{return r()}let p={formMethod:o,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(Kr(p.formMethod))return{path:e,submission:p};let _=ba(e);return n&&_.search&&p_(_.search)&&f.append("index",""),_.search=`?${f}`,{path:ma(_),submission:p}}function ww(n,e,t=!1){let r=n.findIndex(s=>s.route.id===e);return r>=0?n.slice(0,t?r+1:r):n}function bw(n,e,t,r,s,o,c,f,m,p,_,T,w,C){let N=C?ur(C[1])?C[1].error:C[1].data:void 0,G=n.createURL(e.location),V=n.createURL(s),Y=t;o&&e.errors?Y=ww(t,Object.keys(e.errors)[0],!0):C&&ur(C[1])&&(Y=ww(t,C[0]));let Z=C?C[1].statusCode:void 0,se=Z&&Z>=400,te=Y.filter((j,k)=>{let{route:I}=j;if(I.lazy)return!0;if(I.loader==null)return!1;if(o)return Wg(I,e.loaderData,e.errors);if(DN(e.loaderData,e.matches[k],j))return!0;let A=e.matches[k],O=j;return Sw(j,{currentUrl:G,currentParams:A.params,nextUrl:V,nextParams:O.params,...r,actionResult:N,actionStatus:Z,defaultShouldRevalidate:se?!1:c||G.pathname+G.search===V.pathname+V.search||G.search!==V.search||kN(A,O)})}),oe=[];return p.forEach((j,k)=>{if(o||!t.some(B=>B.route.id===j.routeId)||m.has(k))return;let I=ta(T,j.path,w);if(!I){oe.push({key:k,routeId:j.routeId,path:j.path,matches:null,match:null,controller:null});return}let A=e.fetchers.get(k),O=hc(I,j.path),L=!1;_.has(k)?L=!1:f.has(k)?(f.delete(k),L=!0):A&&A.state!=="idle"&&A.data===void 0?L=c:L=Sw(O,{currentUrl:G,currentParams:e.matches[e.matches.length-1].params,nextUrl:V,nextParams:t[t.length-1].params,...r,actionResult:N,actionStatus:Z,defaultShouldRevalidate:se?!1:c}),L&&oe.push({key:k,routeId:j.routeId,path:j.path,matches:I,match:O,controller:new AbortController})}),[te,oe]}function Wg(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,s=t!=null&&t[n.id]!==void 0;return!r&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!s}function DN(n,e,t){let r=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return r||s}function kN(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Sw(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Rw(n,e,t,r,s){let o;if(n){let m=r[n];tt(m,`No route found to patch children into: routeId = ${n}`),m.children||(m.children=[]),o=m.children}else o=t;let c=e.filter(m=>!o.some(p=>dR(m,p))),f=Zf(c,s,[n||"_","patch",String((o==null?void 0:o.length)||"0")],r);o.push(...f)}function dR(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var s;return(s=e.children)==null?void 0:s.some(o=>dR(t,o))}):!1}async function PN(n,e,t){if(!n.lazy)return;let r=await n.lazy();if(!n.lazy)return;let s=t[n.id];tt(s,"No route found in manifest");let o={};for(let c in r){let m=s[c]!==void 0&&c!=="hasErrorBoundary";xn(!m,`Route "${s.id}" has a static property "${c}" defined but its lazy function is also returning a value for this property. The lazy route property "${c}" will be ignored.`),!m&&!rN.has(c)&&(o[c]=r[c])}Object.assign(s,o),Object.assign(s,{...e(s),lazy:void 0})}async function MN({matches:n}){let e=n.filter(r=>r.shouldLoad);return(await Promise.all(e.map(r=>r.resolve()))).reduce((r,s,o)=>Object.assign(r,{[e[o].route.id]:s}),{})}async function LN(n,e,t,r,s,o,c,f,m,p){let _=o.map(C=>C.route.lazy?PN(C.route,m,f):void 0),T=o.map((C,N)=>{let G=_[N],V=s.some(Z=>Z.route.id===C.route.id);return{...C,shouldLoad:V,resolve:async Z=>(Z&&r.method==="GET"&&(C.route.lazy||C.route.loader)&&(V=!0),V?VN(e,r,C,G,Z,p):Promise.resolve({type:"data",result:void 0}))}}),w=await n({matches:T,request:r,params:o[0].params,fetcherKey:c,context:p});try{await Promise.all(_)}catch{}return w}async function VN(n,e,t,r,s,o){let c,f,m=p=>{let _,T=new Promise((N,G)=>_=G);f=()=>_(),e.signal.addEventListener("abort",f);let w=N=>typeof p!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${n}" [routeId: ${t.route.id}]`)):p({request:e,params:t.params,context:o},...N!==void 0?[N]:[]),C=(async()=>{try{return{type:"data",result:await(s?s(G=>w(G)):w())}}catch(N){return{type:"error",result:N}}})();return Promise.race([C,T])};try{let p=t.route[n];if(r)if(p){let _,[T]=await Promise.all([m(p).catch(w=>{_=w}),r]);if(_!==void 0)throw _;c=T}else if(await r,p=t.route[n],p)c=await m(p);else if(n==="action"){let _=new URL(e.url),T=_.pathname+_.search;throw Mr(405,{method:e.method,pathname:T,routeId:t.route.id})}else return{type:"data",result:void 0};else if(p)c=await m(p);else{let _=new URL(e.url),T=_.pathname+_.search;throw Mr(404,{pathname:T})}}catch(p){return{type:"error",result:p}}finally{f&&e.signal.removeEventListener("abort",f)}return c}async function jN(n){var r,s,o,c,f,m;let{result:e,type:t}=n;if(pR(e)){let p;try{let _=e.headers.get("Content-Type");_&&/\bapplication\/json\b/.test(_)?e.body==null?p=null:p=await e.json():p=await e.text()}catch(_){return{type:"error",error:_}}return t==="error"?{type:"error",error:new ed(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:"data",data:p,statusCode:e.status,headers:e.headers}}return t==="error"?Dw(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new ed(((o=e.init)==null?void 0:o.status)||500,void 0,e.data),statusCode:xc(e)?e.status:void 0,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:xc(e)?e.status:void 0}:Dw(e)?{type:"data",data:e.data,statusCode:(f=e.init)==null?void 0:f.status,headers:(m=e.init)!=null&&m.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function UN(n,e,t,r,s){let o=n.headers.get("Location");if(tt(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!m_.test(o)){let c=r.slice(0,r.findIndex(f=>f.route.id===t)+1);o=Gg(new URL(e.url),c,s,o),n.headers.set("Location",o)}return n}function Aw(n,e,t){if(m_.test(n)){let r=n,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=ei(s.pathname,t)!=null;if(s.origin===e.origin&&o)return s.pathname+s.search+s.hash}return n}function dl(n,e,t,r){let s=n.createURL(mR(e)).toString(),o={signal:t};if(r&&Kr(r.formMethod)){let{formMethod:c,formEncType:f}=r;o.method=c.toUpperCase(),f==="application/json"?(o.headers=new Headers({"Content-Type":f}),o.body=JSON.stringify(r.json)):f==="text/plain"?o.body=r.text:f==="application/x-www-form-urlencoded"&&r.formData?o.body=Kg(r.formData):o.body=r.formData}return new Request(s,o)}function Kg(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function Cw(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function zN(n,e,t,r=!1,s=!1){let o={},c=null,f,m=!1,p={},_=t&&ur(t[1])?t[1].error:void 0;return n.forEach(T=>{if(!(T.route.id in e))return;let w=T.route.id,C=e[w];if(tt(!co(C),"Cannot handle redirect results in processLoaderData"),ur(C)){let N=C.error;if(_!==void 0&&(N=_,_=void 0),c=c||{},s)c[w]=N;else{let G=uo(n,w);c[G.route.id]==null&&(c[G.route.id]=N)}r||(o[w]=fR),m||(m=!0,f=xc(C.error)?C.error.status:500),C.headers&&(p[w]=C.headers)}else o[w]=C.data,C.statusCode&&C.statusCode!==200&&!m&&(f=C.statusCode),C.headers&&(p[w]=C.headers)}),_!==void 0&&t&&(c={[t[0]]:_},o[t[0]]=void 0),{loaderData:o,errors:c,statusCode:f||200,loaderHeaders:p}}function Iw(n,e,t,r,s,o){let{loaderData:c,errors:f}=zN(e,t,r);return s.forEach(m=>{let{key:p,match:_,controller:T}=m,w=o[p];if(tt(w,"Did not find corresponding fetcher result"),!(T&&T.signal.aborted))if(ur(w)){let C=uo(n.matches,_==null?void 0:_.route.id);f&&f[C.route.id]||(f={...f,[C.route.id]:w.error}),n.fetchers.delete(p)}else if(co(w))tt(!1,"Unhandled fetcher revalidation redirect");else{let C=Js(w.data);n.fetchers.set(p,C)}}),{loaderData:c,errors:f}}function xw(n,e,t,r){let s=Object.entries(e).filter(([,o])=>o!==fR).reduce((o,[c,f])=>(o[c]=f,o),{});for(let o of t){let c=o.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&o.route.loader&&(s[c]=n[c]),r&&r.hasOwnProperty(c))break}return s}function Nw(n){return n?ur(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function uo(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function Ow(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Mr(n,{pathname:e,routeId:t,method:r,type:s,message:o}={}){let c="Unknown Server Error",f="Unknown @remix-run/router error";return n===400?(c="Bad Request",r&&e&&t?f=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(f="Unable to encode submission body")):n===403?(c="Forbidden",f=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",f=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",r&&e&&t?f=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(f=`Invalid request method "${r.toUpperCase()}"`)),new ed(n||500,c,new Error(f),!0)}function Sf(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,s]=e[t];if(co(s))return{key:r,result:s}}}function mR(n){let e=typeof n=="string"?ba(n):n;return ma({...e,hash:""})}function FN(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function BN(n){return pR(n.result)&&AN.has(n.result.status)}function ur(n){return n.type==="error"}function co(n){return(n&&n.type)==="redirect"}function Dw(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function pR(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function HN(n){return RN.has(n.toUpperCase())}function Kr(n){return bN.has(n.toUpperCase())}function p_(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function hc(n,e){let t=typeof e=="string"?ba(e).search:e.search;if(n[n.length-1].route.index&&p_(t||""))return n[n.length-1];let r=uR(n);return r[r.length-1]}function kw(n){let{formMethod:e,formAction:t,formEncType:r,text:s,formData:o,json:c}=n;if(!(!e||!t||!r)){if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:s};if(o!=null)return{formMethod:e,formAction:t,formEncType:r,formData:o,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:c,text:void 0}}}function Tg(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function qN(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function rc(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function $N(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Js(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function GN(n,e){try{let t=n.sessionStorage.getItem(hR);if(t){let r=JSON.parse(t);for(let[s,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(s,new Set(o||[]))}}catch{}}function WN(n,e){if(e.size>0){let t={};for(let[r,s]of e)t[r]=[...s];try{n.sessionStorage.setItem(hR,JSON.stringify(t))}catch(r){xn(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function KN(){let n,e,t=new Promise((r,s)=>{n=async o=>{r(o);try{await t}catch{}},e=async o=>{s(o);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var wo=F.createContext(null);wo.displayName="DataRouter";var Wc=F.createContext(null);Wc.displayName="DataRouterState";var g_=F.createContext({isTransitioning:!1});g_.displayName="ViewTransition";var gR=F.createContext(new Map);gR.displayName="Fetchers";var QN=F.createContext(null);QN.displayName="Await";var Ni=F.createContext(null);Ni.displayName="Navigation";var Od=F.createContext(null);Od.displayName="Location";var Oi=F.createContext({outlet:null,matches:[],isDataRoute:!1});Oi.displayName="Route";var y_=F.createContext(null);y_.displayName="RouteError";function YN(n,{relative:e}={}){tt(Kc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=F.useContext(Ni),{hash:s,pathname:o,search:c}=Qc(n,{relative:e}),f=o;return t!=="/"&&(f=o==="/"?t:wi([t,o])),r.createHref({pathname:f,search:c,hash:s})}function Kc(){return F.useContext(Od)!=null}function bo(){return tt(Kc(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(Od).location}var yR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _R(n){F.useContext(Ni).static||F.useLayoutEffect(n)}function Dd(){let{isDataRoute:n}=F.useContext(Oi);return n?hO():XN()}function XN(){tt(Kc(),"useNavigate() may be used only in the context of a <Router> component.");let n=F.useContext(wo),{basename:e,navigator:t}=F.useContext(Ni),{matches:r}=F.useContext(Oi),{pathname:s}=bo(),o=JSON.stringify(f_(r)),c=F.useRef(!1);return _R(()=>{c.current=!0}),F.useCallback((m,p={})=>{if(xn(c.current,yR),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=d_(m,JSON.parse(o),s,p.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:wi([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,o,s,n])}var ZN=F.createContext(null);function JN(n){let e=F.useContext(Oi).outlet;return e&&F.createElement(ZN.Provider,{value:n},e)}function Qc(n,{relative:e}={}){let{matches:t}=F.useContext(Oi),{pathname:r}=bo(),s=JSON.stringify(f_(t));return F.useMemo(()=>d_(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function eO(n,e,t,r){tt(Kc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=F.useContext(Ni),{matches:c}=F.useContext(Oi),f=c[c.length-1],m=f?f.params:{},p=f?f.pathname:"/",_=f?f.pathnameBase:"/",T=f&&f.route;{let Z=T&&T.path||"";vR(p,!T||Z.endsWith("*")||Z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${Z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Z}"> to <Route path="${Z==="/"?"*":`${Z}/*`}">.`)}let w=bo(),C;C=w;let N=C.pathname||"/",G=N;if(_!=="/"){let Z=_.replace(/^\//,"").split("/");G="/"+N.replace(/^\//,"").split("/").slice(Z.length).join("/")}let V=!o&&t&&t.matches&&t.matches.length>0?t.matches:ta(n,{pathname:G});return xn(T||V!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),xn(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),sO(V&&V.map(Z=>Object.assign({},Z,{params:Object.assign({},m,Z.params),pathname:wi([_,s.encodeLocation?s.encodeLocation(Z.pathname).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?_:wi([_,s.encodeLocation?s.encodeLocation(Z.pathnameBase).pathname:Z.pathnameBase])})),c,t,r)}function tO(){let n=cO(),e=xc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=F.createElement(F.Fragment,null,F.createElement("p",null,"💿 Hey developer 👋"),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:o},"ErrorBoundary")," or"," ",F.createElement("code",{style:o},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:s},t):null,c)}var nO=F.createElement(tO,null),rO=class extends F.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?F.createElement(Oi.Provider,{value:this.props.routeContext},F.createElement(y_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function iO({routeContext:n,match:e,children:t}){let r=F.useContext(wo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(Oi.Provider,{value:n},t)}function sO(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let m=s.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);tt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,m+1))}let c=!1,f=-1;if(t)for(let m=0;m<s.length;m++){let p=s[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=m),p.route.id){let{loaderData:_,errors:T}=t,w=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!T||T[p.route.id]===void 0);if(p.route.lazy||w){c=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}return s.reduceRight((m,p,_)=>{let T,w=!1,C=null,N=null;t&&(T=o&&p.route.id?o[p.route.id]:void 0,C=p.route.errorElement||nO,c&&(f<0&&_===0?(vR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,N=null):f===_&&(w=!0,N=p.route.hydrateFallbackElement||null)));let G=e.concat(s.slice(0,_+1)),V=()=>{let Y;return T?Y=C:w?Y=N:p.route.Component?Y=F.createElement(p.route.Component,null):p.route.element?Y=p.route.element:Y=m,F.createElement(iO,{match:p,routeContext:{outlet:m,matches:G,isDataRoute:t!=null},children:Y})};return t&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?F.createElement(rO,{location:t.location,revalidation:t.revalidation,component:C,error:T,children:V(),routeContext:{outlet:null,matches:G,isDataRoute:!0}}):V()},null)}function __(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aO(n){let e=F.useContext(wo);return tt(e,__(n)),e}function oO(n){let e=F.useContext(Wc);return tt(e,__(n)),e}function lO(n){let e=F.useContext(Oi);return tt(e,__(n)),e}function v_(n){let e=lO(n),t=e.matches[e.matches.length-1];return tt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function uO(){return v_("useRouteId")}function cO(){var r;let n=F.useContext(y_),e=oO("useRouteError"),t=v_("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function hO(){let{router:n}=aO("useNavigate"),e=v_("useNavigate"),t=F.useRef(!1);return _R(()=>{t.current=!0}),F.useCallback(async(s,o={})=>{xn(t.current,yR),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var Pw={};function vR(n,e,t){!e&&!Pw[n]&&(Pw[n]=!0,xn(!1,t))}var Mw={};function Lw(n,e){!n&&!Mw[e]&&(Mw[e]=!0,console.warn(e))}function fO(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&xn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:F.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&xn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:F.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&xn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:F.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var dO=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function mO({router:n,flushSync:e}){let[t,r]=F.useState(n.state),[s,o]=F.useState(),[c,f]=F.useState({isTransitioning:!1}),[m,p]=F.useState(),[_,T]=F.useState(),[w,C]=F.useState(),N=F.useRef(new Map),G=F.useCallback((se,{deletedFetchers:te,flushSync:oe,viewTransitionOpts:j})=>{se.fetchers.forEach((I,A)=>{I.data!==void 0&&N.current.set(A,I.data)}),te.forEach(I=>N.current.delete(I)),Lw(oe===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let k=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(Lw(j==null||k,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!j||!k){e&&oe?e(()=>r(se)):F.startTransition(()=>r(se));return}if(e&&oe){e(()=>{_&&(m&&m.resolve(),_.skipTransition()),f({isTransitioning:!0,flushSync:!0,currentLocation:j.currentLocation,nextLocation:j.nextLocation})});let I=n.window.document.startViewTransition(()=>{e(()=>r(se))});I.finished.finally(()=>{e(()=>{p(void 0),T(void 0),o(void 0),f({isTransitioning:!1})})}),e(()=>T(I));return}_?(m&&m.resolve(),_.skipTransition(),C({state:se,currentLocation:j.currentLocation,nextLocation:j.nextLocation})):(o(se),f({isTransitioning:!0,flushSync:!1,currentLocation:j.currentLocation,nextLocation:j.nextLocation}))},[n.window,e,_,m]);F.useLayoutEffect(()=>n.subscribe(G),[n,G]),F.useEffect(()=>{c.isTransitioning&&!c.flushSync&&p(new dO)},[c]),F.useEffect(()=>{if(m&&s&&n.window){let se=s,te=m.promise,oe=n.window.document.startViewTransition(async()=>{F.startTransition(()=>r(se)),await te});oe.finished.finally(()=>{p(void 0),T(void 0),o(void 0),f({isTransitioning:!1})}),T(oe)}},[s,m,n.window]),F.useEffect(()=>{m&&s&&t.location.key===s.location.key&&m.resolve()},[m,_,t.location,s]),F.useEffect(()=>{!c.isTransitioning&&w&&(o(w.state),f({isTransitioning:!0,flushSync:!1,currentLocation:w.currentLocation,nextLocation:w.nextLocation}),C(void 0))},[c.isTransitioning,w]);let V=F.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:se=>n.navigate(se),push:(se,te,oe)=>n.navigate(se,{state:te,preventScrollReset:oe==null?void 0:oe.preventScrollReset}),replace:(se,te,oe)=>n.navigate(se,{replace:!0,state:te,preventScrollReset:oe==null?void 0:oe.preventScrollReset})}),[n]),Y=n.basename||"/",Z=F.useMemo(()=>({router:n,navigator:V,static:!1,basename:Y}),[n,V,Y]);return F.createElement(F.Fragment,null,F.createElement(wo.Provider,{value:Z},F.createElement(Wc.Provider,{value:t},F.createElement(gR.Provider,{value:N.current},F.createElement(g_.Provider,{value:c},F.createElement(_O,{basename:Y,location:t.location,navigationType:t.historyAction,navigator:V},F.createElement(pO,{routes:n.routes,future:n.future,state:t})))))),null)}var pO=F.memo(gO);function gO({routes:n,future:e,state:t}){return eO(n,void 0,t,e)}function yO(n){return JN(n.context)}function _O({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){tt(!Kc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),f=F.useMemo(()=>({basename:c,navigator:s,static:o,future:{}}),[c,s,o]);typeof t=="string"&&(t=ba(t));let{pathname:m="/",search:p="",hash:_="",state:T=null,key:w="default"}=t,C=F.useMemo(()=>{let N=ei(m,c);return N==null?null:{location:{pathname:N,search:p,hash:_,state:T,key:w},navigationType:r}},[c,m,p,_,T,w,r]);return xn(C!=null,`<Router basename="${c}"> is not able to match the URL "${m}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:F.createElement(Ni.Provider,{value:f},F.createElement(Od.Provider,{children:e,value:C}))}var jf="get",Uf="application/x-www-form-urlencoded";function kd(n){return n!=null&&typeof n.tagName=="string"}function vO(n){return kd(n)&&n.tagName.toLowerCase()==="button"}function EO(n){return kd(n)&&n.tagName.toLowerCase()==="form"}function TO(n){return kd(n)&&n.tagName.toLowerCase()==="input"}function wO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function bO(n,e){return n.button===0&&(!e||e==="_self")&&!wO(n)}var Rf=null;function SO(){if(Rf===null)try{new FormData(document.createElement("form"),0),Rf=!1}catch{Rf=!0}return Rf}var RO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wg(n){return n!=null&&!RO.has(n)?(xn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Uf}"`),null):n}function AO(n,e){let t,r,s,o,c;if(EO(n)){let f=n.getAttribute("action");r=f?ei(f,e):null,t=n.getAttribute("method")||jf,s=wg(n.getAttribute("enctype"))||Uf,o=new FormData(n)}else if(vO(n)||TO(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(r=m?ei(m,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||jf,s=wg(n.getAttribute("formenctype"))||wg(f.getAttribute("enctype"))||Uf,o=new FormData(f,n),!SO()){let{name:p,type:_,value:T}=n;if(_==="image"){let w=p?`${p}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else p&&o.append(p,T)}}else{if(kd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=jf,r=null,s=Uf,c=n}return o&&s==="text/plain"&&(c=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:c}}function E_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function CO(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function IO(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function xO(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let c=await CO(o,t);return c.links?c.links():[]}return[]}));return kO(r.flat(1).filter(IO).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Vw(n,e,t,r,s,o){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,f=(m,p)=>{var _;return t[p].pathname!==m.pathname||((_=t[p].route.path)==null?void 0:_.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return o==="assets"?e.filter((m,p)=>c(m,p)||f(m,p)):o==="data"?e.filter((m,p)=>{var T;let _=r.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,p)||f(m,p))return!0;if(m.route.shouldRevalidate){let w=m.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function NO(n,e,{includeHydrateFallback:t}={}){return OO(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function OO(n){return[...new Set(n)]}function DO(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function kO(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(DO(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function PO(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function MO(){let n=F.useContext(wo);return E_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function LO(){let n=F.useContext(Wc);return E_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var T_=F.createContext(void 0);T_.displayName="FrameworkContext";function ER(){let n=F.useContext(T_);return E_(n,"You must render this element inside a <HydratedRouter> element"),n}function VO(n,e){let t=F.useContext(T_),[r,s]=F.useState(!1),[o,c]=F.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:p,onMouseLeave:_,onTouchStart:T}=e,w=F.useRef(null);F.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let G=Y=>{Y.forEach(Z=>{c(Z.isIntersecting)})},V=new IntersectionObserver(G,{threshold:.5});return w.current&&V.observe(w.current),()=>{V.disconnect()}}},[n]),F.useEffect(()=>{if(r){let G=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(G)}}},[r]);let C=()=>{s(!0)},N=()=>{s(!1),c(!1)};return t?n!=="intent"?[o,w,{}]:[o,w,{onFocus:ic(f,C),onBlur:ic(m,N),onMouseEnter:ic(p,C),onMouseLeave:ic(_,N),onTouchStart:ic(T,C)}]:[!1,w,{}]}function ic(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function jO({page:n,...e}){let{router:t}=MO(),r=F.useMemo(()=>ta(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?F.createElement(zO,{page:n,matches:r,...e}):null}function UO(n){let{manifest:e,routeModules:t}=ER(),[r,s]=F.useState([]);return F.useEffect(()=>{let o=!1;return xO(n,e,t).then(c=>{o||s(c)}),()=>{o=!0}},[n,e,t]),r}function zO({page:n,matches:e,...t}){let r=bo(),{manifest:s,routeModules:o}=ER(),{loaderData:c,matches:f}=LO(),m=F.useMemo(()=>Vw(n,e,f,s,r,"data"),[n,e,f,s,r]),p=F.useMemo(()=>Vw(n,e,f,s,r,"assets"),[n,e,f,s,r]),_=F.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let C=new Set,N=!1;if(e.forEach(V=>{var Z;let Y=s.routes[V.route.id];!Y||!Y.hasLoader||(!m.some(se=>se.route.id===V.route.id)&&V.route.id in c&&((Z=o[V.route.id])!=null&&Z.shouldRevalidate)||Y.hasClientLoader?N=!0:C.add(V.route.id))}),C.size===0)return[];let G=PO(n);return N&&C.size>0&&G.searchParams.set("_routes",e.filter(V=>C.has(V.route.id)).map(V=>V.route.id).join(",")),[G.pathname+G.search]},[c,r,s,m,e,n,o]),T=F.useMemo(()=>NO(p,s),[p,s]),w=UO(p);return F.createElement(F.Fragment,null,_.map(C=>F.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),T.map(C=>F.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),w.map(({key:C,link:N})=>F.createElement("link",{key:C,...N})))}function FO(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var TR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{TR&&(window.__reactRouterVersion="7.2.0")}catch{}function BO(n,e){return NN({basename:e==null?void 0:e.basename,future:e==null?void 0:e.future,history:eN({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||HO(),routes:n,mapRouteProperties:fO,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function HO(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:qO(n.errors)}),n}function qO(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")t[r]=new ed(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let o=window[s.__subType];if(typeof o=="function")try{let c=new o(s.message);c.stack="",t[r]=c}catch{}}if(t[r]==null){let o=new Error(s.message);o.stack="",t[r]=o}}else t[r]=s;return t}var wR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,w_=F.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:c,state:f,target:m,to:p,preventScrollReset:_,viewTransition:T,...w},C){let{basename:N}=F.useContext(Ni),G=typeof p=="string"&&wR.test(p),V,Y=!1;if(typeof p=="string"&&G&&(V=p,TR))try{let A=new URL(window.location.href),O=p.startsWith("//")?new URL(A.protocol+p):new URL(p),L=ei(O.pathname,N);O.origin===A.origin&&L!=null?p=L+O.search+O.hash:Y=!0}catch{xn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Z=YN(p,{relative:s}),[se,te,oe]=VO(r,w),j=WO(p,{replace:c,state:f,target:m,preventScrollReset:_,relative:s,viewTransition:T});function k(A){e&&e(A),A.defaultPrevented||j(A)}let I=F.createElement("a",{...w,...oe,href:V||Z,onClick:Y||o?e:k,ref:FO(C,te),target:m,"data-discover":!G&&t==="render"?"true":void 0});return se&&!G?F.createElement(F.Fragment,null,I,F.createElement(jO,{page:Z})):I});w_.displayName="Link";var Qg=F.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:c,viewTransition:f,children:m,...p},_){let T=Qc(c,{relative:p.relative}),w=bo(),C=F.useContext(Wc),{navigator:N,basename:G}=F.useContext(Ni),V=C!=null&&ZO(T)&&f===!0,Y=N.encodeLocation?N.encodeLocation(T).pathname:T.pathname,Z=w.pathname,se=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(Z=Z.toLowerCase(),se=se?se.toLowerCase():null,Y=Y.toLowerCase()),se&&G&&(se=ei(se,G)||se);const te=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let oe=Z===Y||!s&&Z.startsWith(Y)&&Z.charAt(te)==="/",j=se!=null&&(se===Y||!s&&se.startsWith(Y)&&se.charAt(Y.length)==="/"),k={isActive:oe,isPending:j,isTransitioning:V},I=oe?e:void 0,A;typeof r=="function"?A=r(k):A=[r,oe?"active":null,j?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let O=typeof o=="function"?o(k):o;return F.createElement(w_,{...p,"aria-current":I,className:A,ref:_,style:O,to:c,viewTransition:f},typeof m=="function"?m(k):m)});Qg.displayName="NavLink";var $O=F.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:c=jf,action:f,onSubmit:m,relative:p,preventScrollReset:_,viewTransition:T,...w},C)=>{let N=YO(),G=XO(f,{relative:p}),V=c.toLowerCase()==="get"?"get":"post",Y=typeof f=="string"&&wR.test(f),Z=se=>{if(m&&m(se),se.defaultPrevented)return;se.preventDefault();let te=se.nativeEvent.submitter,oe=(te==null?void 0:te.getAttribute("formmethod"))||c;N(te||se.currentTarget,{fetcherKey:e,method:oe,navigate:t,replace:s,state:o,relative:p,preventScrollReset:_,viewTransition:T})};return F.createElement("form",{ref:C,method:V,action:G,onSubmit:r?m:Z,...w,"data-discover":!Y&&n==="render"?"true":void 0})});$O.displayName="Form";function GO(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bR(n){let e=F.useContext(wo);return tt(e,GO(n)),e}function WO(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:c}={}){let f=Dd(),m=bo(),p=Qc(n,{relative:o});return F.useCallback(_=>{if(bO(_,e)){_.preventDefault();let T=t!==void 0?t:ma(m)===ma(p);f(n,{replace:T,state:r,preventScrollReset:s,relative:o,viewTransition:c})}},[m,f,p,t,r,e,n,s,o,c])}var KO=0,QO=()=>`__${String(++KO)}__`;function YO(){let{router:n}=bR("useSubmit"),{basename:e}=F.useContext(Ni),t=uO();return F.useCallback(async(r,s={})=>{let{action:o,method:c,encType:f,formData:m,body:p}=AO(r,e);if(s.navigate===!1){let _=s.fetcherKey||QO();await n.fetch(_,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:m,body:p,formMethod:s.method||c,formEncType:s.encType||f,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:m,body:p,formMethod:s.method||c,formEncType:s.encType||f,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function XO(n,{relative:e}={}){let{basename:t}=F.useContext(Ni),r=F.useContext(Oi);tt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Qc(n||".",{relative:e})},c=bo();if(n==null){o.search=c.search;let f=new URLSearchParams(o.search),m=f.getAll("index");if(m.some(_=>_==="")){f.delete("index"),m.filter(T=>T).forEach(T=>f.append("index",T));let _=f.toString();o.search=_?`?${_}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:wi([t,o.pathname])),ma(o)}function ZO(n,e={}){let t=F.useContext(g_);tt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=bR("useViewTransitionState"),s=Qc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=ei(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=ei(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Jf(s.pathname,c)!=null||Jf(s.pathname,o)!=null}new TextEncoder;var JO=aR();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function e2(n){return F.createElement(mO,{flushSync:JO.flushSync,...n})}var bg={exports:{}},Sg,jw;function t2(){if(jw)return Sg;jw=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Sg=n,Sg}var Rg,Uw;function n2(){if(Uw)return Rg;Uw=1;var n=t2();function e(){}function t(){}return t.resetWarningCache=e,Rg=function(){function r(c,f,m,p,_,T){if(T!==n){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}r.isRequired=r;function s(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},Rg}var zw;function r2(){return zw||(zw=1,bg.exports=n2()()),bg.exports}var i2=r2();const ae=c_(i2);function Yg(){return Yg=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Yg.apply(this,arguments)}function s2(n,e){if(n==null)return{};var t=a2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function a2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var b_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=s2(n,["color","size"]);return he.createElement("svg",Yg({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"}))});b_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};b_.displayName="Activity";function Xg(){return Xg=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Xg.apply(this,arguments)}function o2(n,e){if(n==null)return{};var t=l2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function l2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var S_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=o2(n,["color","size"]);return he.createElement("svg",Xg({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("circle",{cx:"12",cy:"12",r:"10"}),he.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),he.createElement("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"}))});S_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};S_.displayName="AlertCircle";function Zg(){return Zg=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Zg.apply(this,arguments)}function u2(n,e){if(n==null)return{};var t=c2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function c2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Nc=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=u2(n,["color","size"]);return he.createElement("svg",Zg({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),he.createElement("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),he.createElement("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"}))});Nc.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};Nc.displayName="AlertTriangle";function Jg(){return Jg=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Jg.apply(this,arguments)}function h2(n,e){if(n==null)return{};var t=f2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function f2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var R_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=h2(n,["color","size"]);return he.createElement("svg",Jg({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),he.createElement("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),he.createElement("line",{x1:"6",y1:"20",x2:"6",y2:"14"}))});R_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};R_.displayName="BarChart2";function ey(){return ey=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ey.apply(this,arguments)}function d2(n,e){if(n==null)return{};var t=m2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function m2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var A_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=d2(n,["color","size"]);return he.createElement("svg",ey({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),he.createElement("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"}))});A_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};A_.displayName="Bell";function ty(){return ty=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ty.apply(this,arguments)}function p2(n,e){if(n==null)return{};var t=g2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function g2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Pd=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=p2(n,["color","size"]);return he.createElement("svg",ty({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),he.createElement("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),he.createElement("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),he.createElement("line",{x1:"3",y1:"10",x2:"21",y2:"10"}))});Pd.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};Pd.displayName="Calendar";function ny(){return ny=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ny.apply(this,arguments)}function y2(n,e){if(n==null)return{};var t=_2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function _2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var C_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=y2(n,["color","size"]);return he.createElement("svg",ny({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("circle",{cx:"12",cy:"12",r:"10"}),he.createElement("polyline",{points:"12 6 12 12 16 14"}))});C_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};C_.displayName="Clock";function ry(){return ry=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ry.apply(this,arguments)}function v2(n,e){if(n==null)return{};var t=E2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function E2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var I_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=v2(n,["color","size"]);return he.createElement("svg",ry({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),he.createElement("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}))});I_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};I_.displayName="DollarSign";function iy(){return iy=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},iy.apply(this,arguments)}function T2(n,e){if(n==null)return{};var t=w2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function w2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var x_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=T2(n,["color","size"]);return he.createElement("svg",iy({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"}))});x_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};x_.displayName="Edit2";function sy(){return sy=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sy.apply(this,arguments)}function b2(n,e){if(n==null)return{};var t=S2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function S2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var N_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=b2(n,["color","size"]);return he.createElement("svg",sy({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),he.createElement("polyline",{points:"14 2 14 8 20 8"}),he.createElement("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),he.createElement("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),he.createElement("polyline",{points:"10 9 9 9 8 9"}))});N_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};N_.displayName="FileText";function ay(){return ay=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ay.apply(this,arguments)}function R2(n,e){if(n==null)return{};var t=A2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function A2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var O_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=R2(n,["color","size"]);return he.createElement("svg",ay({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}))});O_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};O_.displayName="Filter";function oy(){return oy=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},oy.apply(this,arguments)}function C2(n,e){if(n==null)return{};var t=I2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function I2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var D_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=C2(n,["color","size"]);return he.createElement("svg",oy({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),he.createElement("polyline",{points:"9 22 9 12 15 12 15 22"}))});D_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};D_.displayName="Home";function ly(){return ly=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ly.apply(this,arguments)}function x2(n,e){if(n==null)return{};var t=N2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function N2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var k_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=x2(n,["color","size"]);return he.createElement("svg",ly({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),he.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}))});k_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};k_.displayName="Lock";function uy(){return uy=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},uy.apply(this,arguments)}function O2(n,e){if(n==null)return{};var t=D2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function D2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var P_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=O2(n,["color","size"]);return he.createElement("svg",uy({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),he.createElement("polyline",{points:"16 17 21 12 16 7"}),he.createElement("line",{x1:"21",y1:"12",x2:"9",y2:"12"}))});P_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};P_.displayName="LogOut";function cy(){return cy=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cy.apply(this,arguments)}function k2(n,e){if(n==null)return{};var t=P2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function P2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var M_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=k2(n,["color","size"]);return he.createElement("svg",cy({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),he.createElement("polyline",{points:"22,6 12,13 2,6"}))});M_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};M_.displayName="Mail";function hy(){return hy=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hy.apply(this,arguments)}function M2(n,e){if(n==null)return{};var t=L2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function L2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var L_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=M2(n,["color","size"]);return he.createElement("svg",hy({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),he.createElement("circle",{cx:"12",cy:"10",r:"3"}))});L_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};L_.displayName="MapPin";function fy(){return fy=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},fy.apply(this,arguments)}function V2(n,e){if(n==null)return{};var t=j2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function j2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var V_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=V2(n,["color","size"]);return he.createElement("svg",fy({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),he.createElement("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),he.createElement("line",{x1:"3",y1:"18",x2:"21",y2:"18"}))});V_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};V_.displayName="Menu";function dy(){return dy=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},dy.apply(this,arguments)}function U2(n,e){if(n==null)return{};var t=z2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function z2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var j_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=U2(n,["color","size"]);return he.createElement("svg",dy({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}))});j_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};j_.displayName="Moon";function my(){return my=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},my.apply(this,arguments)}function F2(n,e){if(n==null)return{};var t=B2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function B2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Oc=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=F2(n,["color","size"]);return he.createElement("svg",my({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("line",{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"}),he.createElement("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),he.createElement("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),he.createElement("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"}))});Oc.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};Oc.displayName="Package";function py(){return py=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},py.apply(this,arguments)}function H2(n,e){if(n==null)return{};var t=q2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function q2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var U_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=H2(n,["color","size"]);return he.createElement("svg",py({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),he.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))});U_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};U_.displayName="Plus";function gy(){return gy=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},gy.apply(this,arguments)}function $2(n,e){if(n==null)return{};var t=G2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function G2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Md=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=$2(n,["color","size"]);return he.createElement("svg",gy({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("circle",{cx:"12",cy:"12",r:"3"}),he.createElement("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}))});Md.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};Md.displayName="Settings";function yy(){return yy=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},yy.apply(this,arguments)}function W2(n,e){if(n==null)return{};var t=K2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function K2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var z_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=W2(n,["color","size"]);return he.createElement("svg",yy({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),he.createElement("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),he.createElement("path",{d:"M16 10a4 4 0 0 1-8 0"}))});z_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};z_.displayName="ShoppingBag";function _y(){return _y=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_y.apply(this,arguments)}function Q2(n,e){if(n==null)return{};var t=Y2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Y2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var F_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=Q2(n,["color","size"]);return he.createElement("svg",_y({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("circle",{cx:"12",cy:"12",r:"5"}),he.createElement("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),he.createElement("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),he.createElement("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),he.createElement("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),he.createElement("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),he.createElement("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),he.createElement("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),he.createElement("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}))});F_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};F_.displayName="Sun";function vy(){return vy=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},vy.apply(this,arguments)}function X2(n,e){if(n==null)return{};var t=Z2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Z2(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var B_=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=X2(n,["color","size"]);return he.createElement("svg",vy({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"}))});B_.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};B_.displayName="Tool";function Ey(){return Ey=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ey.apply(this,arguments)}function J2(n,e){if(n==null)return{};var t=eD(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function eD(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Ld=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=J2(n,["color","size"]);return he.createElement("svg",Ey({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),he.createElement("circle",{cx:"12",cy:"7",r:"4"}))});Ld.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};Ld.displayName="User";function Ty(){return Ty=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ty.apply(this,arguments)}function tD(n,e){if(n==null)return{};var t=nD(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function nD(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Vd=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=tD(n,["color","size"]);return he.createElement("svg",Ty({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),he.createElement("circle",{cx:"9",cy:"7",r:"4"}),he.createElement("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),he.createElement("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}))});Vd.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};Vd.displayName="Users";function wy(){return wy=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wy.apply(this,arguments)}function rD(n,e){if(n==null)return{};var t=iD(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function iD(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var jd=F.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,c=rD(n,["color","size"]);return he.createElement("svg",wy({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),he.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),he.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))});jd.propTypes={color:ae.string,size:ae.oneOfType([ae.string,ae.number])};jd.displayName="X";const sD=()=>{};var Fw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve=function(n,e){if(!n)throw Hl(e)},Hl=function(n){return new Error("Firebase Database ("+SR.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},aD=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],c=n[t++],f=n[t++],m=((s&7)<<18|(o&63)<<12|(c&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const o=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},H_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],c=s+1<n.length,f=c?n[s+1]:0,m=s+2<n.length,p=m?n[s+2]:0,_=o>>2,T=(o&3)<<4|f>>4;let w=(f&15)<<2|p>>6,C=p&63;m||(C=64,c||(w=64)),r.push(t[_],t[T],t[w],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(RR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],f=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const T=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||f==null||p==null||T==null)throw new oD;const w=o<<2|f>>4;if(r.push(w),p!==64){const C=f<<4&240|p>>2;if(r.push(C),T!==64){const N=p<<6&192|T;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class oD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AR=function(n){const e=RR(n);return H_.encodeByteArray(e,!0)},td=function(n){return AR(n).replace(/\./g,"")},nd=function(n){try{return H_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(n){return CR(void 0,n)}function CR(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!uD(t)||(n[t]=CR(n[t],e[t]));return n}function uD(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=()=>cD().__FIREBASE_DEFAULTS__,fD=()=>{if(typeof process>"u"||typeof Fw>"u")return;const n=Fw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},dD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&nd(n[1]);return e&&JSON.parse(e)},Ud=()=>{try{return sD()||hD()||fD()||dD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},IR=n=>{var e,t;return(t=(e=Ud())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},q_=n=>{const e=IR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},xR=()=>{var n;return(n=Ud())===null||n===void 0?void 0:n.config},NR=n=>{var e;return(e=Ud())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[td(JSON.stringify(t)),td(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function W_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zn())}function mD(){var n;const e=(n=Ud())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function OR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yD(){const n=zn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function _D(){return SR.NODE_ADMIN===!0}function vD(){return!mD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ED(){try{return typeof indexedDB=="object"}catch{return!1}}function TD(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="FirebaseError";class Di extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=wD,Object.setPrototypeOf(this,Di.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yc.prototype.create)}}class Yc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?bD(o,r):"Error",f=`${this.serviceName}: ${c} (${s}).`;return new Di(s,f,r)}}function bD(n,e){return n.replace(SD,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const SD=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(n){return JSON.parse(n)}function Cn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=function(n){let e={},t={},r={},s="";try{const o=n.split(".");e=Dc(nd(o[0])||""),t=Dc(nd(o[1])||""),s=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:s}},RD=function(n){const e=DR(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},AD=function(n){const e=DR(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Dl(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function by(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function rd(n,e,t){const r={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=e.call(t,n[s],s,n));return r}function cs(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],c=e[s];if(Bw(o)&&Bw(c)){if(!cs(o,c))return!1}else if(o!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Bw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function dc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let T=0;T<16;T++)r[T]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let T=0;T<16;T++)r[T]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let T=16;T<80;T++){const w=r[T-3]^r[T-8]^r[T-14]^r[T-16];r[T]=(w<<1|w>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],c=this.chain_[2],f=this.chain_[3],m=this.chain_[4],p,_;for(let T=0;T<80;T++){T<40?T<20?(p=f^o&(c^f),_=1518500249):(p=o^c^f,_=1859775393):T<60?(p=o&c|f&(o|c),_=2400959708):(p=o^c^f,_=3395469782);const w=(s<<5|s>>>27)+p+m+_+r[T]&4294967295;m=f,f=c,c=(o<<30|o>>>2)&4294967295,o=s,s=w}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let s=0;const o=this.buf_;let c=this.inbuf_;for(;s<t;){if(c===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(o[c]=e.charCodeAt(s),++c,++s,c===this.blockSize){this.compress_(o),c=0;break}}else for(;s<t;)if(o[c]=e[s],++c,++s,c===this.blockSize){this.compress_(o),c=0;break}}this.inbuf_=c,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[s]>>o&255,++r;return e}}function ID(n,e){const t=new xD(n,e);return t.subscribe.bind(t)}class xD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ND(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Ag),s.error===void 0&&(s.error=Ag),s.complete===void 0&&(s.complete=Ag);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ND(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ag(){}function OD(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);if(s>=55296&&s<=56319){const o=s-55296;r++,ve(r<n.length,"Surrogate pair missing trail surrogate.");const c=n.charCodeAt(r)-56320;s=65536+(o<<10)+c}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},zd=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(n){return n&&n._delegate?n._delegate:n}class hs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new $_;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MD(e))try{this.getOrInitializeService({instanceIdentifier:oo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oo){return this.instances.has(e)}getOptions(e=oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(o);r===f&&c.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PD(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oo){return this.component?this.component.multipleInstances?e:oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PD(n){return n===oo?void 0:n}function MD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new kD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Qe||(Qe={}));const VD={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},jD=Qe.INFO,UD={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},zD=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=UD[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fd{constructor(e){this.name=e,this._logLevel=jD,this._logHandler=zD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const FD=(n,e)=>e.some(t=>n instanceof t);let Hw,qw;function BD(){return Hw||(Hw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HD(){return qw||(qw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kR=new WeakMap,Sy=new WeakMap,PR=new WeakMap,Cg=new WeakMap,K_=new WeakMap;function qD(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(oa(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&kR.set(t,n)}).catch(()=>{}),K_.set(e,n),e}function $D(n){if(Sy.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Sy.set(n,e)}let Ry={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Sy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||PR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return oa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function GD(n){Ry=n(Ry)}function WD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Ig(this),e,...t);return PR.set(r,e.sort?e.sort():[e]),oa(r)}:HD().includes(n)?function(...e){return n.apply(Ig(this),e),oa(kR.get(this))}:function(...e){return oa(n.apply(Ig(this),e))}}function KD(n){return typeof n=="function"?WD(n):(n instanceof IDBTransaction&&$D(n),FD(n,BD())?new Proxy(n,Ry):n)}function oa(n){if(n instanceof IDBRequest)return qD(n);if(Cg.has(n))return Cg.get(n);const e=KD(n);return e!==n&&(Cg.set(n,e),K_.set(e,n)),e}const Ig=n=>K_.get(n);function QD(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const c=indexedDB.open(n,e),f=oa(c);return r&&c.addEventListener("upgradeneeded",m=>{r(oa(c.result),m.oldVersion,m.newVersion,oa(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{o&&m.addEventListener("close",()=>o()),s&&m.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const YD=["get","getKey","getAll","getAllKeys","count"],XD=["put","add","delete","clear"],xg=new Map;function $w(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xg.get(e))return xg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=XD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||YD.includes(t)))return;const o=async function(c,...f){const m=this.transaction(c,s?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),s&&m.done]))[0]};return xg.set(e,o),o}GD(n=>({...n,get:(e,t,r)=>$w(e,t)||n.get(e,t,r),has:(e,t)=>!!$w(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(JD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function JD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ay="@firebase/app",Gw="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new Fd("@firebase/app"),ek="@firebase/app-compat",tk="@firebase/analytics-compat",nk="@firebase/analytics",rk="@firebase/app-check-compat",ik="@firebase/app-check",sk="@firebase/auth",ak="@firebase/auth-compat",ok="@firebase/database",lk="@firebase/data-connect",uk="@firebase/database-compat",ck="@firebase/functions",hk="@firebase/functions-compat",fk="@firebase/installations",dk="@firebase/installations-compat",mk="@firebase/messaging",pk="@firebase/messaging-compat",gk="@firebase/performance",yk="@firebase/performance-compat",_k="@firebase/remote-config",vk="@firebase/remote-config-compat",Ek="@firebase/storage",Tk="@firebase/storage-compat",wk="@firebase/firestore",bk="@firebase/vertexai",Sk="@firebase/firestore-compat",Rk="firebase",Ak="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="[DEFAULT]",Ck={[Ay]:"fire-core",[ek]:"fire-core-compat",[nk]:"fire-analytics",[tk]:"fire-analytics-compat",[ik]:"fire-app-check",[rk]:"fire-app-check-compat",[sk]:"fire-auth",[ak]:"fire-auth-compat",[ok]:"fire-rtdb",[lk]:"fire-data-connect",[uk]:"fire-rtdb-compat",[ck]:"fire-fn",[hk]:"fire-fn-compat",[fk]:"fire-iid",[dk]:"fire-iid-compat",[mk]:"fire-fcm",[pk]:"fire-fcm-compat",[gk]:"fire-perf",[yk]:"fire-perf-compat",[_k]:"fire-rc",[vk]:"fire-rc-compat",[Ek]:"fire-gcs",[Tk]:"fire-gcs-compat",[wk]:"fire-fst",[Sk]:"fire-fst-compat",[bk]:"fire-vertex","fire-js":"fire-js",[Rk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=new Map,Ik=new Map,Iy=new Map;function Ww(n,e){try{n.container.addComponent(e)}catch(t){fs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function pa(n){const e=n.name;if(Iy.has(e))return fs.debug(`There were multiple attempts to register component ${e}.`),!1;Iy.set(e,n);for(const t of id.values())Ww(t,n);for(const t of Ik.values())Ww(t,n);return!0}function $l(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function cr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},la=new Yc("app","Firebase",xk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw la.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=Ak;function MR(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Cy,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw la.create("bad-app-name",{appName:String(s)});if(t||(t=xR()),!t)throw la.create("no-options");const o=id.get(s);if(o){if(cs(t,o.options)&&cs(r,o.config))return o;throw la.create("duplicate-app",{appName:s})}const c=new LD(s);for(const m of Iy.values())c.addComponent(m);const f=new Nk(t,r,c);return id.set(s,f),f}function Bd(n=Cy){const e=id.get(n);if(!e&&n===Cy&&xR())return MR();if(!e)throw la.create("no-app",{appName:n});return e}function Vr(n,e,t){var r;let s=(r=Ck[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fs.warn(f.join(" "));return}pa(new hs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok="firebase-heartbeat-database",Dk=1,kc="firebase-heartbeat-store";let Ng=null;function LR(){return Ng||(Ng=QD(Ok,Dk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(kc)}catch(t){console.warn(t)}}}}).catch(n=>{throw la.create("idb-open",{originalErrorMessage:n.message})})),Ng}async function kk(n){try{const t=(await LR()).transaction(kc),r=await t.objectStore(kc).get(VR(n));return await t.done,r}catch(e){if(e instanceof Di)fs.warn(e.message);else{const t=la.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fs.warn(t.message)}}}async function Kw(n,e){try{const r=(await LR()).transaction(kc,"readwrite");await r.objectStore(kc).put(e,VR(n)),await r.done}catch(t){if(t instanceof Di)fs.warn(t.message);else{const r=la.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});fs.warn(r.message)}}}function VR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=1024,Mk=30;class Lk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jk(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Qw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>Mk){const c=Uk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){fs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Qw(),{heartbeatsToSend:r,unsentEntries:s}=Vk(this._heartbeatsCache.heartbeats),o=td(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return fs.warn(t),""}}}function Qw(){return new Date().toISOString().substring(0,10)}function Vk(n,e=Pk){const t=[];let r=n.slice();for(const s of n){const o=t.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),Yw(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Yw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class jk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ED()?TD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kk(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Kw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Kw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Yw(n){return td(JSON.stringify({version:2,heartbeats:n})).length}function Uk(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(n){pa(new hs("platform-logger",e=>new ZD(e),"PRIVATE")),pa(new hs("heartbeat",e=>new Lk(e),"PRIVATE")),Vr(Ay,Gw,n),Vr(Ay,Gw,"esm2017"),Vr("fire-js","")}zk("");function Q_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function jR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Fk=jR,UR=new Yc("auth","Firebase",jR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=new Fd("@firebase/auth");function Bk(n,...e){sd.logLevel<=Qe.WARN&&sd.warn(`Auth (${Sa}): ${n}`,...e)}function zf(n,...e){sd.logLevel<=Qe.ERROR&&sd.error(`Auth (${Sa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(n,...e){throw Y_(n,...e)}function bi(n,...e){return Y_(n,...e)}function zR(n,e,t){const r=Object.assign(Object.assign({},Fk()),{[e]:t});return new Yc("auth","Firebase",r).create(e,{appName:n.name})}function ua(n){return zR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Y_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return UR.create(n,...e)}function Le(n,e,...t){if(!n)throw Y_(e,...t)}function ss(n){const e="INTERNAL ASSERTION FAILED: "+n;throw zf(e),new Error(e)}function ds(n,e){n||ss(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Hk(){return Xw()==="http:"||Xw()==="https:"}function Xw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Hk()||gD()||"connection"in navigator)?navigator.onLine:!0}function $k(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ds(t>e,"Short delay should be less than long delay!"),this.isMobile=W_()||OR()}get(){return qk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(n,e){ds(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=new Xc(3e4,6e4);function So(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ra(n,e,t,r,s={}){return BR(n,s,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const f=ql(Object.assign({key:n.config.apiKey},c)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:m},o);return pD()||(p.referrerPolicy="no-referrer"),FR.fetch()(HR(n,n.config.apiHost,t,f),p)})}async function BR(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Gk),e);try{const s=new Qk(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Af(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const f=o.ok?c.errorMessage:c.error.message,[m,p]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Af(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Af(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Af(n,"user-disabled",c);const _=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw zR(n,_,p);ti(n,_)}}catch(s){if(s instanceof Di)throw s;ti(n,"network-request-failed",{message:String(s)})}}async function Hd(n,e,t,r,s={}){const o=await Ra(n,e,t,r,s);return"mfaPendingCredential"in o&&ti(n,"multi-factor-auth-required",{_serverResponse:o}),o}function HR(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?X_(n.config,s):`${n.config.apiScheme}://${s}`}function Kk(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Qk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(bi(this.auth,"network-request-failed")),Wk.get())})}}function Af(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=bi(n,e,r);return s.customData._tokenResponse=t,s}function Zw(n){return n!==void 0&&n.enterprise!==void 0}class Yk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Kk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Xk(n,e){return Ra(n,"GET","/v2/recaptchaConfig",So(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zk(n,e){return Ra(n,"POST","/v1/accounts:delete",e)}async function qR(n,e){return Ra(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Jk(n,e=!1){const t=Kt(n),r=await t.getIdToken(e),s=Z_(r);Le(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:_c(Og(s.auth_time)),issuedAtTime:_c(Og(s.iat)),expirationTime:_c(Og(s.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Og(n){return Number(n)*1e3}function Z_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return zf("JWT malformed, contained fewer than 3 sections"),null;try{const s=nd(t);return s?JSON.parse(s):(zf("Failed to decode base64 JWT payload"),null)}catch(s){return zf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Jw(n){const e=Z_(n);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Di&&eP(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function eP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_c(this.lastLoginAt),this.creationTime=_c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Pc(n,qR(t,{idToken:r}));Le(s==null?void 0:s.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?$R(o.providerUserInfo):[],f=rP(n.providerData,c),m=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(f!=null&&f.length),_=m?p:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Ny(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(n,T)}async function nP(n){const e=Kt(n);await ad(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rP(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function $R(n){return n.map(e=>{var{providerId:t}=e,r=Q_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iP(n,e){const t=await BR(n,{},async()=>{const r=ql({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,c=HR(n,s,"/v1/token",`key=${o}`),f=await n._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",FR.fetch()(c,{method:"POST",headers:f,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function sP(n,e){return Ra(n,"POST","/v2/accounts:revokeToken",So(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const t=Jw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await iP(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,c=new Rl;return r&&(Le(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(Le(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(Le(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rl,this.toJSON())}_performRefresh(){return ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(n,e){Le(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class as{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=Q_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ny(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Pc(this,this.stsTokenManager.getToken(this.auth,e));return Le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Jk(this,e)}reload(){return nP(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new as(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ad(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cr(this.auth.app))return Promise.reject(ua(this.auth));const e=await this.getIdToken();return await Pc(this,Zk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,c,f,m,p,_;const T=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(s=t.email)!==null&&s!==void 0?s:void 0,C=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,N=(c=t.photoURL)!==null&&c!==void 0?c:void 0,G=(f=t.tenantId)!==null&&f!==void 0?f:void 0,V=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,Y=(p=t.createdAt)!==null&&p!==void 0?p:void 0,Z=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:se,emailVerified:te,isAnonymous:oe,providerData:j,stsTokenManager:k}=t;Le(se&&k,e,"internal-error");const I=Rl.fromJSON(this.name,k);Le(typeof se=="string",e,"internal-error"),Zs(T,e.name),Zs(w,e.name),Le(typeof te=="boolean",e,"internal-error"),Le(typeof oe=="boolean",e,"internal-error"),Zs(C,e.name),Zs(N,e.name),Zs(G,e.name),Zs(V,e.name),Zs(Y,e.name),Zs(Z,e.name);const A=new as({uid:se,auth:e,email:w,emailVerified:te,displayName:T,isAnonymous:oe,photoURL:N,phoneNumber:C,tenantId:G,stsTokenManager:I,createdAt:Y,lastLoginAt:Z});return j&&Array.isArray(j)&&(A.providerData=j.map(O=>Object.assign({},O))),V&&(A._redirectEventId=V),A}static async _fromIdTokenResponse(e,t,r=!1){const s=new Rl;s.updateFromServerResponse(t);const o=new as({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ad(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Le(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?$R(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),f=new Rl;f.updateFromIdToken(r);const m=new as({uid:s.localId,auth:e,stsTokenManager:f,isAnonymous:c}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Ny(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=new Map;function os(n){ds(n instanceof Function,"Expected a class definition");let e=eb.get(n);return e?(ds(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,eb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}GR.type="NONE";const tb=GR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(n,e,t){return`firebase:${n}:${e}:${t}`}class Al{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Ff(this.userKey,s.apiKey,o),this.fullPersistenceKey=Ff("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?as._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Al(os(tb),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||os(tb);const c=Ff(r,e.config.apiKey,e.name);let f=null;for(const p of t)try{const _=await p._get(c);if(_){const T=as._fromJSON(e,_);p!==o&&(f=T),o=p;break}}catch{}const m=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new Al(o,e,r):(o=m[0],f&&await o._set(c,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(c)}catch{}})),new Al(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZR(e))return"Blackberry";if(JR(e))return"Webos";if(KR(e))return"Safari";if((e.includes("chrome/")||QR(e))&&!e.includes("edge/"))return"Chrome";if(XR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function WR(n=zn()){return/firefox\//i.test(n)}function KR(n=zn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QR(n=zn()){return/crios\//i.test(n)}function YR(n=zn()){return/iemobile/i.test(n)}function XR(n=zn()){return/android/i.test(n)}function ZR(n=zn()){return/blackberry/i.test(n)}function JR(n=zn()){return/webos/i.test(n)}function J_(n=zn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function aP(n=zn()){var e;return J_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oP(){return yD()&&document.documentMode===10}function eA(n=zn()){return J_(n)||XR(n)||JR(n)||ZR(n)||/windows phone/i.test(n)||YR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(n,e=[]){let t;switch(n){case"Browser":t=nb(zn());break;case"Worker":t=`${nb(zn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Sa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((c,f)=>{try{const m=e(o);c(m)}catch(m){f(m)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uP(n,e={}){return Ra(n,"GET","/v2/passwordPolicy",So(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=6;class hP{constructor(e){var t,r,s,o;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:cP,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,c,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(r=m.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(s=m.containsLowercaseLetter)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(o=m.containsUppercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rb(this),this.idTokenSubscription=new rb(this),this.beforeStateQueue=new lP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=os(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Al.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await qR(this,{idToken:e}),r=await as._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(cr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=s==null?void 0:s._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&(m!=null&&m.user)&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ad(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$k()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cr(this.app))return Promise.reject(ua(this));const t=e?Kt(e):null;return t&&Le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cr(this.app)?Promise.reject(ua(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cr(this.app)?Promise.reject(ua(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(os(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uP(this),t=new hP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await sP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&os(e)||this._popupRedirectResolver;Le(t,this,"argument-error"),this.redirectPersistenceManager=await Al.create(this,[os(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(f,this,"internal-error"),f.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,s);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(cr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Bk(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Gl(n){return Kt(n)}class rb{constructor(e){this.auth=e,this.observer=null,this.addObserver=ID(t=>this.observer=t)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dP(n){qd=n}function nA(n){return qd.loadJS(n)}function mP(){return qd.recaptchaEnterpriseScript}function pP(){return qd.gapiScript}function gP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class yP{constructor(){this.enterprise=new _P}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class _P{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const vP="recaptcha-enterprise",rA="NO_RECAPTCHA";class EP{constructor(e){this.type=vP,this.auth=Gl(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,f)=>{Xk(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const p=new Yk(m);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,c(p.siteKey)}}).catch(m=>{f(m)})})}function s(o,c,f){const m=window.grecaptcha;Zw(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:e}).then(p=>{c(p)}).catch(()=>{c(rA)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yP().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(f=>{if(!t&&Zw(window.grecaptcha))s(f,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=mP();m.length!==0&&(m+=f),nA(m).then(()=>{s(f,o,c)}).catch(p=>{c(p)})}}).catch(f=>{c(f)})})}}async function ib(n,e,t,r=!1,s=!1){const o=new EP(n);let c;if(s)c=rA;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,p=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function sb(n,e,t,r,s){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await ib(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await ib(n,e,t,t==="getOobCode");return r(n,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(n,e){const t=$l(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(cs(o,e??{}))return s;ti(s,"already-initialized")}return t.initialize({options:e})}function wP(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(os);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bP(n,e,t){const r=Gl(n);Le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=iA(e),{host:c,port:f}=SP(e),m=f===null?"":`:${f}`,p={url:`${o}//${c}${m}/`},_=Object.freeze({host:c,port:f,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Le(cs(p,r.config.emulator)&&cs(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,RP()}function iA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function SP(n){const e=iA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:ab(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:ab(c)}}}function ab(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function RP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ss("not implemented")}_getIdTokenResponse(e){return ss("not implemented")}_linkToIdToken(e,t){return ss("not implemented")}_getReauthenticationResolver(e){return ss("not implemented")}}async function AP(n,e){return Ra(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP(n,e){return Hd(n,"POST","/v1/accounts:signInWithPassword",So(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IP(n,e){return Hd(n,"POST","/v1/accounts:signInWithEmailLink",So(n,e))}async function xP(n,e){return Hd(n,"POST","/v1/accounts:signInWithEmailLink",So(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends ev{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Mc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Mc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sb(e,t,"signInWithPassword",CP);case"emailLink":return IP(e,{email:this._email,oobCode:this._password});default:ti(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sb(e,r,"signUpPassword",AP);case"emailLink":return xP(e,{idToken:t,email:this._email,oobCode:this._password});default:ti(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(n,e){return Hd(n,"POST","/v1/accounts:signInWithIdp",So(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP="http://localhost";class po extends ev{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new po(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ti("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=Q_(t,["providerId","signInMethod"]);if(!r||!s)return null;const c=new po(r,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Cl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Cl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Cl(e,t)}buildRequest(){const e={requestUri:NP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ql(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DP(n){const e=fc(dc(n)).link,t=e?fc(dc(e)).deep_link_id:null,r=fc(dc(n)).deep_link_id;return(r?fc(dc(r)).link:null)||r||t||e||n}class tv{constructor(e){var t,r,s,o,c,f;const m=fc(dc(e)),p=(t=m.apiKey)!==null&&t!==void 0?t:null,_=(r=m.oobCode)!==null&&r!==void 0?r:null,T=OP((s=m.mode)!==null&&s!==void 0?s:null);Le(p&&_&&T,"argument-error"),this.apiKey=p,this.operation=T,this.code=_,this.continueUrl=(o=m.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=m.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=DP(e);try{return new tv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this.providerId=Wl.PROVIDER_ID}static credential(e,t){return Mc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=tv.parseLink(t);return Le(r,"argument-error"),Mc._fromEmailAndCode(e,r.code,r.tenantId)}}Wl.PROVIDER_ID="password";Wl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends sA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends Zc{constructor(){super("facebook.com")}static credential(e){return po._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return na.credential(e.oauthAccessToken)}catch{return null}}}na.FACEBOOK_SIGN_IN_METHOD="facebook.com";na.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends Zc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return po._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ra.credentialFromTaggedObject(e)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ra.credential(t,r)}catch{return null}}}ra.GOOGLE_SIGN_IN_METHOD="google.com";ra.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends Zc{constructor(){super("github.com")}static credential(e){return po._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ia.credential(e.oauthAccessToken)}catch{return null}}}ia.GITHUB_SIGN_IN_METHOD="github.com";ia.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Zc{constructor(){super("twitter.com")}static credential(e,t){return po._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return sa.credential(t,r)}catch{return null}}}sa.TWITTER_SIGN_IN_METHOD="twitter.com";sa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await as._fromIdTokenResponse(e,r,s),c=ob(r);return new kl({user:o,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=ob(r);return new kl({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function ob(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od extends Di{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,od.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new od(e,t,r,s)}}function aA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?od._fromErrorAndOperation(n,o,e,r):o})}async function kP(n,e,t=!1){const r=await Pc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return kl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PP(n,e,t=!1){const{auth:r}=n;if(cr(r.app))return Promise.reject(ua(r));const s="reauthenticate";try{const o=await Pc(n,aA(r,s,e,n),t);Le(o.idToken,r,"internal-error");const c=Z_(o.idToken);Le(c,r,"internal-error");const{sub:f}=c;return Le(n.uid===f,r,"user-mismatch"),kl._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ti(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oA(n,e,t=!1){if(cr(n.app))return Promise.reject(ua(n));const r="signIn",s=await aA(n,r,e),o=await kl._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function MP(n,e){return oA(Gl(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP(n){const e=Gl(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function VP(n,e,t){return cr(n.app)?Promise.reject(ua(n)):MP(Kt(n),Wl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LP(n),r})}function jP(n,e,t,r){return Kt(n).onIdTokenChanged(e,t,r)}function UP(n,e,t){return Kt(n).beforeAuthStateChanged(e,t)}function zP(n,e,t,r){return Kt(n).onAuthStateChanged(e,t,r)}function FP(n){return Kt(n).signOut()}const ld="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ld,"1"),this.storage.removeItem(ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=1e3,HP=10;class uA extends lA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);oP()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,HP):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},BP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}uA.type="LOCAL";const qP=uA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA extends lA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}cA.type="SESSION";const hA=cA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new $d(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const f=Array.from(c).map(async p=>p(t.origin,o)),m=await $P(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$d.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((f,m)=>{const p=nv("",20);s.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(T){const w=T;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),f(w.data.response);break;default:clearTimeout(_),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(){return window}function WP(n){Si().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(){return typeof Si().WorkerGlobalScope<"u"&&typeof Si().importScripts=="function"}async function KP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function YP(){return fA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="firebaseLocalStorageDb",XP=1,ud="firebaseLocalStorage",mA="fbase_key";class Jc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gd(n,e){return n.transaction([ud],e?"readwrite":"readonly").objectStore(ud)}function ZP(){const n=indexedDB.deleteDatabase(dA);return new Jc(n).toPromise()}function Oy(){const n=indexedDB.open(dA,XP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ud,{keyPath:mA})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(ud)?e(r):(r.close(),await ZP(),e(await Oy()))})})}async function lb(n,e,t){const r=Gd(n,!0).put({[mA]:e,value:t});return new Jc(r).toPromise()}async function JP(n,e){const t=Gd(n,!1).get(e),r=await new Jc(t).toPromise();return r===void 0?null:r.value}function ub(n,e){const t=Gd(n,!0).delete(e);return new Jc(t).toPromise()}const eM=800,tM=3;class pA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Oy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>tM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$d._getInstance(YP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await KP(),!this.activeServiceWorker)return;this.sender=new GP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Oy();return await lb(e,ld,"1"),await ub(e,ld),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>lb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>JP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ub(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Gd(s,!1).getAll();return new Jc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pA.type="LOCAL";const nM=pA;new Xc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(n,e){return e?os(e):(Le(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv extends ev{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Cl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Cl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function iM(n){return oA(n.auth,new rv(n),n.bypassAuthState)}function sM(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),PP(t,new rv(n),n.bypassAuthState)}async function aM(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),kP(t,new rv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iM;case"linkViaPopup":case"linkViaRedirect":return aM;case"reauthViaPopup":case"reauthViaRedirect":return sM;default:ti(this.auth,"internal-error")}}resolve(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=new Xc(2e3,1e4);class Tl extends gA{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Tl.currentPopupAction&&Tl.currentPopupAction.cancel(),Tl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){ds(this.filter.length===1,"Popup operations only handle one event");const e=nv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oM.get())};e()}}Tl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM="pendingRedirect",Bf=new Map;class uM extends gA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Bf.get(this.auth._key());if(!e){try{const r=await cM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Bf.set(this.auth._key(),e)}return this.bypassAuthState||Bf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cM(n,e){const t=dM(e),r=fM(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function hM(n,e){Bf.set(n._key(),e)}function fM(n){return os(n._redirectPersistence)}function dM(n){return Ff(lM,n.config.apiKey,n.name)}async function mM(n,e,t=!1){if(cr(n.app))return Promise.reject(ua(n));const r=Gl(n),s=rM(r,e),c=await new uM(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=10*60*1e3;class gM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!yA(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(bi(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pM&&this.cachedEventUids.clear(),this.cachedEventUids.has(cb(e))}saveEventToCache(e){this.cachedEventUids.add(cb(e)),this.lastProcessedEventTime=Date.now()}}function cb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function yA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function yM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(n,e={}){return Ra(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,EM=/^https?/;async function TM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await _M(n);for(const t of e)try{if(wM(t))return}catch{}ti(n,"unauthorized-domain")}function wM(n){const e=xy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!EM.test(t))return!1;if(vM.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=new Xc(3e4,6e4);function hb(){const n=Si().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function SM(n){return new Promise((e,t)=>{var r,s,o;function c(){hb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hb(),t(bi(n,"network-request-failed"))},timeout:bM.get()})}if(!((s=(r=Si().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Si().gapi)===null||o===void 0)&&o.load)c();else{const f=gP("iframefcb");return Si()[f]=()=>{gapi.load?c():t(bi(n,"network-request-failed"))},nA(`${pP()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw Hf=null,e})}let Hf=null;function RM(n){return Hf=Hf||SM(n),Hf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=new Xc(5e3,15e3),CM="__/auth/iframe",IM="emulator/auth/iframe",xM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OM(n){const e=n.config;Le(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?X_(e,IM):`https://${n.config.authDomain}/${CM}`,r={apiKey:e.apiKey,appName:n.name,v:Sa},s=NM.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${ql(r).slice(1)}`}async function DM(n){const e=await RM(n),t=Si().gapi;return Le(t,n,"internal-error"),e.open({where:document.body,url:OM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xM,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const c=bi(n,"network-request-failed"),f=Si().setTimeout(()=>{o(c)},AM.get());function m(){Si().clearTimeout(f),s(r)}r.ping(m).then(m,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PM=500,MM=600,LM="_blank",VM="http://localhost";class fb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jM(n,e,t,r=PM,s=MM){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const m=Object.assign(Object.assign({},kM),{width:r.toString(),height:s.toString(),top:o,left:c}),p=zn().toLowerCase();t&&(f=QR(p)?LM:t),WR(p)&&(e=e||VM,m.scrollbars="yes");const _=Object.entries(m).reduce((w,[C,N])=>`${w}${C}=${N},`,"");if(aP(p)&&f!=="_self")return UM(e||"",f),new fb(null);const T=window.open(e||"",f,_);Le(T,n,"popup-blocked");try{T.focus()}catch{}return new fb(T)}function UM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="__/auth/handler",FM="emulator/auth/handler",BM=encodeURIComponent("fac");async function db(n,e,t,r,s,o){Le(n.config.authDomain,n,"auth-domain-config-required"),Le(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Sa,eventId:s};if(e instanceof sA){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",by(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))c[_]=T}if(e instanceof Zc){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const m=await n._getAppCheckToken(),p=m?`#${BM}=${encodeURIComponent(m)}`:"";return`${HM(n)}?${ql(f).slice(1)}${p}`}function HM({config:n}){return n.emulator?X_(n,FM):`https://${n.authDomain}/${zM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="webStorageSupport";class qM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hA,this._completeRedirectFn=mM,this._overrideRedirectResult=hM}async _openPopup(e,t,r,s){var o;ds((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await db(e,t,r,xy(),s);return jM(e,c,nv())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await db(e,t,r,xy(),s);return WP(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(ds(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await DM(e),r=new gM(e);return t.register("authEvent",s=>(Le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Dg,{type:Dg},s=>{var o;const c=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Dg];c!==void 0&&t(!!c),ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=TM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eA()||KR()||J_()}}const $M=qM;var mb="@firebase/auth",pb="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KM(n){pa(new hs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=r.options;Le(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tA(n)},p=new fP(r,s,o,m);return wP(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),pa(new hs("auth-internal",e=>{const t=Gl(e.getProvider("auth").getImmediate());return(r=>new GM(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(mb,pb,WM(n)),Vr(mb,pb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=5*60,YM=NR("authIdTokenMaxAge")||QM;let gb=null;const XM=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>YM)return;const s=t==null?void 0:t.token;gb!==s&&(gb=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ZM(n=Bd()){const e=$l(n,"auth");if(e.isInitialized())return e.getImmediate();const t=TP(n,{popupRedirectResolver:$M,persistence:[nM,qP,hA]}),r=NR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=XM(o.toString());UP(t,c,()=>c(t.currentUser)),jP(t,f=>c(f))}}const s=IR("auth");return s&&bP(t,`http://${s}`),t}function JM(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}dP({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=bi("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",JM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KM("Browser");var eL="firebase",tL="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr(eL,tL,"app");var yb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ca,_A;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function A(){}A.prototype=I.prototype,k.D=I.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(O,L,B){for(var D=Array(arguments.length-2),St=2;St<arguments.length;St++)D[St-2]=arguments[St];return I.prototype[L].apply(O,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,I,A){A||(A=0);var O=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)O[L]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(L=0;16>L;++L)O[L]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=k.g[0],A=k.g[1],L=k.g[2];var B=k.g[3],D=I+(B^A&(L^B))+O[0]+3614090360&4294967295;I=A+(D<<7&4294967295|D>>>25),D=B+(L^I&(A^L))+O[1]+3905402710&4294967295,B=I+(D<<12&4294967295|D>>>20),D=L+(A^B&(I^A))+O[2]+606105819&4294967295,L=B+(D<<17&4294967295|D>>>15),D=A+(I^L&(B^I))+O[3]+3250441966&4294967295,A=L+(D<<22&4294967295|D>>>10),D=I+(B^A&(L^B))+O[4]+4118548399&4294967295,I=A+(D<<7&4294967295|D>>>25),D=B+(L^I&(A^L))+O[5]+1200080426&4294967295,B=I+(D<<12&4294967295|D>>>20),D=L+(A^B&(I^A))+O[6]+2821735955&4294967295,L=B+(D<<17&4294967295|D>>>15),D=A+(I^L&(B^I))+O[7]+4249261313&4294967295,A=L+(D<<22&4294967295|D>>>10),D=I+(B^A&(L^B))+O[8]+1770035416&4294967295,I=A+(D<<7&4294967295|D>>>25),D=B+(L^I&(A^L))+O[9]+2336552879&4294967295,B=I+(D<<12&4294967295|D>>>20),D=L+(A^B&(I^A))+O[10]+4294925233&4294967295,L=B+(D<<17&4294967295|D>>>15),D=A+(I^L&(B^I))+O[11]+2304563134&4294967295,A=L+(D<<22&4294967295|D>>>10),D=I+(B^A&(L^B))+O[12]+1804603682&4294967295,I=A+(D<<7&4294967295|D>>>25),D=B+(L^I&(A^L))+O[13]+4254626195&4294967295,B=I+(D<<12&4294967295|D>>>20),D=L+(A^B&(I^A))+O[14]+2792965006&4294967295,L=B+(D<<17&4294967295|D>>>15),D=A+(I^L&(B^I))+O[15]+1236535329&4294967295,A=L+(D<<22&4294967295|D>>>10),D=I+(L^B&(A^L))+O[1]+4129170786&4294967295,I=A+(D<<5&4294967295|D>>>27),D=B+(A^L&(I^A))+O[6]+3225465664&4294967295,B=I+(D<<9&4294967295|D>>>23),D=L+(I^A&(B^I))+O[11]+643717713&4294967295,L=B+(D<<14&4294967295|D>>>18),D=A+(B^I&(L^B))+O[0]+3921069994&4294967295,A=L+(D<<20&4294967295|D>>>12),D=I+(L^B&(A^L))+O[5]+3593408605&4294967295,I=A+(D<<5&4294967295|D>>>27),D=B+(A^L&(I^A))+O[10]+38016083&4294967295,B=I+(D<<9&4294967295|D>>>23),D=L+(I^A&(B^I))+O[15]+3634488961&4294967295,L=B+(D<<14&4294967295|D>>>18),D=A+(B^I&(L^B))+O[4]+3889429448&4294967295,A=L+(D<<20&4294967295|D>>>12),D=I+(L^B&(A^L))+O[9]+568446438&4294967295,I=A+(D<<5&4294967295|D>>>27),D=B+(A^L&(I^A))+O[14]+3275163606&4294967295,B=I+(D<<9&4294967295|D>>>23),D=L+(I^A&(B^I))+O[3]+4107603335&4294967295,L=B+(D<<14&4294967295|D>>>18),D=A+(B^I&(L^B))+O[8]+1163531501&4294967295,A=L+(D<<20&4294967295|D>>>12),D=I+(L^B&(A^L))+O[13]+2850285829&4294967295,I=A+(D<<5&4294967295|D>>>27),D=B+(A^L&(I^A))+O[2]+4243563512&4294967295,B=I+(D<<9&4294967295|D>>>23),D=L+(I^A&(B^I))+O[7]+1735328473&4294967295,L=B+(D<<14&4294967295|D>>>18),D=A+(B^I&(L^B))+O[12]+2368359562&4294967295,A=L+(D<<20&4294967295|D>>>12),D=I+(A^L^B)+O[5]+4294588738&4294967295,I=A+(D<<4&4294967295|D>>>28),D=B+(I^A^L)+O[8]+2272392833&4294967295,B=I+(D<<11&4294967295|D>>>21),D=L+(B^I^A)+O[11]+1839030562&4294967295,L=B+(D<<16&4294967295|D>>>16),D=A+(L^B^I)+O[14]+4259657740&4294967295,A=L+(D<<23&4294967295|D>>>9),D=I+(A^L^B)+O[1]+2763975236&4294967295,I=A+(D<<4&4294967295|D>>>28),D=B+(I^A^L)+O[4]+1272893353&4294967295,B=I+(D<<11&4294967295|D>>>21),D=L+(B^I^A)+O[7]+4139469664&4294967295,L=B+(D<<16&4294967295|D>>>16),D=A+(L^B^I)+O[10]+3200236656&4294967295,A=L+(D<<23&4294967295|D>>>9),D=I+(A^L^B)+O[13]+681279174&4294967295,I=A+(D<<4&4294967295|D>>>28),D=B+(I^A^L)+O[0]+3936430074&4294967295,B=I+(D<<11&4294967295|D>>>21),D=L+(B^I^A)+O[3]+3572445317&4294967295,L=B+(D<<16&4294967295|D>>>16),D=A+(L^B^I)+O[6]+76029189&4294967295,A=L+(D<<23&4294967295|D>>>9),D=I+(A^L^B)+O[9]+3654602809&4294967295,I=A+(D<<4&4294967295|D>>>28),D=B+(I^A^L)+O[12]+3873151461&4294967295,B=I+(D<<11&4294967295|D>>>21),D=L+(B^I^A)+O[15]+530742520&4294967295,L=B+(D<<16&4294967295|D>>>16),D=A+(L^B^I)+O[2]+3299628645&4294967295,A=L+(D<<23&4294967295|D>>>9),D=I+(L^(A|~B))+O[0]+4096336452&4294967295,I=A+(D<<6&4294967295|D>>>26),D=B+(A^(I|~L))+O[7]+1126891415&4294967295,B=I+(D<<10&4294967295|D>>>22),D=L+(I^(B|~A))+O[14]+2878612391&4294967295,L=B+(D<<15&4294967295|D>>>17),D=A+(B^(L|~I))+O[5]+4237533241&4294967295,A=L+(D<<21&4294967295|D>>>11),D=I+(L^(A|~B))+O[12]+1700485571&4294967295,I=A+(D<<6&4294967295|D>>>26),D=B+(A^(I|~L))+O[3]+2399980690&4294967295,B=I+(D<<10&4294967295|D>>>22),D=L+(I^(B|~A))+O[10]+4293915773&4294967295,L=B+(D<<15&4294967295|D>>>17),D=A+(B^(L|~I))+O[1]+2240044497&4294967295,A=L+(D<<21&4294967295|D>>>11),D=I+(L^(A|~B))+O[8]+1873313359&4294967295,I=A+(D<<6&4294967295|D>>>26),D=B+(A^(I|~L))+O[15]+4264355552&4294967295,B=I+(D<<10&4294967295|D>>>22),D=L+(I^(B|~A))+O[6]+2734768916&4294967295,L=B+(D<<15&4294967295|D>>>17),D=A+(B^(L|~I))+O[13]+1309151649&4294967295,A=L+(D<<21&4294967295|D>>>11),D=I+(L^(A|~B))+O[4]+4149444226&4294967295,I=A+(D<<6&4294967295|D>>>26),D=B+(A^(I|~L))+O[11]+3174756917&4294967295,B=I+(D<<10&4294967295|D>>>22),D=L+(I^(B|~A))+O[2]+718787259&4294967295,L=B+(D<<15&4294967295|D>>>17),D=A+(B^(L|~I))+O[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,k.g[2]=k.g[2]+L&4294967295,k.g[3]=k.g[3]+B&4294967295}r.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var A=I-this.blockSize,O=this.B,L=this.h,B=0;B<I;){if(L==0)for(;B<=A;)s(this,k,B),B+=this.blockSize;if(typeof k=="string"){for(;B<I;)if(O[L++]=k.charCodeAt(B++),L==this.blockSize){s(this,O),L=0;break}}else for(;B<I;)if(O[L++]=k[B++],L==this.blockSize){s(this,O),L=0;break}}this.h=L,this.o+=I},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var A=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=A&255,A/=256;for(this.u(k),k=Array(16),I=A=0;4>I;++I)for(var O=0;32>O;O+=8)k[A++]=this.g[I]>>>O&255;return k};function o(k,I){var A=f;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=I(k)}function c(k,I){this.h=I;for(var A=[],O=!0,L=k.length-1;0<=L;L--){var B=k[L]|0;O&&B==I||(A[L]=B,O=!1)}this.g=A}var f={};function m(k){return-128<=k&&128>k?o(k,function(I){return new c([I|0],0>I?-1:0)}):new c([k|0],0>k?-1:0)}function p(k){if(isNaN(k)||!isFinite(k))return T;if(0>k)return V(p(-k));for(var I=[],A=1,O=0;k>=A;O++)I[O]=k/A|0,A*=4294967296;return new c(I,0)}function _(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return V(_(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=p(Math.pow(I,8)),O=T,L=0;L<k.length;L+=8){var B=Math.min(8,k.length-L),D=parseInt(k.substring(L,L+B),I);8>B?(B=p(Math.pow(I,B)),O=O.j(B).add(p(D))):(O=O.j(A),O=O.add(p(D)))}return O}var T=m(0),w=m(1),C=m(16777216);n=c.prototype,n.m=function(){if(G(this))return-V(this).m();for(var k=0,I=1,A=0;A<this.g.length;A++){var O=this.i(A);k+=(0<=O?O:4294967296+O)*I,I*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(N(this))return"0";if(G(this))return"-"+V(this).toString(k);for(var I=p(Math.pow(k,6)),A=this,O="";;){var L=te(A,I).g;A=Y(A,L.j(I));var B=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=L,N(A))return B+O;for(;6>B.length;)B="0"+B;O=B+O}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function N(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function G(k){return k.h==-1}n.l=function(k){return k=Y(this,k),G(k)?-1:N(k)?0:1};function V(k){for(var I=k.g.length,A=[],O=0;O<I;O++)A[O]=~k.g[O];return new c(A,~k.h).add(w)}n.abs=function(){return G(this)?V(this):this},n.add=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],O=0,L=0;L<=I;L++){var B=O+(this.i(L)&65535)+(k.i(L)&65535),D=(B>>>16)+(this.i(L)>>>16)+(k.i(L)>>>16);O=D>>>16,B&=65535,D&=65535,A[L]=D<<16|B}return new c(A,A[A.length-1]&-2147483648?-1:0)};function Y(k,I){return k.add(V(I))}n.j=function(k){if(N(this)||N(k))return T;if(G(this))return G(k)?V(this).j(V(k)):V(V(this).j(k));if(G(k))return V(this.j(V(k)));if(0>this.l(C)&&0>k.l(C))return p(this.m()*k.m());for(var I=this.g.length+k.g.length,A=[],O=0;O<2*I;O++)A[O]=0;for(O=0;O<this.g.length;O++)for(var L=0;L<k.g.length;L++){var B=this.i(O)>>>16,D=this.i(O)&65535,St=k.i(L)>>>16,xt=k.i(L)&65535;A[2*O+2*L]+=D*xt,Z(A,2*O+2*L),A[2*O+2*L+1]+=B*xt,Z(A,2*O+2*L+1),A[2*O+2*L+1]+=D*St,Z(A,2*O+2*L+1),A[2*O+2*L+2]+=B*St,Z(A,2*O+2*L+2)}for(O=0;O<I;O++)A[O]=A[2*O+1]<<16|A[2*O];for(O=I;O<2*I;O++)A[O]=0;return new c(A,0)};function Z(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function se(k,I){this.g=k,this.h=I}function te(k,I){if(N(I))throw Error("division by zero");if(N(k))return new se(T,T);if(G(k))return I=te(V(k),I),new se(V(I.g),V(I.h));if(G(I))return I=te(k,V(I)),new se(V(I.g),I.h);if(30<k.g.length){if(G(k)||G(I))throw Error("slowDivide_ only works with positive integers.");for(var A=w,O=I;0>=O.l(k);)A=oe(A),O=oe(O);var L=j(A,1),B=j(O,1);for(O=j(O,2),A=j(A,2);!N(O);){var D=B.add(O);0>=D.l(k)&&(L=L.add(A),B=D),O=j(O,1),A=j(A,1)}return I=Y(k,L.j(I)),new se(L,I)}for(L=T;0<=k.l(I);){for(A=Math.max(1,Math.floor(k.m()/I.m())),O=Math.ceil(Math.log(A)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),B=p(A),D=B.j(I);G(D)||0<D.l(k);)A-=O,B=p(A),D=B.j(I);N(B)&&(B=w),L=L.add(B),k=Y(k,D)}return new se(L,k)}n.A=function(k){return te(this,k).h},n.and=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],O=0;O<I;O++)A[O]=this.i(O)&k.i(O);return new c(A,this.h&k.h)},n.or=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],O=0;O<I;O++)A[O]=this.i(O)|k.i(O);return new c(A,this.h|k.h)},n.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],O=0;O<I;O++)A[O]=this.i(O)^k.i(O);return new c(A,this.h^k.h)};function oe(k){for(var I=k.g.length+1,A=[],O=0;O<I;O++)A[O]=k.i(O)<<1|k.i(O-1)>>>31;return new c(A,k.h)}function j(k,I){var A=I>>5;I%=32;for(var O=k.g.length-A,L=[],B=0;B<O;B++)L[B]=0<I?k.i(B+A)>>>I|k.i(B+A+1)<<32-I:k.i(B+A);return new c(L,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_A=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=_,ca=c}).apply(typeof yb<"u"?yb:typeof self<"u"?self:typeof window<"u"?window:{});var Cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vA,mc,EA,qf,Dy,TA,wA,bA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cf=="object"&&Cf];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function s(h,y){if(y)e:{var v=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var $=h[R];if(!($ in v))break e;v=v[$]}h=h[h.length-1],R=v[h],y=y(R),y!=R&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function o(h,y){h instanceof String&&(h+="");var v=0,R=!1,$={next:function(){if(!R&&v<h.length){var X=v++;return{value:y(X,h[X]),done:!1}}return R=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}s("Array.prototype.values",function(h){return h||function(){return o(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function m(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,v){return h.call.apply(h.bind,arguments)}function T(h,y,v){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,R),h.apply(y,$)}}return function(){return h.apply(y,arguments)}}function w(h,y,v){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,w.apply(null,arguments)}function C(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var R=v.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function N(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(R,$,X){for(var de=Array(arguments.length-2),it=2;it<arguments.length;it++)de[it-2]=arguments[it];return y.prototype[$].apply(R,de)}}function G(h){const y=h.length;if(0<y){const v=Array(y);for(let R=0;R<y;R++)v[R]=h[R];return v}return[]}function V(h,y){for(let v=1;v<arguments.length;v++){const R=arguments[v];if(m(R)){const $=h.length||0,X=R.length||0;h.length=$+X;for(let de=0;de<X;de++)h[$+de]=R[de]}else h.push(R)}}class Y{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Z(h){return/^[\s\xa0]*$/.test(h)}function se(){var h=f.navigator;return h&&(h=h.userAgent)?h:""}function te(h){return te[" "](h),h}te[" "]=function(){};var oe=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function j(h,y,v){for(const R in h)y.call(v,h[R],R,h)}function k(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function I(h){const y={};for(const v in h)y[v]=h[v];return y}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(h,y){let v,R;for(let $=1;$<arguments.length;$++){R=arguments[$];for(v in R)h[v]=R[v];for(let X=0;X<A.length;X++)v=A[X],Object.prototype.hasOwnProperty.call(R,v)&&(h[v]=R[v])}}function L(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function B(h){f.setTimeout(()=>{throw h},0)}function D(){var h=We;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class St{constructor(){this.h=this.g=null}add(y,v){const R=xt.get();R.set(y,v),this.h?this.h.next=R:this.g=R,this.h=R}}var xt=new Y(()=>new fe,h=>h.reset());class fe{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let De,Ce=!1,We=new St,M=()=>{const h=f.Promise.resolve(void 0);De=()=>{h.then(ue)}};var ue=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(v){B(v)}var y=xt;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}Ce=!1};function be(){this.s=this.s,this.C=this.C}be.prototype.s=!1,be.prototype.ma=function(){this.s||(this.s=!0,this.N())},be.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};f.addEventListener("test",v,y),f.removeEventListener("test",v,y)}catch{}return h}();function Ue(h,y){if(pe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(oe){e:{try{te(y.nodeName);var $=!0;break e}catch{}$=!1}$||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Me[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ue.aa.h.call(this)}}N(Ue,pe);var Me={2:"touch",3:"pen",4:"mouse"};Ue.prototype.h=function(){Ue.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ut="closure_listenable_"+(1e6*Math.random()|0),nt=0;function Lt(h,y,v,R,$){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!R,this.ha=$,this.key=++nt,this.da=this.fa=!1}function ze(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function zt(h){this.src=h,this.g={},this.h=0}zt.prototype.add=function(h,y,v,R,$){var X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);var de=Wn(h,y,R,$);return-1<de?(y=h[de],v||(y.fa=!1)):(y=new Lt(y,this.src,X,!!R,$),y.fa=v,h.push(y)),y};function mr(h,y){var v=y.type;if(v in h.g){var R=h.g[v],$=Array.prototype.indexOf.call(R,y,void 0),X;(X=0<=$)&&Array.prototype.splice.call(R,$,1),X&&(ze(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Wn(h,y,v,R){for(var $=0;$<h.length;++$){var X=h[$];if(!X.da&&X.listener==y&&X.capture==!!v&&X.ha==R)return $}return-1}var On="closure_lm_"+(1e6*Math.random()|0),ri={};function Ur(h,y,v,R,$){if(Array.isArray(y)){for(var X=0;X<y.length;X++)Ur(h,y[X],v,R,$);return null}return v=bs(v),h&&h[Ut]?h.K(y,v,p(R)?!!R.capture:!1,$):vs(h,y,v,!1,R,$)}function vs(h,y,v,R,$,X){if(!y)throw Error("Invalid event type");var de=p($)?!!$.capture:!!$,it=Fr(h);if(it||(h[On]=it=new zt(h)),v=it.add(y,v,R,de,X),v.proxy)return v;if(R=Es(),v.proxy=R,R.src=h,R.listener=v,h.addEventListener)ye||($=de),$===void 0&&($=!1),h.addEventListener(y.toString(),R,$);else if(h.attachEvent)h.attachEvent(ws(y.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Es(){function h(v){return y.call(h.src,h.listener,v)}const y=zr;return h}function Ts(h,y,v,R,$){if(Array.isArray(y))for(var X=0;X<y.length;X++)Ts(h,y[X],v,R,$);else R=p(R)?!!R.capture:!!R,v=bs(v),h&&h[Ut]?(h=h.i,y=String(y).toString(),y in h.g&&(X=h.g[y],v=Wn(X,v,R,$),-1<v&&(ze(X[v]),Array.prototype.splice.call(X,v,1),X.length==0&&(delete h.g[y],h.h--)))):h&&(h=Fr(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Wn(y,v,R,$)),(v=-1<h?y[h]:null)&&Pi(v))}function Pi(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ut])mr(y.i,h);else{var v=h.type,R=h.proxy;y.removeEventListener?y.removeEventListener(v,R,h.capture):y.detachEvent?y.detachEvent(ws(v),R):y.addListener&&y.removeListener&&y.removeListener(R),(v=Fr(y))?(mr(v,h),v.h==0&&(v.src=null,y[On]=null)):ze(h)}}}function ws(h){return h in ri?ri[h]:ri[h]="on"+h}function zr(h,y){if(h.da)h=!0;else{y=new Ue(y,this);var v=h.listener,R=h.ha||h.src;h.fa&&Pi(h),h=v.call(R,y)}return h}function Fr(h){return h=h[On],h instanceof zt?h:null}var Tn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bs(h){return typeof h=="function"?h:(h[Tn]||(h[Tn]=function(y){return h.handleEvent(y)}),h[Tn])}function vt(){be.call(this),this.i=new zt(this),this.M=this,this.F=null}N(vt,be),vt.prototype[Ut]=!0,vt.prototype.removeEventListener=function(h,y,v,R){Ts(this,h,y,v,R)};function Et(h,y){var v,R=h.F;if(R)for(v=[];R;R=R.F)v.push(R);if(h=h.M,R=y.type||y,typeof y=="string")y=new pe(y,h);else if(y instanceof pe)y.target=y.target||h;else{var $=y;y=new pe(R,h),O(y,$)}if($=!0,v)for(var X=v.length-1;0<=X;X--){var de=y.g=v[X];$=pr(de,R,!0,y)&&$}if(de=y.g=h,$=pr(de,R,!0,y)&&$,$=pr(de,R,!1,y)&&$,v)for(X=0;X<v.length;X++)de=y.g=v[X],$=pr(de,R,!1,y)&&$}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],R=0;R<v.length;R++)ze(v[R]);delete h.g[y],h.h--}}this.F=null},vt.prototype.K=function(h,y,v,R){return this.i.add(String(h),y,!1,v,R)},vt.prototype.L=function(h,y,v,R){return this.i.add(String(h),y,!0,v,R)};function pr(h,y,v,R){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var $=!0,X=0;X<y.length;++X){var de=y[X];if(de&&!de.da&&de.capture==v){var it=de.listener,sn=de.ha||de.src;de.fa&&mr(h.i,de),$=it.call(sn,R)!==!1&&$}}return $&&!R.defaultPrevented}function Ss(h,y,v){if(typeof h=="function")v&&(h=w(h,v));else if(h&&typeof h.handleEvent=="function")h=w(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:f.setTimeout(h,y||0)}function xa(h){h.g=Ss(()=>{h.g=null,h.i&&(h.i=!1,xa(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class gr extends be{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:xa(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ii(h){be.call(this),this.h=h,this.g={}}N(ii,be);var Br=[];function rn(h){j(h.g,function(y,v){this.g.hasOwnProperty(v)&&Pi(y)},h),h.g={}}ii.prototype.N=function(){ii.aa.N.call(this),rn(this)},ii.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Na=f.JSON.stringify,er=f.JSON.parse,Qt=class{stringify(h){return f.JSON.stringify(h,void 0)}parse(h){return f.JSON.parse(h,void 0)}};function Rs(){}Rs.prototype.h=null;function As(h){return h.h||(h.h=h.i())}function xo(){}var tr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function si(){pe.call(this,"d")}N(si,pe);function Kn(){pe.call(this,"c")}N(Kn,pe);var wn={},nr=null;function Cs(){return nr=nr||new vt}wn.La="serverreachability";function Oa(h){pe.call(this,wn.La,h)}N(Oa,pe);function P(h){const y=Cs();Et(y,new Oa(y))}wn.STAT_EVENT="statevent";function H(h,y){pe.call(this,wn.STAT_EVENT,h),this.stat=y}N(H,pe);function W(h){const y=Cs();Et(y,new H(y,h))}wn.Ma="timingevent";function ce(h,y){pe.call(this,wn.Ma,h),this.size=y}N(ce,pe);function _e(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){h()},y)}function Se(){this.g=!0}Se.prototype.xa=function(){this.g=!1};function ke(h,y,v,R,$,X){h.info(function(){if(h.g)if(X)for(var de="",it=X.split("&"),sn=0;sn<it.length;sn++){var st=it[sn].split("=");if(1<st.length){var dn=st[0];st=st[1];var an=dn.split("_");de=2<=an.length&&an[1]=="type"?de+(dn+"="+st+"&"):de+(dn+"=redacted&")}}else de=null;else de=X;return"XMLHTTP REQ ("+R+") [attempt "+$+"]: "+y+`
`+v+`
`+de})}function Te(h,y,v,R,$,X,de){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+$+"]: "+y+`
`+v+`
`+X+" "+de})}function we(h,y,v,R){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ae(h,v)+(R?" "+R:"")})}function me(h,y){h.info(function(){return"TIMEOUT: "+y})}Se.prototype.info=function(){};function Ae(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var R=v[h];if(!(2>R.length)){var $=R[1];if(Array.isArray($)&&!(1>$.length)){var X=$[0];if(X!="noop"&&X!="stop"&&X!="close")for(var de=1;de<$.length;de++)$[de]=""}}}}return Na(v)}catch{return y}}var xe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nt;function pt(){}N(pt,Rs),pt.prototype.g=function(){return new XMLHttpRequest},pt.prototype.i=function(){return{}},Nt=new pt;function Ye(h,y,v,R){this.j=h,this.i=y,this.l=v,this.R=R||1,this.U=new ii(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ot}function Ot(){this.i=null,this.g="",this.h=!1}var Fn={},rr={};function $t(h,y,v){h.L=1,h.v=Ma(Ft(y)),h.m=v,h.P=!0,Yt(h,null)}function Yt(h,y){h.F=Date.now(),dt(h),h.A=Ft(h.v);var v=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),ji(v.i,"t",R),h.C=0,v=h.j.J,h.h=new Ot,h.g=wh(h.j,v?y:null,!h.m),0<h.O&&(h.M=new gr(w(h.Y,h,h.g),h.O)),y=h.U,v=h.g,R=h.ca;var $="readystatechange";Array.isArray($)||($&&(Br[0]=$.toString()),$=Br);for(var X=0;X<$.length;X++){var de=Ur(v,$[X],R||y.handleEvent,!1,y.h||y);if(!de)break;y.g[de.key]=de}y=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),P(),ke(h.i,h.u,h.A,h.l,h.R,h.m)}Ye.prototype.ca=function(h){h=h.target;const y=this.M;y&&br(h)==3?y.j():this.Y(h)},Ye.prototype.Y=function(h){try{if(h==this.g)e:{const an=br(this.g);var y=this.g.Ba();const Bi=this.g.Z();if(!(3>an)&&(an!=3||this.g&&(this.h.h||this.g.oa()||mh(this.g)))){this.J||an!=4||y==7||(y==8||0>=Bi?P(3):P(2)),Hr(this);var v=this.g.Z();this.X=v;t:if(yr(this)){var R=mh(this.g);h="";var $=R.length,X=br(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mt(this),qe(this);var de="";break t}this.h.i=new f.TextDecoder}for(y=0;y<$;y++)this.h.h=!0,h+=this.h.i.decode(R[y],{stream:!(X&&y==$-1)});R.length=0,this.h.g+=h,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=v==200,Te(this.i,this.u,this.A,this.l,this.R,an,v),this.o){if(this.T&&!this.K){t:{if(this.g){var it,sn=this.g;if((it=sn.g?sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(it)){var st=it;break t}}st=null}if(v=st)we(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hn(this,v);else{this.o=!1,this.s=3,W(12),mt(this),qe(this);break e}}if(this.P){v=!0;let bn;for(;!this.J&&this.C<de.length;)if(bn=Qn(this,de),bn==rr){an==4&&(this.s=4,W(14),v=!1),we(this.i,this.l,null,"[Incomplete Response]");break}else if(bn==Fn){this.s=4,W(15),we(this.i,this.l,de,"[Invalid Chunk]"),v=!1;break}else we(this.i,this.l,bn,null),hn(this,bn);if(yr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||de.length!=0||this.h.h||(this.s=1,W(16),v=!1),this.o=this.o&&v,!v)we(this.i,this.l,de,"[Invalid Chunked Response]"),mt(this),qe(this);else if(0<de.length&&!this.W){this.W=!0;var dn=this.j;dn.g==this&&dn.ba&&!dn.M&&(dn.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Ba(dn),dn.M=!0,W(11))}}else we(this.i,this.l,de,null),hn(this,de);an==4&&mt(this),this.o&&!this.J&&(an==4?vh(this.j,this):(this.o=!1,dt(this)))}else wm(this.g),v==400&&0<de.indexOf("Unknown SID")?(this.s=3,W(12)):(this.s=0,W(13)),mt(this),qe(this)}}}catch{}finally{}};function yr(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Qn(h,y){var v=h.C,R=y.indexOf(`
`,v);return R==-1?rr:(v=Number(y.substring(v,R)),isNaN(v)?Fn:(R+=1,R+v>y.length?rr:(y=y.slice(R,R+v),h.C=R+v,y)))}Ye.prototype.cancel=function(){this.J=!0,mt(this)};function dt(h){h.S=Date.now()+h.I,ai(h,h.I)}function ai(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=_e(w(h.ba,h),y)}function Hr(h){h.B&&(f.clearTimeout(h.B),h.B=null)}Ye.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(me(this.i,this.A),this.L!=2&&(P(),W(17)),mt(this),this.s=2,qe(this)):ai(this,this.S-h)};function qe(h){h.j.G==0||h.J||vh(h.j,h)}function mt(h){Hr(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,rn(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function hn(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||oi(v.h,h))){if(!h.K&&oi(v.h,h)&&v.G==3){try{var R=v.Da.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var $=R;if($[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)Uo(v),Vo(v);else break e;fu(v),W(18)}}else v.za=$[1],0<v.za-v.T&&37500>$[2]&&v.F&&v.v==0&&!v.C&&(v.C=_e(w(v.Za,v),6e3));if(1>=Da(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Fi(v,11)}else if((h.K||v.g==h)&&Uo(v),!Z(y))for($=v.Da.g.parse(y),y=0;y<$.length;y++){let st=$[y];if(v.T=st[0],st=st[1],v.G==2)if(st[0]=="c"){v.K=st[1],v.ia=st[2];const dn=st[3];dn!=null&&(v.la=dn,v.j.info("VER="+v.la));const an=st[4];an!=null&&(v.Aa=an,v.j.info("SVER="+v.Aa));const Bi=st[5];Bi!=null&&typeof Bi=="number"&&0<Bi&&(R=1.5*Bi,v.L=R,v.j.info("backChannelRequestTimeoutMs_="+R)),R=v;const bn=h.g;if(bn){const mi=bn.g?bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mi){var X=R.h;X.g||mi.indexOf("spdy")==-1&&mi.indexOf("quic")==-1&&mi.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Is(X,X.h),X.h=null))}if(R.D){const mu=bn.g?bn.g.getResponseHeader("X-HTTP-Session-Id"):null;mu&&(R.ya=mu,ct(R.I,R.D,mu))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),R=v;var de=h;if(R.qa=Th(R,R.J?R.ia:null,R.W),de.K){vr(R.h,de);var it=de,sn=R.L;sn&&(it.I=sn),it.B&&(Hr(it),dt(it)),R.g=de}else yh(R);0<v.i.length&&jo(v)}else st[0]!="stop"&&st[0]!="close"||Fi(v,7);else v.G==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?Fi(v,7):cu(v):st[0]!="noop"&&v.l&&v.l.ta(st),v.v=0)}}P(4)}catch{}}var Mi=class{constructor(h,y){this.g=h,this.map=y}};function At(h){this.l=h||10,f.PerformanceNavigationTiming?(h=f.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _r(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Da(h){return h.h?1:h.g?h.g.size:0}function oi(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Is(h,y){h.g?h.g.add(y):h.h=y}function vr(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}At.prototype.cancel=function(){if(this.i=Bn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Bn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return G(h.i)}function ch(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var y=[],v=h.length,R=0;R<v;R++)y.push(h[R]);return y}y=[],v=0;for(R in h)y[v++]=h[R];return y}function _m(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const R in h)y[v++]=R;return y}}}function ka(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=_m(h),R=ch(h),$=R.length,X=0;X<$;X++)y.call(void 0,R[X],v&&v[X],h)}var iu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function No(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var R=h[v].indexOf("="),$=null;if(0<=R){var X=h[v].substring(0,R);$=h[v].substring(R+1)}else X=h[v];y(X,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Li(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Li){this.h=h.h,xs(this,h.j),this.o=h.o,this.g=h.g,Pa(this,h.s),this.l=h.l;var y=h.i,v=new li;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Oo(this,v),this.m=h.m}else h&&(y=String(h).match(iu))?(this.h=!1,xs(this,y[1]||"",!0),this.o=Ns(y[2]||""),this.g=Ns(y[3]||"",!0),Pa(this,y[4]),this.l=Ns(y[5]||"",!0),Oo(this,y[6]||"",!0),this.m=Ns(y[7]||"")):(this.h=!1,this.i=new li(null,this.h))}Li.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Er(y,su,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Er(y,su,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Er(v,v.charAt(0)=="/"?au:hh,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Er(v,Tm)),h.join("")};function Ft(h){return new Li(h)}function xs(h,y,v){h.j=v?Ns(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Pa(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function Oo(h,y,v){y instanceof li?(h.i=y,ou(h.i,h.h)):(v||(y=Er(y,Em)),h.i=new li(y,h.h))}function ct(h,y,v){h.i.set(y,v)}function Ma(h){return ct(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ns(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Er(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,vm),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function vm(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var su=/[#\/\?@]/g,hh=/[#\?:]/g,au=/[#\?]/g,Em=/[#\?@]/g,Tm=/#/g;function li(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Tr(h){h.g||(h.g=new Map,h.h=0,h.i&&No(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}n=li.prototype,n.add=function(h,y){Tr(this),this.i=null,h=Ui(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Do(h,y){Tr(h),y=Ui(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Vi(h,y){return Tr(h),y=Ui(h,y),h.g.has(y)}n.forEach=function(h,y){Tr(this),this.g.forEach(function(v,R){v.forEach(function($){h.call(y,$,R,this)},this)},this)},n.na=function(){Tr(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let R=0;R<y.length;R++){const $=h[R];for(let X=0;X<$.length;X++)v.push(y[R])}return v},n.V=function(h){Tr(this);let y=[];if(typeof h=="string")Vi(this,h)&&(y=y.concat(this.g.get(Ui(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},n.set=function(h,y){return Tr(this),this.i=null,h=Ui(this,h),Vi(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function ji(h,y,v){Do(h,y),0<v.length&&(h.i=null,h.g.set(Ui(h,y),G(v)),h.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var R=y[v];const X=encodeURIComponent(String(R)),de=this.V(R);for(R=0;R<de.length;R++){var $=X;de[R]!==""&&($+="="+encodeURIComponent(String(de[R]))),h.push($)}}return this.i=h.join("&")};function Ui(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function ou(h,y){y&&!h.j&&(Tr(h),h.i=null,h.g.forEach(function(v,R){var $=R.toLowerCase();R!=$&&(Do(this,R),ji(this,$,v))},h)),h.j=y}function fh(h,y){const v=new Se;if(f.Image){const R=new Image;R.onload=C(wr,v,"TestLoadImage: loaded",!0,y,R),R.onerror=C(wr,v,"TestLoadImage: error",!1,y,R),R.onabort=C(wr,v,"TestLoadImage: abort",!1,y,R),R.ontimeout=C(wr,v,"TestLoadImage: timeout",!1,y,R),f.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else y(!1)}function La(h,y){const v=new Se,R=new AbortController,$=setTimeout(()=>{R.abort(),wr(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:R.signal}).then(X=>{clearTimeout($),X.ok?wr(v,"TestPingServer: ok",!0,y):wr(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout($),wr(v,"TestPingServer: error",!1,y)})}function wr(h,y,v,R,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),R(v)}catch{}}function Va(){this.g=new Qt}function ui(h,y,v){const R=v||"";try{ka(h,function($,X){let de=$;p($)&&(de=Na($)),y.push(R+X+"="+encodeURIComponent(de))})}catch($){throw y.push(R+"type="+encodeURIComponent("_badmap")),$}}function Os(h){this.l=h.Ub||null,this.j=h.eb||!1}N(Os,Rs),Os.prototype.g=function(){return new zi(this.l,this.j)},Os.prototype.i=function(h){return function(){return h}}({});function zi(h,y){vt.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(zi,vt),n=zi.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,hi(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||f).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ci(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,hi(this)),this.g&&(this.readyState=3,hi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lu(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function lu(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?ci(this):hi(this),this.readyState==3&&lu(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,ci(this))},n.Qa=function(h){this.g&&(this.response=h,ci(this))},n.ga=function(){this.g&&ci(this)};function ci(h){h.readyState=4,h.l=null,h.j=null,h.v=null,hi(h)}n.setRequestHeader=function(h,y){this.u.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function hi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function uu(h){let y="";return j(h,function(v,R){y+=R,y+=":",y+=v,y+=`\r
`}),y}function fn(h,y,v){e:{for(R in v){var R=!1;break e}R=!0}R||(v=uu(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):ct(h,y,v))}function gt(h){vt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(gt,vt);var ko=/^https?$/i,ja=["POST","PUT"];n=gt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,y,v,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nt.g(),this.v=this.o?As(this.o):As(Nt),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(X){dh(this,X);return}if(h=v||"",v=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var $ in R)v.set($,R[$]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())v.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(v.keys()).find(X=>X.toLowerCase()=="content-type"),$=f.FormData&&h instanceof f.FormData,!(0<=Array.prototype.indexOf.call(ja,y,void 0))||R||$||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,de]of v)this.g.setRequestHeader(X,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ua(this),this.u=!0,this.g.send(h),this.u=!1}catch(X){dh(this,X)}};function dh(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,Po(h),fi(h)}function Po(h){h.A||(h.A=!0,Et(h,"complete"),Et(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Et(this,"complete"),Et(this,"abort"),fi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fi(this,!0)),gt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Mo(this):this.bb())},n.bb=function(){Mo(this)};function Mo(h){if(h.h&&typeof c<"u"&&(!h.v[1]||br(h)!=4||h.Z()!=2)){if(h.u&&br(h)==4)Ss(h.Ea,0,h);else if(Et(h,"readystatechange"),br(h)==4){h.h=!1;try{const de=h.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var R;if(R=de===0){var $=String(h.D).match(iu)[1]||null;!$&&f.self&&f.self.location&&($=f.self.location.protocol.slice(0,-1)),R=!ko.test($?$.toLowerCase():"")}v=R}if(v)Et(h,"complete"),Et(h,"success");else{h.m=6;try{var X=2<br(h)?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.Z()+"]",Po(h)}}finally{fi(h)}}}}function fi(h,y){if(h.g){Ua(h);const v=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Et(h,"ready");try{v.onreadystatechange=R}catch{}}}function Ua(h){h.I&&(f.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function br(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<br(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),er(y)}};function mh(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function wm(h){const y={};h=(h.g&&2<=br(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(Z(h[R]))continue;var v=L(h[R]);const $=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const X=y[$]||[];y[$]=X,X.push(v)}k(y,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function za(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Lo(h){this.Aa=0,this.i=[],this.j=new Se,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=za("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=za("baseRetryDelayMs",5e3,h),this.cb=za("retryDelaySeedMs",1e4,h),this.Wa=za("forwardChannelMaxRetries",2,h),this.wa=za("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new At(h&&h.concurrentRequestLimit),this.Da=new Va,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Lo.prototype,n.la=8,n.G=1,n.connect=function(h,y,v,R){W(0),this.W=h,this.H=y||{},v&&R!==void 0&&(this.H.OSID=v,this.H.OAID=R),this.F=this.X,this.I=Th(this,null,this.W),jo(this)};function cu(h){if(ph(h),h.G==3){var y=h.U++,v=Ft(h.I);if(ct(v,"SID",h.K),ct(v,"RID",y),ct(v,"TYPE","terminate"),Fa(h,v),y=new Ye(h,h.j,y),y.L=2,y.v=Ma(Ft(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&f.Image&&(new Image().src=y.v,v=!0),v||(y.g=wh(y.j,null),y.g.ea(y.v)),y.F=Date.now(),dt(y)}Eh(h)}function Vo(h){h.g&&(Ba(h),h.g.cancel(),h.g=null)}function ph(h){Vo(h),h.u&&(f.clearTimeout(h.u),h.u=null),Uo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&f.clearTimeout(h.s),h.s=null)}function jo(h){if(!_r(h.h)&&!h.s){h.s=!0;var y=h.Ga;De||M(),Ce||(De(),Ce=!0),We.add(y,h),h.B=0}}function bm(h,y){return Da(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=_e(w(h.Ga,h,y),du(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const $=new Ye(this,this.j,h);let X=this.o;if(this.S&&(X?(X=I(X),O(X,this.S)):X=this.S),this.m!==null||this.O||($.H=X,X=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var R=this.i[v];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=gh(this,$,y),v=Ft(this.I),ct(v,"RID",h),ct(v,"CVER",22),this.D&&ct(v,"X-HTTP-Session-Id",this.D),Fa(this,v),X&&(this.O?y="headers="+encodeURIComponent(String(uu(X)))+"&"+y:this.m&&fn(v,this.m,X)),Is(this.h,$),this.Ua&&ct(v,"TYPE","init"),this.P?(ct(v,"$req",y),ct(v,"SID","null"),$.T=!0,$t($,v,null)):$t($,v,y),this.G=2}}else this.G==3&&(h?hu(this,h):this.i.length==0||_r(this.h)||hu(this))};function hu(h,y){var v;y?v=y.l:v=h.U++;const R=Ft(h.I);ct(R,"SID",h.K),ct(R,"RID",v),ct(R,"AID",h.T),Fa(h,R),h.m&&h.o&&fn(R,h.m,h.o),v=new Ye(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=gh(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Is(h.h,v),$t(v,R,y)}function Fa(h,y){h.H&&j(h.H,function(v,R){ct(y,R,v)}),h.l&&ka({},function(v,R){ct(y,R,v)})}function gh(h,y,v){v=Math.min(h.i.length,v);var R=h.l?w(h.l.Na,h.l,h):null;e:{var $=h.i;let X=-1;for(;;){const de=["count="+v];X==-1?0<v?(X=$[0].g,de.push("ofs="+X)):X=0:de.push("ofs="+X);let it=!0;for(let sn=0;sn<v;sn++){let st=$[sn].g;const dn=$[sn].map;if(st-=X,0>st)X=Math.max(0,$[sn].g-100),it=!1;else try{ui(dn,de,"req"+st+"_")}catch{R&&R(dn)}}if(it){R=de.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,R}function yh(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;De||M(),Ce||(De(),Ce=!0),We.add(y,h),h.v=0}}function fu(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=_e(w(h.Fa,h),du(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,_h(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=_e(w(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,W(10),Vo(this),_h(this))};function Ba(h){h.A!=null&&(f.clearTimeout(h.A),h.A=null)}function _h(h){h.g=new Ye(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=Ft(h.qa);ct(y,"RID","rpc"),ct(y,"SID",h.K),ct(y,"AID",h.T),ct(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&ct(y,"TO",h.ja),ct(y,"TYPE","xmlhttp"),Fa(h,y),h.m&&h.o&&fn(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=Ma(Ft(y)),v.m=null,v.P=!0,Yt(v,h)}n.Za=function(){this.C!=null&&(this.C=null,Vo(this),fu(this),W(19))};function Uo(h){h.C!=null&&(f.clearTimeout(h.C),h.C=null)}function vh(h,y){var v=null;if(h.g==y){Uo(h),Ba(h),h.g=null;var R=2}else if(oi(h.h,y))v=y.D,vr(h.h,y),R=1;else return;if(h.G!=0){if(y.o)if(R==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var $=h.B;R=Cs(),Et(R,new ce(R,v)),jo(h)}else yh(h);else if($=y.s,$==3||$==0&&0<y.X||!(R==1&&bm(h,y)||R==2&&fu(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),$){case 1:Fi(h,5);break;case 4:Fi(h,10);break;case 3:Fi(h,6);break;default:Fi(h,2)}}}function du(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function Fi(h,y){if(h.j.info("Error code "+y),y==2){var v=w(h.fb,h),R=h.Xa;const $=!R;R=new Li(R||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||xs(R,"https"),Ma(R),$?fh(R.toString(),v):La(R.toString(),v)}else W(2);h.G=0,h.l&&h.l.sa(y),Eh(h),ph(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),W(2)):(this.j.info("Failed to ping google.com"),W(1))};function Eh(h){if(h.G=0,h.ka=[],h.l){const y=Bn(h.h);(y.length!=0||h.i.length!=0)&&(V(h.ka,y),V(h.ka,h.i),h.h.i.length=0,G(h.i),h.i.length=0),h.l.ra()}}function Th(h,y,v){var R=v instanceof Li?Ft(v):new Li(v);if(R.g!="")y&&(R.g=y+"."+R.g),Pa(R,R.s);else{var $=f.location;R=$.protocol,y=y?y+"."+$.hostname:$.hostname,$=+$.port;var X=new Li(null);R&&xs(X,R),y&&(X.g=y),$&&Pa(X,$),v&&(X.l=v),R=X}return v=h.D,y=h.ya,v&&y&&ct(R,v,y),ct(R,"VER",h.la),Fa(h,R),R}function wh(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new gt(new Os({eb:v})):new gt(h.pa),y.Ha(h.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function bh(){}n=bh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function zo(){}zo.prototype.g=function(h,y){return new Hn(h,y)};function Hn(h,y){vt.call(this),this.g=new Lo(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!Z(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!Z(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new di(this)}N(Hn,vt),Hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){cu(this.g)},Hn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=Na(h),h=v);y.i.push(new Mi(y.Ya++,h)),y.G==3&&jo(y)},Hn.prototype.N=function(){this.g.l=null,delete this.j,cu(this.g),delete this.g,Hn.aa.N.call(this)};function Sh(h){si.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}N(Sh,si);function Rh(){Kn.call(this),this.status=1}N(Rh,Kn);function di(h){this.g=h}N(di,bh),di.prototype.ua=function(){Et(this.g,"a")},di.prototype.ta=function(h){Et(this.g,new Sh(h))},di.prototype.sa=function(h){Et(this.g,new Rh)},di.prototype.ra=function(){Et(this.g,"b")},zo.prototype.createWebChannel=zo.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,bA=function(){return new zo},wA=function(){return Cs()},TA=wn,Dy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xe.NO_ERROR=0,xe.TIMEOUT=8,xe.HTTP_ERROR=6,qf=xe,rt.COMPLETE="complete",EA=rt,xo.EventType=tr,tr.OPEN="a",tr.CLOSE="b",tr.ERROR="c",tr.MESSAGE="d",vt.prototype.listen=vt.prototype.K,mc=xo,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,vA=gt}).apply(typeof Cf<"u"?Cf:typeof self<"u"?self:typeof window<"u"?window:{});const _b="@firebase/firestore",vb="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kl="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new Fd("@firebase/firestore");function gl(){return go.logLevel}function Ee(n,...e){if(go.logLevel<=Qe.DEBUG){const t=e.map(iv);go.debug(`Firestore (${Kl}): ${n}`,...t)}}function ms(n,...e){if(go.logLevel<=Qe.ERROR){const t=e.map(iv);go.error(`Firestore (${Kl}): ${n}`,...t)}}function Pl(n,...e){if(go.logLevel<=Qe.WARN){const t=e.map(iv);go.warn(`Firestore (${Kl}): ${n}`,...t)}}function iv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(n="Unexpected state"){const e=`FIRESTORE (${Kl}) INTERNAL ASSERTION FAILED: `+n;throw ms(e),new Error(e)}function _t(n,e){n||Ve()}function je(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Di{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mn.UNAUTHENTICATED))}shutdown(){}}class rL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class iL{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_t(this.o===void 0);let r=this.i;const s=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let o=new Ri;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ri,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const m=o;e.enqueueRetryable(async()=>{await m.promise,await s(this.currentUser)})},f=m=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ri)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t(typeof r.accessToken=="string"),new SA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string"),new Mn(e)}}class sL{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class aL{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new sL(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Eb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oL{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,cr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){_t(this.o===void 0);const r=o=>{o.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.R;return this.R=o.token,Ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Eb(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_t(typeof t.token=="string"),this.R=t.token,new Eb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=lL(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Je(n,e){return n<e?-1:n>e?1:0}function Ml(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=-62135596800,wb=1e6;class un{static now(){return un.fromMillis(Date.now())}static fromDate(e){return un.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*wb);return new un(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Tb)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wb}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Tb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new un(0,0))}static max(){return new Fe(new un(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="__name__";class Ei{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ve(),r===void 0?r=e.length-t:r>e.length-t&&Ve(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ei.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ei?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=Ei.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=Ei.isNumericId(e),s=Ei.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Ei.extractNumericId(e).compare(Ei.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ca.fromString(e.substring(4,e.length-2))}}class Pt extends Ei{construct(e,t,r){return new Pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Pt(t)}static emptyPath(){return new Pt([])}}const uL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends Ei{construct(e,t,r){return new In(e,t,r)}static isValidIdentifier(e){return uL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bb}static keyField(){return new In([bb])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ge(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const f=e[s];if(f==="\\"){if(s+1===e.length)throw new ge(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[s+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ge(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,s+=2}else f==="`"?(c=!c,s++):f!=="."||c?(r+=f,s++):(o(),s++)}if(o(),c)throw new ge(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(t)}static emptyPath(){return new In([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(Pt.fromString(e))}static fromName(e){return new Oe(Pt.fromString(e).popFirst(5))}static empty(){return new Oe(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new Pt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=-1;function cL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Fe.fromTimestamp(r===1e9?new un(t+1,0):new un(t,r));return new ga(s,Oe.empty(),e)}function hL(n){return new ga(n.readTime,n.key,Lc)}class ga{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ga(Fe.min(),Oe.empty(),Lc)}static max(){return new ga(Fe.max(),Oe.empty(),Lc)}}function fL(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Oe.comparator(n.documentKey,e.documentKey),t!==0?t:Je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==dL)throw n;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let s=0,o=0,c=!1;e.forEach(f=>{++s,f.next(()=>{++o,c&&o===s&&t()},m=>r(m))}),c=!0,o===s&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(s=>s?ie.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,s)=>{const o=e.length,c=new Array(o);let f=0;for(let m=0;m<o;m++){const p=m;t(e[p]).next(_=>{c[p]=_,++f,f===o&&r(c)},_=>s(_))}})}static doWhile(e,t){return new ie((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}function pL(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Yl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Wd.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd=-1;function Qd(n){return n==null}function cd(n){return n===0&&1/n==-1/0}function gL(n){return typeof n=="number"&&Number.isInteger(n)&&!cd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="";function yL(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Sb(e)),e=_L(n.get(t),e);return Sb(e)}function _L(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case AA:t+="";break;default:t+=o}}return t}function Sb(n){return n+AA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Aa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class ky{constructor(e,t){this.comparator=e,this.root=t||ha.EMPTY}insert(e,t){return new ky(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ha.BLACK,null,null))}remove(e){return new ky(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ha.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new If(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new If(this.root,e,this.comparator,!1)}getReverseIterator(){return new If(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new If(this.root,e,this.comparator,!0)}},If=class{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ha=class is{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??is.RED,this.left=s??is.EMPTY,this.right=o??is.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new is(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return is.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return is.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,is.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,is.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ve();const e=this.left.check();if(e!==this.right.check())throw Ve();return e+(this.isRed()?0:1)}};ha.EMPTY=null,ha.RED=!0,ha.BLACK=!1;ha.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve()}get value(){throw Ve()}get color(){throw Ve()}get left(){throw Ve()}get right(){throw Ve()}copy(e,t,r,s,o){return this}insert(e,t,r){return new ha(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.comparator=e,this.data=new nn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ab(this.data.getIterator())}getIteratorFrom(e){return new Ab(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cn(this.comparator);return t.data=e,t}}class Ab{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new hr([])}unionWith(e){let t=new cn(In.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new hr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ml(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new IA("Invalid base64 string: "+o):o}}(e);return new Nn(t)}static fromUint8Array(e){const t=function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o}(e);return new Nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nn.EMPTY_BYTE_STRING=new Nn("");const vL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ya(n){if(_t(!!n),typeof n=="string"){let e=0;const t=vL.exec(n);if(_t(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wt(n.seconds),nanos:Wt(n.nanos)}}function Wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function _a(n){return typeof n=="string"?Nn.fromBase64String(n):Nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="server_timestamp",NA="__type__",OA="__previous_value__",DA="__local_write_time__";function sv(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[NA])===null||t===void 0?void 0:t.stringValue)===xA}function Yd(n){const e=n.mapValue.fields[OA];return sv(e)?Yd(e):e}function Vc(n){const e=ya(n.mapValue.fields[DA].timestampValue);return new un(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e,t,r,s,o,c,f,m,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=p}}const jc="(default)";class Uc{constructor(e,t){this.projectId=e,this.database=t||jc}static empty(){return new Uc("","")}get isDefaultDatabase(){return this.database===jc}isEqual(e){return e instanceof Uc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="__type__",TL="__max__",xf={mapValue:{}},PA="__vector__",hd="value";function va(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sv(n)?4:bL(n)?9007199254740991:wL(n)?10:11:Ve()}function Ii(n,e){if(n===e)return!0;const t=va(n);if(t!==va(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vc(n).isEqual(Vc(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=ya(s.timestampValue),f=ya(o.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return _a(s.bytesValue).isEqual(_a(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return Wt(s.geoPointValue.latitude)===Wt(o.geoPointValue.latitude)&&Wt(s.geoPointValue.longitude)===Wt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Wt(s.integerValue)===Wt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=Wt(s.doubleValue),f=Wt(o.doubleValue);return c===f?cd(c)===cd(f):isNaN(c)&&isNaN(f)}return!1}(n,e);case 9:return Ml(n.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return function(s,o){const c=s.mapValue.fields||{},f=o.mapValue.fields||{};if(Rb(c)!==Rb(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!Ii(c[m],f[m])))return!1;return!0}(n,e);default:return Ve()}}function zc(n,e){return(n.values||[]).find(t=>Ii(t,e))!==void 0}function Ll(n,e){if(n===e)return 0;const t=va(n),r=va(e);if(t!==r)return Je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(n.booleanValue,e.booleanValue);case 2:return function(o,c){const f=Wt(o.integerValue||o.doubleValue),m=Wt(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1}(n,e);case 3:return Cb(n.timestampValue,e.timestampValue);case 4:return Cb(Vc(n),Vc(e));case 5:return Je(n.stringValue,e.stringValue);case 6:return function(o,c){const f=_a(o),m=_a(c);return f.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const f=o.split("/"),m=c.split("/");for(let p=0;p<f.length&&p<m.length;p++){const _=Je(f[p],m[p]);if(_!==0)return _}return Je(f.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const f=Je(Wt(o.latitude),Wt(c.latitude));return f!==0?f:Je(Wt(o.longitude),Wt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Ib(n.arrayValue,e.arrayValue);case 10:return function(o,c){var f,m,p,_;const T=o.fields||{},w=c.fields||{},C=(f=T[hd])===null||f===void 0?void 0:f.arrayValue,N=(m=w[hd])===null||m===void 0?void 0:m.arrayValue,G=Je(((p=C==null?void 0:C.values)===null||p===void 0?void 0:p.length)||0,((_=N==null?void 0:N.values)===null||_===void 0?void 0:_.length)||0);return G!==0?G:Ib(C,N)}(n.mapValue,e.mapValue);case 11:return function(o,c){if(o===xf.mapValue&&c===xf.mapValue)return 0;if(o===xf.mapValue)return 1;if(c===xf.mapValue)return-1;const f=o.fields||{},m=Object.keys(f),p=c.fields||{},_=Object.keys(p);m.sort(),_.sort();for(let T=0;T<m.length&&T<_.length;++T){const w=Je(m[T],_[T]);if(w!==0)return w;const C=Ll(f[m[T]],p[_[T]]);if(C!==0)return C}return Je(m.length,_.length)}(n.mapValue,e.mapValue);default:throw Ve()}}function Cb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Je(n,e);const t=ya(n),r=ya(e),s=Je(t.seconds,r.seconds);return s!==0?s:Je(t.nanos,r.nanos)}function Ib(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=Ll(t[s],r[s]);if(o)return o}return Je(t.length,r.length)}function Vl(n){return Py(n)}function Py(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ya(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return _a(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Oe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=Py(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const c of r)o?o=!1:s+=",",s+=`${c}:${Py(t.fields[c])}`;return s+"}"}(n.mapValue):Ve()}function $f(n){switch(va(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yd(n);return e?16+$f(e):16;case 5:return 2*n.stringValue.length;case 6:return _a(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+$f(o),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Aa(r.fields,(o,c)=>{s+=o.length+$f(c)}),s}(n.mapValue);default:throw Ve()}}function xb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function My(n){return!!n&&"integerValue"in n}function av(n){return!!n&&"arrayValue"in n}function Nb(n){return!!n&&"nullValue"in n}function Ob(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Gf(n){return!!n&&"mapValue"in n}function wL(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[kA])===null||t===void 0?void 0:t.stringValue)===PA}function vc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Aa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===TL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Gf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vc(t)}setAll(e){let t=In.emptyPath(),r={},s=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,s),r={},s=[],t=f.popLast()}c?r[f.lastSegment()]=vc(c):s.push(f.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());Gf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Gf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Aa(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Zn(vc(this.value))}}function MA(n){const e=[];return Aa(n.fields,(t,r)=>{const s=new In([t]);if(Gf(r)){const o=MA(r.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)}),new hr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,t,r,s,o,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Ln(e,0,Fe.min(),Fe.min(),Fe.min(),Zn.empty(),0)}static newFoundDocument(e,t,r,s){return new Ln(e,1,t,Fe.min(),r,s,0)}static newNoDocument(e,t){return new Ln(e,2,t,Fe.min(),Fe.min(),Zn.empty(),0)}static newUnknownDocument(e,t){return new Ln(e,3,t,Fe.min(),Fe.min(),Zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t){this.position=e,this.inclusive=t}}function Db(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],c=n.position[s];if(o.field.isKeyField()?r=Oe.comparator(Oe.fromName(c.referenceValue),t.key):r=Ll(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function kb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ii(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t="asc"){this.field=e,this.dir=t}}function SL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{}class tn extends LA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new AL(e,t,r):t==="array-contains"?new xL(e,r):t==="in"?new NL(e,r):t==="not-in"?new OL(e,r):t==="array-contains-any"?new DL(e,r):new tn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new CL(e,r):new IL(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ll(t,this.value)):t!==null&&va(this.value)===va(t)&&this.matchesComparison(Ll(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends LA{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new ni(e,t)}matches(e){return VA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function VA(n){return n.op==="and"}function jA(n){return RL(n)&&VA(n)}function RL(n){for(const e of n.filters)if(e instanceof ni)return!1;return!0}function Ly(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+Vl(n.value);if(jA(n))return n.filters.map(e=>Ly(e)).join(",");{const e=n.filters.map(t=>Ly(t)).join(",");return`${n.op}(${e})`}}function UA(n,e){return n instanceof tn?function(r,s){return s instanceof tn&&r.op===s.op&&r.field.isEqual(s.field)&&Ii(r.value,s.value)}(n,e):n instanceof ni?function(r,s){return s instanceof ni&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,c,f)=>o&&UA(c,s.filters[f]),!0):!1}(n,e):void Ve()}function zA(n){return n instanceof tn?function(t){return`${t.field.canonicalString()} ${t.op} ${Vl(t.value)}`}(n):n instanceof ni?function(t){return t.op.toString()+" {"+t.getFilters().map(zA).join(" ,")+"}"}(n):"Filter"}class AL extends tn{constructor(e,t,r){super(e,t,r),this.key=Oe.fromName(r.referenceValue)}matches(e){const t=Oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class CL extends tn{constructor(e,t){super(e,"in",t),this.keys=FA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class IL extends tn{constructor(e,t){super(e,"not-in",t),this.keys=FA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function FA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Oe.fromName(r.referenceValue))}class xL extends tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return av(t)&&zc(t.arrayValue,this.value)}}class NL extends tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&zc(this.value.arrayValue,t)}}class OL extends tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!zc(this.value.arrayValue,t)}}class DL extends tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!av(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e,t=null,r=[],s=[],o=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=c,this.endAt=f,this.le=null}}function Pb(n,e=null,t=[],r=[],s=null,o=null,c=null){return new kL(n,e,t,r,s,o,c)}function ov(n){const e=je(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ly(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Qd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vl(r)).join(",")),e.le=t}return e.le}function lv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!SL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!UA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!kb(n.startAt,e.startAt)&&kb(n.endAt,e.endAt)}function Vy(n){return Oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,t=null,r=[],s=[],o=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=c,this.startAt=f,this.endAt=m,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function PL(n,e,t,r,s,o,c,f){return new Xl(n,e,t,r,s,o,c,f)}function uv(n){return new Xl(n)}function Mb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function BA(n){return n.collectionGroup!==null}function Ec(n){const e=je(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new cn(In.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(f=f.add(p.field))})}),f})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new Fc(o,r))}),t.has(In.keyField().canonicalString())||e.he.push(new Fc(In.keyField(),r))}return e.he}function Ai(n){const e=je(n);return e.Pe||(e.Pe=ML(e,Ec(n))),e.Pe}function ML(n,e){if(n.limitType==="F")return Pb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Fc(s.field,o)});const t=n.endAt?new fd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new fd(n.startAt.position,n.startAt.inclusive):null;return Pb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function jy(n,e){const t=n.filters.concat([e]);return new Xl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Uy(n,e,t){return new Xl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xd(n,e){return lv(Ai(n),Ai(e))&&n.limitType===e.limitType}function HA(n){return`${ov(Ai(n))}|lt:${n.limitType}`}function yl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>zA(s)).join(", ")}]`),Qd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Vl(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Vl(s)).join(",")),`Target(${r})`}(Ai(n))}; limitType=${n.limitType})`}function Zd(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Oe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of Ec(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(c,f,m){const p=Db(c,f,m);return c.inclusive?p<=0:p<0}(r.startAt,Ec(r),s)||r.endAt&&!function(c,f,m){const p=Db(c,f,m);return c.inclusive?p>=0:p>0}(r.endAt,Ec(r),s))}(n,e)}function LL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qA(n){return(e,t)=>{let r=!1;for(const s of Ec(n)){const o=VL(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function VL(n,e,t){const r=n.field.isKeyField()?Oe.comparator(e.key,t.key):function(o,c,f){const m=c.data.field(o),p=f.data.field(o);return m!==null&&p!==null?Ll(m,p):Ve()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Aa(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return CA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=new nn(Oe.comparator);function ps(){return jL}const $A=new nn(Oe.comparator);function pc(...n){let e=$A;for(const t of n)e=e.insert(t.key,t);return e}function GA(n){let e=$A;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ho(){return Tc()}function WA(){return Tc()}function Tc(){return new Ro(n=>n.toString(),(n,e)=>n.isEqual(e))}const UL=new nn(Oe.comparator),zL=new cn(Oe.comparator);function Xe(...n){let e=zL;for(const t of n)e=e.add(t);return e}const FL=new cn(Je);function BL(){return FL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cd(e)?"-0":e}}function KA(n){return{integerValue:""+n}}function HL(n,e){return gL(e)?KA(e):cv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(){this._=void 0}}function qL(n,e,t){return n instanceof dd?function(s,o){const c={fields:{[NA]:{stringValue:xA},[DA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&sv(o)&&(o=Yd(o)),o&&(c.fields[OA]=o),{mapValue:c}}(t,e):n instanceof Bc?YA(n,e):n instanceof Hc?XA(n,e):function(s,o){const c=QA(s,o),f=Lb(c)+Lb(s.Ie);return My(c)&&My(s.Ie)?KA(f):cv(s.serializer,f)}(n,e)}function $L(n,e,t){return n instanceof Bc?YA(n,e):n instanceof Hc?XA(n,e):t}function QA(n,e){return n instanceof md?function(r){return My(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class dd extends Jd{}class Bc extends Jd{constructor(e){super(),this.elements=e}}function YA(n,e){const t=ZA(e);for(const r of n.elements)t.some(s=>Ii(s,r))||t.push(r);return{arrayValue:{values:t}}}class Hc extends Jd{constructor(e){super(),this.elements=e}}function XA(n,e){let t=ZA(e);for(const r of n.elements)t=t.filter(s=>!Ii(s,r));return{arrayValue:{values:t}}}class md extends Jd{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Lb(n){return Wt(n.integerValue||n.doubleValue)}function ZA(n){return av(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function GL(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Bc&&s instanceof Bc||r instanceof Hc&&s instanceof Hc?Ml(r.elements,s.elements,Ii):r instanceof md&&s instanceof md?Ii(r.Ie,s.Ie):r instanceof dd&&s instanceof dd}(n.transform,e.transform)}class WL{constructor(e,t){this.version=e,this.transformResults=t}}class Zr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zr}static exists(e){return new Zr(void 0,e)}static updateTime(e){return new Zr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class em{}function JA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hv(n.key,Zr.none()):new eh(n.key,n.data,Zr.none());{const t=n.data,r=Zn.empty();let s=new cn(In.comparator);for(let o of e.fields)if(!s.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),s=s.add(o)}return new Ca(n.key,r,new hr(s.toArray()),Zr.none())}}function KL(n,e,t){n instanceof eh?function(s,o,c){const f=s.value.clone(),m=jb(s.fieldTransforms,o,c.transformResults);f.setAll(m),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):n instanceof Ca?function(s,o,c){if(!Wf(s.precondition,o))return void o.convertToUnknownDocument(c.version);const f=jb(s.fieldTransforms,o,c.transformResults),m=o.data;m.setAll(eC(s)),m.setAll(f),o.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,e,t):function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function wc(n,e,t,r){return n instanceof eh?function(o,c,f,m){if(!Wf(o.precondition,c))return f;const p=o.value.clone(),_=Ub(o.fieldTransforms,m,c);return p.setAll(_),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ca?function(o,c,f,m){if(!Wf(o.precondition,c))return f;const p=Ub(o.fieldTransforms,m,c),_=c.data;return _.setAll(eC(o)),_.setAll(p),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),f===null?null:f.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(T=>T.field))}(n,e,t,r):function(o,c,f){return Wf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f}(n,e,t)}function QL(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=QA(r.transform,s||null);o!=null&&(t===null&&(t=Zn.empty()),t.set(r.field,o))}return t||null}function Vb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ml(r,s,(o,c)=>GL(o,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class eh extends em{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ca extends em{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function eC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function jb(n,e,t){const r=new Map;_t(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],c=o.transform,f=e.data.field(o.field);r.set(o.field,$L(c,f,t[s]))}return r}function Ub(n,e,t){const r=new Map;for(const s of n){const o=s.transform,c=t.data.field(s.field);r.set(s.field,qL(o,c,e))}return r}class hv extends em{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YL extends em{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&KL(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=wc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=wc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=WA();return this.mutations.forEach(s=>{const o=e.get(s.key),c=o.overlayedDocument;let f=this.applyToLocalView(c,o.mutatedFields);f=t.has(s.key)?null:f;const m=JA(c,f);m!==null&&r.set(s.key,m),c.isValidDocument()||c.convertToNoDocument(Fe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xe())}isEqual(e){return this.batchId===e.batchId&&Ml(this.mutations,e.mutations,(t,r)=>Vb(t,r))&&Ml(this.baseMutations,e.baseMutations,(t,r)=>Vb(t,r))}}class fv{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){_t(e.mutations.length===r.length);let s=function(){return UL}();const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,r[c].version);return new fv(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var en,ot;function e4(n){switch(n){case ne.OK:return Ve();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ve()}}function tC(n){if(n===void 0)return ms("GRPC error has no .code"),ne.UNKNOWN;switch(n){case en.OK:return ne.OK;case en.CANCELLED:return ne.CANCELLED;case en.UNKNOWN:return ne.UNKNOWN;case en.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case en.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case en.INTERNAL:return ne.INTERNAL;case en.UNAVAILABLE:return ne.UNAVAILABLE;case en.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case en.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case en.NOT_FOUND:return ne.NOT_FOUND;case en.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case en.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case en.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case en.ABORTED:return ne.ABORTED;case en.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case en.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case en.DATA_LOSS:return ne.DATA_LOSS;default:return Ve()}}(ot=en||(en={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=new ca([4294967295,4294967295],0);function zb(n){const e=t4().encode(n),t=new _A;return t.update(e),new Uint8Array(t.digest())}function Fb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ca([t,r],0),new ca([s,o],0)]}class dv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gc(`Invalid padding: ${t}`);if(r<0)throw new gc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new gc(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=ca.fromNumber(this.Ee)}Ae(e,t,r){let s=e.add(t.multiply(ca.fromNumber(r)));return s.compare(n4)===1&&(s=new ca([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=zb(e),[r,s]=Fb(t);for(let o=0;o<this.hashCount;o++){const c=this.Ae(r,s,o);if(!this.Re(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new dv(o,s,t);return r.forEach(f=>c.insert(f)),c}insert(e){if(this.Ee===0)return;const t=zb(e),[r,s]=Fb(t);for(let o=0;o<this.hashCount;o++){const c=this.Ae(r,s,o);this.Ve(c)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,th.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new tm(Fe.min(),s,new nn(Je),ps(),Xe())}}class th{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new th(r,t,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,t,r,s){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=s}}class nC{constructor(e,t){this.targetId=e,this.ge=t}}class rC{constructor(e,t,r=Nn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Bb{constructor(){this.pe=0,this.ye=Hb(),this.we=Nn.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Xe(),t=Xe(),r=Xe();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ve()}}),new th(this.we,this.be,e,t,r)}Me(){this.Se=!1,this.ye=Hb()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,_t(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class r4{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ps(),this.$e=Nf(),this.Ke=Nf(),this.Ue=new nn(Je)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Ve()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,r=e.ge.count,s=this.Xe(t);if(s){const o=s.target;if(Vy(o))if(r===0){const c=new Oe(o.path);this.ze(t,c,Ln.newNoDocument(c,Fe.min()))}else _t(r===1);else{const c=this.et(t);if(c!==r){const f=this.tt(e),m=f?this.nt(f,e,c):1;if(m!==0){this.Ye(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let c,f;try{c=_a(r).toUint8Array()}catch(m){if(m instanceof IA)return Pl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new dv(c,s,o)}catch(m){return Pl(m instanceof gc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.Ee===0?null:f}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const c=this.ke.it(),f=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(f)||(this.ze(t,o,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((o,c)=>{const f=this.Xe(c);if(f){if(o.current&&Vy(f.target)){const m=new Oe(f.target.path);this._t(m).has(c)||this.ut(c,m)||this.ze(c,m,Ln.newNoDocument(m,e))}o.ve&&(t.set(c,o.Fe()),o.Me())}});let r=Xe();this.Ke.forEach((o,c)=>{let f=!0;c.forEachWhile(m=>{const p=this.Xe(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(r=r.add(o))}),this.Qe.forEach((o,c)=>c.setReadTime(e));const s=new tm(e,t,this.Ue,this.Qe,r);return this.Qe=ps(),this.$e=Nf(),this.Ke=Nf(),this.Ue=new nn(Je),s}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Bb,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new cn(Je),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new cn(Je),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Bb),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Nf(){return new nn(Oe.comparator)}function Hb(){return new nn(Oe.comparator)}const i4={asc:"ASCENDING",desc:"DESCENDING"},s4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a4={and:"AND",or:"OR"};class o4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zy(n,e){return n.useProto3Json||Qd(e)?e:{value:e}}function pd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function l4(n,e){return pd(n,e.toTimestamp())}function Ci(n){return _t(!!n),Fe.fromTimestamp(function(t){const r=ya(t);return new un(r.seconds,r.nanos)}(n))}function mv(n,e){return Fy(n,e).canonicalString()}function Fy(n,e){const t=function(s){return new Pt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function sC(n){const e=Pt.fromString(n);return _t(cC(e)),e}function By(n,e){return mv(n.databaseId,e.path)}function kg(n,e){const t=sC(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Oe(oC(t))}function aC(n,e){return mv(n.databaseId,e)}function u4(n){const e=sC(n);return e.length===4?Pt.emptyPath():oC(e)}function Hy(n){return new Pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oC(n){return _t(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function qb(n,e,t){return{name:By(n,e),fields:t.value.mapValue.fields}}function c4(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,_){return p.useProto3Json?(_t(_===void 0||typeof _=="string"),Nn.fromBase64String(_||"")):(_t(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Nn.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(p){const _=p.code===void 0?ne.UNKNOWN:tC(p.code);return new ge(_,p.message||"")}(c);t=new rC(r,s,o,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=kg(n,r.document.name),o=Ci(r.document.updateTime),c=r.document.createTime?Ci(r.document.createTime):Fe.min(),f=new Zn({mapValue:{fields:r.document.fields}}),m=Ln.newFoundDocument(s,o,c,f),p=r.targetIds||[],_=r.removedTargetIds||[];t=new Kf(p,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=kg(n,r.document),o=r.readTime?Ci(r.readTime):Fe.min(),c=Ln.newNoDocument(s,o),f=r.removedTargetIds||[];t=new Kf([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=kg(n,r.document),o=r.removedTargetIds||[];t=new Kf([],o,s,null)}else{if(!("filter"in e))return Ve();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,c=new JL(s,o),f=r.targetId;t=new nC(f,c)}}return t}function h4(n,e){let t;if(e instanceof eh)t={update:qb(n,e.key,e.value)};else if(e instanceof hv)t={delete:By(n,e.key)};else if(e instanceof Ca)t={update:qb(n,e.key,e.data),updateMask:E4(e.fieldMask)};else{if(!(e instanceof YL))return Ve();t={verify:By(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const f=c.transform;if(f instanceof dd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Bc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Hc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof md)return{fieldPath:c.field.canonicalString(),increment:f.Ie};throw Ve()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:l4(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ve()}(n,e.precondition)),t}function f4(n,e){return n&&n.length>0?(_t(e!==void 0),n.map(t=>function(s,o){let c=s.updateTime?Ci(s.updateTime):Ci(o);return c.isEqual(Fe.min())&&(c=Ci(o)),new WL(c,s.transformResults||[])}(t,e))):[]}function d4(n,e){return{documents:[aC(n,e.path)]}}function m4(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=aC(n,s);const o=function(p){if(p.length!==0)return uC(ni.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const c=function(p){if(p.length!==0)return p.map(_=>function(w){return{field:_l(w.field),direction:y4(w.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=zy(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:s}}function p4(n){let e=u4(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){_t(r===1);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let o=[];t.where&&(o=function(T){const w=lC(T);return w instanceof ni&&jA(w)?w.getFilters():[w]}(t.where));let c=[];t.orderBy&&(c=function(T){return T.map(w=>function(N){return new Fc(vl(N.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(w))}(t.orderBy));let f=null;t.limit&&(f=function(T){let w;return w=typeof T=="object"?T.value:T,Qd(w)?null:w}(t.limit));let m=null;t.startAt&&(m=function(T){const w=!!T.before,C=T.values||[];return new fd(C,w)}(t.startAt));let p=null;return t.endAt&&(p=function(T){const w=!T.before,C=T.values||[];return new fd(C,w)}(t.endAt)),PL(e,s,c,o,f,"F",m,p)}function g4(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lC(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=vl(t.unaryFilter.field);return tn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=vl(t.unaryFilter.field);return tn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=vl(t.unaryFilter.field);return tn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=vl(t.unaryFilter.field);return tn.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Ve()}}(n):n.fieldFilter!==void 0?function(t){return tn.create(vl(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ve()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ni.create(t.compositeFilter.filters.map(r=>lC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ve()}}(t.compositeFilter.op))}(n):Ve()}function y4(n){return i4[n]}function _4(n){return s4[n]}function v4(n){return a4[n]}function _l(n){return{fieldPath:n.canonicalString()}}function vl(n){return In.fromServerFormat(n.fieldPath)}function uC(n){return n instanceof tn?function(t){if(t.op==="=="){if(Ob(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NAN"}};if(Nb(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ob(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NOT_NAN"}};if(Nb(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(t.field),op:_4(t.op),value:t.value}}}(n):n instanceof ni?function(t){const r=t.getFilters().map(s=>uC(s));return r.length===1?r[0]:{compositeFilter:{op:v4(t.op),filters:r}}}(n):Ve()}function E4(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,t,r,s,o=Fe.min(),c=Fe.min(),f=Nn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new aa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.Tt=e}}function w4(n){const e=p4({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Uy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(){this.Tn=new S4}addToCollectionParentIndex(e,t){return this.Tn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(ga.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(ga.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class S4{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new cn(Pt.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new cn(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hC=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(hC,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new jl(0)}static Un(){return new jl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="LruGarbageCollector",fC=1048576;function Wb([n,e],[t,r]){const s=Je(n,t);return s===0?Je(e,r):s}class R4{constructor(e){this.Hn=e,this.buffer=new cn(Wb),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Wb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class A4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Ee(Gb,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Yl(t)?Ee(Gb,"Ignoring IndexedDB error during garbage collection: ",t):await Ql(t)}await this.er(3e5)})}}class C4{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Wd.ae);const r=new R4(t);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve($b)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$b):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,s,o,c,f,m,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),s=this.params.maximumSequenceNumbersToCollect):s=T,c=Date.now(),this.nthSequenceNumber(e,s))).next(T=>(r=T,f=Date.now(),this.removeTargets(e,r,t))).next(T=>(o=T,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(p=Date.now(),gl()<=Qe.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${s} in `+(f-c)+`ms
	Removed ${o} targets in `+(m-f)+`ms
	Removed ${T} documents in `+(p-m)+`ms
Total Duration: ${p-_}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:T})))}}function I4(n,e){return new C4(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this.changes=new Ro(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&wc(r.mutation,s,hr.empty(),un.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Xe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Xe()){const s=ho();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let c=pc();return o.forEach((f,m)=>{c=c.insert(f,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=ho();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Xe()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,s){let o=ps();const c=Tc(),f=function(){return Tc()}();return t.forEach((m,p)=>{const _=r.get(p.key);s.has(p.key)&&(_===void 0||_.mutation instanceof Ca)?o=o.insert(p.key,p):_!==void 0?(c.set(p.key,_.mutation.getFieldMask()),wc(_.mutation,p,_.mutation.getFieldMask(),un.now())):c.set(p.key,hr.empty())}),this.recalculateAndSaveOverlays(e,o).next(m=>(m.forEach((p,_)=>c.set(p,_)),t.forEach((p,_)=>{var T;return f.set(p,new N4(_,(T=c.get(p))!==null&&T!==void 0?T:null))}),f))}recalculateAndSaveOverlays(e,t){const r=Tc();let s=new nn((c,f)=>c-f),o=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(m=>{const p=t.get(m);if(p===null)return;let _=r.get(m)||hr.empty();_=f.applyToLocalView(p,_),r.set(m,_);const T=(s.get(f.batchId)||Xe()).add(m);s=s.insert(f.batchId,T)})}).next(()=>{const c=[],f=s.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),p=m.key,_=m.value,T=WA();_.forEach(w=>{if(!o.has(w)){const C=JA(t.get(w),r.get(w));C!==null&&T.set(w,C),o=o.add(w)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return ie.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(c){return Oe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):BA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):ie.resolve(ho());let f=Lc,m=o;return c.next(p=>ie.forEach(p,(_,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),o.get(_)?ie.resolve():this.remoteDocumentCache.getEntry(e,_).next(w=>{m=m.insert(_,w)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,m,p,Xe())).next(_=>({batchId:f,changes:GA(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next(r=>{let s=pc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let c=pc();return this.indexManager.getCollectionParents(e,o).next(f=>ie.forEach(f,m=>{const p=function(T,w){return new Xl(w,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next(_=>{_.forEach((T,w)=>{c=c.insert(T,w)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(c=>{o.forEach((m,p)=>{const _=p.getKey();c.get(_)===null&&(c=c.insert(_,Ln.newInvalidDocument(_)))});let f=pc();return c.forEach((m,p)=>{const _=o.get(m);_!==void 0&&wc(_.mutation,p,hr.empty(),un.now()),Zd(t,p)&&(f=f.insert(m,p))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ie.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Ci(s.createTime)}}(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:w4(s.bundledQuery),readTime:Ci(s.readTime)}}(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(){this.overlays=new nn(Oe.comparator),this.Rr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ho();return ie.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.Et(e,t,o)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const s=ho(),o=t.length+1,c=new Oe(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&m.largestBatchId>r&&s.set(m.getKey(),m)}return ie.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new nn((p,_)=>p-_);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let _=o.get(p.largestBatchId);_===null&&(_=ho(),o=o.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const f=ho(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,_)=>f.set(p,_)),!(f.size()>=s)););return ie.resolve(f)}Et(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new ZL(t,r));let o=this.Rr.get(t);o===void 0&&(o=Xe(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this.sessionToken=Nn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(){this.Vr=new cn(_n.mr),this.gr=new cn(_n.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new _n(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new _n(e,t))}br(e,t){e.forEach(r=>this.removeReference(r,t))}Sr(e){const t=new Oe(new Pt([])),r=new _n(t,e),s=new _n(t,e+1),o=[];return this.gr.forEachInRange([r,s],c=>{this.wr(c),o.push(c.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Oe(new Pt([])),r=new _n(t,e),s=new _n(t,e+1);let o=Xe();return this.gr.forEachInRange([r,s],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new _n(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class _n{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Oe.comparator(e.key,t.key)||Je(e.Cr,t.Cr)}static pr(e,t){return Je(e.Cr,t.Cr)||Oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new cn(_n.mr)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new XL(o,t,r,s);this.mutationQueue.push(c);for(const f of s)this.Mr=this.Mr.add(new _n(f.key,o)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ie.resolve(c)}lookupMutationBatch(e,t){return ie.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Nr(r),o=s<0?0:s;return ie.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Kd:this.Fr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new _n(t,0),s=new _n(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,s],c=>{const f=this.Or(c.Cr);o.push(f)}),ie.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cn(Je);return t.forEach(s=>{const o=new _n(s,0),c=new _n(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,c],f=>{r=r.add(f.Cr)})}),ie.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;Oe.isDocumentKey(o)||(o=o.child(""));const c=new _n(new Oe(o),0);let f=new cn(Je);return this.Mr.forEachWhile(m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(f=f.add(m.Cr)),!0)},c),ie.resolve(this.Br(f))}Br(e){const t=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){_t(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return ie.forEach(t.mutations,s=>{const o=new _n(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new _n(t,0),s=this.Mr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.kr=e,this.docs=function(){return new nn(Oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,c=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():Ln.newInvalidDocument(t))}getEntries(e,t){let r=ps();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Ln.newInvalidDocument(s))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=ps();const c=t.path,f=new Oe(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:p,value:{document:_}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||fL(hL(_),r)<=0||(s.has(_.key)||Zd(t,_))&&(o=o.insert(_.key,_.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Ve()}qr(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new V4(this)}getSize(e){return ie.resolve(this.size)}}class V4 extends x4{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.persistence=e,this.Qr=new Ro(t=>ov(t),lv),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.$r=0,this.Kr=new pv,this.targetCount=0,this.Ur=jl.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,s)=>t(s)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),ie.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new jl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.zn(t),ie.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.Qr.forEach((c,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.Qr.delete(c),o.push(this.removeMatchingKeysForTargetId(e,f.targetId)),s++)}),ie.waitFor(o).next(()=>s)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.Kr.br(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(c=>{o.push(s.markPotentiallyOrphaned(e,c))}),ie.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Kr.vr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Wd(0),this.zr=!1,this.zr=!0,this.jr=new P4,this.referenceDelegate=e(this),this.Hr=new j4(this),this.indexManager=new b4,this.remoteDocumentCache=function(s){return new L4(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new T4(t),this.Yr=new D4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new k4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new M4(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){Ee("MemoryPersistence","Starting transaction:",e);const s=new U4(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,t){return ie.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class U4 extends mL{constructor(e){super(),this.currentSequenceNumber=e}}class gv{constructor(e){this.persistence=e,this.ti=new pv,this.ni=null}static ri(e){return new gv(e)}get ii(){if(this.ni)return this.ni;throw Ve()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ie.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.ii,r=>{const s=Oe.fromPath(r);return this.si(e,s).next(o=>{o||t.removeEntry(s,Fe.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ie.or([()=>ie.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class gd{constructor(e,t){this.persistence=e,this.oi=new Ro(r=>yL(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=I4(this,t)}static ri(e,t){return new gd(e,t)}Zr(){}Xr(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return ie.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(o=>o?ie.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,c=>this.ar(e,c,t).next(f=>{f||(r++,o.removeEntry(c,Fe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ie.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$f(e.data.value)),t}ar(e,t,r){return ie.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return ie.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=s}static Yi(e,t){let r=Xe(),s=Xe();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new yv(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return vD()?8:pL(zn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.rs(e,t).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ss(e,t,s,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new z4;return this._s(e,t,c).next(f=>{if(o.result=f,this.Xi)return this.us(e,t,c,f.size)})}).next(()=>o.result)}us(e,t,r,s){return r.documentReadCount<this.es?(gl()<=Qe.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",yl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ie.resolve()):(gl()<=Qe.DEBUG&&Ee("QueryEngine","Query:",yl(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(gl()<=Qe.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",yl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ai(t))):ie.resolve())}rs(e,t){if(Mb(t))return ie.resolve(null);let r=Ai(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Uy(t,null,"F"),r=Ai(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=Xe(...o);return this.ns.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(m=>{const p=this.cs(t,f);return this.ls(t,p,c,m.readTime)?this.rs(e,Uy(t,null,"F")):this.hs(e,p,t,m)}))})))}ss(e,t,r,s){return Mb(t)||s.isEqual(Fe.min())?ie.resolve(null):this.ns.getDocuments(e,r).next(o=>{const c=this.cs(t,o);return this.ls(t,c,r,s)?ie.resolve(null):(gl()<=Qe.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yl(t)),this.hs(e,c,t,cL(s,Lc)).next(f=>f))})}cs(e,t){let r=new cn(qA(e));return t.forEach((s,o)=>{Zd(e,o)&&(r=r.add(o))}),r}ls(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,t,r){return gl()<=Qe.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",yl(t)),this.ns.getDocumentsMatchingQuery(e,t,ga.min(),r)}hs(e,t,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="LocalStore",B4=3e8;class H4{constructor(e,t,r,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new nn(Je),this.Is=new Ro(o=>ov(o),lv),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O4(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function q4(n,e,t,r){return new H4(n,e,t,r)}async function mC(n,e){const t=je(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],f=[];let m=Xe();for(const p of s){c.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}for(const p of o){f.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(r,m).next(p=>({Rs:p,removedBatchIds:c,addedBatchIds:f}))})})}function $4(n,e){const t=je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(f,m,p,_){const T=p.batch,w=T.keys();let C=ie.resolve();return w.forEach(N=>{C=C.next(()=>_.getEntry(m,N)).next(G=>{const V=p.docVersions.get(N);_t(V!==null),G.version.compareTo(V)<0&&(T.applyToRemoteDocument(G,p),G.isValidDocument()&&(G.setReadTime(p.commitVersion),_.addEntry(G)))})}),C.next(()=>f.mutationQueue.removeMutationBatch(m,T))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(f){let m=Xe();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(m=m.add(f.batch.mutations[p].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function pC(n){const e=je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function G4(n,e){const t=je(n),r=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const f=[];e.targetChanges.forEach((_,T)=>{const w=s.get(T);if(!w)return;f.push(t.Hr.removeMatchingKeys(o,_.removedDocuments,T).next(()=>t.Hr.addMatchingKeys(o,_.addedDocuments,T)));let C=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(T)!==null?C=C.withResumeToken(Nn.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,r)),s=s.insert(T,C),function(G,V,Y){return G.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=B4?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(w,C,_)&&f.push(t.Hr.updateTargetData(o,C))});let m=ps(),p=Xe();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(o,_))}),f.push(W4(o,c,e.documentUpdates).next(_=>{m=_.Vs,p=_.fs})),!r.isEqual(Fe.min())){const _=t.Hr.getLastRemoteSnapshotVersion(o).next(T=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));f.push(_)}return ie.waitFor(f).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,m,p)).next(()=>m)}).then(o=>(t.Ts=s,o))}function W4(n,e,t){let r=Xe(),s=Xe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let c=ps();return t.forEach((f,m)=>{const p=o.get(f);m.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(f)),m.isNoDocument()&&m.version.isEqual(Fe.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):Ee(_v,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",m.version)}),{Vs:c,fs:s}})}function K4(n,e){const t=je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Kd),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Q4(n,e){const t=je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Hr.getTargetData(r,e).next(o=>o?(s=o,ie.resolve(s)):t.Hr.allocateTargetId(r).next(c=>(s=new aa(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function qy(n,e,t){const r=je(n),s=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!Yl(c))throw c;Ee(_v,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function Kb(n,e,t){const r=je(n);let s=Fe.min(),o=Xe();return r.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,_){const T=je(m),w=T.Is.get(_);return w!==void 0?ie.resolve(T.Ts.get(w)):T.Hr.getTargetData(p,_)}(r,c,Ai(e)).next(f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(c,f.targetId).next(m=>{o=m})}).next(()=>r.Ps.getDocumentsMatchingQuery(c,e,t?s:Fe.min(),t?o:Xe())).next(f=>(Y4(r,LL(e),f),{documents:f,gs:o})))}function Y4(n,e,t){let r=n.Es.get(e)||Fe.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}class Qb{constructor(){this.activeTargetIds=BL()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class X4{constructor(){this.ho=new Qb,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Qb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="ConnectivityMonitor";class Xb{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Ee(Yb,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Ee(Yb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Of=null;function $y(){return Of===null?Of=function(){return 268435456+Math.round(2147483648*Math.random())}():Of++,"0x"+Of.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="RestConnection",J4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eV{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===jc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}bo(e,t,r,s,o){const c=$y(),f=this.So(e,t.toUriEncodedString());Ee(Pg,`Sending RPC '${e}' ${c}:`,f,r);const m={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(m,s,o),this.vo(e,f,m,r).then(p=>(Ee(Pg,`Received RPC '${e}' ${c}: `,p),p),p=>{throw Pl(Pg,`RPC '${e}' ${c} failed with error: `,p,"url: ",f,"request:",r),p})}Co(e,t,r,s,o,c){return this.bo(e,t,r,s,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Kl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}So(e,t){const r=J4[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="WebChannelConnection";class nV extends eV{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,s){const o=$y();return new Promise((c,f)=>{const m=new vA;m.setWithCredentials(!0),m.listenOnce(EA.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case qf.NO_ERROR:const _=m.getResponseJson();Ee(Pn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(_)),c(_);break;case qf.TIMEOUT:Ee(Pn,`RPC '${e}' ${o} timed out`),f(new ge(ne.DEADLINE_EXCEEDED,"Request time out"));break;case qf.HTTP_ERROR:const T=m.getStatus();if(Ee(Pn,`RPC '${e}' ${o} failed with status:`,T,"response text:",m.getResponseText()),T>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const C=w==null?void 0:w.error;if(C&&C.status&&C.message){const N=function(V){const Y=V.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(Y)>=0?Y:ne.UNKNOWN}(C.status);f(new ge(N,C.message))}else f(new ge(ne.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new ge(ne.UNAVAILABLE,"Connection failed."));break;default:Ve()}}finally{Ee(Pn,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(s);Ee(Pn,`RPC '${e}' ${o} sending request:`,s),m.send(t,"POST",p,r,15)})}Wo(e,t,r){const s=$y(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=bA(),f=wA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Do(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const _=o.join("");Ee(Pn,`Creating RPC '${e}' stream ${s}: ${_}`,m);const T=c.createWebChannel(_,m);let w=!1,C=!1;const N=new tV({Fo:V=>{C?Ee(Pn,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(w||(Ee(Pn,`Opening RPC '${e}' stream ${s} transport.`),T.open(),w=!0),Ee(Pn,`RPC '${e}' stream ${s} sending:`,V),T.send(V))},Mo:()=>T.close()}),G=(V,Y,Z)=>{V.listen(Y,se=>{try{Z(se)}catch(te){setTimeout(()=>{throw te},0)}})};return G(T,mc.EventType.OPEN,()=>{C||(Ee(Pn,`RPC '${e}' stream ${s} transport opened.`),N.Qo())}),G(T,mc.EventType.CLOSE,()=>{C||(C=!0,Ee(Pn,`RPC '${e}' stream ${s} transport closed`),N.Ko())}),G(T,mc.EventType.ERROR,V=>{C||(C=!0,Pl(Pn,`RPC '${e}' stream ${s} transport errored:`,V),N.Ko(new ge(ne.UNAVAILABLE,"The operation could not be completed")))}),G(T,mc.EventType.MESSAGE,V=>{var Y;if(!C){const Z=V.data[0];_t(!!Z);const se=Z,te=(se==null?void 0:se.error)||((Y=se[0])===null||Y===void 0?void 0:Y.error);if(te){Ee(Pn,`RPC '${e}' stream ${s} received error:`,te);const oe=te.status;let j=function(A){const O=en[A];if(O!==void 0)return tC(O)}(oe),k=te.message;j===void 0&&(j=ne.INTERNAL,k="Unknown error status: "+oe+" with message "+te.message),C=!0,N.Ko(new ge(j,k)),T.close()}else Ee(Pn,`RPC '${e}' stream ${s} received:`,Z),N.Uo(Z)}}),G(f,TA.STAT_EVENT,V=>{V.stat===Dy.PROXY?Ee(Pn,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===Dy.NOPROXY&&Ee(Pn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.$o()},0),N}}function Mg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(n){return new o4(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-r);s>0&&Ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="PersistentStream";class yC{constructor(e,t,r,s,o,c,f,m){this.Ti=e,this.n_=r,this.r_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new gC(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(ms(t.toString()),ms("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===t&&this.V_(r,s)},r=>{e(()=>{const s=new ge(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return Ee(Zb,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(Ee(Zb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rV extends yC{constructor(e,t,r,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=c4(this.serializer,e),r=function(o){if(!("targetChange"in o))return Fe.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Fe.min():c.readTime?Ci(c.readTime):Fe.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=Hy(this.serializer),t.addTarget=function(o,c){let f;const m=c.target;if(f=Vy(m)?{documents:d4(o,m)}:{query:m4(o,m).ht},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=iC(o,c.resumeToken);const p=zy(o,c.expectedCount);p!==null&&(f.expectedCount=p)}else if(c.snapshotVersion.compareTo(Fe.min())>0){f.readTime=pd(o,c.snapshotVersion.toTimestamp());const p=zy(o,c.expectedCount);p!==null&&(f.expectedCount=p)}return f}(this.serializer,e);const r=g4(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=Hy(this.serializer),t.removeTarget=e,this.I_(t)}}class iV extends yC{constructor(e,t,r,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=o}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return _t(!!e.streamToken),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){_t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=f4(e.writeResults,e.commitTime),r=Ci(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=Hy(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>h4(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{}class aV extends sV{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.bo(e,Fy(t,r),s,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(ne.UNKNOWN,o.toString())})}Co(e,t,r,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Co(e,Fy(t,r),s,c,f,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(ne.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class oV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ms(t),this.N_=!1):Ee("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="RemoteStore";class lV{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(c=>{r.enqueueAndForget(async()=>{Ia(this)&&(Ee(yo,"Restarting streams for network reachability change."),await async function(m){const p=je(m);p.W_.add(4),await Zl(p),p.j_.set("Unknown"),p.W_.delete(4),await nh(p)}(this))})}),this.j_=new oV(r,s)}}async function nh(n){if(Ia(n))for(const e of n.G_)await e(!0)}async function Zl(n){for(const e of n.G_)await e(!1)}function _C(n,e){const t=je(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),wv(t)?Tv(t):Jl(t).c_()&&Ev(t,e))}function vv(n,e){const t=je(n),r=Jl(t);t.U_.delete(e),r.c_()&&vC(t,e),t.U_.size===0&&(r.c_()?r.P_():Ia(t)&&t.j_.set("Unknown"))}function Ev(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jl(n).y_(e)}function vC(n,e){n.H_.Ne(e),Jl(n).w_(e)}function Tv(n){n.H_=new r4({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Jl(n).start(),n.j_.B_()}function wv(n){return Ia(n)&&!Jl(n).u_()&&n.U_.size>0}function Ia(n){return je(n).W_.size===0}function EC(n){n.H_=void 0}async function uV(n){n.j_.set("Online")}async function cV(n){n.U_.forEach((e,t)=>{Ev(n,e)})}async function hV(n,e){EC(n),wv(n)?(n.j_.q_(e),Tv(n)):n.j_.set("Unknown")}async function fV(n,e,t){if(n.j_.set("Online"),e instanceof rC&&e.state===2&&e.cause)try{await async function(s,o){const c=o.cause;for(const f of o.targetIds)s.U_.has(f)&&(await s.remoteSyncer.rejectListen(f,c),s.U_.delete(f),s.H_.removeTarget(f))}(n,e)}catch(r){Ee(yo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yd(n,r)}else if(e instanceof Kf?n.H_.We(e):e instanceof nC?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Fe.min()))try{const r=await pC(n.localStore);t.compareTo(r)>=0&&await function(o,c){const f=o.H_.ot(c);return f.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const _=o.U_.get(p);_&&o.U_.set(p,_.withResumeToken(m.resumeToken,c))}}),f.targetMismatches.forEach((m,p)=>{const _=o.U_.get(m);if(!_)return;o.U_.set(m,_.withResumeToken(Nn.EMPTY_BYTE_STRING,_.snapshotVersion)),vC(o,m);const T=new aa(_.target,m,p,_.sequenceNumber);Ev(o,T)}),o.remoteSyncer.applyRemoteEvent(f)}(n,t)}catch(r){Ee(yo,"Failed to raise snapshot:",r),await yd(n,r)}}async function yd(n,e,t){if(!Yl(e))throw e;n.W_.add(1),await Zl(n),n.j_.set("Offline"),t||(t=()=>pC(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Ee(yo,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await nh(n)})}function TC(n,e){return e().catch(t=>yd(n,t,e))}async function rm(n){const e=je(n),t=Ea(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:Kd;for(;dV(e);)try{const s=await K4(e.localStore,r);if(s===null){e.K_.length===0&&t.P_();break}r=s.batchId,mV(e,s)}catch(s){await yd(e,s)}wC(e)&&bC(e)}function dV(n){return Ia(n)&&n.K_.length<10}function mV(n,e){n.K_.push(e);const t=Ea(n);t.c_()&&t.b_&&t.S_(e.mutations)}function wC(n){return Ia(n)&&!Ea(n).u_()&&n.K_.length>0}function bC(n){Ea(n).start()}async function pV(n){Ea(n).C_()}async function gV(n){const e=Ea(n);for(const t of n.K_)e.S_(t.mutations)}async function yV(n,e,t){const r=n.K_.shift(),s=fv.from(r,e,t);await TC(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await rm(n)}async function _V(n,e){e&&Ea(n).b_&&await async function(r,s){if(function(c){return e4(c)&&c!==ne.ABORTED}(s.code)){const o=r.K_.shift();Ea(r).h_(),await TC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await rm(r)}}(n,e),wC(n)&&bC(n)}async function Jb(n,e){const t=je(n);t.asyncQueue.verifyOperationInProgress(),Ee(yo,"RemoteStore received new credentials");const r=Ia(t);t.W_.add(3),await Zl(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await nh(t)}async function vV(n,e){const t=je(n);e?(t.W_.delete(2),await nh(t)):e||(t.W_.add(2),await Zl(t),t.j_.set("Unknown"))}function Jl(n){return n.J_||(n.J_=function(t,r,s){const o=je(t);return o.M_(),new rV(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:uV.bind(null,n),No:cV.bind(null,n),Lo:hV.bind(null,n),p_:fV.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),wv(n)?Tv(n):n.j_.set("Unknown")):(await n.J_.stop(),EC(n))})),n.J_}function Ea(n){return n.Y_||(n.Y_=function(t,r,s){const o=je(t);return o.M_(),new iV(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:pV.bind(null,n),Lo:_V.bind(null,n),D_:gV.bind(null,n),v_:yV.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await rm(n)):(await n.Y_.stop(),n.K_.length>0&&(Ee(yo,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const c=Date.now()+r,f=new bv(e,t,c,s,o);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function im(n,e){if(ms("AsyncQueue",`${e}: ${n}`),Yl(n))return new ge(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{static emptySet(e){return new Il(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Oe.comparator(t.key,r.key):(t,r)=>Oe.comparator(t.key,r.key),this.keyedMap=pc(),this.sortedSet=new nn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Il)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Il;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.Z_=new nn(Oe.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ve():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ul{constructor(e,t,r,s,o,c,f,m,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,o){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new Ul(e,t,Il.emptySet(t),c,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class TV{constructor(){this.queries=tS(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const s=je(t),o=s.queries;s.queries=tS(),o.forEach((c,f)=>{for(const m of f.ta)m.onError(r)})})(this,new ge(ne.ABORTED,"Firestore shutting down"))}}function tS(){return new Ro(n=>HA(n),Xd)}async function SC(n,e){const t=je(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.na()&&e.ra()&&(r=2):(o=new EV,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await t.onListen(s,!0);break;case 1:o.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const f=im(c,`Initialization of query '${yl(e.query)}' failed`);return void e.onError(f)}t.queries.set(s,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&Sv(t)}async function RC(n,e){const t=je(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const c=o.ta.indexOf(e);c>=0&&(o.ta.splice(c,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function wV(n,e){const t=je(n);let r=!1;for(const s of e){const o=s.query,c=t.queries.get(o);if(c){for(const f of c.ta)f.oa(s)&&(r=!0);c.ea=s}}r&&Sv(t)}function bV(n,e,t){const r=je(n),s=r.queries.get(e);if(s)for(const o of s.ta)o.onError(t);r.queries.delete(e)}function Sv(n){n.ia.forEach(e=>{e.next()})}var Gy,nS;(nS=Gy||(Gy={}))._a="default",nS.Cache="cache";class AC{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ul(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Gy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.key=e}}class IC{constructor(e){this.key=e}}class SV{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Xe(),this.mutatedKeys=Xe(),this.ya=qA(e),this.wa=new Il(this.ya)}get ba(){return this.fa}Sa(e,t){const r=t?t.Da:new eS,s=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,c=s,f=!1;const m=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((_,T)=>{const w=s.get(_),C=Zd(this.query,T)?T:null,N=!!w&&this.mutatedKeys.has(w.key),G=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let V=!1;w&&C?w.data.isEqual(C.data)?N!==G&&(r.track({type:3,doc:C}),V=!0):this.va(w,C)||(r.track({type:2,doc:C}),V=!0,(m&&this.ya(C,m)>0||p&&this.ya(C,p)<0)&&(f=!0)):!w&&C?(r.track({type:0,doc:C}),V=!0):w&&!C&&(r.track({type:1,doc:w}),V=!0,(m||p)&&(f=!0)),V&&(C?(c=c.add(C),o=G?o.add(_):o.delete(_)):(c=c.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),o=o.delete(_.key),r.track({type:1,doc:_})}return{wa:c,Da:r,ls:f,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const c=e.Da.X_();c.sort((_,T)=>function(C,N){const G=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve()}};return G(C)-G(N)}(_.type,T.type)||this.ya(_.doc,T.doc)),this.Ca(r),s=s!=null&&s;const f=t&&!s?this.Fa():[],m=this.pa.size===0&&this.current&&!s?1:0,p=m!==this.ga;return this.ga=m,c.length!==0||p?{snapshot:new Ul(this.query,e.wa,o,c,e.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:f}:{Ma:f}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new eS,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Xe(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new IC(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new CC(r))}),t}Oa(e){this.fa=e.gs,this.pa=Xe();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return Ul.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const sm="SyncEngine";class RV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class AV{constructor(e){this.key=e,this.Ba=!1}}class CV{constructor(e,t,r,s,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new Ro(f=>HA(f),Xd),this.qa=new Map,this.Qa=new Set,this.$a=new nn(Oe.comparator),this.Ka=new Map,this.Ua=new pv,this.Wa={},this.Ga=new Map,this.za=jl.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function IV(n,e,t=!0){const r=PC(n);let s;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await xC(r,e,t,!0),s}async function xV(n,e){const t=PC(n);await xC(t,e,!0,!1)}async function xC(n,e,t,r){const s=await Q4(n.localStore,Ai(e)),o=s.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let f;return r&&(f=await NV(n,e,o,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&_C(n.remoteStore,s),f}async function NV(n,e,t,r,s){n.Ha=(T,w,C)=>async function(G,V,Y,Z){let se=V.view.Sa(Y);se.ls&&(se=await Kb(G.localStore,V.query,!1).then(({documents:k})=>V.view.Sa(k,se)));const te=Z&&Z.targetChanges.get(V.targetId),oe=Z&&Z.targetMismatches.get(V.targetId)!=null,j=V.view.applyChanges(se,G.isPrimaryClient,te,oe);return iS(G,V.targetId,j.Ma),j.snapshot}(n,T,w,C);const o=await Kb(n.localStore,e,!0),c=new SV(e,o.gs),f=c.Sa(o.documents),m=th.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=c.applyChanges(f,n.isPrimaryClient,m);iS(n,t,p.Ma);const _=new RV(e,t,c);return n.ka.set(e,_),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),p.snapshot}async function OV(n,e,t){const r=je(n),s=r.ka.get(e),o=r.qa.get(s.targetId);if(o.length>1)return r.qa.set(s.targetId,o.filter(c=>!Xd(c,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await qy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&vv(r.remoteStore,s.targetId),Wy(r,s.targetId)}).catch(Ql)):(Wy(r,s.targetId),await qy(r.localStore,s.targetId,!0))}async function DV(n,e){const t=je(n),r=t.ka.get(e),s=t.qa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),vv(t.remoteStore,r.targetId))}async function kV(n,e,t){const r=FV(n);try{const s=await function(c,f){const m=je(c),p=un.now(),_=f.reduce((C,N)=>C.add(N.key),Xe());let T,w;return m.persistence.runTransaction("Locally write mutations","readwrite",C=>{let N=ps(),G=Xe();return m.ds.getEntries(C,_).next(V=>{N=V,N.forEach((Y,Z)=>{Z.isValidDocument()||(G=G.add(Y))})}).next(()=>m.localDocuments.getOverlayedDocuments(C,N)).next(V=>{T=V;const Y=[];for(const Z of f){const se=QL(Z,T.get(Z.key).overlayedDocument);se!=null&&Y.push(new Ca(Z.key,se,MA(se.value.mapValue),Zr.exists(!0)))}return m.mutationQueue.addMutationBatch(C,p,Y,f)}).next(V=>{w=V;const Y=V.applyToLocalDocumentSet(T,G);return m.documentOverlayCache.saveOverlays(C,V.batchId,Y)})}).then(()=>({batchId:w.batchId,changes:GA(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,f,m){let p=c.Wa[c.currentUser.toKey()];p||(p=new nn(Je)),p=p.insert(f,m),c.Wa[c.currentUser.toKey()]=p}(r,s.batchId,t),await rh(r,s.changes),await rm(r.remoteStore)}catch(s){const o=im(s,"Failed to persist write");t.reject(o)}}async function NC(n,e){const t=je(n);try{const r=await G4(t.localStore,e);e.targetChanges.forEach((s,o)=>{const c=t.Ka.get(o);c&&(_t(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.Ba=!0:s.modifiedDocuments.size>0?_t(c.Ba):s.removedDocuments.size>0&&(_t(c.Ba),c.Ba=!1))}),await rh(t,r,e)}catch(r){await Ql(r)}}function rS(n,e,t){const r=je(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ka.forEach((o,c)=>{const f=c.view.sa(e);f.snapshot&&s.push(f.snapshot)}),function(c,f){const m=je(c);m.onlineState=f;let p=!1;m.queries.forEach((_,T)=>{for(const w of T.ta)w.sa(f)&&(p=!0)}),p&&Sv(m)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function PV(n,e,t){const r=je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ka.get(e),o=s&&s.key;if(o){let c=new nn(Oe.comparator);c=c.insert(o,Ln.newNoDocument(o,Fe.min()));const f=Xe().add(o),m=new tm(Fe.min(),new Map,new nn(Je),c,f);await NC(r,m),r.$a=r.$a.remove(o),r.Ka.delete(e),Rv(r)}else await qy(r.localStore,e,!1).then(()=>Wy(r,e,t)).catch(Ql)}async function MV(n,e){const t=je(n),r=e.batch.batchId;try{const s=await $4(t.localStore,e);DC(t,r,null),OC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await rh(t,s)}catch(s){await Ql(s)}}async function LV(n,e,t){const r=je(n);try{const s=await function(c,f){const m=je(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return m.mutationQueue.lookupMutationBatch(p,f).next(T=>(_t(T!==null),_=T.keys(),m.mutationQueue.removeMutationBatch(p,T))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,_,f)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>m.localDocuments.getDocuments(p,_))})}(r.localStore,e);DC(r,e,t),OC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await rh(r,s)}catch(s){await Ql(s)}}async function VV(n,e){const t=je(n);Ia(t.remoteStore)||Ee(sm,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(c){const f=je(c);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>f.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(r===Kd)return void e.resolve();const s=t.Ga.get(r)||[];s.push(e),t.Ga.set(r,s)}catch(r){const s=im(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function OC(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function DC(n,e,t){const r=je(n);let s=r.Wa[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function Wy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(r=>{n.Ua.containsKey(r)||kC(n,r)})}function kC(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(vv(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),Rv(n))}function iS(n,e,t){for(const r of t)r instanceof CC?(n.Ua.addReference(r.key,e),jV(n,r)):r instanceof IC?(Ee(sm,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||kC(n,r.key)):Ve()}function jV(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(Ee(sm,"New document in limbo: "+t),n.Qa.add(r),Rv(n))}function Rv(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Oe(Pt.fromString(e)),r=n.za.next();n.Ka.set(r,new AV(t)),n.$a=n.$a.insert(t,r),_C(n.remoteStore,new aa(Ai(uv(t.path)),r,"TargetPurposeLimboResolution",Wd.ae))}}async function rh(n,e,t){const r=je(n),s=[],o=[],c=[];r.ka.isEmpty()||(r.ka.forEach((f,m)=>{c.push(r.Ha(m,e,t).then(p=>{var _;if((p||t)&&r.isPrimaryClient){const T=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(p){s.push(p);const T=yv.Yi(m.targetId,p);o.push(T)}}))}),await Promise.all(c),r.La.p_(s),await async function(m,p){const _=je(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ie.forEach(p,w=>ie.forEach(w.Hi,C=>_.persistence.referenceDelegate.addReference(T,w.targetId,C)).next(()=>ie.forEach(w.Ji,C=>_.persistence.referenceDelegate.removeReference(T,w.targetId,C)))))}catch(T){if(!Yl(T))throw T;Ee(_v,"Failed to update sequence numbers: "+T)}for(const T of p){const w=T.targetId;if(!T.fromCache){const C=_.Ts.get(w),N=C.snapshotVersion,G=C.withLastLimboFreeSnapshotVersion(N);_.Ts=_.Ts.insert(w,G)}}}(r.localStore,o))}async function UV(n,e){const t=je(n);if(!t.currentUser.isEqual(e)){Ee(sm,"User change. New user:",e.toKey());const r=await mC(t.localStore,e);t.currentUser=e,function(o,c){o.Ga.forEach(f=>{f.forEach(m=>{m.reject(new ge(ne.CANCELLED,c))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rh(t,r.Rs)}}function zV(n,e){const t=je(n),r=t.Ka.get(e);if(r&&r.Ba)return Xe().add(r.key);{let s=Xe();const o=t.qa.get(e);if(!o)return s;for(const c of o){const f=t.ka.get(c);s=s.unionWith(f.view.ba)}return s}}function PC(n){const e=je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=NC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PV.bind(null,e),e.La.p_=wV.bind(null,e.eventManager),e.La.Ja=bV.bind(null,e.eventManager),e}function FV(n){const e=je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LV.bind(null,e),e}class _d{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nm(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return q4(this.persistence,new F4,e.initialUser,this.serializer)}Xa(e){return new dC(gv.ri,this.serializer)}Za(e){return new X4}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_d.provider={build:()=>new _d};class BV extends _d{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){_t(this.persistence.referenceDelegate instanceof gd);const r=this.persistence.referenceDelegate.garbageCollector;return new A4(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new dC(r=>gd.ri(r,t),this.serializer)}}class Ky{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=UV.bind(null,this.syncEngine),await vV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TV}()}createDatastore(e){const t=nm(e.databaseInfo.databaseId),r=function(o){return new nV(o)}(e.databaseInfo);return function(o,c,f,m){return new aV(o,c,f,m)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,c,f){return new lV(r,s,o,c,f)}(this.localStore,this.datastore,e.asyncQueue,t=>rS(this.syncEngine,t,0),function(){return Xb.D()?new Xb:new Z4}())}createSyncEngine(e,t){return function(s,o,c,f,m,p,_){const T=new CV(s,o,c,f,m,p);return _&&(T.ja=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=je(s);Ee(yo,"RemoteStore shutting down."),o.W_.add(5),await Zl(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ky.provider={build:()=>new Ky};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ms("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="FirestoreClient";class HV{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Mn.UNAUTHENTICATED,this.clientId=RA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async c=>{Ee(Ta,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Ee(Ta,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=im(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Lg(n,e){n.asyncQueue.verifyOperationInProgress(),Ee(Ta,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await mC(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function sS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await LC(n);Ee(Ta,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Jb(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Jb(e.remoteStore,s)),n._onlineComponents=e}async function LC(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ee(Ta,"Using user provided OfflineComponentProvider");try{await Lg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===ne.FAILED_PRECONDITION||s.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Pl("Error using user provided cache. Falling back to memory cache: "+t),await Lg(n,new _d)}}else Ee(Ta,"Using default OfflineComponentProvider"),await Lg(n,new BV(void 0));return n._offlineComponents}async function Av(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ee(Ta,"Using user provided OnlineComponentProvider"),await sS(n,n._uninitializedComponentsProvider._online)):(Ee(Ta,"Using default OnlineComponentProvider"),await sS(n,new Ky))),n._onlineComponents}function VC(n){return LC(n).then(e=>e.persistence)}function jC(n){return Av(n).then(e=>e.remoteStore)}function UC(n){return Av(n).then(e=>e.syncEngine)}async function zC(n){const e=await Av(n),t=e.eventManager;return t.onListen=IV.bind(null,e.syncEngine),t.onUnlisten=OV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=xV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=DV.bind(null,e.syncEngine),t}function qV(n){return n.asyncQueue.enqueue(async()=>{const e=await VC(n),t=await jC(n);return e.setNetworkEnabled(!0),function(s){const o=je(s);return o.W_.delete(0),nh(o)}(t)})}function $V(n){return n.asyncQueue.enqueue(async()=>{const e=await VC(n),t=await jC(n);return e.setNetworkEnabled(!1),async function(s){const o=je(s);o.W_.add(0),await Zl(o),o.j_.set("Offline")}(t)})}function GV(n,e,t={}){const r=new Ri;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,f,m,p){const _=new MC({next:w=>{_.su(),c.enqueueAndForget(()=>RC(o,T));const C=w.docs.has(f);!C&&w.fromCache?p.reject(new ge(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&w.fromCache&&m&&m.source==="server"?p.reject(new ge(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),T=new AC(uv(f.path),_,{includeMetadataChanges:!0,Ta:!0});return SC(o,T)}(await zC(n),n.asyncQueue,e,t,r)),r.promise}function WV(n,e,t={}){const r=new Ri;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,f,m,p){const _=new MC({next:w=>{_.su(),c.enqueueAndForget(()=>RC(o,T)),w.fromCache&&m.source==="server"?p.reject(new ge(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),T=new AC(f,_,{includeMetadataChanges:!0,Ta:!0});return SC(o,T)}(await zC(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(n,e,t){if(!t)throw new ge(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function KV(n,e,t,r){if(e===!0&&r===!0)throw new ge(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oS(n){if(!Oe.isDocumentKey(n))throw new ge(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lS(n){if(Oe.isDocumentKey(n))throw new ge(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function am(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ve()}function dr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=am(n);throw new ge(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="firestore.googleapis.com",uS=!0;class cS{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=HC,this.ssl=uS}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:uS;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fC)throw new ge(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class om{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new nL;switch(r.type){case"firstParty":return new aL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=aS.get(t);r&&(Ee("ComponentProvider","Removing Datastore"),aS.delete(t),r.terminate())}(this),Promise.resolve()}}function QV(n,e,t,r={}){var s;const o=(n=dr(n,om))._getSettings(),c=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;o.host!==HC&&o.host!==f&&Pl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},o),{host:f,ssl:!1,emulatorOptions:r});if(!cs(m,c)&&(n._setSettings(m),r.mockUserToken)){let p,_;if(typeof r.mockUserToken=="string")p=r.mockUserToken,_=Mn.MOCK_USER;else{p=G_(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new ge(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Mn(T)}n._authCredentials=new rL(new SA(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ao(this.firestore,e,this._query)}}class Gn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}}class fa extends Ao{constructor(e,t,r){super(e,t,uv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new Oe(e))}withConverter(e){return new fa(this.firestore,e,this._path)}}function YV(n,e,...t){if(n=Kt(n),BC("collection","path",e),n instanceof om){const r=Pt.fromString(e,...t);return lS(r),new fa(n,null,r)}{if(!(n instanceof Gn||n instanceof fa))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pt.fromString(e,...t));return lS(r),new fa(n.firestore,null,r)}}function Df(n,e,...t){if(n=Kt(n),arguments.length===1&&(e=RA.newId()),BC("doc","path",e),n instanceof om){const r=Pt.fromString(e,...t);return oS(r),new Gn(n,null,new Oe(r))}{if(!(n instanceof Gn||n instanceof fa))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pt.fromString(e,...t));return oS(r),new Gn(n.firestore,n instanceof fa?n.converter:null,new Oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="AsyncQueue";class fS{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new gC(this,"async_queue_retry"),this.bu=()=>{const r=Mg();r&&Ee(hS,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const t=Mg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Mg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Ri;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Yl(e))throw e;Ee(hS,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(c){let f=c.message||"";return c.stack&&(f=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),f}(r);throw ms("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.Su=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=bv.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Ve()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=-1;class _s extends om{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new fS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fS(e),this._firestoreClient=void 0,await e}}}function ZV(n,e,t){t||(t=jc);const r=$l(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),o=r.getOptions(t);if(cs(o,e))return s;throw new ge(ne.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ge(ne.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fC)throw new ge(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:t})}function JV(n,e){const t=typeof n=="object"?n:Bd(),r=typeof n=="string"?n:jc,s=$l(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=q_("firestore");o&&QV(s,...o)}return s}function eu(n){if(n._terminated)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ej(n),n._firestoreClient}function ej(n){var e,t,r;const s=n._freezeSettings(),o=function(f,m,p,_){return new EL(f,m,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,FC(_.experimentalLongPollingOptions),_.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new HV(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}}(n._componentsProvider))}function tj(n){return function(t){const r=new Ri;return t.asyncQueue.enqueueAndForget(async()=>VV(await UC(t),r)),r.promise}(eu(n=dr(n,_s)))}function nj(n){return qV(eu(n=dr(n,_s)))}function rj(n){return $V(eu(n=dr(n,_s)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zl(Nn.fromBase64String(e))}catch(t){throw new ge(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zl(Nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=/^__.*__$/;class sj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ca(e,this.data,this.fieldMask,t,this.fieldTransforms):new eh(e,this.data,t,this.fieldTransforms)}}class qC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ca(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $C(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve()}}class Nv{constructor(e,t,r,s,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Nv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Ku(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return vd(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if($C(this.Lu)&&ij.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class aj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||nm(e)}ju(e,t,r,s=!1){return new Nv({Lu:e,methodName:t,zu:r,path:In.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ov(n){const e=n._freezeSettings(),t=nm(n._databaseId);return new aj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oj(n,e,t,r,s,o={}){const c=n.ju(o.merge||o.mergeFields?2:0,e,t,s);Dv("Data must be an object, but it was:",c,r);const f=GC(r,c);let m,p;if(o.merge)m=new hr(c.fieldMask),p=c.fieldTransforms;else if(o.mergeFields){const _=[];for(const T of o.mergeFields){const w=Qy(e,T,t);if(!c.contains(w))throw new ge(ne.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);KC(_,w)||_.push(w)}m=new hr(_),p=c.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,p=c.fieldTransforms;return new sj(new Zn(f),m,p)}class um extends Cv{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof um}}function lj(n,e,t,r){const s=n.ju(1,e,t);Dv("Data must be an object, but it was:",s,r);const o=[],c=Zn.empty();Aa(r,(m,p)=>{const _=kv(e,m,t);p=Kt(p);const T=s.Ku(_);if(p instanceof um)o.push(_);else{const w=ih(p,T);w!=null&&(o.push(_),c.set(_,w))}});const f=new hr(o);return new qC(c,f,s.fieldTransforms)}function uj(n,e,t,r,s,o){const c=n.ju(1,e,t),f=[Qy(e,r,t)],m=[s];if(o.length%2!=0)throw new ge(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)f.push(Qy(e,o[w])),m.push(o[w+1]);const p=[],_=Zn.empty();for(let w=f.length-1;w>=0;--w)if(!KC(p,f[w])){const C=f[w];let N=m[w];N=Kt(N);const G=c.Ku(C);if(N instanceof um)p.push(C);else{const V=ih(N,G);V!=null&&(p.push(C),_.set(C,V))}}const T=new hr(p);return new qC(_,T,c.fieldTransforms)}function cj(n,e,t,r=!1){return ih(t,n.ju(r?4:3,e))}function ih(n,e){if(WC(n=Kt(n)))return Dv("Unsupported field value:",e,n),GC(n,e);if(n instanceof Cv)return function(r,s){if(!$C(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const o=[];let c=0;for(const f of r){let m=ih(f,s.Uu(c));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),c++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=Kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HL(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=un.fromDate(r);return{timestampValue:pd(s.serializer,o)}}if(r instanceof un){const o=new un(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pd(s.serializer,o)}}if(r instanceof Iv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zl)return{bytesValue:iC(s.serializer,r._byteString)};if(r instanceof Gn){const o=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw s.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:mv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof xv)return function(c,f){return{mapValue:{fields:{[kA]:{stringValue:PA},[hd]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw f.Wu("VectorValues must only contain numeric values.");return cv(f.serializer,p)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${am(r)}`)}(n,e)}function GC(n,e){const t={};return CA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Aa(n,(r,s)=>{const o=ih(s,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function WC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof un||n instanceof Iv||n instanceof zl||n instanceof Gn||n instanceof Cv||n instanceof xv)}function Dv(n,e,t){if(!WC(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=am(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function Qy(n,e,t){if((e=Kt(e))instanceof lm)return e._internalPath;if(typeof e=="string")return kv(n,e);throw vd("Field path arguments must be of type string or ",n,!1,void 0,t)}const hj=new RegExp("[~\\*/\\[\\]]");function kv(n,e,t){if(e.search(hj)>=0)throw vd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new lm(...e.split("."))._internalPath}catch{throw vd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vd(n,e,t,r,s){const o=r&&!r.isEmpty(),c=s!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(o||c)&&(m+=" (found",o&&(m+=` in field ${r}`),c&&(m+=` in document ${s}`),m+=")"),new ge(ne.INVALID_ARGUMENT,f+n+m)}function KC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class fj extends QC{data(){return super.data()}}function cm(n,e){return typeof e=="string"?kv(n,e):e instanceof lm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pv{}class YC extends Pv{}function sc(n,e,...t){let r=[];e instanceof Pv&&r.push(e),r=r.concat(t),function(o){const c=o.filter(m=>m instanceof Mv).length,f=o.filter(m=>m instanceof hm).length;if(c>1||c>0&&f>0)throw new ge(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class hm extends YC{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new hm(e,t,r)}_apply(e){const t=this._parse(e);return XC(e._query,t),new Ao(e.firestore,e.converter,jy(e._query,t))}_parse(e){const t=Ov(e.firestore);return function(o,c,f,m,p,_,T){let w;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ge(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){mS(T,_);const N=[];for(const G of T)N.push(dS(m,o,G));w={arrayValue:{values:N}}}else w=dS(m,o,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||mS(T,_),w=cj(f,c,T,_==="in"||_==="not-in");return tn.create(p,_,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ml(n,e,t){const r=e,s=cm("where",n);return hm._create(s,r,t)}class Mv extends Pv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Mv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ni.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,o){let c=s;const f=o.getFlattenedFilters();for(const m of f)XC(c,m),c=jy(c,m)}(e._query,t),new Ao(e.firestore,e.converter,jy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lv extends YC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Lv(e,t)}_apply(e){const t=function(s,o,c){if(s.startAt!==null)throw new ge(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ge(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fc(o,c)}(e._query,this._field,this._direction);return new Ao(e.firestore,e.converter,function(s,o){const c=s.explicitOrderBy.concat([o]);return new Xl(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function ac(n,e="asc"){const t=e,r=cm("orderBy",n);return Lv._create(r,t)}function dS(n,e,t){if(typeof(t=Kt(t))=="string"){if(t==="")throw new ge(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BA(e)&&t.indexOf("/")!==-1)throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Pt.fromString(t));if(!Oe.isDocumentKey(r))throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xb(n,new Oe(r))}if(t instanceof Gn)return xb(n,t._key);throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${am(t)}.`)}function mS(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function XC(n,e){const t=function(s,o){for(const c of s)for(const f of c.getFlattenedFilters())if(o.indexOf(f.op)>=0)return f.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ge(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class mj{convertValue(e,t="none"){switch(va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_a(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Aa(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[hd].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(c=>Wt(c.doubleValue));return new xv(o)}convertGeoPoint(e){return new Iv(Wt(e.latitude),Wt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Yd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Vc(e));default:return null}}convertTimestamp(e){const t=ya(e);return new un(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Pt.fromString(e);_t(cC(r));const s=new Uc(r.get(1),r.get(3)),o=new Oe(r.popFirst(5));return s.isEqual(t)||ms(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ZC extends QC{constructor(e,t,r,s,o,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(cm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Qf extends ZC{data(e={}){return super.data(e)}}class gj{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new yc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Qf(this._firestore,this._userDataWriter,r.key,r,new yc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(f=>{const m=new Qf(s._firestore,s._userDataWriter,f.doc.key,f.doc,new yc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>o||f.type!==3).map(f=>{const m=new Qf(s._firestore,s._userDataWriter,f.doc.key,f.doc,new yc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,_=-1;return f.type!==0&&(p=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),_=c.indexOf(f.doc.key)),{type:yj(f.type),doc:m,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(n){n=dr(n,Gn);const e=dr(n.firestore,_s);return GV(eu(e),n._key).then(t=>Tj(e,n,t))}class JC extends mj{constructor(e){super(),this.firestore=e}convertBytes(e){return new zl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,t)}}function El(n){n=dr(n,Ao);const e=dr(n.firestore,_s),t=eu(e),r=new JC(e);return dj(n._query),WV(t,n._query).then(s=>new gj(e,r,n,s))}function _j(n,e,t){n=dr(n,Gn);const r=dr(n.firestore,_s),s=pj(n.converter,e);return Vv(r,[oj(Ov(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Zr.none())])}function vj(n,e,t,...r){n=dr(n,Gn);const s=dr(n.firestore,_s),o=Ov(s);let c;return c=typeof(e=Kt(e))=="string"||e instanceof lm?uj(o,"updateDoc",n._key,e,t,r):lj(o,"updateDoc",n._key,e),Vv(s,[c.toMutation(n._key,Zr.exists(!0))])}function Ej(n){return Vv(dr(n.firestore,_s),[new hv(n._key,Zr.none())])}function Vv(n,e){return function(r,s){const o=new Ri;return r.asyncQueue.enqueueAndForget(async()=>kV(await UC(r),s,o)),o.promise}(eu(n),e)}function Tj(n,e,t){const r=t.docs.get(e._key),s=new JC(n);return new ZC(n,s,e._key,r,new yc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){Kl=s})(Sa),pa(new hs("firestore",(r,{instanceIdentifier:s,options:o})=>{const c=r.getProvider("app").getImmediate(),f=new _s(new iL(r.getProvider("auth-internal")),new oL(c,r.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ge(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uc(p.options.projectId,_)}(c,s),c);return o=Object.assign({useFetchStreams:t},o),f._setSettings(o),f},"PUBLIC").setMultipleInstances(!0)),Vr(_b,vb,e),Vr(_b,vb,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="firebasestorage.googleapis.com",wj="storageBucket",bj=2*60*1e3,Sj=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Di{constructor(e,t,r=0){super(Vg(e),`Firebase Storage: ${t} (${Vg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ki.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Vg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var xi;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(xi||(xi={}));function Vg(n){return"storage/"+n}function Rj(){const n="An unknown error occurred, please check the error payload for server response.";return new ki(xi.UNKNOWN,n)}function Aj(){return new ki(xi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Cj(){return new ki(xi.CANCELED,"User canceled the upload/download.")}function Ij(n){return new ki(xi.INVALID_URL,"Invalid URL '"+n+"'.")}function xj(n){return new ki(xi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function gS(n){return new ki(xi.INVALID_ARGUMENT,n)}function t1(){return new ki(xi.APP_DELETED,"The Firebase app was deleted.")}function Nj(n){return new ki(xi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Yr.makeFromUrl(e,t)}catch{return new Yr(e,"")}if(r.path==="")return r;throw xj(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+s+c,"i"),m={bucket:1,path:3};function p(te){te.path_=decodeURIComponent(te.path)}const _="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",C=new RegExp(`^https?://${T}/${_}/b/${s}/o${w}`,"i"),N={bucket:1,path:3},G=t===e1?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",Y=new RegExp(`^https?://${G}/${s}/${V}`,"i"),se=[{regex:f,indices:m,postModify:o},{regex:C,indices:N,postModify:p},{regex:Y,indices:{bucket:1,path:2},postModify:p}];for(let te=0;te<se.length;te++){const oe=se[te],j=oe.regex.exec(e);if(j){const k=j[oe.indices.bucket];let I=j[oe.indices.path];I||(I=""),r=new Yr(k,I),oe.postModify(r);break}}if(r==null)throw Ij(e);return r}}class Oj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(n,e,t){let r=1,s=null,o=null,c=!1,f=0;function m(){return f===2}let p=!1;function _(...V){p||(p=!0,e.apply(null,V))}function T(V){s=setTimeout(()=>{s=null,n(C,m())},V)}function w(){o&&clearTimeout(o)}function C(V,...Y){if(p){w();return}if(V){w(),_.call(null,V,...Y);return}if(m()||c){w(),_.call(null,V,...Y);return}r<64&&(r*=2);let se;f===1?(f=2,se=0):se=(r+Math.random())*1e3,T(se)}let N=!1;function G(V){N||(N=!0,w(),!p&&(s!==null?(V||(f=2),clearTimeout(s),T(0)):V||(f=1)))}return T(0),o=setTimeout(()=>{c=!0,G(!0)},t),G}function kj(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(n){return n!==void 0}function yS(n,e,t,r){if(r<e)throw gS(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw gS(`Invalid value for '${n}'. Expected ${t} or less.`)}function Mj(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Ed;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ed||(Ed={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,t,r,s,o,c,f,m,p,_,T,w=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=m,this.timeout_=p,this.progressCallback_=_,this.connectionFactory_=T,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,N)=>{this.resolve_=C,this.reject_=N,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new kf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=f=>{const m=f.loaded,p=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,p)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const f=o.getErrorCode()===Ed.NO_ERROR,m=o.getStatus();if(!f||Lj(m,this.additionalRetryCodes_)&&this.retry){const _=o.getErrorCode()===Ed.ABORT;r(!1,new kf(!1,null,_));return}const p=this.successCodes_.indexOf(m)!==-1;r(!0,new kf(p,o))})},t=(r,s)=>{const o=this.resolve_,c=this.reject_,f=s.connection;if(s.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());Pj(m)?o(m):o()}catch(m){c(m)}else if(f!==null){const m=Rj();m.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,m)):c(m)}else if(s.canceled){const m=this.appDelete_?t1():Cj();c(m)}else{const m=Aj();c(m)}};this.canceled_?t(!1,new kf(!1,null,!0)):this.backoffId_=Dj(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kf{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function jj(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Uj(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function zj(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Fj(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Bj(n,e,t,r,s,o,c=!0){const f=Mj(n.urlParams),m=n.url+f,p=Object.assign({},n.headers);return zj(p,e),jj(p,t),Uj(p,o),Fj(p,r),new Vj(m,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function qj(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t){this._service=e,t instanceof Yr?this._location=t:this._location=Yr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Td(e,t)}get root(){const e=new Yr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qj(this._location.path)}get storage(){return this._service}get parent(){const e=Hj(this._location.path);if(e===null)return null;const t=new Yr(this._location.bucket,e);return new Td(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Nj(e)}}function _S(n,e){const t=e==null?void 0:e[wj];return t==null?null:Yr.makeFromBucketSpec(t,n)}function $j(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:G_(s,n.app.options.projectId))}class Gj{constructor(e,t,r,s,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=e1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=bj,this._maxUploadRetryTime=Sj,this._requests=new Set,s!=null?this._bucket=Yr.makeFromBucketSpec(s,this._host):this._bucket=_S(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Yr.makeFromBucketSpec(this._url,e):this._bucket=_S(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(cr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Td(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new Oj(t1());{const c=Bj(e,this._appId,r,s,t,this._firebaseVersion,o);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const vS="@firebase/storage",ES="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="storage";function Wj(n=Bd(),e){n=Kt(n);const r=$l(n,n1).getImmediate({identifier:e}),s=q_("storage");return s&&Kj(r,...s),r}function Kj(n,e,t,r={}){$j(n,e,t,r)}function Qj(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Gj(t,r,s,e,Sa)}function Yj(){pa(new hs(n1,Qj,"PUBLIC").setMultipleInstances(!0)),Vr(vS,ES,""),Vr(vS,ES,"esm2017")}Yj();var TS={};const wS="@firebase/database",bS="1.0.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r1="";function Xj(n){r1=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Cn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Dc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return ys(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Zj(e)}}catch{}return new Jj},fo=i1("localStorage"),eU=i1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=new Fd("@firebase/database"),tU=function(){let n=1;return function(){return n++}}(),s1=function(n){const e=DD(n),t=new CD;t.update(e);const r=t.digest();return H_.encodeByteArray(r)},sh=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=sh.apply(null,r):typeof r=="object"?e+=Cn(r):e+=r,e+=" "}return e};let bc=null,SS=!0;const nU=function(n,e){ve(!0,"Can't turn on custom loggers persistently."),xl.logLevel=Qe.VERBOSE,bc=xl.log.bind(xl)},Vn=function(...n){if(SS===!0&&(SS=!1,bc===null&&eU.get("logging_enabled")===!0&&nU()),bc){const e=sh.apply(null,n);bc(e)}},ah=function(n){return function(...e){Vn(n,...e)}},Yy=function(...n){const e="FIREBASE INTERNAL ERROR: "+sh(...n);xl.error(e)},gs=function(...n){const e=`FIREBASE FATAL ERROR: ${sh(...n)}`;throw xl.error(e),new Error(e)},fr=function(...n){const e="FIREBASE WARNING: "+sh(...n);xl.warn(e)},rU=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&fr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},a1=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},iU=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Fl="[MIN_NAME]",_o="[MAX_NAME]",tu=function(n,e){if(n===e)return 0;if(n===Fl||e===_o)return-1;if(e===Fl||n===_o)return 1;{const t=RS(n),r=RS(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},sU=function(n,e){return n===e?0:n<e?-1:1},oc=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Cn(e))},jv=function(n){if(typeof n!="object"||n===null)return Cn(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Cn(e[r]),t+=":",t+=jv(n[e[r]]);return t+="}",t},o1=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)s+e>t?r.push(n.substring(s,t)):r.push(n.substring(s,s+e));return r};function jr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const l1=function(n){ve(!a1(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let s,o,c,f,m;n===0?(o=0,c=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=f+r,c=Math.round(n*Math.pow(2,t-f)-Math.pow(2,t))):(o=0,c=Math.round(n/Math.pow(2,1-r-t))));const p=[];for(m=t;m;m-=1)p.push(c%2?1:0),c=Math.floor(c/2);for(m=e;m;m-=1)p.push(o%2?1:0),o=Math.floor(o/2);p.push(s?1:0),p.reverse();const _=p.join("");let T="";for(m=0;m<64;m+=8){let w=parseInt(_.substr(m,8),2).toString(16);w.length===1&&(w="0"+w),T=T+w}return T.toLowerCase()},aU=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},oU=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},lU=new RegExp("^-?(0*)\\d{1,10}$"),uU=-2147483648,cU=2147483647,RS=function(n){if(lU.test(n)){const e=Number(n);if(e>=uU&&e<=cU)return e}return null},oh=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw fr("Exception was thrown by user callback.",t),e},Math.floor(0))}},hU=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Sc=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,cr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){fr(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Vn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',fr(e)}}class Yf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Yf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="5",u1="v",c1="s",h1="r",f1="f",d1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,m1="ls",p1="p",Xy="ac",g1="websocket",y1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,t,r,s,o=!1,c="",f=!1,m=!1,p=null){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=m,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&fo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function mU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function v1(n,e,t){ve(typeof e=="string","typeof type must == string"),ve(typeof t=="object","typeof params must == object");let r;if(e===g1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===y1)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);mU(n)&&(t.ns=n.namespace);const s=[];return jr(t,(o,c)=>{s.push(o+"="+c)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(){this.counters_={}}incrementCounter(e,t=1){ys(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return lD(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg={},Ug={};function zv(n){const e=n.toString();return jg[e]||(jg[e]=new pU),jg[e]}function gU(n,e){const t=n.toString();return Ug[t]||(Ug[t]=e()),Ug[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&oh(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="start",_U="close",vU="pLPCommand",EU="pRTLPCB",E1="id",T1="pw",w1="ser",TU="cb",wU="seg",bU="ts",SU="d",RU="dframe",b1=1870,S1=30,AU=b1-S1,CU=25e3,IU=3e4;class wl{constructor(e,t,r,s,o,c,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ah(e),this.stats_=zv(t),this.urlFn=m=>(this.appCheckToken&&(m[Xy]=this.appCheckToken),v1(t,y1,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new yU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(IU)),iU(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Fv((...o)=>{const[c,f,m,p,_]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===AS)this.id=f,this.password=m;else if(c===_U)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...o)=>{const[c,f]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const r={};r[AS]="t",r[w1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[TU]=this.scriptTagHolder.uniqueCallbackIdentifier),r[u1]=Uv,this.transportSessionId&&(r[c1]=this.transportSessionId),this.lastSessionId&&(r[m1]=this.lastSessionId),this.applicationId&&(r[p1]=this.applicationId),this.appCheckToken&&(r[Xy]=this.appCheckToken),typeof location<"u"&&location.hostname&&d1.test(location.hostname)&&(r[h1]=f1);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wl.forceAllow_=!0}static forceDisallow(){wl.forceDisallow_=!0}static isAvailable(){return wl.forceAllow_?!0:!wl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!aU()&&!oU()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Cn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=AR(t),s=o1(r,AU);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[RU]="t",r[E1]=e,r[T1]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Cn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Fv{constructor(e,t,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=tU(),window[vU+this.uniqueCallbackIdentifier]=e,window[EU+this.uniqueCallbackIdentifier]=t,this.myIFrame=Fv.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){Vn("frame writing exception"),f.stack&&Vn(f.stack),Vn(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Vn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[E1]=this.myID,e[T1]=this.myPW,e[w1]=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+S1+r.length<=b1;){const c=this.pendingSegs.shift();r=r+"&"+wU+s+"="+c.seg+"&"+bU+s+"="+c.ts+"&"+SU+s+"="+c.d,s++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(CU)),o=()=>{clearTimeout(s),r()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Vn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU=16384,NU=45e3;let wd=null;typeof MozWebSocket<"u"?wd=MozWebSocket:typeof WebSocket<"u"&&(wd=WebSocket);class Qr{constructor(e,t,r,s,o,c,f){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ah(this.connId),this.stats_=zv(t),this.connURL=Qr.connectionURL_(t,c,f,s,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,s,o){const c={};return c[u1]=Uv,typeof location<"u"&&location.hostname&&d1.test(location.hostname)&&(c[h1]=f1),t&&(c[c1]=t),r&&(c[m1]=r),s&&(c[Xy]=s),o&&(c[p1]=o),v1(e,g1,c)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fo.set("previous_websocket_failure",!0);try{let r;_D(),this.mySock=new wd(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Qr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&wd!==null&&!Qr.forceDisallow_}static previouslyFailed(){return fo.isInMemoryStorage||fo.get("previous_websocket_failure")===!0}markConnectionHealthy(){fo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=Dc(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ve(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=Cn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=o1(t,xU);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(NU))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Qr.responsesRequiredToBeHealthy=2;Qr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{static get ALL_TRANSPORTS(){return[wl,Qr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Qr&&Qr.isAvailable();let r=t&&!Qr.previouslyFailed();if(e.webSocketOnly&&(t||fr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Qr];else{const s=this.transports_=[];for(const o of qc.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);qc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}qc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU=6e4,DU=5e3,kU=10*1024,PU=100*1024,zg="t",CS="d",MU="s",IS="r",LU="e",xS="o",NS="a",OS="n",DS="p",VU="h";class jU{constructor(e,t,r,s,o,c,f,m,p,_){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=m,this.onKill_=p,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ah("c:"+this.id+":"),this.transportManager_=new qc(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Sc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>PU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>kU?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(zg in e){const t=e[zg];t===NS?this.upgradeIfSecondaryHealthy_():t===IS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===xS&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=oc("t",e),r=oc("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:DS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:NS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:OS,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=oc("t",e),r=oc("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=oc(zg,e);if(CS in e){const r=e[CS];if(t===VU){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===OS){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===MU?this.onConnectionShutdown_(r):t===IS?this.onReset_(r):t===LU?Yy("Server Error: "+r):t===xS?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Yy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Uv!==r&&fr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Sc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(OU))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Sc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(DU))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:DS,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.allowedEvents_=e,this.listeners_={},ve(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let o=0;o<s.length;o++)if(s[o].callback===t&&(!r||r===s[o].context)){s.splice(o,1);return}}validateEventType_(e){ve(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd extends A1{static getInstance(){return new bd}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!W_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ve(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=32,PS=768;class Mt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function bt(){return new Mt("")}function lt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function wa(n){return n.pieces_.length-n.pieceNum_}function kt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Mt(n.pieces_,e)}function C1(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function UU(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function I1(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function x1(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Mt(e,0)}function En(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Mt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new Mt(t,0)}function et(n){return n.pieceNum_>=n.pieces_.length}function Lr(n,e){const t=lt(n),r=lt(e);if(t===null)return e;if(t===r)return Lr(kt(n),kt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function N1(n,e){if(wa(n)!==wa(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Xr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(wa(n)>wa(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class zU{constructor(e,t){this.errorPrefix_=t,this.parts_=I1(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=zd(this.parts_[r]);O1(this)}}function FU(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=zd(e),O1(n)}function BU(n){const e=n.parts_.pop();n.byteLength_-=zd(e),n.parts_.length>0&&(n.byteLength_-=1)}function O1(n){if(n.byteLength_>PS)throw new Error(n.errorPrefix_+"has a key path longer than "+PS+" bytes ("+n.byteLength_+").");if(n.parts_.length>kS)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+kS+") or object contains a cycle "+lo(n))}function lo(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv extends A1{static getInstance(){return new Bv}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return ve(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=1e3,HU=60*5*1e3,MS=30*1e3,qU=1.3,$U=3e4,GU="server_kill",LS=3;class us extends R1{constructor(e,t,r,s,o,c,f,m){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=c,this.appCheckTokenProvider_=f,this.authOverride_=m,this.id=us.nextPersistentConnectionId_++,this.log_=ah("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=lc,this.maxReconnectDelay_=HU,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Bv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&bd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const s=++this.requestNumber_,o={r:s,a:e,b:t};this.log_(Cn(o)),ve(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const t=new $_,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const f=c.d;c.s==="ok"?t.resolve(f):t.reject(f)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,r,s){this.initConnection_();const o=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+o),this.listens.has(c)||this.listens.set(c,new Map),ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ve(!this.listens.get(c).has(o),"listen() called twice for same path/queryId.");const f={onComplete:s,hashFn:t,query:e,tag:r};this.listens.get(c).set(o,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r},c="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(c,o,f=>{const m=f.d,p=f.s;us.warnOnListenWarnings_(m,t),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",f),p!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(p,m))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&ys(e,"w")){const r=Dl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();fr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||AD(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=MS)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=RD(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,s=>{const o=s.s,c=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,t)}sendUnlisten_(e,t,r,s){this.log_("Unlisten on "+e+" for "+t);const o={p:e},c="n";s&&(o.q=r,o.t=s),this.sendRequest(c,o)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,s){const o={p:t,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,c=>{s&&setTimeout(()=>{s(c.s,c.d)},Math.floor(0))})}put(e,t,r,s){this.putInternal("p",e,t,r,s)}merge(e,t,r,s){this.putInternal("m",e,t,r,s)}putInternal(e,t,r,s,o){this.initConnection_();const c={p:t,d:r};o!==void 0&&(c.h=o),this.outstandingPuts_.push({action:e,request:c,onComplete:s}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Cn(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Yy("Unrecognized action received from server: "+Cn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ve(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=lc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=lc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>$U&&(this.reconnectDelay_=lc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*qU)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+us.nextConnectionId_++,o=this.lastSessionId;let c=!1,f=null;const m=function(){f?f.close():(c=!0,r())},p=function(T){ve(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(T)};this.realtime_={close:m,sendRequest:p};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[T,w]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);c?Vn("getToken() completed but was canceled"):(Vn("getToken() completed. Creating connection."),this.authToken_=T&&T.accessToken,this.appCheckToken_=w&&w.token,f=new jU(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,C=>{fr(C+" ("+this.repoInfo_.toString()+")"),this.interrupt(GU)},o))}catch(T){this.log_("Failed to get token: "+T),c||(this.repoInfo_.nodeAdmin&&fr(T),m())}}}interrupt(e){Vn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Vn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],by(this.interruptReasons_)&&(this.reconnectDelay_=lc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(o=>jv(o)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const r=new Mt(e).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(t),o.delete(t),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,t){Vn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=LS&&(this.reconnectDelay_=MS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Vn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=LS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+r1.replace(/\./g,"-")]=1,W_()?e["framework.cordova"]=1:OR()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=bd.getInstance().currentlyOnline();return by(this.interruptReasons_)&&e}}us.nextPersistentConnectionId_=0;us.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ut(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new ut(Fl,e),s=new ut(Fl,t);return this.compare(r,s)!==0}minPost(){return ut.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pf;class D1 extends fm{static get __EMPTY_NODE(){return Pf}static set __EMPTY_NODE(e){Pf=e}compare(e,t){return tu(e.name,t.name)}isDefinedOn(e){throw Hl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ut.MIN}maxPost(){return new ut(_o,Pf)}makePost(e,t){return ve(typeof e=="string","KeyIndex indexValue must always be a string."),new ut(e,Pf)}toString(){return".key"}}const Nl=new D1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,r,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,s&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class vn{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??vn.RED,this.left=s??Jn.EMPTY_NODE,this.right=o??Jn.EMPTY_NODE}copy(e,t,r,s,o){return new vn(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Jn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,s;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return Jn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}vn.RED=!0;vn.BLACK=!1;class WU{copy(e,t,r,s,o){return this}insert(e,t,r){return new vn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Jn{constructor(e,t=Jn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Jn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,vn.BLACK,null,null))}remove(e){return new Jn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,vn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Mf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Mf(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Mf(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Mf(this.root_,null,this.comparator_,!0,e)}}Jn.EMPTY_NODE=new WU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(n,e){return tu(n.name,e.name)}function Hv(n,e){return tu(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zy;function QU(n){Zy=n}const k1=function(n){return typeof n=="number"?"number:"+l1(n):"string:"+n},P1=function(n){if(n.isLeafNode()){const e=n.val();ve(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ys(e,".sv"),"Priority must be a string or number.")}else ve(n===Zy||n.isEmpty(),"priority of unexpected type.");ve(n===Zy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VS;class yn{static set __childrenNodeConstructor(e){VS=e}static get __childrenNodeConstructor(){return VS}constructor(e,t=yn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ve(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),P1(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new yn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:yn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return et(e)?this:lt(e)===".priority"?this.priorityNode_:yn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:yn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=lt(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(ve(r!==".priority"||wa(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,yn.__childrenNodeConstructor.EMPTY_NODE.updateChild(kt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+k1(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=l1(this.value_):e+=this.value_,this.lazyHash_=s1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===yn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof yn.__childrenNodeConstructor?-1:(ve(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,s=yn.VALUE_TYPE_ORDER.indexOf(t),o=yn.VALUE_TYPE_ORDER.indexOf(r);return ve(s>=0,"Unknown leaf type: "+t),ve(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}yn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M1,L1;function YU(n){M1=n}function XU(n){L1=n}class ZU extends fm{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),o=r.compareTo(s);return o===0?tu(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ut.MIN}maxPost(){return new ut(_o,new yn("[PRIORITY-POST]",L1))}makePost(e,t){const r=M1(e);return new ut(t,new yn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Un=new ZU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU=Math.log(2);class e6{constructor(e){const t=o=>parseInt(Math.log(o)/JU,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Sd=function(n,e,t,r){n.sort(e);const s=function(m,p){const _=p-m;let T,w;if(_===0)return null;if(_===1)return T=n[m],w=t?t(T):T,new vn(w,T.node,vn.BLACK,null,null);{const C=parseInt(_/2,10)+m,N=s(m,C),G=s(C+1,p);return T=n[C],w=t?t(T):T,new vn(w,T.node,vn.BLACK,N,G)}},o=function(m){let p=null,_=null,T=n.length;const w=function(N,G){const V=T-N,Y=T;T-=N;const Z=s(V+1,Y),se=n[V],te=t?t(se):se;C(new vn(te,se.node,G,null,Z))},C=function(N){p?(p.left=N,p=N):(_=N,p=N)};for(let N=0;N<m.count;++N){const G=m.nextBitIsOne(),V=Math.pow(2,m.count-(N+1));G?w(V,vn.BLACK):(w(V,vn.BLACK),w(V,vn.RED))}return _},c=new e6(n.length),f=o(c);return new Jn(r||e,f)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fg;const pl={};class ls{static get Default(){return ve(pl&&Un,"ChildrenNode.ts has not been loaded"),Fg=Fg||new ls({".priority":pl},{".priority":Un}),Fg}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Dl(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Jn?t:null}hasIndex(e){return ys(this.indexSet_,e.toString())}addIndex(e,t){ve(e!==Nl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const o=t.getIterator(ut.Wrap);let c=o.getNext();for(;c;)s=s||e.isDefinedOn(c.node),r.push(c),c=o.getNext();let f;s?f=Sd(r,e.getCompare()):f=pl;const m=e.toString(),p=Object.assign({},this.indexSet_);p[m]=e;const _=Object.assign({},this.indexes_);return _[m]=f,new ls(_,p)}addToIndexes(e,t){const r=rd(this.indexes_,(s,o)=>{const c=Dl(this.indexSet_,o);if(ve(c,"Missing index implementation for "+o),s===pl)if(c.isDefinedOn(e.node)){const f=[],m=t.getIterator(ut.Wrap);let p=m.getNext();for(;p;)p.name!==e.name&&f.push(p),p=m.getNext();return f.push(e),Sd(f,c.getCompare())}else return pl;else{const f=t.get(e.name);let m=s;return f&&(m=m.remove(new ut(e.name,f))),m.insert(e,e.node)}});return new ls(r,this.indexSet_)}removeFromIndexes(e,t){const r=rd(this.indexes_,s=>{if(s===pl)return s;{const o=t.get(e.name);return o?s.remove(new ut(e.name,o)):s}});return new ls(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc;class yt{static get EMPTY_NODE(){return uc||(uc=new yt(new Jn(Hv),null,ls.Default))}constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&P1(this.priorityNode_),this.children_.isEmpty()&&ve(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||uc}updatePriority(e){return this.children_.isEmpty()?this:new yt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?uc:t}}getChild(e){const t=lt(e);return t===null?this:this.getImmediateChild(t).getChild(kt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ve(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new ut(e,t);let s,o;t.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(r,this.children_));const c=s.isEmpty()?uc:this.priorityNode_;return new yt(s,c,o)}}updateChild(e,t){const r=lt(e);if(r===null)return t;{ve(lt(e)!==".priority"||wa(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(kt(e),t);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,s=0,o=!0;if(this.forEachChild(Un,(c,f)=>{t[c]=f.val(e),r++,o&&yt.INTEGER_REGEXP_.test(c)?s=Math.max(s,Number(c)):o=!1}),!e&&o&&s<2*r){const c=[];for(const f in t)c[f]=t[f];return c}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+k1(this.getPriority().val())+":"),this.forEachChild(Un,(t,r)=>{const s=r.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":s1(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new ut(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new ut(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new ut(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,ut.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,ut.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===lh?-1:0}withIndex(e){if(e===Nl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new yt(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Nl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(Un),s=t.getIterator(Un);let o=r.getNext(),c=s.getNext();for(;o&&c;){if(o.name!==c.name||!o.node.equals(c.node))return!1;o=r.getNext(),c=s.getNext()}return o===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===Nl?null:this.indexMap_.get(e.toString())}}yt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class t6 extends yt{constructor(){super(new Jn(Hv),yt.EMPTY_NODE,ls.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return yt.EMPTY_NODE}isEmpty(){return!1}}const lh=new t6;Object.defineProperties(ut,{MIN:{value:new ut(Fl,yt.EMPTY_NODE)},MAX:{value:new ut(_o,lh)}});D1.__EMPTY_NODE=yt.EMPTY_NODE;yn.__childrenNodeConstructor=yt;QU(lh);XU(lh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=!0;function jn(n,e=null){if(n===null)return yt.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ve(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new yn(t,jn(e))}if(!(n instanceof Array)&&n6){const t=[];let r=!1;if(jr(n,(c,f)=>{if(c.substring(0,1)!=="."){const m=jn(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new ut(c,m)))}}),t.length===0)return yt.EMPTY_NODE;const o=Sd(t,KU,c=>c.name,Hv);if(r){const c=Sd(t,Un.getCompare());return new yt(o,jn(e),new ls({".priority":c},{".priority":Un}))}else return new yt(o,jn(e),ls.Default)}else{let t=yt.EMPTY_NODE;return jr(n,(r,s)=>{if(ys(n,r)&&r.substring(0,1)!=="."){const o=jn(s);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(jn(e))}}YU(jn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6 extends fm{constructor(e){super(),this.indexPath_=e,ve(!et(e)&&lt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),o=r.compareTo(s);return o===0?tu(e.name,t.name):o}makePost(e,t){const r=jn(e),s=yt.EMPTY_NODE.updateChild(this.indexPath_,r);return new ut(t,s)}maxPost(){const e=yt.EMPTY_NODE.updateChild(this.indexPath_,lh);return new ut(_o,e)}toString(){return I1(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6 extends fm{compare(e,t){const r=e.node.compareTo(t.node);return r===0?tu(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ut.MIN}maxPost(){return ut.MAX}makePost(e,t){const r=jn(e);return new ut(t,r)}toString(){return".value"}}const s6=new i6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(n){return{type:"value",snapshotNode:n}}function o6(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function l6(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function jS(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function u6(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Un}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ve(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ve(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Fl}hasEnd(){return this.endSet_}getIndexEndValue(){return ve(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ve(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_o}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ve(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Un}copy(){const e=new qv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function US(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Un?t="$priority":n.index_===s6?t="$value":n.index_===Nl?t="$key":(ve(n.index_ instanceof r6,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Cn(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=Cn(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Cn(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Cn(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Cn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function zS(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Un&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends R1{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ve(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=ah("p:rest:"),this.listens_={}}listen(e,t,r,s){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const c=Rd.getListenId_(e,r),f={};this.listens_[c]=f;const m=US(e._queryParams);this.restRequest_(o+".json",m,(p,_)=>{let T=_;if(p===404&&(T=null,p=null),p===null&&this.onDataUpdate_(o,T,!1,r),Dl(this.listens_,c)===f){let w;p?p===401?w="permission_denied":w="rest_error:"+p:w="ok",s(w,null)}})}unlisten(e,t){const r=Rd.getListenId_(e,t);delete this.listens_[r]}get(e){const t=US(e._queryParams),r=e._path.toString(),s=new $_;return this.restRequest_(r+".json",t,(o,c)=>{let f=c;o===404&&(f=null,o=null),o===null?(this.onDataUpdate_(r,f,!1,null),s.resolve(f)):s.reject(new Error(f))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(t.auth=s.accessToken),o&&o.token&&(t.ac=o.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ql(t);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&f.readyState===4){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=Dc(f.responseText)}catch{fr("Failed to parse JSON response for "+c+": "+f.responseText)}r(null,m)}else f.status!==401&&f.status!==404&&fr("Got unsuccessful REST response for "+c+" Status: "+f.status),r(f.status);r=null}},f.open("GET",c,!0),f.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(){this.rootNode_=yt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(){return{value:null,children:new Map}}function V1(n,e,t){if(et(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=lt(e);n.children.has(r)||n.children.set(r,Ad());const s=n.children.get(r);e=kt(e),V1(s,e,t)}}function Jy(n,e,t){n.value!==null?t(e,n.value):h6(n,(r,s)=>{const o=new Mt(e.toString()+"/"+r);Jy(s,o,t)})}function h6(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&jr(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=10*1e3,d6=30*1e3,m6=5*60*1e3;class p6{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new f6(e);const r=FS+(d6-FS)*Math.random();Sc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;jr(e,(s,o)=>{o>0&&ys(this.statsToReport_,s)&&(t[s]=o,r=!0)}),r&&this.server_.reportStats(t),Sc(this.reportStats_.bind(this),Math.floor(Math.random()*2*m6))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ti;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ti||(Ti={}));function j1(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function U1(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function z1(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ti.ACK_USER_WRITE,this.source=j1()}operationForChild(e){if(et(this.path)){if(this.affectedTree.value!=null)return ve(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Mt(e));return new Cd(bt(),t,this.revert)}}else return ve(lt(this.path)===e,"operationForChild called for unrelated child."),new Cd(kt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ti.OVERWRITE}operationForChild(e){return et(this.path)?new vo(this.source,bt(),this.snap.getImmediateChild(e)):new vo(this.source,kt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ti.MERGE}operationForChild(e){if(et(this.path)){const t=this.children.subtree(new Mt(e));return t.isEmpty()?null:t.value?new vo(this.source,bt(),t.value):new $c(this.source,bt(),t)}else return ve(lt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new $c(this.source,kt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(et(e))return this.isFullyInitialized()&&!this.filtered_;const t=lt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function g6(n,e,t,r){const s=[],o=[];return e.forEach(c=>{c.type==="child_changed"&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(u6(c.childName,c.snapshotNode))}),cc(n,s,"child_removed",e,r,t),cc(n,s,"child_added",e,r,t),cc(n,s,"child_moved",o,r,t),cc(n,s,"child_changed",e,r,t),cc(n,s,"value",e,r,t),s}function cc(n,e,t,r,s,o){const c=r.filter(f=>f.type===t);c.sort((f,m)=>_6(n,f,m)),c.forEach(f=>{const m=y6(n,f,o);s.forEach(p=>{p.respondsTo(f.type)&&e.push(p.createEvent(m,n.query_))})})}function y6(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function _6(n,e,t){if(e.childName==null||t.childName==null)throw Hl("Should only compare child_ events.");const r=new ut(e.childName,e.snapshotNode),s=new ut(t.childName,t.snapshotNode);return n.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(n,e){return{eventCache:n,serverCache:e}}function Rc(n,e,t,r){return F1(new $v(e,t,r),n.serverCache)}function B1(n,e,t,r){return F1(n.eventCache,new $v(e,t,r))}function e_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Eo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bg;const v6=()=>(Bg||(Bg=new Jn(sU)),Bg);class Dt{static fromObject(e){let t=new Dt(null);return jr(e,(r,s)=>{t=t.set(new Mt(r),s)}),t}constructor(e,t=v6()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:bt(),value:this.value};if(et(e))return null;{const r=lt(e),s=this.children.get(r);if(s!==null){const o=s.findRootMostMatchingPathAndValue(kt(e),t);return o!=null?{path:En(new Mt(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(et(e))return this;{const t=lt(e),r=this.children.get(t);return r!==null?r.subtree(kt(e)):new Dt(null)}}set(e,t){if(et(e))return new Dt(t,this.children);{const r=lt(e),o=(this.children.get(r)||new Dt(null)).set(kt(e),t),c=this.children.insert(r,o);return new Dt(this.value,c)}}remove(e){if(et(e))return this.children.isEmpty()?new Dt(null):new Dt(null,this.children);{const t=lt(e),r=this.children.get(t);if(r){const s=r.remove(kt(e));let o;return s.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,s),this.value===null&&o.isEmpty()?new Dt(null):new Dt(this.value,o)}else return this}}get(e){if(et(e))return this.value;{const t=lt(e),r=this.children.get(t);return r?r.get(kt(e)):null}}setTree(e,t){if(et(e))return t;{const r=lt(e),o=(this.children.get(r)||new Dt(null)).setTree(kt(e),t);let c;return o.isEmpty()?c=this.children.remove(r):c=this.children.insert(r,o),new Dt(this.value,c)}}fold(e){return this.fold_(bt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,o)=>{r[s]=o.fold_(En(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,bt(),t)}findOnPath_(e,t,r){const s=this.value?r(t,this.value):!1;if(s)return s;if(et(e))return null;{const o=lt(e),c=this.children.get(o);return c?c.findOnPath_(kt(e),En(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,bt(),t)}foreachOnPath_(e,t,r){if(et(e))return this;{this.value&&r(t,this.value);const s=lt(e),o=this.children.get(s);return o?o.foreachOnPath_(kt(e),En(t,s),r):new Dt(null)}}foreach(e){this.foreach_(bt(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(En(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.writeTree_=e}static empty(){return new Jr(new Dt(null))}}function Ac(n,e,t){if(et(e))return new Jr(new Dt(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let o=r.value;const c=Lr(s,e);return o=o.updateChild(c,t),new Jr(n.writeTree_.set(s,o))}else{const s=new Dt(t),o=n.writeTree_.setTree(e,s);return new Jr(o)}}}function BS(n,e,t){let r=n;return jr(t,(s,o)=>{r=Ac(r,En(e,s),o)}),r}function HS(n,e){if(et(e))return Jr.empty();{const t=n.writeTree_.setTree(e,new Dt(null));return new Jr(t)}}function t_(n,e){return Co(n,e)!=null}function Co(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Lr(t.path,e)):null}function qS(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Un,(r,s)=>{e.push(new ut(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new ut(r,s.value))}),e}function da(n,e){if(et(e))return n;{const t=Co(n,e);return t!=null?new Jr(new Dt(t)):new Jr(n.writeTree_.subtree(e))}}function n_(n){return n.writeTree_.isEmpty()}function Bl(n,e){return H1(bt(),n.writeTree_,e)}function H1(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,o)=>{s===".priority"?(ve(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=H1(En(n,s),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(En(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(n,e){return Q1(e,n)}function E6(n,e,t,r,s){ve(r>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=Ac(n.visibleWrites,e,t)),n.lastWriteId=r}function T6(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function w6(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);ve(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,o=!1,c=n.allWrites.length-1;for(;s&&c>=0;){const f=n.allWrites[c];f.visible&&(c>=t&&b6(f,r.path)?s=!1:Xr(r.path,f.path)&&(o=!0)),c--}if(s){if(o)return S6(n),!0;if(r.snap)n.visibleWrites=HS(n.visibleWrites,r.path);else{const f=r.children;jr(f,m=>{n.visibleWrites=HS(n.visibleWrites,En(r.path,m))})}return!0}else return!1}function b6(n,e){if(n.snap)return Xr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Xr(En(n.path,t),e))return!0;return!1}function S6(n){n.visibleWrites=$1(n.allWrites,R6,bt()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function R6(n){return n.visible}function $1(n,e,t){let r=Jr.empty();for(let s=0;s<n.length;++s){const o=n[s];if(e(o)){const c=o.path;let f;if(o.snap)Xr(t,c)?(f=Lr(t,c),r=Ac(r,f,o.snap)):Xr(c,t)&&(f=Lr(c,t),r=Ac(r,bt(),o.snap.getChild(f)));else if(o.children){if(Xr(t,c))f=Lr(t,c),r=BS(r,f,o.children);else if(Xr(c,t))if(f=Lr(c,t),et(f))r=BS(r,bt(),o.children);else{const m=Dl(o.children,lt(f));if(m){const p=m.getChild(kt(f));r=Ac(r,bt(),p)}}}else throw Hl("WriteRecord should have .snap or .children")}}return r}function G1(n,e,t,r,s){if(!r&&!s){const o=Co(n.visibleWrites,e);if(o!=null)return o;{const c=da(n.visibleWrites,e);if(n_(c))return t;if(t==null&&!t_(c,bt()))return null;{const f=t||yt.EMPTY_NODE;return Bl(c,f)}}}else{const o=da(n.visibleWrites,e);if(!s&&n_(o))return t;if(!s&&t==null&&!t_(o,bt()))return null;{const c=function(p){return(p.visible||s)&&(!r||!~r.indexOf(p.writeId))&&(Xr(p.path,e)||Xr(e,p.path))},f=$1(n.allWrites,c,e),m=t||yt.EMPTY_NODE;return Bl(f,m)}}}function A6(n,e,t){let r=yt.EMPTY_NODE;const s=Co(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Un,(o,c)=>{r=r.updateImmediateChild(o,c)}),r;if(t){const o=da(n.visibleWrites,e);return t.forEachChild(Un,(c,f)=>{const m=Bl(da(o,new Mt(c)),f);r=r.updateImmediateChild(c,m)}),qS(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}else{const o=da(n.visibleWrites,e);return qS(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}}function C6(n,e,t,r,s){ve(r||s,"Either existingEventSnap or existingServerSnap must exist");const o=En(e,t);if(t_(n.visibleWrites,o))return null;{const c=da(n.visibleWrites,o);return n_(c)?s.getChild(t):Bl(c,s.getChild(t))}}function I6(n,e,t,r){const s=En(e,t),o=Co(n.visibleWrites,s);if(o!=null)return o;if(r.isCompleteForChild(t)){const c=da(n.visibleWrites,s);return Bl(c,r.getNode().getImmediateChild(t))}else return null}function x6(n,e){return Co(n.visibleWrites,e)}function N6(n,e,t,r,s,o,c){let f;const m=da(n.visibleWrites,e),p=Co(m,bt());if(p!=null)f=p;else if(t!=null)f=Bl(m,t);else return[];if(f=f.withIndex(c),!f.isEmpty()&&!f.isLeafNode()){const _=[],T=c.getCompare(),w=o?f.getReverseIteratorFrom(r,c):f.getIteratorFrom(r,c);let C=w.getNext();for(;C&&_.length<s;)T(C,r)!==0&&_.push(C),C=w.getNext();return _}else return[]}function O6(){return{visibleWrites:Jr.empty(),allWrites:[],lastWriteId:-1}}function r_(n,e,t,r){return G1(n.writeTree,n.treePath,e,t,r)}function W1(n,e){return A6(n.writeTree,n.treePath,e)}function $S(n,e,t,r){return C6(n.writeTree,n.treePath,e,t,r)}function Id(n,e){return x6(n.writeTree,En(n.treePath,e))}function D6(n,e,t,r,s,o){return N6(n.writeTree,n.treePath,e,t,r,s,o)}function Gv(n,e,t){return I6(n.writeTree,n.treePath,e,t)}function K1(n,e){return Q1(En(n.treePath,e),n.writeTree)}function Q1(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;ve(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ve(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const o=s.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,jS(r,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,l6(r,s.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,o6(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,jS(r,e.snapshotNode,s.oldSnap));else throw Hl("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const Y1=new P6;class Wv{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new $v(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Gv(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Eo(this.viewCache_),o=D6(this.writes_,s,t,1,r,e);return o.length===0?null:o[0]}}function M6(n,e){ve(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ve(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function L6(n,e,t,r,s){const o=new k6;let c,f;if(t.type===Ti.OVERWRITE){const p=t;p.source.fromUser?c=i_(n,e,p.path,p.snap,r,s,o):(ve(p.source.fromServer,"Unknown source."),f=p.source.tagged||e.serverCache.isFiltered()&&!et(p.path),c=xd(n,e,p.path,p.snap,r,s,f,o))}else if(t.type===Ti.MERGE){const p=t;p.source.fromUser?c=j6(n,e,p.path,p.children,r,s,o):(ve(p.source.fromServer,"Unknown source."),f=p.source.tagged||e.serverCache.isFiltered(),c=s_(n,e,p.path,p.children,r,s,f,o))}else if(t.type===Ti.ACK_USER_WRITE){const p=t;p.revert?c=F6(n,e,p.path,r,s,o):c=U6(n,e,p.path,p.affectedTree,r,s,o)}else if(t.type===Ti.LISTEN_COMPLETE)c=z6(n,e,t.path,r,o);else throw Hl("Unknown operation type: "+t.type);const m=o.getChanges();return V6(e,c,m),{viewCache:c,changes:m}}function V6(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=e_(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(a6(e_(e)))}}function X1(n,e,t,r,s,o){const c=e.eventCache;if(Id(r,t)!=null)return e;{let f,m;if(et(t))if(ve(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=Eo(e),_=p instanceof yt?p:yt.EMPTY_NODE,T=W1(r,_);f=n.filter.updateFullNode(e.eventCache.getNode(),T,o)}else{const p=r_(r,Eo(e));f=n.filter.updateFullNode(e.eventCache.getNode(),p,o)}else{const p=lt(t);if(p===".priority"){ve(wa(t)===1,"Can't have a priority with additional path components");const _=c.getNode();m=e.serverCache.getNode();const T=$S(r,t,_,m);T!=null?f=n.filter.updatePriority(_,T):f=c.getNode()}else{const _=kt(t);let T;if(c.isCompleteForChild(p)){m=e.serverCache.getNode();const w=$S(r,t,c.getNode(),m);w!=null?T=c.getNode().getImmediateChild(p).updateChild(_,w):T=c.getNode().getImmediateChild(p)}else T=Gv(r,p,e.serverCache);T!=null?f=n.filter.updateChild(c.getNode(),p,T,_,s,o):f=c.getNode()}}return Rc(e,f,c.isFullyInitialized()||et(t),n.filter.filtersNodes())}}function xd(n,e,t,r,s,o,c,f){const m=e.serverCache;let p;const _=c?n.filter:n.filter.getIndexedFilter();if(et(t))p=_.updateFullNode(m.getNode(),r,null);else if(_.filtersNodes()&&!m.isFiltered()){const C=m.getNode().updateChild(t,r);p=_.updateFullNode(m.getNode(),C,null)}else{const C=lt(t);if(!m.isCompleteForPath(t)&&wa(t)>1)return e;const N=kt(t),V=m.getNode().getImmediateChild(C).updateChild(N,r);C===".priority"?p=_.updatePriority(m.getNode(),V):p=_.updateChild(m.getNode(),C,V,N,Y1,null)}const T=B1(e,p,m.isFullyInitialized()||et(t),_.filtersNodes()),w=new Wv(s,T,o);return X1(n,T,t,s,w,f)}function i_(n,e,t,r,s,o,c){const f=e.eventCache;let m,p;const _=new Wv(s,e,o);if(et(t))p=n.filter.updateFullNode(e.eventCache.getNode(),r,c),m=Rc(e,p,!0,n.filter.filtersNodes());else{const T=lt(t);if(T===".priority")p=n.filter.updatePriority(e.eventCache.getNode(),r),m=Rc(e,p,f.isFullyInitialized(),f.isFiltered());else{const w=kt(t),C=f.getNode().getImmediateChild(T);let N;if(et(w))N=r;else{const G=_.getCompleteChild(T);G!=null?C1(w)===".priority"&&G.getChild(x1(w)).isEmpty()?N=G:N=G.updateChild(w,r):N=yt.EMPTY_NODE}if(C.equals(N))m=e;else{const G=n.filter.updateChild(f.getNode(),T,N,w,_,c);m=Rc(e,G,f.isFullyInitialized(),n.filter.filtersNodes())}}}return m}function GS(n,e){return n.eventCache.isCompleteForChild(e)}function j6(n,e,t,r,s,o,c){let f=e;return r.foreach((m,p)=>{const _=En(t,m);GS(e,lt(_))&&(f=i_(n,f,_,p,s,o,c))}),r.foreach((m,p)=>{const _=En(t,m);GS(e,lt(_))||(f=i_(n,f,_,p,s,o,c))}),f}function WS(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function s_(n,e,t,r,s,o,c,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,p;et(t)?p=r:p=new Dt(null).setTree(t,r);const _=e.serverCache.getNode();return p.children.inorderTraversal((T,w)=>{if(_.hasChild(T)){const C=e.serverCache.getNode().getImmediateChild(T),N=WS(n,C,w);m=xd(n,m,new Mt(T),N,s,o,c,f)}}),p.children.inorderTraversal((T,w)=>{const C=!e.serverCache.isCompleteForChild(T)&&w.value===null;if(!_.hasChild(T)&&!C){const N=e.serverCache.getNode().getImmediateChild(T),G=WS(n,N,w);m=xd(n,m,new Mt(T),G,s,o,c,f)}}),m}function U6(n,e,t,r,s,o,c){if(Id(s,t)!=null)return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(r.value!=null){if(et(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return xd(n,e,t,m.getNode().getChild(t),s,o,f,c);if(et(t)){let p=new Dt(null);return m.getNode().forEachChild(Nl,(_,T)=>{p=p.set(new Mt(_),T)}),s_(n,e,t,p,s,o,f,c)}else return e}else{let p=new Dt(null);return r.foreach((_,T)=>{const w=En(t,_);m.isCompleteForPath(w)&&(p=p.set(_,m.getNode().getChild(w)))}),s_(n,e,t,p,s,o,f,c)}}function z6(n,e,t,r,s){const o=e.serverCache,c=B1(e,o.getNode(),o.isFullyInitialized()||et(t),o.isFiltered());return X1(n,c,t,r,Y1,s)}function F6(n,e,t,r,s,o){let c;if(Id(r,t)!=null)return e;{const f=new Wv(r,e,s),m=e.eventCache.getNode();let p;if(et(t)||lt(t)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=r_(r,Eo(e));else{const T=e.serverCache.getNode();ve(T instanceof yt,"serverChildren would be complete if leaf node"),_=W1(r,T)}_=_,p=n.filter.updateFullNode(m,_,o)}else{const _=lt(t);let T=Gv(r,_,e.serverCache);T==null&&e.serverCache.isCompleteForChild(_)&&(T=m.getImmediateChild(_)),T!=null?p=n.filter.updateChild(m,_,T,kt(t),f,o):e.eventCache.getNode().hasChild(_)?p=n.filter.updateChild(m,_,yt.EMPTY_NODE,kt(t),f,o):p=m,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=r_(r,Eo(e)),c.isLeafNode()&&(p=n.filter.updateFullNode(p,c,o)))}return c=e.serverCache.isFullyInitialized()||Id(r,bt())!=null,Rc(e,p,c,n.filter.filtersNodes())}}function B6(n,e){const t=Eo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!et(e)&&!t.getImmediateChild(lt(e)).isEmpty())?t.getChild(e):null}function KS(n,e,t,r){e.type===Ti.MERGE&&e.source.queryId!==null&&(ve(Eo(n.viewCache_),"We should always have a full cache before handling merges"),ve(e_(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=L6(n.processor_,s,e,t,r);return M6(n.processor_,o.viewCache),ve(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,H6(n,o.changes,o.viewCache.eventCache.getNode())}function H6(n,e,t,r){const s=n.eventRegistrations_;return g6(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QS;function q6(n){ve(!QS,"__referenceConstructor has already been defined"),QS=n}function Kv(n,e,t,r){const s=e.source.queryId;if(s!==null){const o=n.views.get(s);return ve(o!=null,"SyncTree gave us an op for an invalid query."),KS(o,e,t,r)}else{let o=[];for(const c of n.views.values())o=o.concat(KS(c,e,t,r));return o}}function Qv(n,e){let t=null;for(const r of n.views.values())t=t||B6(r,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YS;function $6(n){ve(!YS,"__referenceConstructor has already been defined"),YS=n}class XS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Dt(null),this.pendingWriteTree_=O6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function G6(n,e,t,r,s){return E6(n.pendingWriteTree_,e,t,r,s),s?mm(n,new vo(j1(),e,t)):[]}function bl(n,e,t=!1){const r=T6(n.pendingWriteTree_,e);if(w6(n.pendingWriteTree_,e)){let o=new Dt(null);return r.snap!=null?o=o.set(bt(),!0):jr(r.children,c=>{o=o.set(new Mt(c),!0)}),mm(n,new Cd(r.path,o,t))}else return[]}function dm(n,e,t){return mm(n,new vo(U1(),e,t))}function W6(n,e,t){const r=Dt.fromObject(t);return mm(n,new $c(U1(),e,r))}function K6(n,e,t,r){const s=tI(n,r);if(s!=null){const o=nI(s),c=o.path,f=o.queryId,m=Lr(c,e),p=new vo(z1(f),m,t);return rI(n,c,p)}else return[]}function Q6(n,e,t,r){const s=tI(n,r);if(s){const o=nI(s),c=o.path,f=o.queryId,m=Lr(c,e),p=Dt.fromObject(t),_=new $c(z1(f),m,p);return rI(n,c,_)}else return[]}function Z1(n,e,t){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(c,f)=>{const m=Lr(c,e),p=Qv(f,m);if(p)return p});return G1(s,e,o,t,!0)}function mm(n,e){return J1(e,n.syncPointTree_,null,q1(n.pendingWriteTree_,bt()))}function J1(n,e,t,r){if(et(n.path))return eI(n,e,t,r);{const s=e.get(bt());t==null&&s!=null&&(t=Qv(s,bt()));let o=[];const c=lt(n.path),f=n.operationForChild(c),m=e.children.get(c);if(m&&f){const p=t?t.getImmediateChild(c):null,_=K1(r,c);o=o.concat(J1(f,m,p,_))}return s&&(o=o.concat(Kv(s,n,r,t))),o}}function eI(n,e,t,r){const s=e.get(bt());t==null&&s!=null&&(t=Qv(s,bt()));let o=[];return e.children.inorderTraversal((c,f)=>{const m=t?t.getImmediateChild(c):null,p=K1(r,c),_=n.operationForChild(c);_&&(o=o.concat(eI(_,f,m,p)))}),s&&(o=o.concat(Kv(s,n,r,t))),o}function tI(n,e){return n.tagToQueryMap.get(e)}function nI(n){const e=n.indexOf("$");return ve(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Mt(n.substr(0,e))}}function rI(n,e,t){const r=n.syncPointTree_.get(e);ve(r,"Missing sync point for query tag that we're tracking");const s=q1(n.pendingWriteTree_,e);return Kv(r,t,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Yv(t)}node(){return this.node_}}class Xv{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=En(this.path_,e);return new Xv(this.syncTree_,t)}node(){return Z1(this.syncTree_,this.path_)}}const Y6=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},ZS=function(n,e,t){if(!n||typeof n!="object")return n;if(ve(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return X6(n[".sv"],e,t);if(typeof n[".sv"]=="object")return Z6(n[".sv"],e);ve(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},X6=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ve(!1,"Unexpected server value: "+n)}},Z6=function(n,e,t){n.hasOwnProperty("increment")||ve(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&ve(!1,"Unexpected increment value: "+r);const s=e.node();if(ve(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const c=s.getValue();return typeof c!="number"?r:c+r},J6=function(n,e,t,r){return Zv(e,new Xv(t,n),r)},e3=function(n,e,t){return Zv(n,new Yv(e),t)};function Zv(n,e,t){const r=n.getPriority().val(),s=ZS(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const c=n,f=ZS(c.getValue(),e,t);return f!==c.getValue()||s!==c.getPriority().val()?new yn(f,jn(s)):n}else{const c=n;return o=c,s!==c.getPriority().val()&&(o=o.updatePriority(new yn(s))),c.forEachChild(Un,(f,m)=>{const p=Zv(m,e.getImmediateChild(f),t);p!==m&&(o=o.updateImmediateChild(f,p))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function e0(n,e){let t=e instanceof Mt?e:new Mt(e),r=n,s=lt(t);for(;s!==null;){const o=Dl(r.node.children,s)||{children:{},childCount:0};r=new Jv(s,r,o),t=kt(t),s=lt(t)}return r}function nu(n){return n.node.value}function iI(n,e){n.node.value=e,a_(n)}function sI(n){return n.node.childCount>0}function t3(n){return nu(n)===void 0&&!sI(n)}function pm(n,e){jr(n.node.children,(t,r)=>{e(new Jv(t,n,r))})}function aI(n,e,t,r){t&&e(n),pm(n,s=>{aI(s,e,!0)})}function n3(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function uh(n){return new Mt(n.parent===null?n.name:uh(n.parent)+"/"+n.name)}function a_(n){n.parent!==null&&r3(n.parent,n.name,n)}function r3(n,e,t){const r=t3(t),s=ys(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,a_(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,a_(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=/[\[\].#$\/\u0000-\u001F\u007F]/,s3=/[\[\].#$\u0000-\u001F\u007F]/,Hg=10*1024*1024,oI=function(n){return typeof n=="string"&&n.length!==0&&!i3.test(n)},a3=function(n){return typeof n=="string"&&n.length!==0&&!s3.test(n)},o3=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),a3(n)},lI=function(n,e,t){const r=t instanceof Mt?new zU(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+lo(r));if(typeof e=="function")throw new Error(n+"contains a function "+lo(r)+" with contents = "+e.toString());if(a1(e))throw new Error(n+"contains "+e.toString()+" "+lo(r));if(typeof e=="string"&&e.length>Hg/3&&zd(e)>Hg)throw new Error(n+"contains a string greater than "+Hg+" utf8 bytes "+lo(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,o=!1;if(jr(e,(c,f)=>{if(c===".value")s=!0;else if(c!==".priority"&&c!==".sv"&&(o=!0,!oI(c)))throw new Error(n+" contains an invalid key ("+c+") "+lo(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);FU(r,c),lI(n,f,r),BU(r)}),s&&o)throw new Error(n+' contains ".value" child '+lo(r)+" in addition to actual children.")}},l3=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!oI(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!o3(t))throw new Error(OD(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function c3(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],o=s.getPath();t!==null&&!N1(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(s)}t&&n.eventLists_.push(t)}function Io(n,e,t){c3(n,t),h3(n,r=>Xr(r,e)||Xr(e,r))}function h3(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];if(s){const o=s.path;e(o)?(f3(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function f3(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();bc&&Vn("event: "+t.toString()),oh(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3="repo_interrupt",m3=25;class p3{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new u3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ad(),this.transactionQueueTree_=new Jv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function g3(n,e,t){if(n.stats_=zv(n.repoInfo_),n.forceRestClient_||hU())n.server_=new Rd(n.repoInfo_,(r,s,o,c)=>{JS(n,r,s,o,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>eR(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Cn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new us(n.repoInfo_,e,(r,s,o,c)=>{JS(n,r,s,o,c)},r=>{eR(n,r)},r=>{_3(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=gU(n.repoInfo_,()=>new p6(n.stats_,n.server_)),n.infoData_=new c6,n.infoSyncTree_=new XS({startListening:(r,s,o,c)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=dm(n.infoSyncTree_,r._path,m),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),t0(n,"connected",!1),n.serverSyncTree_=new XS({startListening:(r,s,o,c)=>(n.server_.listen(r,o,s,(f,m)=>{const p=c(f,m);Io(n.eventQueue_,r._path,p)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}function y3(n){const t=n.infoData_.getNode(new Mt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function uI(n){return Y6({timestamp:y3(n)})}function JS(n,e,t,r,s){n.dataUpdateCount++;const o=new Mt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(s)if(r){const m=rd(t,p=>jn(p));c=Q6(n.serverSyncTree_,o,m,s)}else{const m=jn(t);c=K6(n.serverSyncTree_,o,m,s)}else if(r){const m=rd(t,p=>jn(p));c=W6(n.serverSyncTree_,o,m)}else{const m=jn(t);c=dm(n.serverSyncTree_,o,m)}let f=o;c.length>0&&(f=r0(n,o)),Io(n.eventQueue_,f,c)}function eR(n,e){t0(n,"connected",e),e===!1&&E3(n)}function _3(n,e){jr(e,(t,r)=>{t0(n,t,r)})}function t0(n,e,t){const r=new Mt("/.info/"+e),s=jn(t);n.infoData_.updateSnapshot(r,s);const o=dm(n.infoSyncTree_,r,s);Io(n.eventQueue_,r,o)}function v3(n){return n.nextWriteId_++}function E3(n){cI(n,"onDisconnectEvents");const e=uI(n),t=Ad();Jy(n.onDisconnect_,bt(),(s,o)=>{const c=J6(s,o,n.serverSyncTree_,e);V1(t,s,c)});let r=[];Jy(t,bt(),(s,o)=>{r=r.concat(dm(n.serverSyncTree_,s,o));const c=S3(n,s);r0(n,c)}),n.onDisconnect_=Ad(),Io(n.eventQueue_,bt(),r)}function T3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(d3)}function cI(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Vn(t,...e)}function hI(n,e,t){return Z1(n.serverSyncTree_,e,t)||yt.EMPTY_NODE}function n0(n,e=n.transactionQueueTree_){if(e||gm(n,e),nu(e)){const t=dI(n,e);ve(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&w3(n,uh(e),t)}else sI(e)&&pm(e,t=>{n0(n,t)})}function w3(n,e,t){const r=t.map(p=>p.currentWriteId),s=hI(n,e,r);let o=s;const c=s.hash();for(let p=0;p<t.length;p++){const _=t[p];ve(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const T=Lr(e,_.path);o=o.updateChild(T,_.currentOutputSnapshotRaw)}const f=o.val(!0),m=e;n.server_.put(m.toString(),f,p=>{cI(n,"transaction put response",{path:m.toString(),status:p});let _=[];if(p==="ok"){const T=[];for(let w=0;w<t.length;w++)t[w].status=2,_=_.concat(bl(n.serverSyncTree_,t[w].currentWriteId)),t[w].onComplete&&T.push(()=>t[w].onComplete(null,!0,t[w].currentOutputSnapshotResolved)),t[w].unwatcher();gm(n,e0(n.transactionQueueTree_,e)),n0(n,n.transactionQueueTree_),Io(n.eventQueue_,e,_);for(let w=0;w<T.length;w++)oh(T[w])}else{if(p==="datastale")for(let T=0;T<t.length;T++)t[T].status===3?t[T].status=4:t[T].status=0;else{fr("transaction at "+m.toString()+" failed: "+p);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=p}r0(n,e)}},c)}function r0(n,e){const t=fI(n,e),r=uh(t),s=dI(n,t);return b3(n,s,r),r}function b3(n,e,t){if(e.length===0)return;const r=[];let s=[];const c=e.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],p=Lr(t,m.path);let _=!1,T;if(ve(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)_=!0,T=m.abortReason,s=s.concat(bl(n.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=m3)_=!0,T="maxretry",s=s.concat(bl(n.serverSyncTree_,m.currentWriteId,!0));else{const w=hI(n,m.path,c);m.currentInputSnapshot=w;const C=e[f].update(w.val());if(C!==void 0){lI("transaction failed: Data returned ",C,m.path);let N=jn(C);typeof C=="object"&&C!=null&&ys(C,".priority")||(N=N.updatePriority(w.getPriority()));const V=m.currentWriteId,Y=uI(n),Z=e3(N,w,Y);m.currentOutputSnapshotRaw=N,m.currentOutputSnapshotResolved=Z,m.currentWriteId=v3(n),c.splice(c.indexOf(V),1),s=s.concat(G6(n.serverSyncTree_,m.path,Z,m.currentWriteId,m.applyLocally)),s=s.concat(bl(n.serverSyncTree_,V,!0))}else _=!0,T="nodata",s=s.concat(bl(n.serverSyncTree_,m.currentWriteId,!0))}Io(n.eventQueue_,t,s),s=[],_&&(e[f].status=2,function(w){setTimeout(w,Math.floor(0))}(e[f].unwatcher),e[f].onComplete&&(T==="nodata"?r.push(()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot)):r.push(()=>e[f].onComplete(new Error(T),!1,null))))}gm(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)oh(r[f]);n0(n,n.transactionQueueTree_)}function fI(n,e){let t,r=n.transactionQueueTree_;for(t=lt(e);t!==null&&nu(r)===void 0;)r=e0(r,t),e=kt(e),t=lt(e);return r}function dI(n,e){const t=[];return mI(n,e,t),t.sort((r,s)=>r.order-s.order),t}function mI(n,e,t){const r=nu(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);pm(e,s=>{mI(n,s,t)})}function gm(n,e){const t=nu(e);if(t){let r=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[r]=t[s],r++);t.length=r,iI(e,t.length>0?t:void 0)}pm(e,r=>{gm(n,r)})}function S3(n,e){const t=uh(fI(n,e)),r=e0(n.transactionQueueTree_,e);return n3(r,s=>{qg(n,s)}),qg(n,r),aI(r,s=>{qg(n,s)}),t}function qg(n,e){const t=nu(e);if(t){const r=[];let s=[],o=-1;for(let c=0;c<t.length;c++)t[c].status===3||(t[c].status===1?(ve(o===c-1,"All SENT items should be at beginning of queue."),o=c,t[c].status=3,t[c].abortReason="set"):(ve(t[c].status===0,"Unexpected transaction status in abort"),t[c].unwatcher(),s=s.concat(bl(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));o===-1?iI(e,void 0):t.length=o+1,Io(n.eventQueue_,uh(e),s);for(let c=0;c<r.length;c++)oh(r[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function A3(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):fr(`Invalid query segment '${t}' in query '${n}'`)}return e}const tR=function(n,e){const t=C3(n),r=t.namespace;t.domain==="firebase.com"&&gs(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&gs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||rU();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new _1(t.host,t.secure,r,s,e,"",r!==t.subdomain),path:new Mt(t.pathString)}},C3=function(n){let e="",t="",r="",s="",o="",c=!0,f="https",m=443;if(typeof n=="string"){let p=n.indexOf("//");p>=0&&(f=n.substring(0,p-1),n=n.substring(p+2));let _=n.indexOf("/");_===-1&&(_=n.length);let T=n.indexOf("?");T===-1&&(T=n.length),e=n.substring(0,Math.min(_,T)),_<T&&(s=R3(n.substring(_,T)));const w=A3(n.substring(Math.min(n.length,T)));p=e.indexOf(":"),p>=0?(c=f==="https"||f==="wss",m=parseInt(e.substring(p+1),10)):p=e.length;const C=e.slice(0,p);if(C.toLowerCase()==="localhost")t="localhost";else if(C.split(".").length<=2)t=C;else{const N=e.indexOf(".");r=e.substring(0,N).toLowerCase(),t=e.substring(N+1),o=r}"ns"in w&&(o=w.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:c,scheme:f,pathString:s,namespace:o}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return et(this._path)?null:C1(this._path)}get ref(){return new ru(this._repo,this._path)}get _queryIdentifier(){const e=zS(this._queryParams),t=jv(e);return t==="{}"?"default":t}get _queryObject(){return zS(this._queryParams)}isEqual(e){if(e=Kt(e),!(e instanceof i0))return!1;const t=this._repo===e._repo,r=N1(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+UU(this._path)}}class ru extends i0{constructor(e,t){super(e,t,new qv,!1)}get parent(){const e=x1(this._path);return e===null?null:new ru(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}q6(ru);$6(ru);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3="FIREBASE_DATABASE_EMULATOR_HOST",o_={};let x3=!1;function N3(n,e,t,r){n.repoInfo_=new _1(e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function O3(n,e,t,r,s){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||gs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c=tR(o,s),f=c.repoInfo,m;typeof process<"u"&&TS&&(m=TS[I3]),m?(o=`http://${m}?ns=${f.namespace}`,c=tR(o,s),f=c.repoInfo):c.repoInfo.secure;const p=new dU(n.name,n.options,e);l3("Invalid Firebase Database URL",c),et(c.path)||gs("Database URL must point to the root of a Firebase Database (not including a child path).");const _=k3(f,n,p,new fU(n,t));return new P3(_,n)}function D3(n,e){const t=o_[e];(!t||t[n.key]!==n)&&gs(`Database ${e}(${n.repoInfo_}) has already been deleted.`),T3(n),delete t[n.key]}function k3(n,e,t,r){let s=o_[e.name];s||(s={},o_[e.name]=s);let o=s[n.toURLString()];return o&&gs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new p3(n,x3,t,r),s[n.toURLString()]=o,o}class P3{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(g3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ru(this._repo,bt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(D3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&gs("Cannot call "+e+" on a deleted database.")}}function M3(n=Bd(),e){const t=$l(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=q_("database");r&&L3(t,...r)}return t}function L3(n,e,t,r={}){n=Kt(n),n._checkNotDeleted("useEmulator");const s=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&cs(r,o.repoInfo_.emulatorOptions))return;gs("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&gs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Yf(Yf.OWNER);else if(r.mockUserToken){const f=typeof r.mockUserToken=="string"?r.mockUserToken:G_(r.mockUserToken,n.app.options.projectId);c=new Yf(f)}N3(o,s,r,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(n){Xj(Sa),pa(new hs("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return O3(r,s,o,t)},"PUBLIC").setMultipleInstances(!0)),Vr(wS,bS,n),Vr(wS,bS,"esm2017")}us.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};us.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};V3();const j3={apiKey:"AIzaSyCrq7Am9kiE3levq6hOGBuh_wb3lGxfdT0",authDomain:"nrd-sgo.firebaseapp.com",databaseURL:"https://nrd-sgo-default-rtdb.firebaseio.com",projectId:"nrd-sgo",storageBucket:"nrd-sgo.appspot.com",messagingSenderId:"386786255981",appId:"1:386786255981:web:95cabd428cf0ca17c58b64"},ym=MR(j3),mo=ZM(ym),U3=JV(ym);Wj(ym);M3(ym);const Sl=class Sl{constructor(){Pr(this,"currentUser",null);Pr(this,"authStateReady");Pr(this,"authStateResolver");if(Sl.instance)return Sl.instance;this.authStateReady=new Promise(e=>{this.authStateResolver=e}),zP(mo,e=>{this.currentUser=e,console.log("Auth state initialized:",{user:e==null?void 0:e.email,isAuthenticated:!!e}),this.authStateResolver()}),Sl.instance=this}async login(e,t){try{await VP(mo,e,t)}catch(r){throw console.error("Login error:",r),r}}async logout(){try{await FP(mo)}catch(e){throw console.error("Logout error:",e),e}}getCurrentUser(){return this.currentUser}async isAuthenticated(){return await this.authStateReady,!!this.currentUser}async waitForAuthReady(){return this.authStateReady}};Pr(Sl,"instance");let To=Sl;const z3=()=>{const[n,e]=F.useState(""),[t,r]=F.useState(""),[s,o]=F.useState(null),[c,f]=F.useState(!1),m=Dd(),p=new To,_=async T=>{T.preventDefault(),o(null),f(!0);try{await p.login(n,t),m("/")}catch{o("Credenciales inválidas. Por favor, intente nuevamente.")}finally{f(!1)}};return b.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 p-4",children:[b.jsxs("div",{className:"absolute inset-0 z-0 opacity-40 dark:opacity-20",children:[b.jsx("div",{className:"absolute inset-y-0 left-0 w-1/2 bg-gradient-to-r from-blue-400 to-transparent blur-3xl"}),b.jsx("div",{className:"absolute inset-y-0 right-0 w-1/2 bg-gradient-to-l from-indigo-400 to-transparent blur-3xl"})]}),b.jsxs("div",{className:"relative w-full max-w-md",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("div",{className:"inline-flex items-center justify-center h-16 w-16 rounded-full bg-gradient-to-r from-blue-600 to-indigo-600 mb-4 animate-pulse-slow",children:b.jsx("span",{className:"text-3xl font-bold text-white",children:"S"})}),b.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"SGO App"}),b.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Sistema de Gestión Operativa"})]}),b.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl shadow-glass-lg rounded-2xl p-8 space-y-6 animate-fadeIn",children:[b.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white text-center",children:"Iniciar Sesión"}),s&&b.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 p-4 rounded-lg flex items-start space-x-2",children:[b.jsx(S_,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),b.jsx("span",{className:"text-sm",children:s})]}),b.jsxs("form",{onSubmit:_,className:"space-y-6",children:[b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Correo Electrónico"}),b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:b.jsx(M_,{className:"h-5 w-5 text-gray-400"})}),b.jsx("input",{id:"email",type:"email",value:n,onChange:T=>e(T.target.value),required:!0,className:"block w-full pl-10 pr-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white/50 dark:bg-gray-900/50 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",placeholder:"usuario@empresa.com"})]})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Contraseña"}),b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:b.jsx(k_,{className:"h-5 w-5 text-gray-400"})}),b.jsx("input",{id:"password",type:"password",value:t,onChange:T=>r(T.target.value),required:!0,className:"block w-full pl-10 pr-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white/50 dark:bg-gray-900/50 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",placeholder:"••••••••"})]})]})]}),b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors duration-200"}),b.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Recordarme"})]}),b.jsx("button",{type:"button",className:"text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 transition-colors duration-200",children:"¿Olvidó su contraseña?"})]}),b.jsx("button",{type:"submit",disabled:c,className:"w-full flex items-center justify-center px-4 py-2.5 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:c?b.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Iniciar Sesión"})]})]}),b.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["¿No tiene una cuenta?"," ",b.jsx("button",{className:"font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 transition-colors duration-200",children:"Contacte al administrador"})]})]})]})},F3=({isOpen:n,onClose:e})=>{const t=[{title:"Dashboard",icon:b.jsx(D_,{className:"h-5 w-5"}),path:"/",badge:null},{title:"Incidentes",icon:b.jsx(Nc,{className:"h-5 w-5"}),path:"/incidents",badge:"3"},{title:"Personal",icon:b.jsx(Vd,{className:"h-5 w-5"}),path:"/employees",badge:null},{title:"Inventario",icon:b.jsx(Oc,{className:"h-5 w-5"}),path:"/inventory",badge:null},{title:"Producción",icon:b.jsx(R_,{className:"h-5 w-5"}),path:"/production",badge:null},{title:"Mantenimiento",icon:b.jsx(B_,{className:"h-5 w-5"}),path:"/maintenance",badge:"2"},{title:"Calendario",icon:b.jsx(Pd,{className:"h-5 w-5"}),path:"/calendar",badge:null},{title:"Reportes",icon:b.jsx(N_,{className:"h-5 w-5"}),path:"/reports",badge:null}];return b.jsxs("div",{className:"h-full w-64 bg-white dark:bg-gray-800 flex flex-col",children:[b.jsxs("div",{className:"flex items-center justify-between px-4 py-5 border-b border-gray-200 dark:border-gray-700",children:[b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx("div",{className:"h-8 w-8 rounded bg-gradient-to-r from-blue-600 to-indigo-600 flex items-center justify-center",children:b.jsx("span",{className:"text-white font-bold text-xl",children:"S"})}),b.jsx("span",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"SGO App"})]}),b.jsx("button",{onClick:e,className:"lg:hidden p-2 rounded-lg text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:b.jsx(jd,{className:"h-5 w-5"})})]}),b.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:b.jsx("div",{className:"px-3 space-y-1",children:t.map(r=>b.jsxs(Qg,{to:r.path,className:({isActive:s})=>`flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-colors duration-200 relative group ${s?"text-blue-600 dark:text-blue-500 bg-blue-50 dark:bg-blue-900/20":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:[b.jsxs("span",{className:"flex items-center",children:[r.icon,b.jsx("span",{className:"ml-3",children:r.title})]}),r.badge&&b.jsx("span",{className:"ml-auto bg-blue-100 dark:bg-blue-900/40 text-blue-600 dark:text-blue-500 px-2 py-0.5 rounded-full text-xs font-medium",children:r.badge}),b.jsx("div",{className:"absolute inset-y-0 left-0 w-1 rounded-r-lg bg-blue-600 dark:bg-blue-500 transform scale-y-0 transition-transform duration-200 origin-left group-hover:scale-y-100"})]},r.path))})}),b.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:b.jsxs(Qg,{to:"/settings",className:({isActive:r})=>`flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-colors duration-200 ${r?"text-blue-600 dark:text-blue-500 bg-blue-50 dark:bg-blue-900/20":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:[b.jsx(Md,{className:"h-5 w-5"}),b.jsx("span",{className:"ml-3",children:"Configuración"})]})})]})},B3=({onMenuClick:n,onLogout:e,userName:t})=>{const[r,s]=F.useState(!1),[o,c]=F.useState(!1),[f,m]=F.useState(!1),p=()=>{s(!r),document.documentElement.classList.toggle("dark")};return b.jsx("nav",{className:"px-4 py-3",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("div",{className:"flex items-center",children:b.jsx("button",{onClick:n,className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200",children:b.jsx(V_,{className:"h-6 w-6"})})}),b.jsxs("div",{className:"flex items-center space-x-4",children:[b.jsx("button",{onClick:p,className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200",children:r?b.jsx(F_,{className:"h-5 w-5"}):b.jsx(j_,{className:"h-5 w-5"})}),b.jsxs("div",{className:"relative",children:[b.jsxs("button",{onClick:()=>m(!f),className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200",children:[b.jsx(A_,{className:"h-5 w-5"}),b.jsx("span",{className:"absolute top-1 right-1 h-2 w-2 rounded-full bg-red-500"})]}),f&&b.jsxs("div",{className:"absolute right-0 mt-2 w-80 rounded-lg bg-white dark:bg-gray-800 shadow-lg py-2 border border-gray-200 dark:border-gray-700",children:[b.jsx("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:b.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Notificaciones"})}),b.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[b.jsx(nR,{title:"Nuevo incidente reportado",description:"Se ha reportado un incidente de seguridad en el área de producción",time:"Hace 5 minutos"}),b.jsx(nR,{title:"Mantenimiento programado",description:"Recordatorio: Mantenimiento programado para mañana",time:"Hace 1 hora"})]})]})]}),b.jsxs("div",{className:"relative",children:[b.jsxs("button",{onClick:()=>c(!o),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200",children:[b.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 flex items-center justify-center",children:b.jsx("span",{className:"text-white font-medium",children:t.charAt(0).toUpperCase()})}),b.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:t})]}),o&&b.jsxs("div",{className:"absolute right-0 mt-2 w-48 rounded-lg bg-white dark:bg-gray-800 shadow-lg py-2 border border-gray-200 dark:border-gray-700",children:[b.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2",children:[b.jsx(Ld,{className:"h-4 w-4"}),b.jsx("span",{children:"Perfil"})]}),b.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2",children:[b.jsx(Md,{className:"h-4 w-4"}),b.jsx("span",{children:"Configuración"})]}),b.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),b.jsxs("button",{onClick:e,className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 flex items-center space-x-2",children:[b.jsx(P_,{className:"h-4 w-4"}),b.jsx("span",{children:"Cerrar Sesión"})]})]})]})]})]})})},nR=({title:n,description:e,time:t})=>b.jsxs("div",{className:"px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors duration-200",children:[b.jsxs("div",{className:"flex justify-between items-start",children:[b.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n}),b.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:t})]}),b.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:e})]}),pI=({children:n})=>{const e=Dd(),[t,r]=F.useState(!0),[s,o]=F.useState(!1);return new To,F.useEffect(()=>{const c=mo.onAuthStateChanged(async f=>{console.log("Auth state changed in RequireAuth:",{user:f==null?void 0:f.email,isAuthenticated:!!f}),f?o(!0):e("/login",{replace:!0}),r(!1)});return()=>c()},[e]),t?b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:b.jsx("div",{className:"animate-pulse text-gray-600 dark:text-gray-300",children:"Cargando..."})}):s?b.jsx(b.Fragment,{children:n}):null},H3=()=>{var c;const[n,e]=F.useState(!0),t=Dd(),r=new To;F.useEffect(()=>{const f=mo.onAuthStateChanged(m=>{console.log("Auth state changed:",{isAuthenticated:!!m,uid:m==null?void 0:m.uid,email:m==null?void 0:m.email})});return()=>f()},[]);const s=async()=>{try{await r.logout(),t("/login")}catch(f){console.error("Logout error:",f)}},o=()=>{e(!n)};return b.jsx(pI,{children:b.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 transition-colors duration-300",children:[b.jsxs("div",{className:`fixed inset-y-0 left-0 z-30 transform ${n?"translate-x-0":"-translate-x-full"} lg:relative lg:translate-x-0 transition-transform duration-300 ease-in-out`,children:[b.jsx("div",{className:"absolute inset-0 bg-white/30 dark:bg-gray-900/30 backdrop-blur-xl -z-10"}),b.jsx(F3,{isOpen:n,onClose:()=>e(!1)})]}),b.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[b.jsx("div",{className:"sticky top-0 z-20 bg-white/70 dark:bg-gray-900/70 backdrop-blur-lg border-b border-gray-200 dark:border-gray-700",children:b.jsx(B3,{onMenuClick:o,onLogout:s,userName:((c=r.getCurrentUser())==null?void 0:c.displayName)||"Usuario"})}),b.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent",children:b.jsx("div",{className:"container mx-auto px-4 py-6 transition-all duration-300 ease-in-out",children:b.jsx("div",{className:"animate-fadeIn",children:b.jsx(yO,{})})})})]}),n&&b.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm z-20 lg:hidden",onClick:()=>e(!1)})]})})},q3=()=>b.jsxs("div",{className:"space-y-6",children:[b.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Dashboard"}),b.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[b.jsx(Lf,{title:"Trabajadores",value:"24",icon:b.jsx(Vd,{className:"h-6 w-6"}),trend:"+2.5%",trendUp:!0}),b.jsx(Lf,{title:"Órdenes",value:"156",icon:b.jsx(z_,{className:"h-6 w-6"}),trend:"+12.3%",trendUp:!0}),b.jsx(Lf,{title:"Productos",value:"89",icon:b.jsx(Oc,{className:"h-6 w-6"}),trend:"-0.8%",trendUp:!1}),b.jsx(Lf,{title:"Incidentes",value:"3",icon:b.jsx(Nc,{className:"h-6 w-6"}),trend:"-25%",trendUp:!0})]}),b.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[b.jsx(rR,{title:"Ventas Diarias",value:"$12,458",trend:"+8.2%",icon:b.jsx(I_,{className:"h-6 w-6"})}),b.jsx(rR,{title:"Eficiencia de Producción",value:"94.2%",trend:"+2.1%",icon:b.jsx(b_,{className:"h-6 w-6"})})]}),b.jsx("div",{className:"bg-white shadow rounded-lg",children:b.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[b.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Actividad Reciente"}),b.jsx("div",{className:"mt-6 flow-root",children:b.jsxs("ul",{className:"-mb-8",children:[b.jsx($g,{title:"Nueva orden de producción",description:"Orden #1234 creada por Juan Pérez",time:"Hace 5 minutos",icon:b.jsx(Pd,{className:"h-5 w-5"})}),b.jsx($g,{title:"Incidente reportado",description:"Mantenimiento requerido en línea 2",time:"Hace 2 horas",icon:b.jsx(Nc,{className:"h-5 w-5"})}),b.jsx($g,{title:"Actualización de inventario",description:"Stock actualizado por María González",time:"Hace 4 horas",icon:b.jsx(Oc,{className:"h-5 w-5"})})]})})]})})]}),Lf=({title:n,value:e,icon:t,trend:r,trendUp:s})=>b.jsx("div",{className:"bg-white shadow rounded-lg px-4 py-5 sm:p-6",children:b.jsxs("div",{className:"flex items-center",children:[b.jsx("div",{className:"flex-shrink-0 bg-blue-500 rounded-md p-3",children:b.jsx("span",{className:"text-white",children:t})}),b.jsx("div",{className:"ml-5 w-0 flex-1",children:b.jsxs("dl",{children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:n}),b.jsxs("dd",{className:"flex items-baseline",children:[b.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:e}),b.jsx("div",{className:`ml-2 flex items-baseline text-sm font-semibold ${s?"text-green-600":"text-red-600"}`,children:r})]})]})})]})}),rR=({title:n,value:e,trend:t,icon:r})=>b.jsxs("div",{className:"bg-white shadow rounded-lg px-4 py-5 sm:p-6",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:n}),b.jsxs("div",{className:"mt-2 flex items-baseline",children:[b.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e}),b.jsx("p",{className:"ml-2 text-sm font-medium text-green-600",children:t})]})]}),b.jsx("div",{className:"bg-blue-500 rounded-md p-3",children:b.jsx("span",{className:"text-white",children:r})})]}),b.jsx("div",{className:"mt-6",children:b.jsx("div",{className:"h-48 bg-gray-50 rounded"})})]}),$g=({title:n,description:e,time:t,icon:r})=>b.jsx("li",{children:b.jsx("div",{className:"relative pb-8",children:b.jsxs("div",{className:"relative flex space-x-3",children:[b.jsx("div",{children:b.jsx("span",{className:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center",children:b.jsx("span",{className:"text-white",children:r})})}),b.jsxs("div",{className:"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-gray-900",children:n}),b.jsx("p",{className:"text-sm text-gray-500",children:e})]}),b.jsx("div",{className:"text-right text-sm whitespace-nowrap text-gray-500",children:b.jsx("time",{children:t})})]})]})})}),Cc=class Cc{constructor(){Pr(this,"db");Pr(this,"_collectionRef",null);Pr(this,"retryAttempts",5);Pr(this,"retryDelay",2e3);this.db=U3,this.initializeFirestore()}async initializeFirestore(){if(!Cc.initialized)try{this.db=ZV(this.db.app,{cacheSizeBytes:XV,experimentalForceLongPolling:!0}),Cc.initialized=!0,console.log("Firestore initialized with cache settings")}catch(e){e instanceof ge?e.code==="failed-precondition"?console.warn("Multiple tabs open, using existing Firestore instance"):console.warn("Error initializing Firestore:",e.message):console.warn("Unknown error initializing Firestore:",e)}}async ensureAuthenticated(){let e=0;for(;e<this.retryAttempts;){if(mo.currentUser)return;console.log(`Authentication attempt ${e+1}/${this.retryAttempts}`),await new Promise(t=>setTimeout(t,this.retryDelay)),e++}throw new Error("Usuario no autenticado. Por favor, inicie sesión nuevamente.")}async toggleNetwork(e){try{e?(await nj(this.db),console.log("Firestore network connection enabled")):(await rj(this.db),console.log("Firestore network connection disabled"))}catch(t){t instanceof ge&&console.warn("Error toggling network:",t.message)}}async withRetry(e,t=!1){let r=null,s=0;const o=1e4;for(;s<this.retryAttempts;)try{t&&await this.toggleNetwork(!0);const c=await e();return t&&await tj(this.db),c}catch(c){if(console.warn(`Operation failed, attempt ${s+1}/${this.retryAttempts}:`,c),r=c instanceof ge?c:new Error(String(c)),c instanceof ge){if(c.code==="permission-denied")throw new Error("No tiene permisos para realizar esta operación");(c.code==="unavailable"||c.code==="internal")&&(console.log("Problema de conexión detectado, reintentando..."),await this.toggleNetwork(!1),await new Promise(m=>setTimeout(m,1e3)),await this.toggleNetwork(!0))}const f=Math.min(this.retryDelay*Math.pow(2,s),o);await new Promise(m=>setTimeout(m,f)),this.resetCollectionRef(),s++}if(r instanceof ge){if(r.code==="permission-denied")throw new Error("No tiene permisos para realizar esta operación");if(r.code==="unavailable"||r.code==="internal")throw new Error("Problema de conexión. Por favor, verifique su conexión e intente nuevamente.")}throw new Error("La operación falló después de varios intentos. Por favor, intente nuevamente.")}get collectionRef(){if(!this._collectionRef){if(!this.collectionName)throw new Error("El nombre de la colección debe estar definido en la clase derivada");this._collectionRef=YV(this.db,this.collectionName)}return this._collectionRef}resetCollectionRef(){this._collectionRef=null}async create(e){return this.withRetry(async()=>{await this.ensureAuthenticated(),console.log("Creating document in collection:",this.collectionName);const t=Df(this.collectionRef),r=new Date,s={...e,id:t.id,lastUpdated:r,creation:r};try{return await _j(t,s),console.log("Document created successfully:",t.id),s}catch(o){throw console.error("Error creating document:",o),o}},!0)}async update(e,t){return this.withRetry(async()=>{await this.ensureAuthenticated();const r=Df(this.collectionRef,e);if(!(await pS(r)).exists())throw new Error(`Document with id ${e} not found`);await vj(r,{...t,lastUpdated:new Date})},!0)}async delete(e){return this.withRetry(async()=>{await this.ensureAuthenticated();const t=Df(this.collectionRef,e);await Ej(t)},!0)}async getById(e){return this.withRetry(async()=>{await this.ensureAuthenticated();const t=Df(this.collectionRef,e),r=await pS(t);return r.exists()?r.data():null})}async getAll(){return this.withRetry(async()=>{await this.ensureAuthenticated();const e=await El(this.collectionRef);return this.convertQuerySnapshot(e)})}convertQuerySnapshot(e){return e.docs.map(t=>t.data())}};Pr(Cc,"initialized",!1);let l_=Cc;class $3 extends l_{constructor(){super();Pr(this,"unsubscribe",null);mo.onAuthStateChanged(t=>{console.log("Auth state changed in IncidentRepository:",{user:t==null?void 0:t.email,isAuthenticated:!!t,timestamp:new Date().toISOString()}),this.resetCollectionRef(),this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)})}get collectionName(){return"incidents"}async create(t){console.log("Creating incident with data:",{...t,timestamp:new Date().toISOString()});try{const r=await super.create(t);return console.log("Incident created successfully:",{id:r.id,type:r.type,timestamp:new Date().toISOString()}),r}catch(r){if(console.error("Error creating incident:",{error:r,data:{...t,timestamp:new Date().toISOString()}}),r instanceof ge)switch(r.code){case"permission-denied":throw new Error("No tiene permisos para crear incidentes");case"unavailable":throw new Error("Servicio no disponible. Por favor, intente nuevamente");default:throw new Error(`Error al crear el incidente: ${r.message}`)}throw new Error("Error al crear el incidente. Por favor, intente nuevamente.")}}async getByDateRange(t,r){return this.withRetry(async()=>{await this.ensureAuthenticated(),console.log("Getting incidents by date range:",{startDate:t,endDate:r});const s=sc(this.collectionRef,ml("reportDate",">=",t),ml("reportDate","<=",r),ac("reportDate","desc")),o=await El(s),c=this.convertQuerySnapshot(o);return console.log(`Found ${c.length} incidents in date range`),c})}async getByType(t){return this.withRetry(async()=>{await this.ensureAuthenticated(),console.log("Getting incidents by type:",t);const r=sc(this.collectionRef,ml("type","==",t),ac("reportDate","desc")),s=await El(r);return this.convertQuerySnapshot(s)})}async getByStatus(t){return this.withRetry(async()=>{await this.ensureAuthenticated(),console.log("Getting incidents by status:",t);const r=sc(this.collectionRef,ml("status","==",t),ac("reportDate","desc")),s=await El(r);return this.convertQuerySnapshot(s)})}async getByReporter(t){return this.withRetry(async()=>{await this.ensureAuthenticated(),console.log("Getting incidents by reporter:",t);const r=sc(this.collectionRef,ml("reporterId","==",t),ac("reportDate","desc")),s=await El(r);return this.convertQuerySnapshot(s)})}async getByClassification(t){return this.withRetry(async()=>{await this.ensureAuthenticated(),console.log("Getting incidents by classification:",t);const r=sc(this.collectionRef,ml("classification","==",t),ac("reportDate","desc")),s=await El(r);return this.convertQuerySnapshot(s)})}async updateStatus(t,r){return this.withRetry(async()=>{await this.ensureAuthenticated(),console.log("Updating incident status:",{incidentId:t,status:r}),await this.update(t,{status:r})})}}const G3=({title:n,subtitle:e,actions:t})=>b.jsxs("div",{className:"md:flex md:items-center md:justify-between mb-8",children:[b.jsxs("div",{className:"min-w-0 flex-1",children:[b.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight",children:n}),e&&b.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e})]}),t&&b.jsx("div",{className:"mt-4 flex md:ml-4 md:mt-0",children:t})]}),Gc=({children:n,variant:e="primary",size:t="md",isLoading:r=!1,icon:s,className:o="",disabled:c,...f})=>{const m="inline-flex items-center justify-center font-medium rounded-md focus:outline-none transition-colors",p={primary:"text-white bg-blue-600 hover:bg-blue-700 focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",secondary:"text-gray-700 bg-gray-100 hover:bg-gray-200 focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",danger:"text-white bg-red-600 hover:bg-red-700 focus:ring-2 focus:ring-offset-2 focus:ring-red-500",success:"text-white bg-green-600 hover:bg-green-700 focus:ring-2 focus:ring-offset-2 focus:ring-green-500",warning:"text-white bg-yellow-600 hover:bg-yellow-700 focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500"},_={sm:"px-2.5 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return b.jsx("button",{className:`
        ${m}
        ${p[e]}
        ${_[t]}
        ${c||r?"opacity-50 cursor-not-allowed":""}
        ${o}
      `,disabled:c||r,...f,children:r?b.jsxs(b.Fragment,{children:[b.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cargando..."]}):b.jsxs(b.Fragment,{children:[s&&b.jsx("span",{className:"mr-2",children:s}),n]})})},W3=({columns:n,data:e,isLoading:t=!1,emptyMessage:r="No hay datos disponibles",onRowClick:s})=>t?b.jsx("div",{className:"min-h-[200px] flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsxs("svg",{className:"animate-spin h-8 w-8 mx-auto text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),b.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Cargando..."})]})}):e.length?b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[b.jsx("thead",{className:"bg-gray-50",children:b.jsx("tr",{children:n.map((o,c)=>b.jsx("th",{scope:"col",className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${o.className||""}`,children:o.header},c))})}),b.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((o,c)=>b.jsx("tr",{onClick:()=>s==null?void 0:s(o),className:s?"cursor-pointer hover:bg-gray-50":"",children:n.map((f,m)=>{const p=typeof f.accessor=="function"?f.accessor(o):String(o[f.accessor]);return b.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 ${f.className||""}`,children:p},m)})},c))})]})}):b.jsx("div",{className:"min-h-[200px] flex items-center justify-center",children:b.jsx("p",{className:"text-gray-500",children:r})}),Nd=({children:n,className:e="",title:t,subtitle:r,actions:s})=>b.jsxs("div",{className:`bg-white shadow rounded-lg overflow-hidden ${e}`,children:[(t||s)&&b.jsx("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[t&&b.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:t}),r&&b.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:r})]}),s&&b.jsx("div",{children:s})]})}),b.jsx("div",{className:"px-4 py-5 sm:p-6",children:n})]}),u_=({isOpen:n,onClose:e,title:t,children:r,size:s="md",footer:o})=>{if(!n)return null;const c={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return b.jsxs(F.Fragment,{children:[b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity z-40",onClick:e}),b.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:b.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:b.jsxs("div",{className:`relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 w-full ${c[s]}`,children:[b.jsx("div",{className:"bg-white px-4 py-4 sm:px-6 border-b border-gray-200",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:t}),b.jsxs("button",{type:"button",className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none",onClick:e,children:[b.jsx("span",{className:"sr-only",children:"Cerrar"}),b.jsx(jd,{className:"h-6 w-6"})]})]})}),b.jsx("div",{className:"bg-white px-4 py-5 sm:p-6",children:r}),o&&b.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 border-t border-gray-200",children:o})]})})})]})},iR=({label:n,error:e,helper:t,className:r="",...s})=>b.jsxs("div",{children:[n&&b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),b.jsx("input",{className:`
          block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm
          ${e?"border-red-300":""}
          ${r}
        `,...s}),(e||t)&&b.jsx("p",{className:`mt-1 text-sm ${e?"text-red-600":"text-gray-500"}`,children:e||t})]}),Ol=({label:n,error:e,helper:t,options:r,className:s="",...o})=>b.jsxs("div",{children:[n&&b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),b.jsx("select",{className:`
          block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm
          ${e?"border-red-300":""}
          ${s}
        `,...o,children:r.map(c=>b.jsx("option",{value:c.value,children:c.label},c.value))}),(e||t)&&b.jsx("p",{className:`mt-1 text-sm ${e?"text-red-600":"text-gray-500"}`,children:e||t})]}),sR=({label:n,error:e,helper:t,className:r="",...s})=>b.jsxs("div",{children:[n&&b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),b.jsx("textarea",{className:`
          block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm
          ${e?"border-red-300":""}
          ${r}
        `,...s}),(e||t)&&b.jsx("p",{className:`mt-1 text-sm ${e?"text-red-600":"text-gray-500"}`,children:e||t})]}),ea=({children:n,className:e=""})=>b.jsx("div",{className:`space-y-4 ${e}`,children:n}),s0=({incident:n,onSubmit:e,onCancel:t,isLoading:r=!1})=>{const[s,o]=F.useState(n?{type:n.type,description:n.description,classification:n.classification,status:n.status,reportDate:n.reportDate,location:n.location,affectedArea:n.affectedArea,immediateActions:n.immediateActions,reporterId:n.reporterId,reporterName:n.reporterName}:{type:"safety",description:"",classification:1,status:"pending",reportDate:new Date().toISOString(),location:"",affectedArea:"",immediateActions:"",reporterId:"",reporterName:""}),c=async f=>{f.preventDefault(),await e(s)};return b.jsxs("form",{onSubmit:c,className:"space-y-6",children:[b.jsx(ea,{children:b.jsx(Ol,{label:"Tipo de Incidente",value:s.type,onChange:f=>o({...s,type:f.target.value}),required:!0,options:[{value:"safety",label:"Seguridad"},{value:"maintenance",label:"Mantenimiento"},{value:"quality",label:"Calidad"}]})}),b.jsx(ea,{children:b.jsx(Ol,{label:"Clasificación",value:s.classification,onChange:f=>o({...s,classification:Number(f.target.value)}),required:!0,options:[{value:"1",label:"Nivel 1"},{value:"2",label:"Nivel 2"},{value:"3",label:"Nivel 3"}]})}),b.jsx(ea,{children:b.jsx(iR,{label:"Ubicación",value:s.location,onChange:f=>o({...s,location:f.target.value}),required:!0})}),b.jsx(ea,{children:b.jsx(iR,{label:"Área Afectada",value:s.affectedArea,onChange:f=>o({...s,affectedArea:f.target.value}),required:!0})}),b.jsx(ea,{children:b.jsx(sR,{label:"Descripción",value:s.description,onChange:f=>o({...s,description:f.target.value}),required:!0,rows:4})}),b.jsx(ea,{children:b.jsx(sR,{label:"Acciones Inmediatas",value:s.immediateActions||"",onChange:f=>o({...s,immediateActions:f.target.value}),rows:4})}),n&&b.jsx(ea,{children:b.jsx(Ol,{label:"Estado",value:s.status,onChange:f=>o({...s,status:f.target.value}),required:!0,options:[{value:"pending",label:"Pendiente"},{value:"in_progress",label:"En Progreso"},{value:"resolved",label:"Resuelto"}]})}),b.jsxs("div",{className:"flex justify-end space-x-4",children:[b.jsx(Gc,{type:"button",variant:"secondary",onClick:t,disabled:r,children:"Cancelar"}),b.jsxs(Gc,{type:"submit",isLoading:r,children:[n?"Actualizar":"Crear"," Incidente"]})]})]})},gI=({incident:n,onUpdate:e})=>{const[t,r]=F.useState(!1),[s,o]=F.useState(!1),c=async _=>{o(!0);try{await e(_),r(!1)}catch(T){console.error("Error updating incident:",T)}finally{o(!1)}},f=_=>{switch(_){case"pending":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},m=_=>{switch(_){case"pending":return"Pendiente";case"in_progress":return"En Progreso";case"resolved":return"Resuelto";default:return _}},p=_=>{switch(_){case"safety":return"Seguridad";case"maintenance":return"Mantenimiento";case"quality":return"Calidad";default:return _}};return b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center space-x-4",children:[b.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${f(n.status)}`,children:m(n.status)}),b.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",n.id.slice(0,8)]})]}),b.jsx(Gc,{variant:"secondary",size:"sm",icon:b.jsx(x_,{}),onClick:()=>r(!0),children:"Editar"})]}),b.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[b.jsx(Nd,{children:b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Detalles del Incidente"}),b.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Información principal del incidente reportado"})]}),b.jsx("div",{className:"border-t border-gray-200 pt-4",children:b.jsxs("dl",{className:"divide-y divide-gray-200",children:[b.jsxs("div",{className:"py-3 flex justify-between",children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Tipo"}),b.jsx("dd",{className:"text-sm text-gray-900",children:p(n.type)})]}),b.jsxs("div",{className:"py-3 flex justify-between",children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Clasificación"}),b.jsxs("dd",{className:"text-sm text-gray-900",children:["Nivel ",n.classification]})]}),b.jsxs("div",{className:"py-3",children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Descripción"}),b.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:n.description})]}),b.jsxs("div",{className:"py-3",children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Acciones Inmediatas"}),b.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:n.immediateActions||"No se registraron acciones inmediatas"})]})]})})]})}),b.jsx(Nd,{children:b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Información Adicional"}),b.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Detalles sobre la ubicación y el reporte"})]}),b.jsx("div",{className:"border-t border-gray-200 pt-4",children:b.jsxs("dl",{className:"divide-y divide-gray-200",children:[b.jsxs("div",{className:"py-3",children:[b.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[b.jsx(L_,{className:"h-4 w-4 mr-2"}),"Ubicación"]}),b.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:n.location})]}),b.jsxs("div",{className:"py-3",children:[b.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Área Afectada"}),b.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:n.affectedArea})]}),b.jsxs("div",{className:"py-3",children:[b.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[b.jsx(Ld,{className:"h-4 w-4 mr-2"}),"Reportado por"]}),b.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:n.reporterName})]}),b.jsxs("div",{className:"py-3",children:[b.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[b.jsx(C_,{className:"h-4 w-4 mr-2"}),"Fecha de Reporte"]}),b.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(n.reportDate).toLocaleString()})]})]})})]})})]}),b.jsx(u_,{isOpen:t,onClose:()=>r(!1),title:"Editar Incidente",size:"lg",children:b.jsx(s0,{incident:n,onSubmit:c,onCancel:()=>r(!1),isLoading:s})})]})},K3=()=>{const[n,e]=F.useState([]),[t,r]=F.useState(null),[s,o]=F.useState(!0),[c,f]=F.useState(!1),[m,p]=F.useState(!1),[_,T]=F.useState(null),[w,C]=F.useState({status:"all",type:"all",classification:"all"}),N=new $3,G=new To,V=async()=>{try{if(o(!0),T(null),await G.waitForAuthReady(),!await G.isAuthenticated())throw new Error("Usuario no autenticado");let oe=await N.getAll();w.status!=="all"&&(oe=oe.filter(j=>j.status===w.status)),w.type!=="all"&&(oe=oe.filter(j=>j.type===w.type)),w.classification!=="all"&&(oe=oe.filter(j=>j.classification===Number(w.classification))),e(oe)}catch(te){console.error("Error loading incidents:",te),T(te instanceof Error?te.message:"Error al cargar los incidentes")}finally{o(!1)}};F.useEffect(()=>{V()},[w]);const Y=async te=>{f(!0),T(null);try{const oe=G.getCurrentUser();if(!oe)throw new Error("Usuario no autenticado");const j={...te,reporterId:oe.uid,reporterName:oe.displayName||"Usuario",type:te.type||"safety",description:te.description||"",classification:te.classification||1,status:"pending",reportDate:new Date().toISOString(),location:te.location||"",affectedArea:te.affectedArea||""};await N.create(j),p(!1),V()}catch(oe){console.error("Error creating incident:",oe),T("Error al crear el incidente. Por favor, intente nuevamente.")}finally{f(!1)}},Z=async te=>{if(t)try{await N.update(t.id,te),r(null),V()}catch(oe){console.error("Error updating incident:",oe),T("Error al actualizar el incidente. Por favor, intente nuevamente.")}},se=[{header:"Fecha",accessor:te=>new Date(te.reportDate).toLocaleDateString()},{header:"Tipo",accessor:te=>({safety:"Seguridad",maintenance:"Mantenimiento",quality:"Calidad"})[te.type]},{header:"Descripción",accessor:te=>te.description},{header:"Estado",accessor:te=>b.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${te.status==="pending"?"bg-yellow-100 text-yellow-800":te.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:te.status==="pending"?"Pendiente":te.status==="in_progress"?"En Progreso":"Resuelto"})},{header:"Clasificación",accessor:te=>`Nivel ${te.classification}`},{header:"Reportado por",accessor:te=>te.reporterName}];return s?b.jsx("div",{className:"min-h-screen flex items-center justify-center",children:b.jsx("div",{className:"animate-pulse text-gray-600 dark:text-gray-300",children:"Cargando incidentes..."})}):_?b.jsx("div",{className:"min-h-screen flex items-center justify-center",children:b.jsxs("div",{className:"text-red-600 dark:text-red-400",children:[_,b.jsx(Gc,{variant:"primary",className:"mt-4",onClick:()=>V(),children:"Reintentar"})]})}):b.jsxs("div",{className:"space-y-6",children:[b.jsx(G3,{title:"Incidentes",subtitle:"Gestiona los incidentes reportados",actions:b.jsx(Gc,{variant:"primary",icon:b.jsx(U_,{className:"w-4 h-4"}),onClick:()=>p(!0),children:"Nuevo Incidente"})}),_&&b.jsx("div",{className:"rounded-md bg-red-50 p-4",children:b.jsx("div",{className:"flex",children:b.jsx("div",{className:"ml-3",children:b.jsx("h3",{className:"text-sm font-medium text-red-800",children:_})})})}),b.jsx(Nd,{children:b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(O_,{className:"text-gray-400"}),b.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtros"})]}),b.jsx(ea,{children:b.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[b.jsx(Ol,{label:"Estado",value:w.status,onChange:te=>C({...w,status:te.target.value}),options:[{value:"all",label:"Todos"},{value:"pending",label:"Pendiente"},{value:"in_progress",label:"En Progreso"},{value:"resolved",label:"Resuelto"}]}),b.jsx(Ol,{label:"Tipo",value:w.type,onChange:te=>C({...w,type:te.target.value}),options:[{value:"all",label:"Todos"},{value:"safety",label:"Seguridad"},{value:"maintenance",label:"Mantenimiento"},{value:"quality",label:"Calidad"}]}),b.jsx(Ol,{label:"Clasificación",value:w.classification,onChange:te=>C({...w,classification:te.target.value}),options:[{value:"all",label:"Todos"},{value:"1",label:"Nivel 1"},{value:"2",label:"Nivel 2"},{value:"3",label:"Nivel 3"}]})]})})]})}),b.jsx(Nd,{children:b.jsx(W3,{columns:se,data:n,isLoading:s,emptyMessage:"No hay incidentes que mostrar",onRowClick:te=>r(te)})}),b.jsx(u_,{isOpen:m,onClose:()=>p(!1),title:"Nuevo Incidente",size:"lg",children:b.jsx(s0,{onSubmit:Y,onCancel:()=>p(!1),isLoading:c})}),t&&b.jsx(u_,{isOpen:!0,onClose:()=>r(null),title:"Detalles del Incidente",size:"xl",children:b.jsx(gI,{incident:t,onUpdate:Z})})]})};class Xf extends F.Component{constructor(){super(...arguments);Pr(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Uncaught error:",t,r)}render(){var t;return this.state.hasError?this.props.fallback?this.props.fallback:b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:b.jsx("div",{className:"max-w-md w-full space-y-8 p-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:b.jsxs("div",{className:"text-center",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Oops! Algo salió mal"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:((t=this.state.error)==null?void 0:t.message)||"Se ha producido un error inesperado."}),b.jsx("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Recargar la página"})]})})}):this.props.children}}new To;const Q3=()=>b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:b.jsx("div",{className:"max-w-md w-full space-y-8 p-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:b.jsxs("div",{className:"text-center",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"404 - Página no encontrada"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"La página que estás buscando no existe."}),b.jsx(w_,{to:"/",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Volver al inicio"})]})})}),Y3=BO([{path:"/",element:b.jsx(z3,{}),errorElement:b.jsx(Xf,{})},{path:"/app",element:b.jsx(pI,{children:b.jsx(H3,{})}),errorElement:b.jsx(Xf,{}),children:[{path:"",element:b.jsx(q3,{})},{path:"incidents",element:b.jsx(K3,{})},{path:"incidents/new",element:b.jsx(s0,{})},{path:"incidents/:id",element:b.jsx(gI,{})}]},{path:"*",element:b.jsx(Xf,{children:b.jsx(Q3,{})})}],{basename:"/nrd-sgo"});Zx.createRoot(document.getElementById("root")).render(b.jsx(he.StrictMode,{children:b.jsx(Xf,{children:b.jsx(e2,{router:Y3})})}));
//# sourceMappingURL=index-BMcOSmbc.js.map
