var UD=Object.defineProperty;var zD=(n,e,t)=>e in n?UD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ii=(n,e,t)=>zD(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function Kv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Fy={exports:{}},Gc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw;function FD(){if(Qw)return Gc;Qw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var h in s)h!=="key"&&(o[h]=s[h])}else o=s;return s=o.ref,{$$typeof:n,type:r,key:u,ref:s!==void 0?s:null,props:o}}return Gc.Fragment=e,Gc.jsx=t,Gc.jsxs=t,Gc}var Yw;function BD(){return Yw||(Yw=1,Fy.exports=FD()),Fy.exports}var w=BD(),By={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xw;function qD(){if(Xw)return Ge;Xw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function b(L){return L===null||typeof L!="object"?null:(L=v&&L[v]||L["@@iterator"],typeof L=="function"?L:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,F={};function M(L,ue,Se){this.props=L,this.context=ue,this.refs=F,this.updater=Se||A}M.prototype.isReactComponent={},M.prototype.setState=function(L,ue){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,ue,"setState")},M.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function Y(){}Y.prototype=M.prototype;function Z(L,ue,Se){this.props=L,this.context=ue,this.refs=F,this.updater=Se||A}var ee=Z.prototype=new Y;ee.constructor=Z,C(ee,M.prototype),ee.isPureReactComponent=!0;var te=Array.isArray,se={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function D(L,ue,Se,ye,_e,Fe){return Se=Fe.ref,{$$typeof:n,type:L,key:ue,ref:Se!==void 0?Se:null,props:Fe}}function x(L,ue){return D(L.type,ue,void 0,void 0,void 0,L.props)}function I(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function O(L){var ue={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Se){return ue[Se]})}var j=/\/+/g;function q(L,ue){return typeof L=="object"&&L!==null&&L.key!=null?O(""+L.key):ue.toString(36)}function k(){}function xt(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(k,k):(L.status="pending",L.then(function(ue){L.status==="pending"&&(L.status="fulfilled",L.value=ue)},function(ue){L.status==="pending"&&(L.status="rejected",L.reason=ue)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function kt(L,ue,Se,ye,_e){var Fe=typeof L;(Fe==="undefined"||Fe==="boolean")&&(L=null);var je=!1;if(L===null)je=!0;else switch(Fe){case"bigint":case"string":case"number":je=!0;break;case"object":switch(L.$$typeof){case n:case e:je=!0;break;case y:return je=L._init,kt(je(L._payload),ue,Se,ye,_e)}}if(je)return _e=_e(L),je=ye===""?"."+q(L,0):ye,te(_e)?(Se="",je!=null&&(Se=je.replace(j,"$&/")+"/"),kt(_e,ue,Se,"",function(Ut){return Ut})):_e!=null&&(I(_e)&&(_e=x(_e,Se+(_e.key==null||L&&L.key===_e.key?"":(""+_e.key).replace(j,"$&/")+"/")+je)),ue.push(_e)),1;je=0;var Gt=ye===""?".":ye+":";if(te(L))for(var it=0;it<L.length;it++)ye=L[it],Fe=Gt+q(ye,it),je+=kt(ye,ue,Se,Fe,_e);else if(it=b(L),typeof it=="function")for(L=it.call(L),it=0;!(ye=L.next()).done;)ye=ye.value,Fe=Gt+q(ye,it++),je+=kt(ye,ue,Se,Fe,_e);else if(Fe==="object"){if(typeof L.then=="function")return kt(xt(L),ue,Se,ye,_e);throw ue=String(L),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return je}function fe(L,ue,Se){if(L==null)return L;var ye=[],_e=0;return kt(L,ye,"","",function(Fe){return ue.call(Se,Fe,_e++)}),ye}function Me(L){if(L._status===-1){var ue=L._result;ue=ue(),ue.then(function(Se){(L._status===0||L._status===-1)&&(L._status=1,L._result=Se)},function(Se){(L._status===0||L._status===-1)&&(L._status=2,L._result=Se)}),L._status===-1&&(L._status=0,L._result=ue)}if(L._status===1)return L._result.default;throw L._result}var Ce=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Ye(){}return Ge.Children={map:fe,forEach:function(L,ue,Se){fe(L,function(){ue.apply(this,arguments)},Se)},count:function(L){var ue=0;return fe(L,function(){ue++}),ue},toArray:function(L){return fe(L,function(ue){return ue})||[]},only:function(L){if(!I(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ge.Component=M,Ge.Fragment=t,Ge.Profiler=s,Ge.PureComponent=Z,Ge.StrictMode=r,Ge.Suspense=d,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,Ge.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ge.cache=function(L){return function(){return L.apply(null,arguments)}},Ge.cloneElement=function(L,ue,Se){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ye=C({},L.props),_e=L.key,Fe=void 0;if(ue!=null)for(je in ue.ref!==void 0&&(Fe=void 0),ue.key!==void 0&&(_e=""+ue.key),ue)!V.call(ue,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&ue.ref===void 0||(ye[je]=ue[je]);var je=arguments.length-2;if(je===1)ye.children=Se;else if(1<je){for(var Gt=Array(je),it=0;it<je;it++)Gt[it]=arguments[it+2];ye.children=Gt}return D(L.type,_e,void 0,void 0,Fe,ye)},Ge.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},Ge.createElement=function(L,ue,Se){var ye,_e={},Fe=null;if(ue!=null)for(ye in ue.key!==void 0&&(Fe=""+ue.key),ue)V.call(ue,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(_e[ye]=ue[ye]);var je=arguments.length-2;if(je===1)_e.children=Se;else if(1<je){for(var Gt=Array(je),it=0;it<je;it++)Gt[it]=arguments[it+2];_e.children=Gt}if(L&&L.defaultProps)for(ye in je=L.defaultProps,je)_e[ye]===void 0&&(_e[ye]=je[ye]);return D(L,Fe,void 0,void 0,null,_e)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(L){return{$$typeof:h,render:L}},Ge.isValidElement=I,Ge.lazy=function(L){return{$$typeof:y,_payload:{_status:-1,_result:L},_init:Me}},Ge.memo=function(L,ue){return{$$typeof:p,type:L,compare:ue===void 0?null:ue}},Ge.startTransition=function(L){var ue=se.T,Se={};se.T=Se;try{var ye=L(),_e=se.S;_e!==null&&_e(Se,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(Ye,Ce)}catch(Fe){Ce(Fe)}finally{se.T=ue}},Ge.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},Ge.use=function(L){return se.H.use(L)},Ge.useActionState=function(L,ue,Se){return se.H.useActionState(L,ue,Se)},Ge.useCallback=function(L,ue){return se.H.useCallback(L,ue)},Ge.useContext=function(L){return se.H.useContext(L)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(L,ue){return se.H.useDeferredValue(L,ue)},Ge.useEffect=function(L,ue){return se.H.useEffect(L,ue)},Ge.useId=function(){return se.H.useId()},Ge.useImperativeHandle=function(L,ue,Se){return se.H.useImperativeHandle(L,ue,Se)},Ge.useInsertionEffect=function(L,ue){return se.H.useInsertionEffect(L,ue)},Ge.useLayoutEffect=function(L,ue){return se.H.useLayoutEffect(L,ue)},Ge.useMemo=function(L,ue){return se.H.useMemo(L,ue)},Ge.useOptimistic=function(L,ue){return se.H.useOptimistic(L,ue)},Ge.useReducer=function(L,ue,Se){return se.H.useReducer(L,ue,Se)},Ge.useRef=function(L){return se.H.useRef(L)},Ge.useState=function(L){return se.H.useState(L)},Ge.useSyncExternalStore=function(L,ue,Se){return se.H.useSyncExternalStore(L,ue,Se)},Ge.useTransition=function(){return se.H.useTransition()},Ge.version="19.0.0",Ge}var Zw;function Wv(){return Zw||(Zw=1,By.exports=qD()),By.exports}var B=Wv();const he=Kv(B);var qy={exports:{}},$c={},Hy={exports:{}},Gy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jw;function HD(){return Jw||(Jw=1,function(n){function e(fe,Me){var Ce=fe.length;fe.push(Me);e:for(;0<Ce;){var Ye=Ce-1>>>1,L=fe[Ye];if(0<s(L,Me))fe[Ye]=Me,fe[Ce]=L,Ce=Ye;else break e}}function t(fe){return fe.length===0?null:fe[0]}function r(fe){if(fe.length===0)return null;var Me=fe[0],Ce=fe.pop();if(Ce!==Me){fe[0]=Ce;e:for(var Ye=0,L=fe.length,ue=L>>>1;Ye<ue;){var Se=2*(Ye+1)-1,ye=fe[Se],_e=Se+1,Fe=fe[_e];if(0>s(ye,Ce))_e<L&&0>s(Fe,ye)?(fe[Ye]=Fe,fe[_e]=Ce,Ye=_e):(fe[Ye]=ye,fe[Se]=Ce,Ye=Se);else if(_e<L&&0>s(Fe,Ce))fe[Ye]=Fe,fe[_e]=Ce,Ye=_e;else break e}}return Me}function s(fe,Me){var Ce=fe.sortIndex-Me.sortIndex;return Ce!==0?Ce:fe.id-Me.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var d=[],p=[],y=1,v=null,b=3,A=!1,C=!1,F=!1,M=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function ee(fe){for(var Me=t(p);Me!==null;){if(Me.callback===null)r(p);else if(Me.startTime<=fe)r(p),Me.sortIndex=Me.expirationTime,e(d,Me);else break;Me=t(p)}}function te(fe){if(F=!1,ee(fe),!C)if(t(d)!==null)C=!0,xt();else{var Me=t(p);Me!==null&&kt(te,Me.startTime-fe)}}var se=!1,V=-1,D=5,x=-1;function I(){return!(n.unstable_now()-x<D)}function O(){if(se){var fe=n.unstable_now();x=fe;var Me=!0;try{e:{C=!1,F&&(F=!1,Y(V),V=-1),A=!0;var Ce=b;try{t:{for(ee(fe),v=t(d);v!==null&&!(v.expirationTime>fe&&I());){var Ye=v.callback;if(typeof Ye=="function"){v.callback=null,b=v.priorityLevel;var L=Ye(v.expirationTime<=fe);if(fe=n.unstable_now(),typeof L=="function"){v.callback=L,ee(fe),Me=!0;break t}v===t(d)&&r(d),ee(fe)}else r(d);v=t(d)}if(v!==null)Me=!0;else{var ue=t(p);ue!==null&&kt(te,ue.startTime-fe),Me=!1}}break e}finally{v=null,b=Ce,A=!1}Me=void 0}}finally{Me?j():se=!1}}}var j;if(typeof Z=="function")j=function(){Z(O)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,k=q.port2;q.port1.onmessage=O,j=function(){k.postMessage(null)}}else j=function(){M(O,0)};function xt(){se||(se=!0,j())}function kt(fe,Me){V=M(function(){fe(n.unstable_now())},Me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(fe){fe.callback=null},n.unstable_continueExecution=function(){C||A||(C=!0,xt())},n.unstable_forceFrameRate=function(fe){0>fe||125<fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<fe?Math.floor(1e3/fe):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(fe){switch(b){case 1:case 2:case 3:var Me=3;break;default:Me=b}var Ce=b;b=Me;try{return fe()}finally{b=Ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(fe,Me){switch(fe){case 1:case 2:case 3:case 4:case 5:break;default:fe=3}var Ce=b;b=fe;try{return Me()}finally{b=Ce}},n.unstable_scheduleCallback=function(fe,Me,Ce){var Ye=n.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?Ye+Ce:Ye):Ce=Ye,fe){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=Ce+L,fe={id:y++,callback:Me,priorityLevel:fe,startTime:Ce,expirationTime:L,sortIndex:-1},Ce>Ye?(fe.sortIndex=Ce,e(p,fe),t(d)===null&&fe===t(p)&&(F?(Y(V),V=-1):F=!0,kt(te,Ce-Ye))):(fe.sortIndex=L,e(d,fe),C||A||(C=!0,xt())),fe},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(fe){var Me=b;return function(){var Ce=b;b=Me;try{return fe.apply(this,arguments)}finally{b=Ce}}}}(Gy)),Gy}var eS;function GD(){return eS||(eS=1,Hy.exports=HD()),Hy.exports}var $y={exports:{}},Ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tS;function $D(){if(tS)return Ln;tS=1;var n=Wv();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:d,containerInfo:p,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ln.createPortal=function(d,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(d,p,null,y)},Ln.flushSync=function(d){var p=u.T,y=r.p;try{if(u.T=null,r.p=2,d)return d()}finally{u.T=p,r.p=y,r.d.f()}},Ln.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(d,p))},Ln.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Ln.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?r.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:A}):y==="script"&&r.d.X(d,{crossOrigin:v,integrity:b,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Ln.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);r.d.M(d,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(d)},Ln.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin);r.d.L(d,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Ln.preloadModule=function(d,p){if(typeof d=="string")if(p){var y=h(p.as,p.crossOrigin);r.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(d)},Ln.requestFormReset=function(d){r.d.r(d)},Ln.unstable_batchedUpdates=function(d,p){return d(p)},Ln.useFormState=function(d,p,y){return u.H.useFormState(d,p,y)},Ln.useFormStatus=function(){return u.H.useHostTransitionStatus()},Ln.version="19.0.0",Ln}var nS;function gI(){if(nS)return $y.exports;nS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$y.exports=$D(),$y.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rS;function KD(){if(rS)return $c;rS=1;var n=GD(),e=Wv(),t=gI();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var o=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),A=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),te=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function V(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function x(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case d:return"Fragment";case h:return"Portal";case y:return"Profiler";case p:return"StrictMode";case F:return"Suspense";case M:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case A:return(i.displayName||"Context")+".Provider";case b:return(i._context.displayName||"Context")+".Consumer";case C:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Y:return a=i.displayName||null,a!==null?a:x(i.type)||"Memo";case Z:a=i._payload,i=i._init;try{return x(i(a))}catch{}}return null}var I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=Object.assign,j,q;function k(i){if(j===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);j=a&&a[1]||"",q=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+j+i+q}var xt=!1;function kt(i,a){if(!i||xt)return"";xt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ne){var X=ne}Reflect.construct(i,[],le)}else{try{le.call()}catch(ne){X=ne}i.call(le.prototype)}}else{try{throw Error()}catch(ne){X=ne}(le=i())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ne){if(ne&&X&&typeof ne.stack=="string")return[ne.stack,X.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),T=g[0],S=g[1];if(T&&S){var N=T.split(`
`),z=S.split(`
`);for(m=c=0;c<N.length&&!N[c].includes("DetermineComponentFrameRoot");)c++;for(;m<z.length&&!z[m].includes("DetermineComponentFrameRoot");)m++;if(c===N.length||m===z.length)for(c=N.length-1,m=z.length-1;1<=c&&0<=m&&N[c]!==z[m];)m--;for(;1<=c&&0<=m;c--,m--)if(N[c]!==z[m]){if(c!==1||m!==1)do if(c--,m--,0>m||N[c]!==z[m]){var ie=`
`+N[c].replace(" at new "," at ");return i.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",i.displayName)),ie}while(1<=c&&0<=m);break}}}finally{xt=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?k(l):""}function fe(i){switch(i.tag){case 26:case 27:case 5:return k(i.type);case 16:return k("Lazy");case 13:return k("Suspense");case 19:return k("SuspenseList");case 0:case 15:return i=kt(i.type,!1),i;case 11:return i=kt(i.type.render,!1),i;case 1:return i=kt(i.type,!0),i;default:return""}}function Me(i){try{var a="";do a+=fe(i),i=i.return;while(i);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Ce(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function Ye(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function L(i){if(Ce(i)!==i)throw Error(r(188))}function ue(i){var a=i.alternate;if(!a){if(a=Ce(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,c=a;;){var m=l.return;if(m===null)break;var g=m.alternate;if(g===null){if(c=m.return,c!==null){l=c;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===l)return L(m),i;if(g===c)return L(m),a;g=g.sibling}throw Error(r(188))}if(l.return!==c.return)l=m,c=g;else{for(var T=!1,S=m.child;S;){if(S===l){T=!0,l=m,c=g;break}if(S===c){T=!0,c=m,l=g;break}S=S.sibling}if(!T){for(S=g.child;S;){if(S===l){T=!0,l=g,c=m;break}if(S===c){T=!0,c=g,l=m;break}S=S.sibling}if(!T)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function Se(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=Se(i),a!==null)return a;i=i.sibling}return null}var ye=Array.isArray,_e=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fe={pending:!1,data:null,method:null,action:null},je=[],Gt=-1;function it(i){return{current:i}}function Ut(i){0>Gt||(i.current=je[Gt],je[Gt]=null,Gt--)}function Be(i,a){Gt++,je[Gt]=i.current,i.current=a}var $t=it(null),wr=it(null),tr=it(null),Mn=it(null);function gi(i,a){switch(Be(tr,a),Be(wr,i),Be($t,null),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)&&(a=a.namespaceURI)?Sw(a):0;break;default:if(i=i===8?a.parentNode:a,a=i.tagName,i=i.namespaceURI)i=Sw(i),a=Aw(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Ut($t),Be($t,a)}function Qr(){Ut($t),Ut(wr),Ut(tr)}function Os(i){i.memoizedState!==null&&Be(Mn,i);var a=$t.current,l=Aw(a,i.type);a!==l&&(Be(wr,i),Be($t,l))}function Ds(i){wr.current===i&&(Ut($t),Ut(wr)),Mn.current===i&&(Ut(Mn),zc._currentValue=Fe)}var ks=Object.prototype.hasOwnProperty,Gi=n.unstable_scheduleCallback,Ps=n.unstable_cancelCallback,Yr=n.unstable_shouldYield,Xr=n.unstable_requestPaint,xn=n.unstable_now,Ms=n.unstable_getCurrentPriorityLevel,wt=n.unstable_ImmediatePriority,St=n.unstable_UserBlockingPriority,Sr=n.unstable_NormalPriority,Vs=n.unstable_LowPriority,Ka=n.unstable_IdlePriority,Ar=n.log,yi=n.unstable_setDisableYieldValue,Zr=null,cn=null;function Wa(i){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Zr,i,void 0,(i.current.flags&128)===128)}catch{}}function or(i){if(typeof Ar=="function"&&yi(i),cn&&typeof cn.setStrictMode=="function")try{cn.setStrictMode(Zr,i)}catch{}}var nn=Math.clz32?Math.clz32:ol,Ls=Math.log,js=Math.LN2;function ol(i){return i>>>=0,i===0?32:31-(Ls(i)/js|0)|0}var lr=128,_i=4194304;function nr(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Cn(i,a){var l=i.pendingLanes;if(l===0)return 0;var c=0,m=i.suspendedLanes,g=i.pingedLanes,T=i.warmLanes;i=i.finishedLanes!==0;var S=l&134217727;return S!==0?(l=S&~m,l!==0?c=nr(l):(g&=S,g!==0?c=nr(g):i||(T=S&~T,T!==0&&(c=nr(T))))):(S=l&~m,S!==0?c=nr(S):g!==0?c=nr(g):i||(T=l&~T,T!==0&&(c=nr(T)))),c===0?0:a!==0&&a!==c&&(a&m)===0&&(m=c&-c,T=a&-a,m>=T||m===32&&(T&4194176)!==0)?a:c}function ur(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Us(i,a){switch(i){case 1:case 2:case 4:case 8:return a+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qa(){var i=lr;return lr<<=1,(lr&4194176)===0&&(lr=128),i}function P(){var i=_i;return _i<<=1,(_i&62914560)===0&&(_i=4194304),i}function H(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function W(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function ce(i,a,l,c,m,g){var T=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var S=i.entanglements,N=i.expirationTimes,z=i.hiddenUpdates;for(l=T&~l;0<l;){var ie=31-nn(l),le=1<<ie;S[ie]=0,N[ie]=-1;var X=z[ie];if(X!==null)for(z[ie]=null,ie=0;ie<X.length;ie++){var ne=X[ie];ne!==null&&(ne.lane&=-536870913)}l&=~le}c!==0&&ve(i,c,0),g!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=g&~(T&~a))}function ve(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var c=31-nn(a);i.entangledLanes|=a,i.entanglements[c]=i.entanglements[c]|1073741824|l&4194218}function Ae(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var c=31-nn(l),m=1<<c;m&a|i[c]&a&&(i[c]|=a),l&=~m}}function Ve(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function be(){var i=_e.p;return i!==0?i:(i=window.event,i===void 0?32:qw(i.type))}function we(i,a){var l=_e.p;try{return _e.p=i,a()}finally{_e.p=l}}var ge=Math.random().toString(36).slice(2),xe="__reactFiber$"+ge,Oe="__reactProps$"+ge,st="__reactContainer$"+ge,Pt="__reactEvents$"+ge,yt="__reactListeners$"+ge,Je="__reactHandles$"+ge,Mt="__reactResources$"+ge,Gn="__reactMarker$"+ge;function cr(i){delete i[xe],delete i[Oe],delete i[Pt],delete i[yt],delete i[Je]}function Zt(i){var a=i[xe];if(a)return a;for(var l=i.parentNode;l;){if(a=l[st]||l[xe]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=xw(i);i!==null;){if(l=i[xe])return l;i=xw(i)}return a}i=l,l=i.parentNode}return null}function rn(i){if(i=i[xe]||i[st]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Rr(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function rr(i){var a=i[Mt];return a||(a=i[Mt]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function pt(i){i[Gn]=!0}var vi=new Set,Jr={};function $e(i,a){gt(i,a),gt(i+"Capture",a)}function gt(i,a){for(Jr[i]=a,i=0;i<a.length;i++)vi.add(a[i])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$i=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nt={},Ir={};function Ya(i){return ks.call(Ir,i)?!0:ks.call(Nt,i)?!1:$i.test(i)?Ir[i]=!0:(Nt[i]=!0,!1)}function Ei(i,a,l){if(Ya(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function zs(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function xr(i,a,l,c){if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+c)}}function $n(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function vd(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function $p(i){var a=vd(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),c=""+i[a];if(!i.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,g=l.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return m.call(this)},set:function(T){c=""+T,g.call(this,T)}}),Object.defineProperty(i,a,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Xa(i){i._valueTracker||(i._valueTracker=$p(i))}function Yu(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return i&&(c=vd(i)?i.checked?"true":"false":i.value),i=c,i!==l?(a.setValue(i),!0):!1}function ll(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ki=/[\n"\\]/g;function Kt(i){return i.replace(Ki,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Fs(i,a,l,c,m,g,T,S){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),a!=null?T==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+$n(a)):i.value!==""+$n(a)&&(i.value=""+$n(a)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),a!=null?ul(i,T,$n(a)):l!=null?ul(i,T,$n(l)):c!=null&&i.removeAttribute("value"),m==null&&g!=null&&(i.defaultChecked=!!g),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.name=""+$n(S):i.removeAttribute("name")}function Za(i,a,l,c,m,g,T,S){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),a!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||a!=null))return;l=l!=null?""+$n(l):"",a=a!=null?""+$n(a):l,S||a===i.value||(i.value=a),i.defaultValue=a}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=S?i.checked:!!c,i.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function ul(i,a,l){a==="number"&&ll(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function dt(i,a,l,c){if(i=i.options,a){a={};for(var m=0;m<l.length;m++)a["$"+l[m]]=!0;for(l=0;l<i.length;l++)m=a.hasOwnProperty("$"+i[l].value),i[l].selected!==m&&(i[l].selected=m),m&&c&&(i[l].defaultSelected=!0)}else{for(l=""+$n(l),a=null,m=0;m<i.length;m++){if(i[m].value===l){i[m].selected=!0,c&&(i[m].defaultSelected=!0);return}a!==null||i[m].disabled||(a=i[m])}a!==null&&(a.selected=!0)}}function Ja(i,a,l){if(a!=null&&(a=""+$n(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+$n(l):""}function Bs(i,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(r(92));if(ye(c)){if(1<c.length)throw Error(r(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=$n(a),i.defaultValue=l,c=i.textContent,c===l&&c!==""&&c!==null&&(i.value=c)}function Cr(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Kp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xu(i,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":c?i.setProperty(a,l):typeof l!="number"||l===0||Kp.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function Ed(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var m in a)c=a[m],a.hasOwnProperty(m)&&l[m]!==c&&Xu(i,m,c)}else for(var g in a)a.hasOwnProperty(g)&&Xu(i,g,a[g])}function Zu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ti(i){return Qp.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Nr=null;function cl(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Wi=null,Qi=null;function Yi(i){var a=rn(i);if(a&&(i=a.stateNode)){var l=i[Oe]||null;e:switch(i=a.stateNode,a.type){case"input":if(Fs(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Kt(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==i&&c.form===i.form){var m=c[Oe]||null;if(!m)throw Error(r(90));Fs(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===i.form&&Yu(c)}break e;case"textarea":Ja(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&dt(i,!!l.multiple,a,!1)}}}var Ju=!1;function Td(i,a,l){if(Ju)return i(a,l);Ju=!0;try{var c=i(a);return c}finally{if(Ju=!1,(Wi!==null||Qi!==null)&&(ff(),Wi&&(a=Wi,i=Qi,Qi=Wi=null,Yi(a),i)))for(a=0;a<i.length;a++)Yi(i[a])}}function eo(i,a){var l=i.stateNode;if(l===null)return null;var c=l[Oe]||null;if(c===null)return null;l=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var Or=!1;if(yn)try{var to={};Object.defineProperty(to,"passive",{get:function(){Or=!0}}),window.addEventListener("test",to,to),window.removeEventListener("test",to,to)}catch{Or=!1}var bi=null,qs=null,Xi=null;function ec(){if(Xi)return Xi;var i,a=qs,l=a.length,c,m="value"in bi?bi.value:bi.textContent,g=m.length;for(i=0;i<l&&a[i]===m[i];i++);var T=l-i;for(c=1;c<=T&&a[l-c]===m[g-c];c++);return Xi=m.slice(i,1<c?1-c:void 0)}function wi(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Si(){return!0}function tc(){return!1}function _n(i){function a(l,c,m,g,T){this._reactName=l,this._targetInst=m,this.type=c,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(l=i[S],this[S]=l?l(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Si:tc,this.isPropagationStopped=tc,this}return O(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Si)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Si)},persist:function(){},isPersistent:Si}),a}var _t={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hl=_n(_t),no=O({},_t,{view:0,detail:0}),bd=_n(no),dl,fl,Ai,ro=O({},no,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ao,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ai&&(Ai&&i.type==="mousemove"?(dl=i.screenX-Ai.screenX,fl=i.screenY-Ai.screenY):fl=dl=0,Ai=i),dl)},movementY:function(i){return"movementY"in i?i.movementY:fl}}),Dr=_n(ro),wd=O({},ro,{dataTransfer:0}),Yp=_n(wd),io=O({},no,{relatedTarget:0}),ml=_n(io),nc=O({},_t,{animationName:0,elapsedTime:0,pseudoElement:0}),pl=_n(nc),Sd=O({},_t,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),gl=_n(Sd),Xp=O({},_t,{data:0}),rc=_n(Xp),so={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ad={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ic(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Rd[i])?!!a[i]:!1}function ao(){return ic}var Id=O({},no,{key:function(i){if(i.key){var a=so[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=wi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ad[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ao,charCode:function(i){return i.type==="keypress"?wi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?wi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),yl=_n(Id),xd=O({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sc=_n(xd),Zi=O({},no,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ao}),Cd=_n(Zi),Nd=O({},_t,{propertyName:0,elapsedTime:0,pseudoElement:0}),Od=_n(Nd),Dd=O({},ro,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),_l=_n(Dd),Kn=O({},_t,{newState:0,oldState:0}),kd=_n(Kn),Pd=[9,13,27,32],Ri=yn&&"CompositionEvent"in window,f=null;yn&&"documentMode"in document&&(f=document.documentMode);var _=yn&&"TextEvent"in window&&!f,E=yn&&(!Ri||f&&8<f&&11>=f),R=" ",$=!1;function J(i,a){switch(i){case"keyup":return Pd.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pe(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var at=!1;function hn(i,a){switch(i){case"compositionend":return pe(a);case"keypress":return a.which!==32?null:($=!0,R);case"textInput":return i=a.data,i===R&&$?null:i;default:return null}}function ot(i,a){if(at)return i==="compositionend"||!Ri&&J(i,a)?(i=ec(),Xi=qs=bi=null,at=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return E&&a.locale!=="ko"?null:a.data;default:return null}}var vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dn(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!vn[i.type]:a==="textarea"}function Ji(i,a,l,c){Wi?Qi?Qi.push(c):Qi=[c]:Wi=c,a=_f(a,"onChange"),0<a.length&&(l=new hl("onChange","change",null,l,c),i.push({event:l,listeners:a}))}var Nn=null,Ii=null;function ac(i){vw(i,0)}function Md(i){var a=Rr(i);if(Yu(a))return i}function WE(i,a){if(i==="change")return a}var QE=!1;if(yn){var Zp;if(yn){var Jp="oninput"in document;if(!Jp){var YE=document.createElement("div");YE.setAttribute("oninput","return;"),Jp=typeof YE.oninput=="function"}Zp=Jp}else Zp=!1;QE=Zp&&(!document.documentMode||9<document.documentMode)}function XE(){Nn&&(Nn.detachEvent("onpropertychange",ZE),Ii=Nn=null)}function ZE(i){if(i.propertyName==="value"&&Md(Ii)){var a=[];Ji(a,Ii,i,cl(i)),Td(ac,a)}}function pO(i,a,l){i==="focusin"?(XE(),Nn=a,Ii=l,Nn.attachEvent("onpropertychange",ZE)):i==="focusout"&&XE()}function gO(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Md(Ii)}function yO(i,a){if(i==="click")return Md(a)}function _O(i,a){if(i==="input"||i==="change")return Md(a)}function vO(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var hr=typeof Object.is=="function"?Object.is:vO;function oc(i,a){if(hr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var m=l[c];if(!ks.call(a,m)||!hr(i[m],a[m]))return!1}return!0}function JE(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function eT(i,a){var l=JE(i);i=0;for(var c;l;){if(l.nodeType===3){if(c=i+l.textContent.length,i<=a&&c>=a)return{node:l,offset:a-i};i=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=JE(l)}}function tT(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?tT(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function nT(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=ll(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=ll(i.document)}return a}function eg(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function EO(i,a){var l=nT(a);a=i.focusedElem;var c=i.selectionRange;if(l!==a&&a&&a.ownerDocument&&tT(a.ownerDocument.documentElement,a)){if(c!==null&&eg(a)){if(i=c.start,l=c.end,l===void 0&&(l=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(l,a.value.length);else if(l=(i=a.ownerDocument||document)&&i.defaultView||window,l.getSelection){l=l.getSelection();var m=a.textContent.length,g=Math.min(c.start,m);c=c.end===void 0?g:Math.min(c.end,m),!l.extend&&g>c&&(m=c,c=g,g=m),m=eT(a,g);var T=eT(a,c);m&&T&&(l.rangeCount!==1||l.anchorNode!==m.node||l.anchorOffset!==m.offset||l.focusNode!==T.node||l.focusOffset!==T.offset)&&(i=i.createRange(),i.setStart(m.node,m.offset),l.removeAllRanges(),g>c?(l.addRange(i),l.extend(T.node,T.offset)):(i.setEnd(T.node,T.offset),l.addRange(i)))}}for(i=[],l=a;l=l.parentNode;)l.nodeType===1&&i.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)l=i[a],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var TO=yn&&"documentMode"in document&&11>=document.documentMode,vl=null,tg=null,lc=null,ng=!1;function rT(i,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ng||vl==null||vl!==ll(c)||(c=vl,"selectionStart"in c&&eg(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),lc&&oc(lc,c)||(lc=c,c=_f(tg,"onSelect"),0<c.length&&(a=new hl("onSelect","select",null,a,l),i.push({event:a,listeners:c}),a.target=vl)))}function oo(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var El={animationend:oo("Animation","AnimationEnd"),animationiteration:oo("Animation","AnimationIteration"),animationstart:oo("Animation","AnimationStart"),transitionrun:oo("Transition","TransitionRun"),transitionstart:oo("Transition","TransitionStart"),transitioncancel:oo("Transition","TransitionCancel"),transitionend:oo("Transition","TransitionEnd")},rg={},iT={};yn&&(iT=document.createElement("div").style,"AnimationEvent"in window||(delete El.animationend.animation,delete El.animationiteration.animation,delete El.animationstart.animation),"TransitionEvent"in window||delete El.transitionend.transition);function lo(i){if(rg[i])return rg[i];if(!El[i])return i;var a=El[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in iT)return rg[i]=a[l];return i}var sT=lo("animationend"),aT=lo("animationiteration"),oT=lo("animationstart"),bO=lo("transitionrun"),wO=lo("transitionstart"),SO=lo("transitioncancel"),lT=lo("transitionend"),uT=new Map,cT="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function ei(i,a){uT.set(i,a),$e(a,[i])}var kr=[],Tl=0,ig=0;function Vd(){for(var i=Tl,a=ig=Tl=0;a<i;){var l=kr[a];kr[a++]=null;var c=kr[a];kr[a++]=null;var m=kr[a];kr[a++]=null;var g=kr[a];if(kr[a++]=null,c!==null&&m!==null){var T=c.pending;T===null?m.next=m:(m.next=T.next,T.next=m),c.pending=m}g!==0&&hT(l,m,g)}}function Ld(i,a,l,c){kr[Tl++]=i,kr[Tl++]=a,kr[Tl++]=l,kr[Tl++]=c,ig|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function sg(i,a,l,c){return Ld(i,a,l,c),jd(i)}function Hs(i,a){return Ld(i,null,null,a),jd(i)}function hT(i,a,l){i.lanes|=l;var c=i.alternate;c!==null&&(c.lanes|=l);for(var m=!1,g=i.return;g!==null;)g.childLanes|=l,c=g.alternate,c!==null&&(c.childLanes|=l),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(m=!0)),i=g,g=g.return;m&&a!==null&&i.tag===3&&(g=i.stateNode,m=31-nn(l),g=g.hiddenUpdates,i=g[m],i===null?g[m]=[a]:i.push(a),a.lane=l|536870912)}function jd(i){if(50<kc)throw kc=0,hy=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var bl={},dT=new WeakMap;function Pr(i,a){if(typeof i=="object"&&i!==null){var l=dT.get(i);return l!==void 0?l:(a={value:i,source:a,stack:Me(a)},dT.set(i,a),a)}return{value:i,source:a,stack:Me(a)}}var wl=[],Sl=0,Ud=null,zd=0,Mr=[],Vr=0,uo=null,es=1,ts="";function co(i,a){wl[Sl++]=zd,wl[Sl++]=Ud,Ud=i,zd=a}function fT(i,a,l){Mr[Vr++]=es,Mr[Vr++]=ts,Mr[Vr++]=uo,uo=i;var c=es;i=ts;var m=32-nn(c)-1;c&=~(1<<m),l+=1;var g=32-nn(a)+m;if(30<g){var T=m-m%5;g=(c&(1<<T)-1).toString(32),c>>=T,m-=T,es=1<<32-nn(a)+m|l<<m|c,ts=g+i}else es=1<<g|l<<m|c,ts=i}function ag(i){i.return!==null&&(co(i,1),fT(i,1,0))}function og(i){for(;i===Ud;)Ud=wl[--Sl],wl[Sl]=null,zd=wl[--Sl],wl[Sl]=null;for(;i===uo;)uo=Mr[--Vr],Mr[Vr]=null,ts=Mr[--Vr],Mr[Vr]=null,es=Mr[--Vr],Mr[Vr]=null}var Wn=null,On=null,ft=!1,ti=null,xi=!1,lg=Error(r(519));function ho(i){var a=Error(r(418,""));throw hc(Pr(a,i)),lg}function mT(i){var a=i.stateNode,l=i.type,c=i.memoizedProps;switch(a[xe]=i,a[Oe]=c,l){case"dialog":nt("cancel",a),nt("close",a);break;case"iframe":case"object":case"embed":nt("load",a);break;case"video":case"audio":for(l=0;l<Mc.length;l++)nt(Mc[l],a);break;case"source":nt("error",a);break;case"img":case"image":case"link":nt("error",a),nt("load",a);break;case"details":nt("toggle",a);break;case"input":nt("invalid",a),Za(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Xa(a);break;case"select":nt("invalid",a);break;case"textarea":nt("invalid",a),Bs(a,c.value,c.defaultValue,c.children),Xa(a)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||ww(a.textContent,l)?(c.popover!=null&&(nt("beforetoggle",a),nt("toggle",a)),c.onScroll!=null&&nt("scroll",a),c.onScrollEnd!=null&&nt("scrollend",a),c.onClick!=null&&(a.onclick=vf),a=!0):a=!1,a||ho(i)}function pT(i){for(Wn=i.return;Wn;)switch(Wn.tag){case 3:case 27:xi=!0;return;case 5:case 13:xi=!1;return;default:Wn=Wn.return}}function uc(i){if(i!==Wn)return!1;if(!ft)return pT(i),ft=!0,!1;var a=!1,l;if((l=i.tag!==3&&i.tag!==27)&&((l=i.tag===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||xy(i.type,i.memoizedProps)),l=!l),l&&(a=!0),a&&On&&ho(i),pT(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(a===0){On=ri(i.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;i=i.nextSibling}On=null}}else On=Wn?ri(i.stateNode.nextSibling):null;return!0}function cc(){On=Wn=null,ft=!1}function hc(i){ti===null?ti=[i]:ti.push(i)}var dc=Error(r(460)),gT=Error(r(474)),ug={then:function(){}};function yT(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Fd(){}function _T(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Fd,Fd),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,i===dc?Error(r(483)):i;default:if(typeof a.status=="string")a.then(Fd,Fd);else{if(i=Ot,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(c){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=c}},function(c){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,i===dc?Error(r(483)):i}throw fc=a,dc}}var fc=null;function vT(){if(fc===null)throw Error(r(459));var i=fc;return fc=null,i}var Al=null,mc=0;function Bd(i){var a=mc;return mc+=1,Al===null&&(Al=[]),_T(Al,i,a)}function pc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function qd(i,a){throw a.$$typeof===o?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function ET(i){var a=i._init;return a(i._payload)}function TT(i){function a(G,U){if(i){var Q=G.deletions;Q===null?(G.deletions=[U],G.flags|=16):Q.push(U)}}function l(G,U){if(!i)return null;for(;U!==null;)a(G,U),U=U.sibling;return null}function c(G){for(var U=new Map;G!==null;)G.key!==null?U.set(G.key,G):U.set(G.index,G),G=G.sibling;return U}function m(G,U){return G=na(G,U),G.index=0,G.sibling=null,G}function g(G,U,Q){return G.index=Q,i?(Q=G.alternate,Q!==null?(Q=Q.index,Q<U?(G.flags|=33554434,U):Q):(G.flags|=33554434,U)):(G.flags|=1048576,U)}function T(G){return i&&G.alternate===null&&(G.flags|=33554434),G}function S(G,U,Q,ae){return U===null||U.tag!==6?(U=ry(Q,G.mode,ae),U.return=G,U):(U=m(U,Q),U.return=G,U)}function N(G,U,Q,ae){var Re=Q.type;return Re===d?ie(G,U,Q.props.children,ae,Q.key):U!==null&&(U.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Z&&ET(Re)===U.type)?(U=m(U,Q.props),pc(U,Q),U.return=G,U):(U=lf(Q.type,Q.key,Q.props,null,G.mode,ae),pc(U,Q),U.return=G,U)}function z(G,U,Q,ae){return U===null||U.tag!==4||U.stateNode.containerInfo!==Q.containerInfo||U.stateNode.implementation!==Q.implementation?(U=iy(Q,G.mode,ae),U.return=G,U):(U=m(U,Q.children||[]),U.return=G,U)}function ie(G,U,Q,ae,Re){return U===null||U.tag!==7?(U=bo(Q,G.mode,ae,Re),U.return=G,U):(U=m(U,Q),U.return=G,U)}function le(G,U,Q){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=ry(""+U,G.mode,Q),U.return=G,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case u:return Q=lf(U.type,U.key,U.props,null,G.mode,Q),pc(Q,U),Q.return=G,Q;case h:return U=iy(U,G.mode,Q),U.return=G,U;case Z:var ae=U._init;return U=ae(U._payload),le(G,U,Q)}if(ye(U)||V(U))return U=bo(U,G.mode,Q,null),U.return=G,U;if(typeof U.then=="function")return le(G,Bd(U),Q);if(U.$$typeof===A)return le(G,sf(G,U),Q);qd(G,U)}return null}function X(G,U,Q,ae){var Re=U!==null?U.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Re!==null?null:S(G,U,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case u:return Q.key===Re?N(G,U,Q,ae):null;case h:return Q.key===Re?z(G,U,Q,ae):null;case Z:return Re=Q._init,Q=Re(Q._payload),X(G,U,Q,ae)}if(ye(Q)||V(Q))return Re!==null?null:ie(G,U,Q,ae,null);if(typeof Q.then=="function")return X(G,U,Bd(Q),ae);if(Q.$$typeof===A)return X(G,U,sf(G,Q),ae);qd(G,Q)}return null}function ne(G,U,Q,ae,Re){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return G=G.get(Q)||null,S(U,G,""+ae,Re);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case u:return G=G.get(ae.key===null?Q:ae.key)||null,N(U,G,ae,Re);case h:return G=G.get(ae.key===null?Q:ae.key)||null,z(U,G,ae,Re);case Z:var Qe=ae._init;return ae=Qe(ae._payload),ne(G,U,Q,ae,Re)}if(ye(ae)||V(ae))return G=G.get(Q)||null,ie(U,G,ae,Re,null);if(typeof ae.then=="function")return ne(G,U,Q,Bd(ae),Re);if(ae.$$typeof===A)return ne(G,U,Q,sf(U,ae),Re);qd(U,ae)}return null}function Ne(G,U,Q,ae){for(var Re=null,Qe=null,ke=U,Le=U=0,bn=null;ke!==null&&Le<Q.length;Le++){ke.index>Le?(bn=ke,ke=null):bn=ke.sibling;var mt=X(G,ke,Q[Le],ae);if(mt===null){ke===null&&(ke=bn);break}i&&ke&&mt.alternate===null&&a(G,ke),U=g(mt,U,Le),Qe===null?Re=mt:Qe.sibling=mt,Qe=mt,ke=bn}if(Le===Q.length)return l(G,ke),ft&&co(G,Le),Re;if(ke===null){for(;Le<Q.length;Le++)ke=le(G,Q[Le],ae),ke!==null&&(U=g(ke,U,Le),Qe===null?Re=ke:Qe.sibling=ke,Qe=ke);return ft&&co(G,Le),Re}for(ke=c(ke);Le<Q.length;Le++)bn=ne(ke,G,Le,Q[Le],ae),bn!==null&&(i&&bn.alternate!==null&&ke.delete(bn.key===null?Le:bn.key),U=g(bn,U,Le),Qe===null?Re=bn:Qe.sibling=bn,Qe=bn);return i&&ke.forEach(function(ua){return a(G,ua)}),ft&&co(G,Le),Re}function qe(G,U,Q,ae){if(Q==null)throw Error(r(151));for(var Re=null,Qe=null,ke=U,Le=U=0,bn=null,mt=Q.next();ke!==null&&!mt.done;Le++,mt=Q.next()){ke.index>Le?(bn=ke,ke=null):bn=ke.sibling;var ua=X(G,ke,mt.value,ae);if(ua===null){ke===null&&(ke=bn);break}i&&ke&&ua.alternate===null&&a(G,ke),U=g(ua,U,Le),Qe===null?Re=ua:Qe.sibling=ua,Qe=ua,ke=bn}if(mt.done)return l(G,ke),ft&&co(G,Le),Re;if(ke===null){for(;!mt.done;Le++,mt=Q.next())mt=le(G,mt.value,ae),mt!==null&&(U=g(mt,U,Le),Qe===null?Re=mt:Qe.sibling=mt,Qe=mt);return ft&&co(G,Le),Re}for(ke=c(ke);!mt.done;Le++,mt=Q.next())mt=ne(ke,G,Le,mt.value,ae),mt!==null&&(i&&mt.alternate!==null&&ke.delete(mt.key===null?Le:mt.key),U=g(mt,U,Le),Qe===null?Re=mt:Qe.sibling=mt,Qe=mt);return i&&ke.forEach(function(jD){return a(G,jD)}),ft&&co(G,Le),Re}function Yt(G,U,Q,ae){if(typeof Q=="object"&&Q!==null&&Q.type===d&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case u:e:{for(var Re=Q.key;U!==null;){if(U.key===Re){if(Re=Q.type,Re===d){if(U.tag===7){l(G,U.sibling),ae=m(U,Q.props.children),ae.return=G,G=ae;break e}}else if(U.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Z&&ET(Re)===U.type){l(G,U.sibling),ae=m(U,Q.props),pc(ae,Q),ae.return=G,G=ae;break e}l(G,U);break}else a(G,U);U=U.sibling}Q.type===d?(ae=bo(Q.props.children,G.mode,ae,Q.key),ae.return=G,G=ae):(ae=lf(Q.type,Q.key,Q.props,null,G.mode,ae),pc(ae,Q),ae.return=G,G=ae)}return T(G);case h:e:{for(Re=Q.key;U!==null;){if(U.key===Re)if(U.tag===4&&U.stateNode.containerInfo===Q.containerInfo&&U.stateNode.implementation===Q.implementation){l(G,U.sibling),ae=m(U,Q.children||[]),ae.return=G,G=ae;break e}else{l(G,U);break}else a(G,U);U=U.sibling}ae=iy(Q,G.mode,ae),ae.return=G,G=ae}return T(G);case Z:return Re=Q._init,Q=Re(Q._payload),Yt(G,U,Q,ae)}if(ye(Q))return Ne(G,U,Q,ae);if(V(Q)){if(Re=V(Q),typeof Re!="function")throw Error(r(150));return Q=Re.call(Q),qe(G,U,Q,ae)}if(typeof Q.then=="function")return Yt(G,U,Bd(Q),ae);if(Q.$$typeof===A)return Yt(G,U,sf(G,Q),ae);qd(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,U!==null&&U.tag===6?(l(G,U.sibling),ae=m(U,Q),ae.return=G,G=ae):(l(G,U),ae=ry(Q,G.mode,ae),ae.return=G,G=ae),T(G)):l(G,U)}return function(G,U,Q,ae){try{mc=0;var Re=Yt(G,U,Q,ae);return Al=null,Re}catch(ke){if(ke===dc)throw ke;var Qe=zr(29,ke,null,G.mode);return Qe.lanes=ae,Qe.return=G,Qe}finally{}}}var fo=TT(!0),bT=TT(!1),Rl=it(null),Hd=it(0);function wT(i,a){i=ds,Be(Hd,i),Be(Rl,a),ds=i|a.baseLanes}function cg(){Be(Hd,ds),Be(Rl,Rl.current)}function hg(){ds=Hd.current,Ut(Rl),Ut(Hd)}var Lr=it(null),Ci=null;function Gs(i){var a=i.alternate;Be(fn,fn.current&1),Be(Lr,i),Ci===null&&(a===null||Rl.current!==null||a.memoizedState!==null)&&(Ci=i)}function ST(i){if(i.tag===22){if(Be(fn,fn.current),Be(Lr,i),Ci===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(Ci=i)}}else $s()}function $s(){Be(fn,fn.current),Be(Lr,Lr.current)}function ns(i){Ut(Lr),Ci===i&&(Ci=null),Ut(fn)}var fn=it(0);function Gd(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var AO=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,c){i.push(c)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},RO=n.unstable_scheduleCallback,IO=n.unstable_NormalPriority,mn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dg(){return{controller:new AO,data:new Map,refCount:0}}function gc(i){i.refCount--,i.refCount===0&&RO(IO,function(){i.controller.abort()})}var yc=null,fg=0,Il=0,xl=null;function xO(i,a){if(yc===null){var l=yc=[];fg=0,Il=vy(),xl={status:"pending",value:void 0,then:function(c){l.push(c)}}}return fg++,a.then(AT,AT),a}function AT(){if(--fg===0&&yc!==null){xl!==null&&(xl.status="fulfilled");var i=yc;yc=null,Il=0,xl=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function CO(i,a){var l=[],c={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return i.then(function(){c.status="fulfilled",c.value=a;for(var m=0;m<l.length;m++)(0,l[m])(a)},function(m){for(c.status="rejected",c.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),c}var RT=I.S;I.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&xO(i,a),RT!==null&&RT(i,a)};var mo=it(null);function mg(){var i=mo.current;return i!==null?i:Ot.pooledCache}function $d(i,a){a===null?Be(mo,mo.current):Be(mo,a.pool)}function IT(){var i=mg();return i===null?null:{parent:mn._currentValue,pool:i}}var Ks=0,Ke=null,At=null,sn=null,Kd=!1,Cl=!1,po=!1,Wd=0,_c=0,Nl=null,NO=0;function Jt(){throw Error(r(321))}function pg(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!hr(i[l],a[l]))return!1;return!0}function gg(i,a,l,c,m,g){return Ks=g,Ke=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,I.H=i===null||i.memoizedState===null?go:Ws,po=!1,g=l(c,m),po=!1,Cl&&(g=CT(a,l,c,m)),xT(i),g}function xT(i){I.H=Ni;var a=At!==null&&At.next!==null;if(Ks=0,sn=At=Ke=null,Kd=!1,_c=0,Nl=null,a)throw Error(r(300));i===null||En||(i=i.dependencies,i!==null&&rf(i)&&(En=!0))}function CT(i,a,l,c){Ke=i;var m=0;do{if(Cl&&(Nl=null),_c=0,Cl=!1,25<=m)throw Error(r(301));if(m+=1,sn=At=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}I.H=yo,g=a(l,c)}while(Cl);return g}function OO(){var i=I.H,a=i.useState()[0];return a=typeof a.then=="function"?vc(a):a,i=i.useState()[0],(At!==null?At.memoizedState:null)!==i&&(Ke.flags|=1024),a}function yg(){var i=Wd!==0;return Wd=0,i}function _g(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function vg(i){if(Kd){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Kd=!1}Ks=0,sn=At=Ke=null,Cl=!1,_c=Wd=0,Nl=null}function ir(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Ke.memoizedState=sn=i:sn=sn.next=i,sn}function an(){if(At===null){var i=Ke.alternate;i=i!==null?i.memoizedState:null}else i=At.next;var a=sn===null?Ke.memoizedState:sn.next;if(a!==null)sn=a,At=i;else{if(i===null)throw Ke.alternate===null?Error(r(467)):Error(r(310));At=i,i={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},sn===null?Ke.memoizedState=sn=i:sn=sn.next=i}return sn}var Qd;Qd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function vc(i){var a=_c;return _c+=1,Nl===null&&(Nl=[]),i=_T(Nl,i,a),a=Ke,(sn===null?a.memoizedState:sn.next)===null&&(a=a.alternate,I.H=a===null||a.memoizedState===null?go:Ws),i}function Yd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return vc(i);if(i.$$typeof===A)return Vn(i)}throw Error(r(438,String(i)))}function Eg(i){var a=null,l=Ke.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=Ke.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Qd(),Ke.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),c=0;c<i;c++)l[c]=te;return a.index++,l}function rs(i,a){return typeof a=="function"?a(i):a}function Xd(i){var a=an();return Tg(a,At,i)}function Tg(i,a,l){var c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=l;var m=i.baseQueue,g=c.pending;if(g!==null){if(m!==null){var T=m.next;m.next=g.next,g.next=T}a.baseQueue=m=g,c.pending=null}if(g=i.baseState,m===null)i.memoizedState=g;else{a=m.next;var S=T=null,N=null,z=a,ie=!1;do{var le=z.lane&-536870913;if(le!==z.lane?(lt&le)===le:(Ks&le)===le){var X=z.revertLane;if(X===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),le===Il&&(ie=!0);else if((Ks&X)===X){z=z.next,X===Il&&(ie=!0);continue}else le={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(S=N=le,T=g):N=N.next=le,Ke.lanes|=X,ra|=X;le=z.action,po&&l(g,le),g=z.hasEagerState?z.eagerState:l(g,le)}else X={lane:le,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(S=N=X,T=g):N=N.next=X,Ke.lanes|=le,ra|=le;z=z.next}while(z!==null&&z!==a);if(N===null?T=g:N.next=S,!hr(g,i.memoizedState)&&(En=!0,ie&&(l=xl,l!==null)))throw l;i.memoizedState=g,i.baseState=T,i.baseQueue=N,c.lastRenderedState=g}return m===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function bg(i){var a=an(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var c=l.dispatch,m=l.pending,g=a.memoizedState;if(m!==null){l.pending=null;var T=m=m.next;do g=i(g,T.action),T=T.next;while(T!==m);hr(g,a.memoizedState)||(En=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),l.lastRenderedState=g}return[g,c]}function NT(i,a,l){var c=Ke,m=an(),g=ft;if(g){if(l===void 0)throw Error(r(407));l=l()}else l=a();var T=!hr((At||m).memoizedState,l);if(T&&(m.memoizedState=l,En=!0),m=m.queue,Ag(kT.bind(null,c,m,i),[i]),m.getSnapshot!==a||T||sn!==null&&sn.memoizedState.tag&1){if(c.flags|=2048,Ol(9,DT.bind(null,c,m,l,a),{destroy:void 0},null),Ot===null)throw Error(r(349));g||(Ks&60)!==0||OT(c,a,l)}return l}function OT(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=Ke.updateQueue,a===null?(a=Qd(),Ke.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function DT(i,a,l,c){a.value=l,a.getSnapshot=c,PT(a)&&MT(i)}function kT(i,a,l){return l(function(){PT(a)&&MT(i)})}function PT(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!hr(i,l)}catch{return!0}}function MT(i){var a=Hs(i,2);a!==null&&Qn(a,i,2)}function wg(i){var a=ir();if(typeof i=="function"){var l=i;if(i=l(),po){or(!0);try{l()}finally{or(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:i},a}function VT(i,a,l,c){return i.baseState=l,Tg(i,At,typeof c=="function"?c:rs)}function DO(i,a,l,c,m){if(ef(i))throw Error(r(485));if(i=a.action,i!==null){var g={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};I.T!==null?l(!0):g.isTransition=!1,c(g),l=a.pending,l===null?(g.next=a.pending=g,LT(a,g)):(g.next=l.next,a.pending=l.next=g)}}function LT(i,a){var l=a.action,c=a.payload,m=i.state;if(a.isTransition){var g=I.T,T={};I.T=T;try{var S=l(m,c),N=I.S;N!==null&&N(T,S),jT(i,a,S)}catch(z){Sg(i,a,z)}finally{I.T=g}}else try{g=l(m,c),jT(i,a,g)}catch(z){Sg(i,a,z)}}function jT(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){UT(i,a,c)},function(c){return Sg(i,a,c)}):UT(i,a,l)}function UT(i,a,l){a.status="fulfilled",a.value=l,zT(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,LT(i,l)))}function Sg(i,a,l){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,zT(a),a=a.next;while(a!==c)}i.action=null}function zT(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function FT(i,a){return a}function BT(i,a){if(ft){var l=Ot.formState;if(l!==null){e:{var c=Ke;if(ft){if(On){t:{for(var m=On,g=xi;m.nodeType!==8;){if(!g){m=null;break t}if(m=ri(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){On=ri(m.nextSibling),c=m.data==="F!";break e}}ho(c)}c=!1}c&&(a=l[0])}}return l=ir(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:FT,lastRenderedState:a},l.queue=c,l=ab.bind(null,Ke,c),c.dispatch=l,c=wg(!1),g=Ng.bind(null,Ke,!1,c.queue),c=ir(),m={state:a,dispatch:null,action:i,pending:null},c.queue=m,l=DO.bind(null,Ke,m,g,l),m.dispatch=l,c.memoizedState=i,[a,l,!1]}function qT(i){var a=an();return HT(a,At,i)}function HT(i,a,l){a=Tg(i,a,FT)[0],i=Xd(rs)[0],a=typeof a=="object"&&a!==null&&typeof a.then=="function"?vc(a):a;var c=an(),m=c.queue,g=m.dispatch;return l!==c.memoizedState&&(Ke.flags|=2048,Ol(9,kO.bind(null,m,l),{destroy:void 0},null)),[a,g,i]}function kO(i,a){i.action=a}function GT(i){var a=an(),l=At;if(l!==null)return HT(a,l,i);an(),a=a.memoizedState,l=an();var c=l.queue.dispatch;return l.memoizedState=i,[a,c,!1]}function Ol(i,a,l,c){return i={tag:i,create:a,inst:l,deps:c,next:null},a=Ke.updateQueue,a===null&&(a=Qd(),Ke.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(c=l.next,l.next=i,i.next=c,a.lastEffect=i),i}function $T(){return an().memoizedState}function Zd(i,a,l,c){var m=ir();Ke.flags|=i,m.memoizedState=Ol(1|a,l,{destroy:void 0},c===void 0?null:c)}function Jd(i,a,l,c){var m=an();c=c===void 0?null:c;var g=m.memoizedState.inst;At!==null&&c!==null&&pg(c,At.memoizedState.deps)?m.memoizedState=Ol(a,l,g,c):(Ke.flags|=i,m.memoizedState=Ol(1|a,l,g,c))}function KT(i,a){Zd(8390656,8,i,a)}function Ag(i,a){Jd(2048,8,i,a)}function WT(i,a){return Jd(4,2,i,a)}function QT(i,a){return Jd(4,4,i,a)}function YT(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function XT(i,a,l){l=l!=null?l.concat([i]):null,Jd(4,4,YT.bind(null,a,i),l)}function Rg(){}function ZT(i,a){var l=an();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&pg(a,c[1])?c[0]:(l.memoizedState=[i,a],i)}function JT(i,a){var l=an();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&pg(a,c[1]))return c[0];if(c=i(),po){or(!0);try{i()}finally{or(!1)}}return l.memoizedState=[c,a],c}function Ig(i,a,l){return l===void 0||(Ks&1073741824)!==0?i.memoizedState=a:(i.memoizedState=l,i=tw(),Ke.lanes|=i,ra|=i,l)}function eb(i,a,l,c){return hr(l,a)?l:Rl.current!==null?(i=Ig(i,l,c),hr(i,a)||(En=!0),i):(Ks&42)===0?(En=!0,i.memoizedState=l):(i=tw(),Ke.lanes|=i,ra|=i,a)}function tb(i,a,l,c,m){var g=_e.p;_e.p=g!==0&&8>g?g:8;var T=I.T,S={};I.T=S,Ng(i,!1,a,l);try{var N=m(),z=I.S;if(z!==null&&z(S,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var ie=CO(N,c);Ec(i,a,ie,pr(i))}else Ec(i,a,c,pr(i))}catch(le){Ec(i,a,{then:function(){},status:"rejected",reason:le},pr())}finally{_e.p=g,I.T=T}}function PO(){}function xg(i,a,l,c){if(i.tag!==5)throw Error(r(476));var m=nb(i).queue;tb(i,m,a,Fe,l===null?PO:function(){return rb(i),l(c)})}function nb(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Fe,baseState:Fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:Fe},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function rb(i){var a=nb(i).next.queue;Ec(i,a,{},pr())}function Cg(){return Vn(zc)}function ib(){return an().memoizedState}function sb(){return an().memoizedState}function MO(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=pr();i=Xs(l);var c=Zs(a,i,l);c!==null&&(Qn(c,a,l),wc(c,a,l)),a={cache:dg()},i.payload=a;return}a=a.return}}function VO(i,a,l){var c=pr();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},ef(i)?ob(a,l):(l=sg(i,a,l,c),l!==null&&(Qn(l,i,c),lb(l,a,c)))}function ab(i,a,l){var c=pr();Ec(i,a,l,c)}function Ec(i,a,l,c){var m={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(ef(i))ob(a,m);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var T=a.lastRenderedState,S=g(T,l);if(m.hasEagerState=!0,m.eagerState=S,hr(S,T))return Ld(i,a,m,0),Ot===null&&Vd(),!1}catch{}finally{}if(l=sg(i,a,m,c),l!==null)return Qn(l,i,c),lb(l,a,c),!0}return!1}function Ng(i,a,l,c){if(c={lane:2,revertLane:vy(),action:c,hasEagerState:!1,eagerState:null,next:null},ef(i)){if(a)throw Error(r(479))}else a=sg(i,l,c,2),a!==null&&Qn(a,i,2)}function ef(i){var a=i.alternate;return i===Ke||a!==null&&a===Ke}function ob(i,a){Cl=Kd=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function lb(i,a,l){if((l&4194176)!==0){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,Ae(i,l)}}var Ni={readContext:Vn,use:Yd,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt};Ni.useCacheRefresh=Jt,Ni.useMemoCache=Jt,Ni.useHostTransitionStatus=Jt,Ni.useFormState=Jt,Ni.useActionState=Jt,Ni.useOptimistic=Jt;var go={readContext:Vn,use:Yd,useCallback:function(i,a){return ir().memoizedState=[i,a===void 0?null:a],i},useContext:Vn,useEffect:KT,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Zd(4194308,4,YT.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Zd(4194308,4,i,a)},useInsertionEffect:function(i,a){Zd(4,2,i,a)},useMemo:function(i,a){var l=ir();a=a===void 0?null:a;var c=i();if(po){or(!0);try{i()}finally{or(!1)}}return l.memoizedState=[c,a],c},useReducer:function(i,a,l){var c=ir();if(l!==void 0){var m=l(a);if(po){or(!0);try{l(a)}finally{or(!1)}}}else m=a;return c.memoizedState=c.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},c.queue=i,i=i.dispatch=VO.bind(null,Ke,i),[c.memoizedState,i]},useRef:function(i){var a=ir();return i={current:i},a.memoizedState=i},useState:function(i){i=wg(i);var a=i.queue,l=ab.bind(null,Ke,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:Rg,useDeferredValue:function(i,a){var l=ir();return Ig(l,i,a)},useTransition:function(){var i=wg(!1);return i=tb.bind(null,Ke,i.queue,!0,!1),ir().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var c=Ke,m=ir();if(ft){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),Ot===null)throw Error(r(349));(lt&60)!==0||OT(c,a,l)}m.memoizedState=l;var g={value:l,getSnapshot:a};return m.queue=g,KT(kT.bind(null,c,g,i),[i]),c.flags|=2048,Ol(9,DT.bind(null,c,g,l,a),{destroy:void 0},null),l},useId:function(){var i=ir(),a=Ot.identifierPrefix;if(ft){var l=ts,c=es;l=(c&~(1<<32-nn(c)-1)).toString(32)+l,a=":"+a+"R"+l,l=Wd++,0<l&&(a+="H"+l.toString(32)),a+=":"}else l=NO++,a=":"+a+"r"+l.toString(32)+":";return i.memoizedState=a},useCacheRefresh:function(){return ir().memoizedState=MO.bind(null,Ke)}};go.useMemoCache=Eg,go.useHostTransitionStatus=Cg,go.useFormState=BT,go.useActionState=BT,go.useOptimistic=function(i){var a=ir();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Ng.bind(null,Ke,!0,l),l.dispatch=a,[i,a]};var Ws={readContext:Vn,use:Yd,useCallback:ZT,useContext:Vn,useEffect:Ag,useImperativeHandle:XT,useInsertionEffect:WT,useLayoutEffect:QT,useMemo:JT,useReducer:Xd,useRef:$T,useState:function(){return Xd(rs)},useDebugValue:Rg,useDeferredValue:function(i,a){var l=an();return eb(l,At.memoizedState,i,a)},useTransition:function(){var i=Xd(rs)[0],a=an().memoizedState;return[typeof i=="boolean"?i:vc(i),a]},useSyncExternalStore:NT,useId:ib};Ws.useCacheRefresh=sb,Ws.useMemoCache=Eg,Ws.useHostTransitionStatus=Cg,Ws.useFormState=qT,Ws.useActionState=qT,Ws.useOptimistic=function(i,a){var l=an();return VT(l,At,i,a)};var yo={readContext:Vn,use:Yd,useCallback:ZT,useContext:Vn,useEffect:Ag,useImperativeHandle:XT,useInsertionEffect:WT,useLayoutEffect:QT,useMemo:JT,useReducer:bg,useRef:$T,useState:function(){return bg(rs)},useDebugValue:Rg,useDeferredValue:function(i,a){var l=an();return At===null?Ig(l,i,a):eb(l,At.memoizedState,i,a)},useTransition:function(){var i=bg(rs)[0],a=an().memoizedState;return[typeof i=="boolean"?i:vc(i),a]},useSyncExternalStore:NT,useId:ib};yo.useCacheRefresh=sb,yo.useMemoCache=Eg,yo.useHostTransitionStatus=Cg,yo.useFormState=GT,yo.useActionState=GT,yo.useOptimistic=function(i,a){var l=an();return At!==null?VT(l,At,i,a):(l.baseState=i,[i,l.queue.dispatch])};function Og(i,a,l,c){a=i.memoizedState,l=l(c,a),l=l==null?a:O({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Dg={isMounted:function(i){return(i=i._reactInternals)?Ce(i)===i:!1},enqueueSetState:function(i,a,l){i=i._reactInternals;var c=pr(),m=Xs(c);m.payload=a,l!=null&&(m.callback=l),a=Zs(i,m,c),a!==null&&(Qn(a,i,c),wc(a,i,c))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var c=pr(),m=Xs(c);m.tag=1,m.payload=a,l!=null&&(m.callback=l),a=Zs(i,m,c),a!==null&&(Qn(a,i,c),wc(a,i,c))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=pr(),c=Xs(l);c.tag=2,a!=null&&(c.callback=a),a=Zs(i,c,l),a!==null&&(Qn(a,i,l),wc(a,i,l))}};function ub(i,a,l,c,m,g,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,g,T):a.prototype&&a.prototype.isPureReactComponent?!oc(l,c)||!oc(m,g):!0}function cb(i,a,l,c){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==i&&Dg.enqueueReplaceState(a,a.state,null)}function _o(i,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(i=i.defaultProps){l===a&&(l=O({},l));for(var m in i)l[m]===void 0&&(l[m]=i[m])}return l}var tf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function hb(i){tf(i)}function db(i){console.error(i)}function fb(i){tf(i)}function nf(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function mb(i,a,l){try{var c=i.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function kg(i,a,l){return l=Xs(l),l.tag=3,l.payload={element:null},l.callback=function(){nf(i,a)},l}function pb(i){return i=Xs(i),i.tag=3,i}function gb(i,a,l,c){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var g=c.value;i.payload=function(){return m(g)},i.callback=function(){mb(a,l,c)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){mb(a,l,c),typeof m!="function"&&(ia===null?ia=new Set([this]):ia.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function LO(i,a,l,c,m){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&bc(a,l,m,!0),l=Lr.current,l!==null){switch(l.tag){case 13:return Ci===null?my():l.alternate===null&&Qt===0&&(Qt=3),l.flags&=-257,l.flags|=65536,l.lanes=m,c===ug?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),gy(i,c,m)),!1;case 22:return l.flags|=65536,c===ug?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),gy(i,c,m)),!1}throw Error(r(435,l.tag))}return gy(i,c,m),my(),!1}if(ft)return a=Lr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,c!==lg&&(i=Error(r(422),{cause:c}),hc(Pr(i,l)))):(c!==lg&&(a=Error(r(423),{cause:c}),hc(Pr(a,l))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,c=Pr(c,l),m=kg(i.stateNode,c,m),Wg(i,m),Qt!==4&&(Qt=2)),!1;var g=Error(r(520),{cause:c});if(g=Pr(g,l),Oc===null?Oc=[g]:Oc.push(g),Qt!==4&&(Qt=2),a===null)return!0;c=Pr(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=m&-m,l.lanes|=i,i=kg(l.stateNode,c,i),Wg(l,i),!1;case 1:if(a=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ia===null||!ia.has(g))))return l.flags|=65536,m&=-m,l.lanes|=m,m=pb(m),gb(m,i,l,c),Wg(l,m),!1}l=l.return}while(l!==null);return!1}var yb=Error(r(461)),En=!1;function Dn(i,a,l,c){a.child=i===null?bT(a,null,l,c):fo(a,i.child,l,c)}function _b(i,a,l,c,m){l=l.render;var g=a.ref;if("ref"in c){var T={};for(var S in c)S!=="ref"&&(T[S]=c[S])}else T=c;return Eo(a),c=gg(i,a,l,T,g,m),S=yg(),i!==null&&!En?(_g(i,a,m),is(i,a,m)):(ft&&S&&ag(a),a.flags|=1,Dn(i,a,c,m),a.child)}function vb(i,a,l,c,m){if(i===null){var g=l.type;return typeof g=="function"&&!ny(g)&&g.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=g,Eb(i,a,g,c,m)):(i=lf(l.type,null,c,a,a.mode,m),i.ref=a.ref,i.return=a,a.child=i)}if(g=i.child,!Bg(i,m)){var T=g.memoizedProps;if(l=l.compare,l=l!==null?l:oc,l(T,c)&&i.ref===a.ref)return is(i,a,m)}return a.flags|=1,i=na(g,c),i.ref=a.ref,i.return=a,a.child=i}function Eb(i,a,l,c,m){if(i!==null){var g=i.memoizedProps;if(oc(g,c)&&i.ref===a.ref)if(En=!1,a.pendingProps=c=g,Bg(i,m))(i.flags&131072)!==0&&(En=!0);else return a.lanes=i.lanes,is(i,a,m)}return Pg(i,a,l,c,m)}function Tb(i,a,l){var c=a.pendingProps,m=c.children,g=(a.stateNode._pendingVisibility&2)!==0,T=i!==null?i.memoizedState:null;if(Tc(i,a),c.mode==="hidden"||g){if((a.flags&128)!==0){if(c=T!==null?T.baseLanes|l:l,i!==null){for(m=a.child=i.child,g=0;m!==null;)g=g|m.lanes|m.childLanes,m=m.sibling;a.childLanes=g&~c}else a.childLanes=0,a.child=null;return bb(i,a,c,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&$d(a,T!==null?T.cachePool:null),T!==null?wT(a,T):cg(),ST(a);else return a.lanes=a.childLanes=536870912,bb(i,a,T!==null?T.baseLanes|l:l,l)}else T!==null?($d(a,T.cachePool),wT(a,T),$s(),a.memoizedState=null):(i!==null&&$d(a,null),cg(),$s());return Dn(i,a,m,l),a.child}function bb(i,a,l,c){var m=mg();return m=m===null?null:{parent:mn._currentValue,pool:m},a.memoizedState={baseLanes:l,cachePool:m},i!==null&&$d(a,null),cg(),ST(a),i!==null&&bc(i,a,c,!0),null}function Tc(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=2097664)}}function Pg(i,a,l,c,m){return Eo(a),l=gg(i,a,l,c,void 0,m),c=yg(),i!==null&&!En?(_g(i,a,m),is(i,a,m)):(ft&&c&&ag(a),a.flags|=1,Dn(i,a,l,m),a.child)}function wb(i,a,l,c,m,g){return Eo(a),a.updateQueue=null,l=CT(a,c,l,m),xT(i),c=yg(),i!==null&&!En?(_g(i,a,g),is(i,a,g)):(ft&&c&&ag(a),a.flags|=1,Dn(i,a,l,g),a.child)}function Sb(i,a,l,c,m){if(Eo(a),a.stateNode===null){var g=bl,T=l.contextType;typeof T=="object"&&T!==null&&(g=Vn(T)),g=new l(c,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Dg,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=c,g.state=a.memoizedState,g.refs={},$g(a),T=l.contextType,g.context=typeof T=="object"&&T!==null?Vn(T):bl,g.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Og(a,l,T,c),g.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&Dg.enqueueReplaceState(g,g.state,null),Ac(a,c,g,m),Sc(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(i===null){g=a.stateNode;var S=a.memoizedProps,N=_o(l,S);g.props=N;var z=g.context,ie=l.contextType;T=bl,typeof ie=="object"&&ie!==null&&(T=Vn(ie));var le=l.getDerivedStateFromProps;ie=typeof le=="function"||typeof g.getSnapshotBeforeUpdate=="function",S=a.pendingProps!==S,ie||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S||z!==T)&&cb(a,g,c,T),Ys=!1;var X=a.memoizedState;g.state=X,Ac(a,c,g,m),Sc(),z=a.memoizedState,S||X!==z||Ys?(typeof le=="function"&&(Og(a,l,le,c),z=a.memoizedState),(N=Ys||ub(a,l,N,c,X,z,T))?(ie||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=z),g.props=c,g.state=z,g.context=T,c=N):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{g=a.stateNode,Kg(i,a),T=a.memoizedProps,ie=_o(l,T),g.props=ie,le=a.pendingProps,X=g.context,z=l.contextType,N=bl,typeof z=="object"&&z!==null&&(N=Vn(z)),S=l.getDerivedStateFromProps,(z=typeof S=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==le||X!==N)&&cb(a,g,c,N),Ys=!1,X=a.memoizedState,g.state=X,Ac(a,c,g,m),Sc();var ne=a.memoizedState;T!==le||X!==ne||Ys||i!==null&&i.dependencies!==null&&rf(i.dependencies)?(typeof S=="function"&&(Og(a,l,S,c),ne=a.memoizedState),(ie=Ys||ub(a,l,ie,c,X,ne,N)||i!==null&&i.dependencies!==null&&rf(i.dependencies))?(z||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,ne,N),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,ne,N)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&X===i.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&X===i.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=ne),g.props=c,g.state=ne,g.context=N,c=ie):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&X===i.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&X===i.memoizedState||(a.flags|=1024),c=!1)}return g=c,Tc(i,a),c=(a.flags&128)!==0,g||c?(g=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,i!==null&&c?(a.child=fo(a,i.child,null,m),a.child=fo(a,null,l,m)):Dn(i,a,l,m),a.memoizedState=g.state,i=a.child):i=is(i,a,m),i}function Ab(i,a,l,c){return cc(),a.flags|=256,Dn(i,a,l,c),a.child}var Mg={dehydrated:null,treeContext:null,retryLane:0};function Vg(i){return{baseLanes:i,cachePool:IT()}}function Lg(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=Fr),i}function Rb(i,a,l){var c=a.pendingProps,m=!1,g=(a.flags&128)!==0,T;if((T=g)||(T=i!==null&&i.memoizedState===null?!1:(fn.current&2)!==0),T&&(m=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,i===null){if(ft){if(m?Gs(a):$s(),ft){var S=On,N;if(N=S){e:{for(N=S,S=xi;N.nodeType!==8;){if(!S){S=null;break e}if(N=ri(N.nextSibling),N===null){S=null;break e}}S=N}S!==null?(a.memoizedState={dehydrated:S,treeContext:uo!==null?{id:es,overflow:ts}:null,retryLane:536870912},N=zr(18,null,null,0),N.stateNode=S,N.return=a,a.child=N,Wn=a,On=null,N=!0):N=!1}N||ho(a)}if(S=a.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return S.data==="$!"?a.lanes=16:a.lanes=536870912,null;ns(a)}return S=c.children,c=c.fallback,m?($s(),m=a.mode,S=Ug({mode:"hidden",children:S},m),c=bo(c,m,l,null),S.return=a,c.return=a,S.sibling=c,a.child=S,m=a.child,m.memoizedState=Vg(l),m.childLanes=Lg(i,T,l),a.memoizedState=Mg,c):(Gs(a),jg(a,S))}if(N=i.memoizedState,N!==null&&(S=N.dehydrated,S!==null)){if(g)a.flags&256?(Gs(a),a.flags&=-257,a=zg(i,a,l)):a.memoizedState!==null?($s(),a.child=i.child,a.flags|=128,a=null):($s(),m=c.fallback,S=a.mode,c=Ug({mode:"visible",children:c.children},S),m=bo(m,S,l,null),m.flags|=2,c.return=a,m.return=a,c.sibling=m,a.child=c,fo(a,i.child,null,l),c=a.child,c.memoizedState=Vg(l),c.childLanes=Lg(i,T,l),a.memoizedState=Mg,a=m);else if(Gs(a),S.data==="$!"){if(T=S.nextSibling&&S.nextSibling.dataset,T)var z=T.dgst;T=z,c=Error(r(419)),c.stack="",c.digest=T,hc({value:c,source:null,stack:null}),a=zg(i,a,l)}else if(En||bc(i,a,l,!1),T=(l&i.childLanes)!==0,En||T){if(T=Ot,T!==null){if(c=l&-l,(c&42)!==0)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=(c&(T.suspendedLanes|l))!==0?0:c,c!==0&&c!==N.retryLane)throw N.retryLane=c,Hs(i,c),Qn(T,i,c),yb}S.data==="$?"||my(),a=zg(i,a,l)}else S.data==="$?"?(a.flags|=128,a.child=i.child,a=ZO.bind(null,i),S._reactRetry=a,a=null):(i=N.treeContext,On=ri(S.nextSibling),Wn=a,ft=!0,ti=null,xi=!1,i!==null&&(Mr[Vr++]=es,Mr[Vr++]=ts,Mr[Vr++]=uo,es=i.id,ts=i.overflow,uo=a),a=jg(a,c.children),a.flags|=4096);return a}return m?($s(),m=c.fallback,S=a.mode,N=i.child,z=N.sibling,c=na(N,{mode:"hidden",children:c.children}),c.subtreeFlags=N.subtreeFlags&31457280,z!==null?m=na(z,m):(m=bo(m,S,l,null),m.flags|=2),m.return=a,c.return=a,c.sibling=m,a.child=c,c=m,m=a.child,S=i.child.memoizedState,S===null?S=Vg(l):(N=S.cachePool,N!==null?(z=mn._currentValue,N=N.parent!==z?{parent:z,pool:z}:N):N=IT(),S={baseLanes:S.baseLanes|l,cachePool:N}),m.memoizedState=S,m.childLanes=Lg(i,T,l),a.memoizedState=Mg,c):(Gs(a),l=i.child,i=l.sibling,l=na(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,i!==null&&(T=a.deletions,T===null?(a.deletions=[i],a.flags|=16):T.push(i)),a.child=l,a.memoizedState=null,l)}function jg(i,a){return a=Ug({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Ug(i,a){return Zb(i,a,0,null)}function zg(i,a,l){return fo(a,i.child,null,l),i=jg(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Ib(i,a,l){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a),Hg(i.return,a,l)}function Fg(i,a,l,c,m){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:m}:(g.isBackwards=a,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=l,g.tailMode=m)}function xb(i,a,l){var c=a.pendingProps,m=c.revealOrder,g=c.tail;if(Dn(i,a,c.children,l),c=fn.current,(c&2)!==0)c=c&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ib(i,l,a);else if(i.tag===19)Ib(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(Be(fn,c),m){case"forwards":for(l=a.child,m=null;l!==null;)i=l.alternate,i!==null&&Gd(i)===null&&(m=l),l=l.sibling;l=m,l===null?(m=a.child,a.child=null):(m=l.sibling,l.sibling=null),Fg(a,!1,m,l,g);break;case"backwards":for(l=null,m=a.child,a.child=null;m!==null;){if(i=m.alternate,i!==null&&Gd(i)===null){a.child=m;break}i=m.sibling,m.sibling=l,l=m,m=i}Fg(a,!0,l,null,g);break;case"together":Fg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function is(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),ra|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(bc(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=na(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=na(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function Bg(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&rf(i)))}function jO(i,a,l){switch(a.tag){case 3:gi(a,a.stateNode.containerInfo),Qs(a,mn,i.memoizedState.cache),cc();break;case 27:case 5:Os(a);break;case 4:gi(a,a.stateNode.containerInfo);break;case 10:Qs(a,a.type,a.memoizedProps.value);break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(Gs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Rb(i,a,l):(Gs(a),i=is(i,a,l),i!==null?i.sibling:null);Gs(a);break;case 19:var m=(i.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||(bc(i,a,l,!1),c=(l&a.childLanes)!==0),m){if(c)return xb(i,a,l);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Be(fn,fn.current),c)break;return null;case 22:case 23:return a.lanes=0,Tb(i,a,l);case 24:Qs(a,mn,i.memoizedState.cache)}return is(i,a,l)}function Cb(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)En=!0;else{if(!Bg(i,l)&&(a.flags&128)===0)return En=!1,jO(i,a,l);En=(i.flags&131072)!==0}else En=!1,ft&&(a.flags&1048576)!==0&&fT(a,zd,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var c=a.elementType,m=c._init;if(c=m(c._payload),a.type=c,typeof c=="function")ny(c)?(i=_o(c,i),a.tag=1,a=Sb(null,a,c,i,l)):(a.tag=0,a=Pg(null,a,c,i,l));else{if(c!=null){if(m=c.$$typeof,m===C){a.tag=11,a=_b(null,a,c,i,l);break e}else if(m===Y){a.tag=14,a=vb(null,a,c,i,l);break e}}throw a=x(c)||c,Error(r(306,a,""))}}return a;case 0:return Pg(i,a,a.type,a.pendingProps,l);case 1:return c=a.type,m=_o(c,a.pendingProps),Sb(i,a,c,m,l);case 3:e:{if(gi(a,a.stateNode.containerInfo),i===null)throw Error(r(387));var g=a.pendingProps;m=a.memoizedState,c=m.element,Kg(i,a),Ac(a,g,null,l);var T=a.memoizedState;if(g=T.cache,Qs(a,mn,g),g!==m.cache&&Gg(a,[mn],l,!0),Sc(),g=T.element,m.isDehydrated)if(m={element:g,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=m,a.memoizedState=m,a.flags&256){a=Ab(i,a,g,l);break e}else if(g!==c){c=Pr(Error(r(424)),a),hc(c),a=Ab(i,a,g,l);break e}else for(On=ri(a.stateNode.containerInfo.firstChild),Wn=a,ft=!0,ti=null,xi=!0,l=bT(a,null,g,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(cc(),g===c){a=is(i,a,l);break e}Dn(i,a,g,l)}a=a.child}return a;case 26:return Tc(i,a),i===null?(l=Dw(a.type,null,a.pendingProps,null))?a.memoizedState=l:ft||(l=a.type,i=a.pendingProps,c=Ef(tr.current).createElement(l),c[xe]=a,c[Oe]=i,kn(c,l,i),pt(c),a.stateNode=c):a.memoizedState=Dw(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Os(a),i===null&&ft&&(c=a.stateNode=Cw(a.type,a.pendingProps,tr.current),Wn=a,xi=!0,On=ri(c.firstChild)),c=a.pendingProps.children,i!==null||ft?Dn(i,a,c,l):a.child=fo(a,null,c,l),Tc(i,a),a.child;case 5:return i===null&&ft&&((m=c=On)&&(c=mD(c,a.type,a.pendingProps,xi),c!==null?(a.stateNode=c,Wn=a,On=ri(c.firstChild),xi=!1,m=!0):m=!1),m||ho(a)),Os(a),m=a.type,g=a.pendingProps,T=i!==null?i.memoizedProps:null,c=g.children,xy(m,g)?c=null:T!==null&&xy(m,T)&&(a.flags|=32),a.memoizedState!==null&&(m=gg(i,a,OO,null,null,l),zc._currentValue=m),Tc(i,a),Dn(i,a,c,l),a.child;case 6:return i===null&&ft&&((i=l=On)&&(l=pD(l,a.pendingProps,xi),l!==null?(a.stateNode=l,Wn=a,On=null,i=!0):i=!1),i||ho(a)),null;case 13:return Rb(i,a,l);case 4:return gi(a,a.stateNode.containerInfo),c=a.pendingProps,i===null?a.child=fo(a,null,c,l):Dn(i,a,c,l),a.child;case 11:return _b(i,a,a.type,a.pendingProps,l);case 7:return Dn(i,a,a.pendingProps,l),a.child;case 8:return Dn(i,a,a.pendingProps.children,l),a.child;case 12:return Dn(i,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,Qs(a,a.type,c.value),Dn(i,a,c.children,l),a.child;case 9:return m=a.type._context,c=a.pendingProps.children,Eo(a),m=Vn(m),c=c(m),a.flags|=1,Dn(i,a,c,l),a.child;case 14:return vb(i,a,a.type,a.pendingProps,l);case 15:return Eb(i,a,a.type,a.pendingProps,l);case 19:return xb(i,a,l);case 22:return Tb(i,a,l);case 24:return Eo(a),c=Vn(mn),i===null?(m=mg(),m===null&&(m=Ot,g=dg(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=l),m=g),a.memoizedState={parent:c,cache:m},$g(a),Qs(a,mn,m)):((i.lanes&l)!==0&&(Kg(i,a),Ac(a,null,null,l),Sc()),m=i.memoizedState,g=a.memoizedState,m.parent!==c?(m={parent:c,cache:c},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Qs(a,mn,c)):(c=g.cache,Qs(a,mn,c),c!==m.cache&&Gg(a,[mn],l,!0))),Dn(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}var qg=it(null),vo=null,ss=null;function Qs(i,a,l){Be(qg,a._currentValue),a._currentValue=l}function as(i){i._currentValue=qg.current,Ut(qg)}function Hg(i,a,l){for(;i!==null;){var c=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),i===l)break;i=i.return}}function Gg(i,a,l,c){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var g=m.dependencies;if(g!==null){var T=m.child;g=g.firstContext;e:for(;g!==null;){var S=g;g=m;for(var N=0;N<a.length;N++)if(S.context===a[N]){g.lanes|=l,S=g.alternate,S!==null&&(S.lanes|=l),Hg(g.return,l,i),c||(T=null);break e}g=S.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(r(341));T.lanes|=l,g=T.alternate,g!==null&&(g.lanes|=l),Hg(T,l,i),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===i){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function bc(i,a,l,c){i=null;for(var m=a,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var S=m.type;hr(m.pendingProps.value,T.value)||(i!==null?i.push(S):i=[S])}}else if(m===Mn.current){if(T=m.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(zc):i=[zc])}m=m.return}i!==null&&Gg(a,i,l,c),a.flags|=262144}function rf(i){for(i=i.firstContext;i!==null;){if(!hr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Eo(i){vo=i,ss=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Vn(i){return Nb(vo,i)}function sf(i,a){return vo===null&&Eo(i),Nb(i,a)}function Nb(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},ss===null){if(i===null)throw Error(r(308));ss=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else ss=ss.next=a;return l}var Ys=!1;function $g(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Xs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Zs(i,a,l){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Bt&2)!==0){var m=c.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),c.pending=a,a=jd(i),hT(i,null,l),a}return Ld(i,c,a,l),jd(i)}function wc(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194176)!==0)){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,Ae(i,l)}}function Wg(i,a){var l=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var m=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?m=g=T:g=g.next=T,l=l.next}while(l!==null);g===null?m=g=a:g=g.next=a}else m=g=a;l={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Qg=!1;function Sc(){if(Qg){var i=xl;if(i!==null)throw i}}function Ac(i,a,l,c){Qg=!1;var m=i.updateQueue;Ys=!1;var g=m.firstBaseUpdate,T=m.lastBaseUpdate,S=m.shared.pending;if(S!==null){m.shared.pending=null;var N=S,z=N.next;N.next=null,T===null?g=z:T.next=z,T=N;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,S=ie.lastBaseUpdate,S!==T&&(S===null?ie.firstBaseUpdate=z:S.next=z,ie.lastBaseUpdate=N))}if(g!==null){var le=m.baseState;T=0,ie=z=N=null,S=g;do{var X=S.lane&-536870913,ne=X!==S.lane;if(ne?(lt&X)===X:(c&X)===X){X!==0&&X===Il&&(Qg=!0),ie!==null&&(ie=ie.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Ne=i,qe=S;X=a;var Yt=l;switch(qe.tag){case 1:if(Ne=qe.payload,typeof Ne=="function"){le=Ne.call(Yt,le,X);break e}le=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=qe.payload,X=typeof Ne=="function"?Ne.call(Yt,le,X):Ne,X==null)break e;le=O({},le,X);break e;case 2:Ys=!0}}X=S.callback,X!==null&&(i.flags|=64,ne&&(i.flags|=8192),ne=m.callbacks,ne===null?m.callbacks=[X]:ne.push(X))}else ne={lane:X,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ie===null?(z=ie=ne,N=le):ie=ie.next=ne,T|=X;if(S=S.next,S===null){if(S=m.shared.pending,S===null)break;ne=S,S=ne.next,ne.next=null,m.lastBaseUpdate=ne,m.shared.pending=null}}while(!0);ie===null&&(N=le),m.baseState=N,m.firstBaseUpdate=z,m.lastBaseUpdate=ie,g===null&&(m.shared.lanes=0),ra|=T,i.lanes=T,i.memoizedState=le}}function Ob(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function Db(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Ob(l[i],a)}function Rc(i,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var m=c.next;l=m;do{if((l.tag&i)===i){c=void 0;var g=l.create,T=l.inst;c=g(),T.destroy=c}l=l.next}while(l!==m)}}catch(S){Ct(a,a.return,S)}}function Js(i,a,l){try{var c=a.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var g=m.next;c=g;do{if((c.tag&i)===i){var T=c.inst,S=T.destroy;if(S!==void 0){T.destroy=void 0,m=a;var N=l;try{S()}catch(z){Ct(m,N,z)}}}c=c.next}while(c!==g)}}catch(z){Ct(a,a.return,z)}}function kb(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{Db(a,l)}catch(c){Ct(i,i.return,c)}}}function Pb(i,a,l){l.props=_o(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(c){Ct(i,a,c)}}function To(i,a){try{var l=i.ref;if(l!==null){var c=i.stateNode;switch(i.tag){case 26:case 27:case 5:var m=c;break;default:m=c}typeof l=="function"?i.refCleanup=l(m):l.current=m}}catch(g){Ct(i,a,g)}}function dr(i,a){var l=i.ref,c=i.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(m){Ct(i,a,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){Ct(i,a,m)}else l.current=null}function Mb(i){var a=i.type,l=i.memoizedProps,c=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(m){Ct(i,i.return,m)}}function Vb(i,a,l){try{var c=i.stateNode;uD(c,i.type,l,a),c[Oe]=a}catch(m){Ct(i,i.return,m)}}function Lb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function Yg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Lb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Xg(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?l.nodeType===8?l.parentNode.insertBefore(i,a):l.insertBefore(i,a):(l.nodeType===8?(a=l.parentNode,a.insertBefore(i,l)):(a=l,a.appendChild(i)),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=vf));else if(c!==4&&c!==27&&(i=i.child,i!==null))for(Xg(i,a,l),i=i.sibling;i!==null;)Xg(i,a,l),i=i.sibling}function af(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(c!==4&&c!==27&&(i=i.child,i!==null))for(af(i,a,l),i=i.sibling;i!==null;)af(i,a,l),i=i.sibling}var os=!1,Wt=!1,Zg=!1,jb=typeof WeakSet=="function"?WeakSet:Set,Tn=null,Ub=!1;function UO(i,a){if(i=i.containerInfo,Ry=Rf,i=nT(i),eg(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var m=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var T=0,S=-1,N=-1,z=0,ie=0,le=i,X=null;t:for(;;){for(var ne;le!==l||m!==0&&le.nodeType!==3||(S=T+m),le!==g||c!==0&&le.nodeType!==3||(N=T+c),le.nodeType===3&&(T+=le.nodeValue.length),(ne=le.firstChild)!==null;)X=le,le=ne;for(;;){if(le===i)break t;if(X===l&&++z===m&&(S=T),X===g&&++ie===c&&(N=T),(ne=le.nextSibling)!==null)break;le=X,X=le.parentNode}le=ne}l=S===-1||N===-1?null:{start:S,end:N}}else l=null}l=l||{start:0,end:0}}else l=null;for(Iy={focusedElem:i,selectionRange:l},Rf=!1,Tn=a;Tn!==null;)if(a=Tn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,Tn=i;else for(;Tn!==null;){switch(a=Tn,g=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,l=a,m=g.memoizedProps,g=g.memoizedState,c=l.stateNode;try{var Ne=_o(l.type,m,l.elementType===l.type);i=c.getSnapshotBeforeUpdate(Ne,g),c.__reactInternalSnapshotBeforeUpdate=i}catch(qe){Ct(l,l.return,qe)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)Oy(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Oy(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,Tn=i;break}Tn=a.return}return Ne=Ub,Ub=!1,Ne}function zb(i,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:us(i,l),c&4&&Rc(5,l);break;case 1:if(us(i,l),c&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(S){Ct(l,l.return,S)}else{var m=_o(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(m,a,i.__reactInternalSnapshotBeforeUpdate)}catch(S){Ct(l,l.return,S)}}c&64&&kb(l),c&512&&To(l,l.return);break;case 3:if(us(i,l),c&64&&(c=l.updateQueue,c!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Db(c,i)}catch(S){Ct(l,l.return,S)}}break;case 26:us(i,l),c&512&&To(l,l.return);break;case 27:case 5:us(i,l),a===null&&c&4&&Mb(l),c&512&&To(l,l.return);break;case 12:us(i,l);break;case 13:us(i,l),c&4&&qb(i,l);break;case 22:if(m=l.memoizedState!==null||os,!m){a=a!==null&&a.memoizedState!==null||Wt;var g=os,T=Wt;os=m,(Wt=a)&&!T?ea(i,l,(l.subtreeFlags&8772)!==0):us(i,l),os=g,Wt=T}c&512&&(l.memoizedProps.mode==="manual"?To(l,l.return):dr(l,l.return));break;default:us(i,l)}}function Fb(i){var a=i.alternate;a!==null&&(i.alternate=null,Fb(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&cr(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var on=null,fr=!1;function ls(i,a,l){for(l=l.child;l!==null;)Bb(i,a,l),l=l.sibling}function Bb(i,a,l){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Zr,l)}catch{}switch(l.tag){case 26:Wt||dr(l,a),ls(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Wt||dr(l,a);var c=on,m=fr;for(on=l.stateNode,ls(i,a,l),l=l.stateNode,a=l.attributes;a.length;)l.removeAttributeNode(a[0]);cr(l),on=c,fr=m;break;case 5:Wt||dr(l,a);case 6:m=on;var g=fr;if(on=null,ls(i,a,l),on=m,fr=g,on!==null)if(fr)try{i=on,c=l.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)}catch(T){Ct(l,a,T)}else try{on.removeChild(l.stateNode)}catch(T){Ct(l,a,T)}break;case 18:on!==null&&(fr?(a=on,l=l.stateNode,a.nodeType===8?Ny(a.parentNode,l):a.nodeType===1&&Ny(a,l),Hc(a)):Ny(on,l.stateNode));break;case 4:c=on,m=fr,on=l.stateNode.containerInfo,fr=!0,ls(i,a,l),on=c,fr=m;break;case 0:case 11:case 14:case 15:Wt||Js(2,l,a),Wt||Js(4,l,a),ls(i,a,l);break;case 1:Wt||(dr(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&Pb(l,a,c)),ls(i,a,l);break;case 21:ls(i,a,l);break;case 22:Wt||dr(l,a),Wt=(c=Wt)||l.memoizedState!==null,ls(i,a,l),Wt=c;break;default:ls(i,a,l)}}function qb(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Hc(i)}catch(l){Ct(a,a.return,l)}}function zO(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new jb),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new jb),a;default:throw Error(r(435,i.tag))}}function Jg(i,a){var l=zO(i);a.forEach(function(c){var m=JO.bind(null,i,c);l.has(c)||(l.add(c),c.then(m,m))})}function jr(i,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var m=l[c],g=i,T=a,S=T;e:for(;S!==null;){switch(S.tag){case 27:case 5:on=S.stateNode,fr=!1;break e;case 3:on=S.stateNode.containerInfo,fr=!0;break e;case 4:on=S.stateNode.containerInfo,fr=!0;break e}S=S.return}if(on===null)throw Error(r(160));Bb(g,T,m),on=null,fr=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Hb(a,i),a=a.sibling}var ni=null;function Hb(i,a){var l=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:jr(a,i),Ur(i),c&4&&(Js(3,i,i.return),Rc(3,i),Js(5,i,i.return));break;case 1:jr(a,i),Ur(i),c&512&&(Wt||l===null||dr(l,l.return)),c&64&&os&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var m=ni;if(jr(a,i),Ur(i),c&512&&(Wt||l===null||dr(l,l.return)),c&4){var g=l!==null?l.memoizedState:null;if(c=i.memoizedState,l===null)if(c===null)if(i.stateNode===null){e:{c=i.type,l=i.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Gn]||g[xe]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(c),m.head.insertBefore(g,m.querySelector("head > title"))),kn(g,c,l),g[xe]=i,pt(g),c=g;break e;case"link":var T=Mw("link","href",m).get(c+(l.href||""));if(T){for(var S=0;S<T.length;S++)if(g=T[S],g.getAttribute("href")===(l.href==null?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(S,1);break t}}g=m.createElement(c),kn(g,c,l),m.head.appendChild(g);break;case"meta":if(T=Mw("meta","content",m).get(c+(l.content||""))){for(S=0;S<T.length;S++)if(g=T[S],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(S,1);break t}}g=m.createElement(c),kn(g,c,l),m.head.appendChild(g);break;default:throw Error(r(468,c))}g[xe]=i,pt(g),c=g}i.stateNode=c}else Vw(m,i.type,i.stateNode);else i.stateNode=Pw(m,c,i.memoizedProps);else g!==c?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,c===null?Vw(m,i.type,i.stateNode):Pw(m,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Vb(i,i.memoizedProps,l.memoizedProps)}break;case 27:if(c&4&&i.alternate===null){m=i.stateNode,g=i.memoizedProps;try{for(var N=m.firstChild;N;){var z=N.nextSibling,ie=N.nodeName;N[Gn]||ie==="HEAD"||ie==="BODY"||ie==="SCRIPT"||ie==="STYLE"||ie==="LINK"&&N.rel.toLowerCase()==="stylesheet"||m.removeChild(N),N=z}for(var le=i.type,X=m.attributes;X.length;)m.removeAttributeNode(X[0]);kn(m,le,g),m[xe]=i,m[Oe]=g}catch(Ne){Ct(i,i.return,Ne)}}case 5:if(jr(a,i),Ur(i),c&512&&(Wt||l===null||dr(l,l.return)),i.flags&32){m=i.stateNode;try{Cr(m,"")}catch(Ne){Ct(i,i.return,Ne)}}c&4&&i.stateNode!=null&&(m=i.memoizedProps,Vb(i,m,l!==null?l.memoizedProps:m)),c&1024&&(Zg=!0);break;case 6:if(jr(a,i),Ur(i),c&4){if(i.stateNode===null)throw Error(r(162));c=i.memoizedProps,l=i.stateNode;try{l.nodeValue=c}catch(Ne){Ct(i,i.return,Ne)}}break;case 3:if(wf=null,m=ni,ni=Tf(a.containerInfo),jr(a,i),ni=m,Ur(i),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Hc(a.containerInfo)}catch(Ne){Ct(i,i.return,Ne)}Zg&&(Zg=!1,Gb(i));break;case 4:c=ni,ni=Tf(i.stateNode.containerInfo),jr(a,i),Ur(i),ni=c;break;case 12:jr(a,i),Ur(i);break;case 13:jr(a,i),Ur(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(ly=xn()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Jg(i,c)));break;case 22:if(c&512&&(Wt||l===null||dr(l,l.return)),N=i.memoizedState!==null,z=l!==null&&l.memoizedState!==null,ie=os,le=Wt,os=ie||N,Wt=le||z,jr(a,i),Wt=le,os=ie,Ur(i),a=i.stateNode,a._current=i,a._visibility&=-3,a._visibility|=a._pendingVisibility&2,c&8192&&(a._visibility=N?a._visibility&-2:a._visibility|1,N&&(a=os||Wt,l===null||z||a||Dl(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))e:for(l=null,a=i;;){if(a.tag===5||a.tag===26||a.tag===27){if(l===null){z=l=a;try{if(m=z.stateNode,N)g=m.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{T=z.stateNode,S=z.memoizedProps.style;var ne=S!=null&&S.hasOwnProperty("display")?S.display:null;T.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Ne){Ct(z,z.return,Ne)}}}else if(a.tag===6){if(l===null){z=a;try{z.stateNode.nodeValue=N?"":z.memoizedProps}catch(Ne){Ct(z,z.return,Ne)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=i.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Jg(i,l))));break;case 19:jr(a,i),Ur(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Jg(i,c)));break;case 21:break;default:jr(a,i),Ur(i)}}function Ur(i){var a=i.flags;if(a&2){try{if(i.tag!==27){e:{for(var l=i.return;l!==null;){if(Lb(l)){var c=l;break e}l=l.return}throw Error(r(160))}switch(c.tag){case 27:var m=c.stateNode,g=Yg(i);af(i,g,m);break;case 5:var T=c.stateNode;c.flags&32&&(Cr(T,""),c.flags&=-33);var S=Yg(i);af(i,S,T);break;case 3:case 4:var N=c.stateNode.containerInfo,z=Yg(i);Xg(i,z,N);break;default:throw Error(r(161))}}}catch(ie){Ct(i,i.return,ie)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Gb(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;Gb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function us(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)zb(i,a.alternate,a),a=a.sibling}function Dl(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Js(4,a,a.return),Dl(a);break;case 1:dr(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Pb(a,a.return,l),Dl(a);break;case 26:case 27:case 5:dr(a,a.return),Dl(a);break;case 22:dr(a,a.return),a.memoizedState===null&&Dl(a);break;default:Dl(a)}i=i.sibling}}function ea(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,m=i,g=a,T=g.flags;switch(g.tag){case 0:case 11:case 15:ea(m,g,l),Rc(4,g);break;case 1:if(ea(m,g,l),c=g,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(z){Ct(c,c.return,z)}if(c=g,m=c.updateQueue,m!==null){var S=c.stateNode;try{var N=m.shared.hiddenCallbacks;if(N!==null)for(m.shared.hiddenCallbacks=null,m=0;m<N.length;m++)Ob(N[m],S)}catch(z){Ct(c,c.return,z)}}l&&T&64&&kb(g),To(g,g.return);break;case 26:case 27:case 5:ea(m,g,l),l&&c===null&&T&4&&Mb(g),To(g,g.return);break;case 12:ea(m,g,l);break;case 13:ea(m,g,l),l&&T&4&&qb(m,g);break;case 22:g.memoizedState===null&&ea(m,g,l),To(g,g.return);break;default:ea(m,g,l)}a=a.sibling}}function ey(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&gc(l))}function ty(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&gc(i))}function ta(i,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)$b(i,a,l,c),a=a.sibling}function $b(i,a,l,c){var m=a.flags;switch(a.tag){case 0:case 11:case 15:ta(i,a,l,c),m&2048&&Rc(9,a);break;case 3:ta(i,a,l,c),m&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&gc(i)));break;case 12:if(m&2048){ta(i,a,l,c),i=a.stateNode;try{var g=a.memoizedProps,T=g.id,S=g.onPostCommit;typeof S=="function"&&S(T,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(N){Ct(a,a.return,N)}}else ta(i,a,l,c);break;case 23:break;case 22:g=a.stateNode,a.memoizedState!==null?g._visibility&4?ta(i,a,l,c):Ic(i,a):g._visibility&4?ta(i,a,l,c):(g._visibility|=4,kl(i,a,l,c,(a.subtreeFlags&10256)!==0)),m&2048&&ey(a.alternate,a);break;case 24:ta(i,a,l,c),m&2048&&ty(a.alternate,a);break;default:ta(i,a,l,c)}}function kl(i,a,l,c,m){for(m=m&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var g=i,T=a,S=l,N=c,z=T.flags;switch(T.tag){case 0:case 11:case 15:kl(g,T,S,N,m),Rc(8,T);break;case 23:break;case 22:var ie=T.stateNode;T.memoizedState!==null?ie._visibility&4?kl(g,T,S,N,m):Ic(g,T):(ie._visibility|=4,kl(g,T,S,N,m)),m&&z&2048&&ey(T.alternate,T);break;case 24:kl(g,T,S,N,m),m&&z&2048&&ty(T.alternate,T);break;default:kl(g,T,S,N,m)}a=a.sibling}}function Ic(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,c=a,m=c.flags;switch(c.tag){case 22:Ic(l,c),m&2048&&ey(c.alternate,c);break;case 24:Ic(l,c),m&2048&&ty(c.alternate,c);break;default:Ic(l,c)}a=a.sibling}}var xc=8192;function Pl(i){if(i.subtreeFlags&xc)for(i=i.child;i!==null;)Kb(i),i=i.sibling}function Kb(i){switch(i.tag){case 26:Pl(i),i.flags&xc&&i.memoizedState!==null&&xD(ni,i.memoizedState,i.memoizedProps);break;case 5:Pl(i);break;case 3:case 4:var a=ni;ni=Tf(i.stateNode.containerInfo),Pl(i),ni=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=xc,xc=16777216,Pl(i),xc=a):Pl(i));break;default:Pl(i)}}function Wb(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Cc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];Tn=c,Yb(c,i)}Wb(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Qb(i),i=i.sibling}function Qb(i){switch(i.tag){case 0:case 11:case 15:Cc(i),i.flags&2048&&Js(9,i,i.return);break;case 3:Cc(i);break;case 12:Cc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&4&&(i.return===null||i.return.tag!==13)?(a._visibility&=-5,of(i)):Cc(i);break;default:Cc(i)}}function of(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];Tn=c,Yb(c,i)}Wb(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Js(8,a,a.return),of(a);break;case 22:l=a.stateNode,l._visibility&4&&(l._visibility&=-5,of(a));break;default:of(a)}i=i.sibling}}function Yb(i,a){for(;Tn!==null;){var l=Tn;switch(l.tag){case 0:case 11:case 15:Js(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:gc(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Tn=c;else e:for(l=i;Tn!==null;){c=Tn;var m=c.sibling,g=c.return;if(Fb(c),c===l){Tn=null;break e}if(m!==null){m.return=g,Tn=m;break e}Tn=g}}}function FO(i,a,l,c){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(i,a,l,c){return new FO(i,a,l,c)}function ny(i){return i=i.prototype,!(!i||!i.isReactComponent)}function na(i,a){var l=i.alternate;return l===null?(l=zr(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&31457280,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function Xb(i,a){i.flags&=31457282;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function lf(i,a,l,c,m,g){var T=0;if(c=i,typeof i=="function")ny(i)&&(T=1);else if(typeof i=="string")T=RD(i,l,$t.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case d:return bo(l.children,m,g,a);case p:T=8,m|=24;break;case y:return i=zr(12,l,a,m|2),i.elementType=y,i.lanes=g,i;case F:return i=zr(13,l,a,m),i.elementType=F,i.lanes=g,i;case M:return i=zr(19,l,a,m),i.elementType=M,i.lanes=g,i;case ee:return Zb(l,m,g,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case v:case A:T=10;break e;case b:T=9;break e;case C:T=11;break e;case Y:T=14;break e;case Z:T=16,c=null;break e}T=29,l=Error(r(130,i===null?"null":typeof i,"")),c=null}return a=zr(T,l,a,m),a.elementType=i,a.type=c,a.lanes=g,a}function bo(i,a,l,c){return i=zr(7,i,c,a),i.lanes=l,i}function Zb(i,a,l,c){i=zr(22,i,c,a),i.elementType=ee,i.lanes=l;var m={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var g=m._current;if(g===null)throw Error(r(456));if((m._pendingVisibility&2)===0){var T=Hs(g,2);T!==null&&(m._pendingVisibility|=2,Qn(T,g,2))}},attach:function(){var g=m._current;if(g===null)throw Error(r(456));if((m._pendingVisibility&2)!==0){var T=Hs(g,2);T!==null&&(m._pendingVisibility&=-3,Qn(T,g,2))}}};return i.stateNode=m,i}function ry(i,a,l){return i=zr(6,i,null,a),i.lanes=l,i}function iy(i,a,l){return a=zr(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function cs(i){i.flags|=4}function Jb(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Lw(a)){if(a=Lr.current,a!==null&&((lt&4194176)===lt?Ci!==null:(lt&62914560)!==lt&&(lt&536870912)===0||a!==Ci))throw fc=ug,gT;i.flags|=8192}}function uf(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?P():536870912,i.lanes|=a,Vl|=a)}function Nc(i,a){if(!ft)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Ft(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,c=0;if(a)for(var m=i.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags&31457280,c|=m.flags&31457280,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=c,i.childLanes=l,a}function BO(i,a,l){var c=a.pendingProps;switch(og(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(a),null;case 1:return Ft(a),null;case 3:return l=a.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),as(mn),Qr(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(uc(a)?cs(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ti!==null&&(dy(ti),ti=null))),Ft(a),null;case 26:return l=a.memoizedState,i===null?(cs(a),l!==null?(Ft(a),Jb(a,l)):(Ft(a),a.flags&=-16777217)):l?l!==i.memoizedState?(cs(a),Ft(a),Jb(a,l)):(Ft(a),a.flags&=-16777217):(i.memoizedProps!==c&&cs(a),Ft(a),a.flags&=-16777217),null;case 27:Ds(a),l=tr.current;var m=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==c&&cs(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Ft(a),null}i=$t.current,uc(a)?mT(a):(i=Cw(m,c,l),a.stateNode=i,cs(a))}return Ft(a),null;case 5:if(Ds(a),l=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==c&&cs(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Ft(a),null}if(i=$t.current,uc(a))mT(a);else{switch(m=Ef(tr.current),i){case 1:i=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=m.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?m.createElement("select",{is:c.is}):m.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?m.createElement(l,{is:c.is}):m.createElement(l)}}i[xe]=a,i[Oe]=c;e:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)i.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break e;for(;m.sibling===null;){if(m.return===null||m.return===a)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=i;e:switch(kn(i,l,c),l){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&cs(a)}}return Ft(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==c&&cs(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(r(166));if(i=tr.current,uc(a)){if(i=a.stateNode,l=a.memoizedProps,c=null,m=Wn,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}i[xe]=a,i=!!(i.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||ww(i.nodeValue,l)),i||ho(a)}else i=Ef(i).createTextNode(c),i[xe]=a,a.stateNode=i}return Ft(a),null;case 13:if(c=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=uc(a),c!==null&&c.dehydrated!==null){if(i===null){if(!m)throw Error(r(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[xe]=a}else cc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ft(a),m=!1}else ti!==null&&(dy(ti),ti=null),m=!0;if(!m)return a.flags&256?(ns(a),a):(ns(a),null)}if(ns(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=c!==null,i=i!==null&&i.memoizedState!==null,l){c=a.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==m&&(c.flags|=2048)}return l!==i&&l&&(a.child.flags|=8192),uf(a,a.updateQueue),Ft(a),null;case 4:return Qr(),i===null&&wy(a.stateNode.containerInfo),Ft(a),null;case 10:return as(a.type),Ft(a),null;case 19:if(Ut(fn),m=a.memoizedState,m===null)return Ft(a),null;if(c=(a.flags&128)!==0,g=m.rendering,g===null)if(c)Nc(m,!1);else{if(Qt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(g=Gd(i),g!==null){for(a.flags|=128,Nc(m,!1),i=g.updateQueue,a.updateQueue=i,uf(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)Xb(l,i),l=l.sibling;return Be(fn,fn.current&1|2),a.child}i=i.sibling}m.tail!==null&&xn()>cf&&(a.flags|=128,c=!0,Nc(m,!1),a.lanes=4194304)}else{if(!c)if(i=Gd(g),i!==null){if(a.flags|=128,c=!0,i=i.updateQueue,a.updateQueue=i,uf(a,i),Nc(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!ft)return Ft(a),null}else 2*xn()-m.renderingStartTime>cf&&l!==536870912&&(a.flags|=128,c=!0,Nc(m,!1),a.lanes=4194304);m.isBackwards?(g.sibling=a.child,a.child=g):(i=m.last,i!==null?i.sibling=g:a.child=g,m.last=g)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=xn(),a.sibling=null,i=fn.current,Be(fn,c?i&1|2:i&1),a):(Ft(a),null);case 22:case 23:return ns(a),hg(),c=a.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(Ft(a),a.subtreeFlags&6&&(a.flags|=8192)):Ft(a),l=a.updateQueue,l!==null&&uf(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),i!==null&&Ut(mo),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),as(mn),Ft(a),null;case 25:return null}throw Error(r(156,a.tag))}function qO(i,a){switch(og(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return as(mn),Qr(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Ds(a),null;case 13:if(ns(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));cc()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Ut(fn),null;case 4:return Qr(),null;case 10:return as(a.type),null;case 22:case 23:return ns(a),hg(),i!==null&&Ut(mo),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return as(mn),null;case 25:return null;default:return null}}function ew(i,a){switch(og(a),a.tag){case 3:as(mn),Qr();break;case 26:case 27:case 5:Ds(a);break;case 4:Qr();break;case 13:ns(a);break;case 19:Ut(fn);break;case 10:as(a.type);break;case 22:case 23:ns(a),hg(),i!==null&&Ut(mo);break;case 24:as(mn)}}var HO={getCacheForType:function(i){var a=Vn(mn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l}},GO=typeof WeakMap=="function"?WeakMap:Map,Bt=0,Ot=null,Xe=null,lt=0,Dt=0,mr=null,hs=!1,Ml=!1,sy=!1,ds=0,Qt=0,ra=0,wo=0,ay=0,Fr=0,Vl=0,Oc=null,Oi=null,oy=!1,ly=0,cf=1/0,hf=null,ia=null,df=!1,So=null,Dc=0,uy=0,cy=null,kc=0,hy=null;function pr(){if((Bt&2)!==0&&lt!==0)return lt&-lt;if(I.T!==null){var i=Il;return i!==0?i:vy()}return be()}function tw(){Fr===0&&(Fr=(lt&536870912)===0||ft?Qa():536870912);var i=Lr.current;return i!==null&&(i.flags|=32),Fr}function Qn(i,a,l){(i===Ot&&Dt===2||i.cancelPendingCommit!==null)&&(Ll(i,0),fs(i,lt,Fr,!1)),W(i,l),((Bt&2)===0||i!==Ot)&&(i===Ot&&((Bt&2)===0&&(wo|=l),Qt===4&&fs(i,lt,Fr,!1)),Di(i))}function nw(i,a,l){if((Bt&6)!==0)throw Error(r(327));var c=!l&&(a&60)===0&&(a&i.expiredLanes)===0||ur(i,a),m=c?WO(i,a):py(i,a,!0),g=c;do{if(m===0){Ml&&!c&&fs(i,a,0,!1);break}else if(m===6)fs(i,a,0,!hs);else{if(l=i.current.alternate,g&&!$O(l)){m=py(i,a,!1),g=!1;continue}if(m===2){if(g=a,i.errorRecoveryDisabledLanes&g)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var S=i;m=Oc;var N=S.current.memoizedState.isDehydrated;if(N&&(Ll(S,T).flags|=256),T=py(S,T,!1),T!==2){if(sy&&!N){S.errorRecoveryDisabledLanes|=g,wo|=g,m=4;break e}g=Oi,Oi=m,g!==null&&dy(g)}m=T}if(g=!1,m!==2)continue}}if(m===1){Ll(i,0),fs(i,a,0,!0);break}e:{switch(c=i,m){case 0:case 1:throw Error(r(345));case 4:if((a&4194176)===a){fs(c,a,Fr,!hs);break e}break;case 2:Oi=null;break;case 3:case 5:break;default:throw Error(r(329))}if(c.finishedWork=l,c.finishedLanes=a,(a&62914560)===a&&(g=ly+300-xn(),10<g)){if(fs(c,a,Fr,!hs),Cn(c,0)!==0)break e;c.timeoutHandle=Rw(rw.bind(null,c,l,Oi,hf,oy,a,Fr,wo,Vl,hs,2,-0,0),g);break e}rw(c,l,Oi,hf,oy,a,Fr,wo,Vl,hs,0,-0,0)}}break}while(!0);Di(i)}function dy(i){Oi===null?Oi=i:Oi.push.apply(Oi,i)}function rw(i,a,l,c,m,g,T,S,N,z,ie,le,X){var ne=a.subtreeFlags;if((ne&8192||(ne&16785408)===16785408)&&(Uc={stylesheets:null,count:0,unsuspend:ID},Kb(a),a=CD(),a!==null)){i.cancelPendingCommit=a(cw.bind(null,i,l,c,m,T,S,N,1,le,X)),fs(i,g,T,!z);return}cw(i,l,c,m,T,S,N,ie,le,X)}function $O(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var m=l[c],g=m.getSnapshot;m=m.value;try{if(!hr(g(),m))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function fs(i,a,l,c){a&=~ay,a&=~wo,i.suspendedLanes|=a,i.pingedLanes&=~a,c&&(i.warmLanes|=a),c=i.expirationTimes;for(var m=a;0<m;){var g=31-nn(m),T=1<<g;c[g]=-1,m&=~T}l!==0&&ve(i,l,a)}function ff(){return(Bt&6)===0?(Pc(0),!1):!0}function fy(){if(Xe!==null){if(Dt===0)var i=Xe.return;else i=Xe,ss=vo=null,vg(i),Al=null,mc=0,i=Xe;for(;i!==null;)ew(i.alternate,i),i=i.return;Xe=null}}function Ll(i,a){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,hD(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),fy(),Ot=i,Xe=l=na(i.current,null),lt=a,Dt=0,mr=null,hs=!1,Ml=ur(i,a),sy=!1,Vl=Fr=ay=wo=ra=Qt=0,Oi=Oc=null,oy=!1,(a&8)!==0&&(a|=a&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=a;0<c;){var m=31-nn(c),g=1<<m;a|=i[m],c&=~g}return ds=a,Vd(),l}function iw(i,a){Ke=null,I.H=Ni,a===dc?(a=vT(),Dt=3):a===gT?(a=vT(),Dt=4):Dt=a===yb?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,mr=a,Xe===null&&(Qt=1,nf(i,Pr(a,i.current)))}function sw(){var i=I.H;return I.H=Ni,i===null?Ni:i}function aw(){var i=I.A;return I.A=HO,i}function my(){Qt=4,hs||(lt&4194176)!==lt&&Lr.current!==null||(Ml=!0),(ra&134217727)===0&&(wo&134217727)===0||Ot===null||fs(Ot,lt,Fr,!1)}function py(i,a,l){var c=Bt;Bt|=2;var m=sw(),g=aw();(Ot!==i||lt!==a)&&(hf=null,Ll(i,a)),a=!1;var T=Qt;e:do try{if(Dt!==0&&Xe!==null){var S=Xe,N=mr;switch(Dt){case 8:fy(),T=6;break e;case 3:case 2:case 6:Lr.current===null&&(a=!0);var z=Dt;if(Dt=0,mr=null,jl(i,S,N,z),l&&Ml){T=0;break e}break;default:z=Dt,Dt=0,mr=null,jl(i,S,N,z)}}KO(),T=Qt;break}catch(ie){iw(i,ie)}while(!0);return a&&i.shellSuspendCounter++,ss=vo=null,Bt=c,I.H=m,I.A=g,Xe===null&&(Ot=null,lt=0,Vd()),T}function KO(){for(;Xe!==null;)ow(Xe)}function WO(i,a){var l=Bt;Bt|=2;var c=sw(),m=aw();Ot!==i||lt!==a?(hf=null,cf=xn()+500,Ll(i,a)):Ml=ur(i,a);e:do try{if(Dt!==0&&Xe!==null){a=Xe;var g=mr;t:switch(Dt){case 1:Dt=0,mr=null,jl(i,a,g,1);break;case 2:if(yT(g)){Dt=0,mr=null,lw(a);break}a=function(){Dt===2&&Ot===i&&(Dt=7),Di(i)},g.then(a,a);break e;case 3:Dt=7;break e;case 4:Dt=5;break e;case 7:yT(g)?(Dt=0,mr=null,lw(a)):(Dt=0,mr=null,jl(i,a,g,7));break;case 5:var T=null;switch(Xe.tag){case 26:T=Xe.memoizedState;case 5:case 27:var S=Xe;if(!T||Lw(T)){Dt=0,mr=null;var N=S.sibling;if(N!==null)Xe=N;else{var z=S.return;z!==null?(Xe=z,mf(z)):Xe=null}break t}}Dt=0,mr=null,jl(i,a,g,5);break;case 6:Dt=0,mr=null,jl(i,a,g,6);break;case 8:fy(),Qt=6;break e;default:throw Error(r(462))}}QO();break}catch(ie){iw(i,ie)}while(!0);return ss=vo=null,I.H=c,I.A=m,Bt=l,Xe!==null?0:(Ot=null,lt=0,Vd(),Qt)}function QO(){for(;Xe!==null&&!Yr();)ow(Xe)}function ow(i){var a=Cb(i.alternate,i,ds);i.memoizedProps=i.pendingProps,a===null?mf(i):Xe=a}function lw(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=wb(l,a,a.pendingProps,a.type,void 0,lt);break;case 11:a=wb(l,a,a.pendingProps,a.type.render,a.ref,lt);break;case 5:vg(a);default:ew(l,a),a=Xe=Xb(a,ds),a=Cb(l,a,ds)}i.memoizedProps=i.pendingProps,a===null?mf(i):Xe=a}function jl(i,a,l,c){ss=vo=null,vg(a),Al=null,mc=0;var m=a.return;try{if(LO(i,m,a,l,lt)){Qt=1,nf(i,Pr(l,i.current)),Xe=null;return}}catch(g){if(m!==null)throw Xe=m,g;Qt=1,nf(i,Pr(l,i.current)),Xe=null;return}a.flags&32768?(ft||c===1?i=!0:Ml||(lt&536870912)!==0?i=!1:(hs=i=!0,(c===2||c===3||c===6)&&(c=Lr.current,c!==null&&c.tag===13&&(c.flags|=16384))),uw(a,i)):mf(a)}function mf(i){var a=i;do{if((a.flags&32768)!==0){uw(a,hs);return}i=a.return;var l=BO(a.alternate,a,ds);if(l!==null){Xe=l;return}if(a=a.sibling,a!==null){Xe=a;return}Xe=a=i}while(a!==null);Qt===0&&(Qt=5)}function uw(i,a){do{var l=qO(i.alternate,i);if(l!==null){l.flags&=32767,Xe=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){Xe=i;return}Xe=i=l}while(i!==null);Qt=6,Xe=null}function cw(i,a,l,c,m,g,T,S,N,z){var ie=I.T,le=_e.p;try{_e.p=2,I.T=null,YO(i,a,l,c,le,m,g,T,S,N,z)}finally{I.T=ie,_e.p=le}}function YO(i,a,l,c,m,g,T,S){do Ul();while(So!==null);if((Bt&6)!==0)throw Error(r(327));var N=i.finishedWork;if(c=i.finishedLanes,N===null)return null;if(i.finishedWork=null,i.finishedLanes=0,N===i.current)throw Error(r(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var z=N.lanes|N.childLanes;if(z|=ig,ce(i,c,z,g,T,S),i===Ot&&(Xe=Ot=null,lt=0),(N.subtreeFlags&10256)===0&&(N.flags&10256)===0||df||(df=!0,uy=z,cy=l,eD(Sr,function(){return Ul(),null})),l=(N.flags&15990)!==0,(N.subtreeFlags&15990)!==0||l?(l=I.T,I.T=null,g=_e.p,_e.p=2,T=Bt,Bt|=4,UO(i,N),Hb(N,i),EO(Iy,i.containerInfo),Rf=!!Ry,Iy=Ry=null,i.current=N,zb(i,N.alternate,N),Xr(),Bt=T,_e.p=g,I.T=l):i.current=N,df?(df=!1,So=i,Dc=c):hw(i,z),z=i.pendingLanes,z===0&&(ia=null),Wa(N.stateNode),Di(i),a!==null)for(m=i.onRecoverableError,N=0;N<a.length;N++)z=a[N],m(z.value,{componentStack:z.stack});return(Dc&3)!==0&&Ul(),z=i.pendingLanes,(c&4194218)!==0&&(z&42)!==0?i===hy?kc++:(kc=0,hy=i):kc=0,Pc(0),null}function hw(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,gc(a)))}function Ul(){if(So!==null){var i=So,a=uy;uy=0;var l=Ve(Dc),c=I.T,m=_e.p;try{if(_e.p=32>l?32:l,I.T=null,So===null)var g=!1;else{l=cy,cy=null;var T=So,S=Dc;if(So=null,Dc=0,(Bt&6)!==0)throw Error(r(331));var N=Bt;if(Bt|=4,Qb(T.current),$b(T,T.current,S,l),Bt=N,Pc(0,!1),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Zr,T)}catch{}g=!0}return g}finally{_e.p=m,I.T=c,hw(i,a)}}return!1}function dw(i,a,l){a=Pr(l,a),a=kg(i.stateNode,a,2),i=Zs(i,a,2),i!==null&&(W(i,2),Di(i))}function Ct(i,a,l){if(i.tag===3)dw(i,i,l);else for(;a!==null;){if(a.tag===3){dw(a,i,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ia===null||!ia.has(c))){i=Pr(l,i),l=pb(2),c=Zs(a,l,2),c!==null&&(gb(l,c,a,i),W(c,2),Di(c));break}}a=a.return}}function gy(i,a,l){var c=i.pingCache;if(c===null){c=i.pingCache=new GO;var m=new Set;c.set(a,m)}else m=c.get(a),m===void 0&&(m=new Set,c.set(a,m));m.has(l)||(sy=!0,m.add(l),i=XO.bind(null,i,a,l),a.then(i,i))}function XO(i,a,l){var c=i.pingCache;c!==null&&c.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Ot===i&&(lt&l)===l&&(Qt===4||Qt===3&&(lt&62914560)===lt&&300>xn()-ly?(Bt&2)===0&&Ll(i,0):ay|=l,Vl===lt&&(Vl=0)),Di(i)}function fw(i,a){a===0&&(a=P()),i=Hs(i,a),i!==null&&(W(i,a),Di(i))}function ZO(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),fw(i,l)}function JO(i,a){var l=0;switch(i.tag){case 13:var c=i.stateNode,m=i.memoizedState;m!==null&&(l=m.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(a),fw(i,l)}function eD(i,a){return Gi(i,a)}var pf=null,zl=null,yy=!1,gf=!1,_y=!1,Ao=0;function Di(i){i!==zl&&i.next===null&&(zl===null?pf=zl=i:zl=zl.next=i),gf=!0,yy||(yy=!0,nD(tD))}function Pc(i,a){if(!_y&&gf){_y=!0;do for(var l=!1,c=pf;c!==null;){if(i!==0){var m=c.pendingLanes;if(m===0)var g=0;else{var T=c.suspendedLanes,S=c.pingedLanes;g=(1<<31-nn(42|i)+1)-1,g&=m&~(T&~S),g=g&201326677?g&201326677|1:g?g|2:0}g!==0&&(l=!0,gw(c,g))}else g=lt,g=Cn(c,c===Ot?g:0),(g&3)===0||ur(c,g)||(l=!0,gw(c,g));c=c.next}while(l);_y=!1}}function tD(){gf=yy=!1;var i=0;Ao!==0&&(cD()&&(i=Ao),Ao=0);for(var a=xn(),l=null,c=pf;c!==null;){var m=c.next,g=mw(c,a);g===0?(c.next=null,l===null?pf=m:l.next=m,m===null&&(zl=l)):(l=c,(i!==0||(g&3)!==0)&&(gf=!0)),c=m}Pc(i)}function mw(i,a){for(var l=i.suspendedLanes,c=i.pingedLanes,m=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var T=31-nn(g),S=1<<T,N=m[T];N===-1?((S&l)===0||(S&c)!==0)&&(m[T]=Us(S,a)):N<=a&&(i.expiredLanes|=S),g&=~S}if(a=Ot,l=lt,l=Cn(i,i===a?l:0),c=i.callbackNode,l===0||i===a&&Dt===2||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Ps(c),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||ur(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(c!==null&&Ps(c),Ve(l)){case 2:case 8:l=St;break;case 32:l=Sr;break;case 268435456:l=Ka;break;default:l=Sr}return c=pw.bind(null,i),l=Gi(l,c),i.callbackPriority=a,i.callbackNode=l,a}return c!==null&&c!==null&&Ps(c),i.callbackPriority=2,i.callbackNode=null,2}function pw(i,a){var l=i.callbackNode;if(Ul()&&i.callbackNode!==l)return null;var c=lt;return c=Cn(i,i===Ot?c:0),c===0?null:(nw(i,c,a),mw(i,xn()),i.callbackNode!=null&&i.callbackNode===l?pw.bind(null,i):null)}function gw(i,a){if(Ul())return null;nw(i,a,!0)}function nD(i){dD(function(){(Bt&6)!==0?Gi(wt,i):i()})}function vy(){return Ao===0&&(Ao=Qa()),Ao}function yw(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ti(""+i)}function _w(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function rD(i,a,l,c,m){if(a==="submit"&&l&&l.stateNode===m){var g=yw((m[Oe]||null).action),T=c.submitter;T&&(a=(a=T[Oe]||null)?yw(a.formAction):T.getAttribute("formAction"),a!==null&&(g=a,T=null));var S=new hl("action","action",null,c,m);i.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ao!==0){var N=T?_w(m,T):new FormData(m);xg(l,{pending:!0,data:N,method:m.method,action:g},null,N)}}else typeof g=="function"&&(S.preventDefault(),N=T?_w(m,T):new FormData(m),xg(l,{pending:!0,data:N,method:m.method,action:g},g,N))},currentTarget:m}]})}}for(var Ey=0;Ey<cT.length;Ey++){var Ty=cT[Ey],iD=Ty.toLowerCase(),sD=Ty[0].toUpperCase()+Ty.slice(1);ei(iD,"on"+sD)}ei(sT,"onAnimationEnd"),ei(aT,"onAnimationIteration"),ei(oT,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(bO,"onTransitionRun"),ei(wO,"onTransitionStart"),ei(SO,"onTransitionCancel"),ei(lT,"onTransitionEnd"),gt("onMouseEnter",["mouseout","mouseover"]),gt("onMouseLeave",["mouseout","mouseover"]),gt("onPointerEnter",["pointerout","pointerover"]),gt("onPointerLeave",["pointerout","pointerover"]),$e("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$e("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$e("onBeforeInput",["compositionend","keypress","textInput","paste"]),$e("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$e("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$e("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mc));function vw(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var c=i[l],m=c.event;c=c.listeners;e:{var g=void 0;if(a)for(var T=c.length-1;0<=T;T--){var S=c[T],N=S.instance,z=S.currentTarget;if(S=S.listener,N!==g&&m.isPropagationStopped())break e;g=S,m.currentTarget=z;try{g(m)}catch(ie){tf(ie)}m.currentTarget=null,g=N}else for(T=0;T<c.length;T++){if(S=c[T],N=S.instance,z=S.currentTarget,S=S.listener,N!==g&&m.isPropagationStopped())break e;g=S,m.currentTarget=z;try{g(m)}catch(ie){tf(ie)}m.currentTarget=null,g=N}}}}function nt(i,a){var l=a[Pt];l===void 0&&(l=a[Pt]=new Set);var c=i+"__bubble";l.has(c)||(Ew(a,i,2,!1),l.add(c))}function by(i,a,l){var c=0;a&&(c|=4),Ew(l,i,c,a)}var yf="_reactListening"+Math.random().toString(36).slice(2);function wy(i){if(!i[yf]){i[yf]=!0,vi.forEach(function(l){l!=="selectionchange"&&(aD.has(l)||by(l,!1,i),by(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[yf]||(a[yf]=!0,by("selectionchange",!1,a))}}function Ew(i,a,l,c){switch(qw(a)){case 2:var m=DD;break;case 8:m=kD;break;default:m=Vy}l=m.bind(null,a,l,i),m=void 0,!Or||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),c?m!==void 0?i.addEventListener(a,l,{capture:!0,passive:m}):i.addEventListener(a,l,!0):m!==void 0?i.addEventListener(a,l,{passive:m}):i.addEventListener(a,l,!1)}function Sy(i,a,l,c,m){var g=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var S=c.stateNode.containerInfo;if(S===m||S.nodeType===8&&S.parentNode===m)break;if(T===4)for(T=c.return;T!==null;){var N=T.tag;if((N===3||N===4)&&(N=T.stateNode.containerInfo,N===m||N.nodeType===8&&N.parentNode===m))return;T=T.return}for(;S!==null;){if(T=Zt(S),T===null)return;if(N=T.tag,N===5||N===6||N===26||N===27){c=g=T;continue e}S=S.parentNode}}c=c.return}Td(function(){var z=g,ie=cl(l),le=[];e:{var X=uT.get(i);if(X!==void 0){var ne=hl,Ne=i;switch(i){case"keypress":if(wi(l)===0)break e;case"keydown":case"keyup":ne=yl;break;case"focusin":Ne="focus",ne=ml;break;case"focusout":Ne="blur",ne=ml;break;case"beforeblur":case"afterblur":ne=ml;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Dr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Yp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Cd;break;case sT:case aT:case oT:ne=pl;break;case lT:ne=Od;break;case"scroll":case"scrollend":ne=bd;break;case"wheel":ne=_l;break;case"copy":case"cut":case"paste":ne=gl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=sc;break;case"toggle":case"beforetoggle":ne=kd}var qe=(a&4)!==0,Yt=!qe&&(i==="scroll"||i==="scrollend"),G=qe?X!==null?X+"Capture":null:X;qe=[];for(var U=z,Q;U!==null;){var ae=U;if(Q=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Q===null||G===null||(ae=eo(U,G),ae!=null&&qe.push(Vc(U,ae,Q))),Yt)break;U=U.return}0<qe.length&&(X=new ne(X,Ne,null,l,ie),le.push({event:X,listeners:qe}))}}if((a&7)===0){e:{if(X=i==="mouseover"||i==="pointerover",ne=i==="mouseout"||i==="pointerout",X&&l!==Nr&&(Ne=l.relatedTarget||l.fromElement)&&(Zt(Ne)||Ne[st]))break e;if((ne||X)&&(X=ie.window===ie?ie:(X=ie.ownerDocument)?X.defaultView||X.parentWindow:window,ne?(Ne=l.relatedTarget||l.toElement,ne=z,Ne=Ne?Zt(Ne):null,Ne!==null&&(Yt=Ce(Ne),qe=Ne.tag,Ne!==Yt||qe!==5&&qe!==27&&qe!==6)&&(Ne=null)):(ne=null,Ne=z),ne!==Ne)){if(qe=Dr,ae="onMouseLeave",G="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(qe=sc,ae="onPointerLeave",G="onPointerEnter",U="pointer"),Yt=ne==null?X:Rr(ne),Q=Ne==null?X:Rr(Ne),X=new qe(ae,U+"leave",ne,l,ie),X.target=Yt,X.relatedTarget=Q,ae=null,Zt(ie)===z&&(qe=new qe(G,U+"enter",Ne,l,ie),qe.target=Q,qe.relatedTarget=Yt,ae=qe),Yt=ae,ne&&Ne)t:{for(qe=ne,G=Ne,U=0,Q=qe;Q;Q=Fl(Q))U++;for(Q=0,ae=G;ae;ae=Fl(ae))Q++;for(;0<U-Q;)qe=Fl(qe),U--;for(;0<Q-U;)G=Fl(G),Q--;for(;U--;){if(qe===G||G!==null&&qe===G.alternate)break t;qe=Fl(qe),G=Fl(G)}qe=null}else qe=null;ne!==null&&Tw(le,X,ne,qe,!1),Ne!==null&&Yt!==null&&Tw(le,Yt,Ne,qe,!0)}}e:{if(X=z?Rr(z):window,ne=X.nodeName&&X.nodeName.toLowerCase(),ne==="select"||ne==="input"&&X.type==="file")var Re=WE;else if(dn(X))if(QE)Re=_O;else{Re=gO;var Qe=pO}else ne=X.nodeName,!ne||ne.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?z&&Zu(z.elementType)&&(Re=WE):Re=yO;if(Re&&(Re=Re(i,z))){Ji(le,Re,l,ie);break e}Qe&&Qe(i,X,z),i==="focusout"&&z&&X.type==="number"&&z.memoizedProps.value!=null&&ul(X,"number",X.value)}switch(Qe=z?Rr(z):window,i){case"focusin":(dn(Qe)||Qe.contentEditable==="true")&&(vl=Qe,tg=z,lc=null);break;case"focusout":lc=tg=vl=null;break;case"mousedown":ng=!0;break;case"contextmenu":case"mouseup":case"dragend":ng=!1,rT(le,l,ie);break;case"selectionchange":if(TO)break;case"keydown":case"keyup":rT(le,l,ie)}var ke;if(Ri)e:{switch(i){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else at?J(i,l)&&(Le="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Le="onCompositionStart");Le&&(E&&l.locale!=="ko"&&(at||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&at&&(ke=ec()):(bi=ie,qs="value"in bi?bi.value:bi.textContent,at=!0)),Qe=_f(z,Le),0<Qe.length&&(Le=new rc(Le,i,null,l,ie),le.push({event:Le,listeners:Qe}),ke?Le.data=ke:(ke=pe(l),ke!==null&&(Le.data=ke)))),(ke=_?hn(i,l):ot(i,l))&&(Le=_f(z,"onBeforeInput"),0<Le.length&&(Qe=new rc("onBeforeInput","beforeinput",null,l,ie),le.push({event:Qe,listeners:Le}),Qe.data=ke)),rD(le,i,z,l,ie)}vw(le,a)})}function Vc(i,a,l){return{instance:i,listener:a,currentTarget:l}}function _f(i,a){for(var l=a+"Capture",c=[];i!==null;){var m=i,g=m.stateNode;m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=eo(i,l),m!=null&&c.unshift(Vc(i,m,g)),m=eo(i,a),m!=null&&c.push(Vc(i,m,g))),i=i.return}return c}function Fl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Tw(i,a,l,c,m){for(var g=a._reactName,T=[];l!==null&&l!==c;){var S=l,N=S.alternate,z=S.stateNode;if(S=S.tag,N!==null&&N===c)break;S!==5&&S!==26&&S!==27||z===null||(N=z,m?(z=eo(l,g),z!=null&&T.unshift(Vc(l,z,N))):m||(z=eo(l,g),z!=null&&T.push(Vc(l,z,N)))),l=l.return}T.length!==0&&i.push({event:a,listeners:T})}var oD=/\r\n?/g,lD=/\u0000|\uFFFD/g;function bw(i){return(typeof i=="string"?i:""+i).replace(oD,`
`).replace(lD,"")}function ww(i,a){return a=bw(a),bw(i)===a}function vf(){}function Rt(i,a,l,c,m,g){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Cr(i,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Cr(i,""+c);break;case"className":zs(i,"class",c);break;case"tabIndex":zs(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":zs(i,l,c);break;case"style":Ed(i,c,g);break;case"data":if(a!=="object"){zs(i,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=Ti(""+c),i.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(a!=="input"&&Rt(i,a,"name",m.name,m,null),Rt(i,a,"formEncType",m.formEncType,m,null),Rt(i,a,"formMethod",m.formMethod,m,null),Rt(i,a,"formTarget",m.formTarget,m,null)):(Rt(i,a,"encType",m.encType,m,null),Rt(i,a,"method",m.method,m,null),Rt(i,a,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=Ti(""+c),i.setAttribute(l,c);break;case"onClick":c!=null&&(i.onclick=vf);break;case"onScroll":c!=null&&nt("scroll",i);break;case"onScrollEnd":c!=null&&nt("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}l=Ti(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""+c):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":c===!0?i.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,c):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(l,c):i.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(l):i.setAttribute(l,c);break;case"popover":nt("beforetoggle",i),nt("toggle",i),Ei(i,"popover",c);break;case"xlinkActuate":xr(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":xr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":xr(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":xr(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":xr(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":xr(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":xr(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":xr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":xr(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ei(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Wp.get(l)||l,Ei(i,l,c))}}function Ay(i,a,l,c,m,g){switch(l){case"style":Ed(i,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof c=="string"?Cr(i,c):(typeof c=="number"||typeof c=="bigint")&&Cr(i,""+c);break;case"onScroll":c!=null&&nt("scroll",i);break;case"onScrollEnd":c!=null&&nt("scrollend",i);break;case"onClick":c!=null&&(i.onclick=vf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Jr.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),a=l.slice(2,m?l.length-7:void 0),g=i[Oe]||null,g=g!=null?g[l]:null,typeof g=="function"&&i.removeEventListener(a,g,m),typeof c=="function")){typeof g!="function"&&g!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,c,m);break e}l in i?i[l]=c:c===!0?i.setAttribute(l,""):Ei(i,l,c)}}}function kn(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",i),nt("load",i);var c=!1,m=!1,g;for(g in l)if(l.hasOwnProperty(g)){var T=l[g];if(T!=null)switch(g){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Rt(i,a,g,T,l,null)}}m&&Rt(i,a,"srcSet",l.srcSet,l,null),c&&Rt(i,a,"src",l.src,l,null);return;case"input":nt("invalid",i);var S=g=T=m=null,N=null,z=null;for(c in l)if(l.hasOwnProperty(c)){var ie=l[c];if(ie!=null)switch(c){case"name":m=ie;break;case"type":T=ie;break;case"checked":N=ie;break;case"defaultChecked":z=ie;break;case"value":g=ie;break;case"defaultValue":S=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,a));break;default:Rt(i,a,c,ie,l,null)}}Za(i,g,S,N,z,T,m,!1),Xa(i);return;case"select":nt("invalid",i),c=T=g=null;for(m in l)if(l.hasOwnProperty(m)&&(S=l[m],S!=null))switch(m){case"value":g=S;break;case"defaultValue":T=S;break;case"multiple":c=S;default:Rt(i,a,m,S,l,null)}a=g,l=T,i.multiple=!!c,a!=null?dt(i,!!c,a,!1):l!=null&&dt(i,!!c,l,!0);return;case"textarea":nt("invalid",i),g=m=c=null;for(T in l)if(l.hasOwnProperty(T)&&(S=l[T],S!=null))switch(T){case"value":c=S;break;case"defaultValue":m=S;break;case"children":g=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:Rt(i,a,T,S,l,null)}Bs(i,c,m,g),Xa(i);return;case"option":for(N in l)if(l.hasOwnProperty(N)&&(c=l[N],c!=null))switch(N){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Rt(i,a,N,c,l,null)}return;case"dialog":nt("cancel",i),nt("close",i);break;case"iframe":case"object":nt("load",i);break;case"video":case"audio":for(c=0;c<Mc.length;c++)nt(Mc[c],i);break;case"image":nt("error",i),nt("load",i);break;case"details":nt("toggle",i);break;case"embed":case"source":case"link":nt("error",i),nt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in l)if(l.hasOwnProperty(z)&&(c=l[z],c!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Rt(i,a,z,c,l,null)}return;default:if(Zu(a)){for(ie in l)l.hasOwnProperty(ie)&&(c=l[ie],c!==void 0&&Ay(i,a,ie,c,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(c=l[S],c!=null&&Rt(i,a,S,c,l,null))}function uD(i,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,T=null,S=null,N=null,z=null,ie=null;for(ne in l){var le=l[ne];if(l.hasOwnProperty(ne)&&le!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":N=le;default:c.hasOwnProperty(ne)||Rt(i,a,ne,null,c,le)}}for(var X in c){var ne=c[X];if(le=l[X],c.hasOwnProperty(X)&&(ne!=null||le!=null))switch(X){case"type":g=ne;break;case"name":m=ne;break;case"checked":z=ne;break;case"defaultChecked":ie=ne;break;case"value":T=ne;break;case"defaultValue":S=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,a));break;default:ne!==le&&Rt(i,a,X,ne,c,le)}}Fs(i,T,S,N,z,ie,g,m);return;case"select":ne=T=S=X=null;for(g in l)if(N=l[g],l.hasOwnProperty(g)&&N!=null)switch(g){case"value":break;case"multiple":ne=N;default:c.hasOwnProperty(g)||Rt(i,a,g,null,c,N)}for(m in c)if(g=c[m],N=l[m],c.hasOwnProperty(m)&&(g!=null||N!=null))switch(m){case"value":X=g;break;case"defaultValue":S=g;break;case"multiple":T=g;default:g!==N&&Rt(i,a,m,g,c,N)}a=S,l=T,c=ne,X!=null?dt(i,!!l,X,!1):!!c!=!!l&&(a!=null?dt(i,!!l,a,!0):dt(i,!!l,l?[]:"",!1));return;case"textarea":ne=X=null;for(S in l)if(m=l[S],l.hasOwnProperty(S)&&m!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Rt(i,a,S,null,c,m)}for(T in c)if(m=c[T],g=l[T],c.hasOwnProperty(T)&&(m!=null||g!=null))switch(T){case"value":X=m;break;case"defaultValue":ne=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==g&&Rt(i,a,T,m,c,g)}Ja(i,X,ne);return;case"option":for(var Ne in l)if(X=l[Ne],l.hasOwnProperty(Ne)&&X!=null&&!c.hasOwnProperty(Ne))switch(Ne){case"selected":i.selected=!1;break;default:Rt(i,a,Ne,null,c,X)}for(N in c)if(X=c[N],ne=l[N],c.hasOwnProperty(N)&&X!==ne&&(X!=null||ne!=null))switch(N){case"selected":i.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:Rt(i,a,N,X,c,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in l)X=l[qe],l.hasOwnProperty(qe)&&X!=null&&!c.hasOwnProperty(qe)&&Rt(i,a,qe,null,c,X);for(z in c)if(X=c[z],ne=l[z],c.hasOwnProperty(z)&&X!==ne&&(X!=null||ne!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,a));break;default:Rt(i,a,z,X,c,ne)}return;default:if(Zu(a)){for(var Yt in l)X=l[Yt],l.hasOwnProperty(Yt)&&X!==void 0&&!c.hasOwnProperty(Yt)&&Ay(i,a,Yt,void 0,c,X);for(ie in c)X=c[ie],ne=l[ie],!c.hasOwnProperty(ie)||X===ne||X===void 0&&ne===void 0||Ay(i,a,ie,X,c,ne);return}}for(var G in l)X=l[G],l.hasOwnProperty(G)&&X!=null&&!c.hasOwnProperty(G)&&Rt(i,a,G,null,c,X);for(le in c)X=c[le],ne=l[le],!c.hasOwnProperty(le)||X===ne||X==null&&ne==null||Rt(i,a,le,X,c,ne)}var Ry=null,Iy=null;function Ef(i){return i.nodeType===9?i:i.ownerDocument}function Sw(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Aw(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function xy(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Cy=null;function cD(){var i=window.event;return i&&i.type==="popstate"?i===Cy?!1:(Cy=i,!0):(Cy=null,!1)}var Rw=typeof setTimeout=="function"?setTimeout:void 0,hD=typeof clearTimeout=="function"?clearTimeout:void 0,Iw=typeof Promise=="function"?Promise:void 0,dD=typeof queueMicrotask=="function"?queueMicrotask:typeof Iw<"u"?function(i){return Iw.resolve(null).then(i).catch(fD)}:Rw;function fD(i){setTimeout(function(){throw i})}function Ny(i,a){var l=a,c=0;do{var m=l.nextSibling;if(i.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(c===0){i.removeChild(m),Hc(a);return}c--}else l!=="$"&&l!=="$?"&&l!=="$!"||c++;l=m}while(l);Hc(a)}function Oy(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Oy(l),cr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function mD(i,a,l,c){for(;i.nodeType===1;){var m=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Gn])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==m.rel||i.getAttribute("href")!==(m.href==null?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=ri(i.nextSibling),i===null)break}return null}function pD(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=ri(i.nextSibling),i===null))return null;return i}function ri(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}function xw(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return i;a--}else l==="/$"&&a++}i=i.previousSibling}return null}function Cw(i,a,l){switch(a=Ef(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}var Br=new Map,Nw=new Set;function Tf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var ms=_e.d;_e.d={f:gD,r:yD,D:_D,C:vD,L:ED,m:TD,X:wD,S:bD,M:SD};function gD(){var i=ms.f(),a=ff();return i||a}function yD(i){var a=rn(i);a!==null&&a.tag===5&&a.type==="form"?rb(a):ms.r(i)}var Bl=typeof document>"u"?null:document;function Ow(i,a,l){var c=Bl;if(c&&typeof a=="string"&&a){var m=Kt(a);m='link[rel="'+i+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),Nw.has(m)||(Nw.add(m),i={rel:i,crossOrigin:l,href:a},c.querySelector(m)===null&&(a=c.createElement("link"),kn(a,"link",i),pt(a),c.head.appendChild(a)))}}function _D(i){ms.D(i),Ow("dns-prefetch",i,null)}function vD(i,a){ms.C(i,a),Ow("preconnect",i,a)}function ED(i,a,l){ms.L(i,a,l);var c=Bl;if(c&&i&&a){var m='link[rel="preload"][as="'+Kt(a)+'"]';a==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Kt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Kt(l.imageSizes)+'"]')):m+='[href="'+Kt(i)+'"]';var g=m;switch(a){case"style":g=ql(i);break;case"script":g=Hl(i)}Br.has(g)||(i=O({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Br.set(g,i),c.querySelector(m)!==null||a==="style"&&c.querySelector(Lc(g))||a==="script"&&c.querySelector(jc(g))||(a=c.createElement("link"),kn(a,"link",i),pt(a),c.head.appendChild(a)))}}function TD(i,a){ms.m(i,a);var l=Bl;if(l&&i){var c=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Kt(c)+'"][href="'+Kt(i)+'"]',g=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Hl(i)}if(!Br.has(g)&&(i=O({rel:"modulepreload",href:i},a),Br.set(g,i),l.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(jc(g)))return}c=l.createElement("link"),kn(c,"link",i),pt(c),l.head.appendChild(c)}}}function bD(i,a,l){ms.S(i,a,l);var c=Bl;if(c&&i){var m=rr(c).hoistableStyles,g=ql(i);a=a||"default";var T=m.get(g);if(!T){var S={loading:0,preload:null};if(T=c.querySelector(Lc(g)))S.loading=5;else{i=O({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Br.get(g))&&Dy(i,l);var N=T=c.createElement("link");pt(N),kn(N,"link",i),N._p=new Promise(function(z,ie){N.onload=z,N.onerror=ie}),N.addEventListener("load",function(){S.loading|=1}),N.addEventListener("error",function(){S.loading|=2}),S.loading|=4,bf(T,a,c)}T={type:"stylesheet",instance:T,count:1,state:S},m.set(g,T)}}}function wD(i,a){ms.X(i,a);var l=Bl;if(l&&i){var c=rr(l).hoistableScripts,m=Hl(i),g=c.get(m);g||(g=l.querySelector(jc(m)),g||(i=O({src:i,async:!0},a),(a=Br.get(m))&&ky(i,a),g=l.createElement("script"),pt(g),kn(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function SD(i,a){ms.M(i,a);var l=Bl;if(l&&i){var c=rr(l).hoistableScripts,m=Hl(i),g=c.get(m);g||(g=l.querySelector(jc(m)),g||(i=O({src:i,async:!0,type:"module"},a),(a=Br.get(m))&&ky(i,a),g=l.createElement("script"),pt(g),kn(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function Dw(i,a,l,c){var m=(m=tr.current)?Tf(m):null;if(!m)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=ql(l.href),l=rr(m).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=ql(l.href);var g=rr(m).hoistableStyles,T=g.get(i);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,T),(g=m.querySelector(Lc(i)))&&!g._p&&(T.instance=g,T.state.loading=5),Br.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Br.set(i,l),g||AD(m,i,l,T.state))),a&&c===null)throw Error(r(528,""));return T}if(a&&c!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Hl(l),l=rr(m).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function ql(i){return'href="'+Kt(i)+'"'}function Lc(i){return'link[rel="stylesheet"]['+i+"]"}function kw(i){return O({},i,{"data-precedence":i.precedence,precedence:null})}function AD(i,a,l,c){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=i.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),kn(a,"link",l),pt(a),i.head.appendChild(a))}function Hl(i){return'[src="'+Kt(i)+'"]'}function jc(i){return"script[async]"+i}function Pw(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=i.querySelector('style[data-href~="'+Kt(l.href)+'"]');if(c)return a.instance=c,pt(c),c;var m=O({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),pt(c),kn(c,"style",m),bf(c,l.precedence,i),a.instance=c;case"stylesheet":m=ql(l.href);var g=i.querySelector(Lc(m));if(g)return a.state.loading|=4,a.instance=g,pt(g),g;c=kw(l),(m=Br.get(m))&&Dy(c,m),g=(i.ownerDocument||i).createElement("link"),pt(g);var T=g;return T._p=new Promise(function(S,N){T.onload=S,T.onerror=N}),kn(g,"link",c),a.state.loading|=4,bf(g,l.precedence,i),a.instance=g;case"script":return g=Hl(l.src),(m=i.querySelector(jc(g)))?(a.instance=m,pt(m),m):(c=l,(m=Br.get(g))&&(c=O({},l),ky(c,m)),i=i.ownerDocument||i,m=i.createElement("script"),pt(m),kn(m,"link",c),i.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,bf(c,l.precedence,i));return a.instance}function bf(i,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,g=m,T=0;T<c.length;T++){var S=c[T];if(S.dataset.precedence===a)g=S;else if(g!==m)break}g?g.parentNode.insertBefore(i,g.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function Dy(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function ky(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var wf=null;function Mw(i,a,l){if(wf===null){var c=new Map,m=wf=new Map;m.set(l,c)}else m=wf,c=m.get(l),c||(c=new Map,m.set(l,c));if(c.has(i))return c;for(c.set(i,null),l=l.getElementsByTagName(i),m=0;m<l.length;m++){var g=l[m];if(!(g[Gn]||g[xe]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(a)||"";T=i+T;var S=c.get(T);S?S.push(g):c.set(T,[g])}}return c}function Vw(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function RD(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Lw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Uc=null;function ID(){}function xD(i,a,l){if(Uc===null)throw Error(r(475));var c=Uc;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=ql(l.href),g=i.querySelector(Lc(m));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=Sf.bind(c),i.then(c,c)),a.state.loading|=4,a.instance=g,pt(g);return}g=i.ownerDocument||i,l=kw(l),(m=Br.get(m))&&Dy(l,m),g=g.createElement("link"),pt(g);var T=g;T._p=new Promise(function(S,N){T.onload=S,T.onerror=N}),kn(g,"link",l),a.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(c.count++,a=Sf.bind(c),i.addEventListener("load",a),i.addEventListener("error",a))}}function CD(){if(Uc===null)throw Error(r(475));var i=Uc;return i.stylesheets&&i.count===0&&Py(i,i.stylesheets),0<i.count?function(a){var l=setTimeout(function(){if(i.stylesheets&&Py(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(l)}}:null}function Sf(){if(this.count--,this.count===0){if(this.stylesheets)Py(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Af=null;function Py(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Af=new Map,a.forEach(ND,i),Af=null,Sf.call(i))}function ND(i,a){if(!(a.state.loading&4)){var l=Af.get(i);if(l)var c=l.get(null);else{l=new Map,Af.set(i,l);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var T=m[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),c=T)}c&&l.set(null,c)}m=a.instance,T=m.getAttribute("data-precedence"),g=l.get(T)||c,g===c&&l.set(null,m),l.set(T,m),this.count++,c=Sf.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),g?g.parentNode.insertBefore(m,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),a.state.loading|=4}}var zc={$$typeof:A,Provider:null,Consumer:null,_currentValue:Fe,_currentValue2:Fe,_threadCount:0};function OD(i,a,l,c,m,g,T,S){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=H(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H(0),this.hiddenUpdates=H(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function jw(i,a,l,c,m,g,T,S,N,z,ie,le){return i=new OD(i,a,l,T,S,N,z,le),a=1,g===!0&&(a|=24),g=zr(3,null,null,a),i.current=g,g.stateNode=i,a=dg(),a.refCount++,i.pooledCache=a,a.refCount++,g.memoizedState={element:c,isDehydrated:l,cache:a},$g(g),i}function Uw(i){return i?(i=bl,i):bl}function zw(i,a,l,c,m,g){m=Uw(m),c.context===null?c.context=m:c.pendingContext=m,c=Xs(a),c.payload={element:l},g=g===void 0?null:g,g!==null&&(c.callback=g),l=Zs(i,c,a),l!==null&&(Qn(l,i,a),wc(l,i,a))}function Fw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function My(i,a){Fw(i,a),(i=i.alternate)&&Fw(i,a)}function Bw(i){if(i.tag===13){var a=Hs(i,67108864);a!==null&&Qn(a,i,67108864),My(i,67108864)}}var Rf=!0;function DD(i,a,l,c){var m=I.T;I.T=null;var g=_e.p;try{_e.p=2,Vy(i,a,l,c)}finally{_e.p=g,I.T=m}}function kD(i,a,l,c){var m=I.T;I.T=null;var g=_e.p;try{_e.p=8,Vy(i,a,l,c)}finally{_e.p=g,I.T=m}}function Vy(i,a,l,c){if(Rf){var m=Ly(c);if(m===null)Sy(i,a,c,If,l),Hw(i,c);else if(MD(m,i,a,l,c))c.stopPropagation();else if(Hw(i,c),a&4&&-1<PD.indexOf(i)){for(;m!==null;){var g=rn(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=nr(g.pendingLanes);if(T!==0){var S=g;for(S.pendingLanes|=2,S.entangledLanes|=2;T;){var N=1<<31-nn(T);S.entanglements[1]|=N,T&=~N}Di(g),(Bt&6)===0&&(cf=xn()+500,Pc(0))}}break;case 13:S=Hs(g,2),S!==null&&Qn(S,g,2),ff(),My(g,2)}if(g=Ly(c),g===null&&Sy(i,a,c,If,l),g===m)break;m=g}m!==null&&c.stopPropagation()}else Sy(i,a,c,null,l)}}function Ly(i){return i=cl(i),jy(i)}var If=null;function jy(i){if(If=null,i=Zt(i),i!==null){var a=Ce(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=Ye(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return If=i,null}function qw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ms()){case wt:return 2;case St:return 8;case Sr:case Vs:return 32;case Ka:return 268435456;default:return 32}default:return 32}}var Uy=!1,sa=null,aa=null,oa=null,Fc=new Map,Bc=new Map,la=[],PD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hw(i,a){switch(i){case"focusin":case"focusout":sa=null;break;case"dragenter":case"dragleave":aa=null;break;case"mouseover":case"mouseout":oa=null;break;case"pointerover":case"pointerout":Fc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bc.delete(a.pointerId)}}function qc(i,a,l,c,m,g){return i===null||i.nativeEvent!==g?(i={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:g,targetContainers:[m]},a!==null&&(a=rn(a),a!==null&&Bw(a)),i):(i.eventSystemFlags|=c,a=i.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),i)}function MD(i,a,l,c,m){switch(a){case"focusin":return sa=qc(sa,i,a,l,c,m),!0;case"dragenter":return aa=qc(aa,i,a,l,c,m),!0;case"mouseover":return oa=qc(oa,i,a,l,c,m),!0;case"pointerover":var g=m.pointerId;return Fc.set(g,qc(Fc.get(g)||null,i,a,l,c,m)),!0;case"gotpointercapture":return g=m.pointerId,Bc.set(g,qc(Bc.get(g)||null,i,a,l,c,m)),!0}return!1}function Gw(i){var a=Zt(i.target);if(a!==null){var l=Ce(a);if(l!==null){if(a=l.tag,a===13){if(a=Ye(l),a!==null){i.blockedOn=a,we(i.priority,function(){if(l.tag===13){var c=pr(),m=Hs(l,c);m!==null&&Qn(m,l,c),My(l,c)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function xf(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=Ly(i.nativeEvent);if(l===null){l=i.nativeEvent;var c=new l.constructor(l.type,l);Nr=c,l.target.dispatchEvent(c),Nr=null}else return a=rn(l),a!==null&&Bw(a),i.blockedOn=l,!1;a.shift()}return!0}function $w(i,a,l){xf(i)&&l.delete(a)}function VD(){Uy=!1,sa!==null&&xf(sa)&&(sa=null),aa!==null&&xf(aa)&&(aa=null),oa!==null&&xf(oa)&&(oa=null),Fc.forEach($w),Bc.forEach($w)}function Cf(i,a){i.blockedOn===a&&(i.blockedOn=null,Uy||(Uy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,VD)))}var Nf=null;function Kw(i){Nf!==i&&(Nf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Nf===i&&(Nf=null);for(var a=0;a<i.length;a+=3){var l=i[a],c=i[a+1],m=i[a+2];if(typeof c!="function"){if(jy(c||l)===null)continue;break}var g=rn(l);g!==null&&(i.splice(a,3),a-=3,xg(g,{pending:!0,data:m,method:l.method,action:c},c,m))}}))}function Hc(i){function a(N){return Cf(N,i)}sa!==null&&Cf(sa,i),aa!==null&&Cf(aa,i),oa!==null&&Cf(oa,i),Fc.forEach(a),Bc.forEach(a);for(var l=0;l<la.length;l++){var c=la[l];c.blockedOn===i&&(c.blockedOn=null)}for(;0<la.length&&(l=la[0],l.blockedOn===null);)Gw(l),l.blockedOn===null&&la.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var m=l[c],g=l[c+1],T=m[Oe]||null;if(typeof g=="function")T||Kw(l);else if(T){var S=null;if(g&&g.hasAttribute("formAction")){if(m=g,T=g[Oe]||null)S=T.formAction;else if(jy(m)!==null)continue}else S=T.action;typeof S=="function"?l[c+1]=S:(l.splice(c,3),c-=3),Kw(l)}}}function zy(i){this._internalRoot=i}Of.prototype.render=zy.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,c=pr();zw(l,c,i,a,null,null)},Of.prototype.unmount=zy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;i.tag===0&&Ul(),zw(i.current,2,null,i,null,null),ff(),a[st]=null}};function Of(i){this._internalRoot=i}Of.prototype.unstable_scheduleHydration=function(i){if(i){var a=be();i={blockedOn:null,target:i,priority:a};for(var l=0;l<la.length&&a!==0&&a<la[l].priority;l++);la.splice(l,0,i),l===0&&Gw(i)}};var Ww=e.version;if(Ww!=="19.0.0")throw Error(r(527,Ww,"19.0.0"));_e.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=ue(a),i=i!==null?Se(i):null,i=i===null?null:i.stateNode,i};var LD={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:I,findFiberByHostInstance:Zt,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Df.isDisabled&&Df.supportsFiber)try{Zr=Df.inject(LD),cn=Df}catch{}}return $c.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,c="",m=hb,g=db,T=fb,S=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(S=a.unstable_transitionCallbacks)),a=jw(i,1,!1,null,null,l,c,m,g,T,S,null),i[st]=a.current,wy(i.nodeType===8?i.parentNode:i),new zy(a)},$c.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var c=!1,m="",g=hb,T=db,S=fb,N=null,z=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(N=l.unstable_transitionCallbacks),l.formState!==void 0&&(z=l.formState)),a=jw(i,1,!0,a,l??null,c,m,g,T,S,N,z),a.context=Uw(null),l=a.current,c=pr(),m=Xs(c),m.callback=null,Zs(l,m,c),a.current.lanes=c,W(a,c),Di(a),i[st]=a.current,wy(i),new Of(a)},$c.version="19.0.0",$c}var iS;function WD(){if(iS)return qy.exports;iS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),qy.exports=KD(),qy.exports}var QD=WD();const YD=Kv(QD);var Kc={},sS;function XD(){if(sS)return Kc;sS=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.parse=u,Kc.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function u(b,A){const C=new o,F=b.length;if(F<2)return C;const M=(A==null?void 0:A.decode)||y;let Y=0;do{const Z=b.indexOf("=",Y);if(Z===-1)break;const ee=b.indexOf(";",Y),te=ee===-1?F:ee;if(Z>te){Y=b.lastIndexOf(";",Z-1)+1;continue}const se=h(b,Y,Z),V=d(b,Z,se),D=b.slice(se,V);if(C[D]===void 0){let x=h(b,Z+1,te),I=d(b,te,x);const O=M(b.slice(x,I));C[D]=O}Y=te+1}while(Y<F);return C}function h(b,A,C){do{const F=b.charCodeAt(A);if(F!==32&&F!==9)return A}while(++A<C);return C}function d(b,A,C){for(;A>C;){const F=b.charCodeAt(--A);if(F!==32&&F!==9)return A+1}return C}function p(b,A,C){const F=(C==null?void 0:C.encode)||encodeURIComponent;if(!n.test(b))throw new TypeError(`argument name is invalid: ${b}`);const M=F(A);if(!e.test(M))throw new TypeError(`argument val is invalid: ${A}`);let Y=b+"="+M;if(!C)return Y;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);Y+="; Max-Age="+C.maxAge}if(C.domain){if(!t.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);Y+="; Domain="+C.domain}if(C.path){if(!r.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);Y+="; Path="+C.path}if(C.expires){if(!v(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);Y+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(Y+="; HttpOnly"),C.secure&&(Y+="; Secure"),C.partitioned&&(Y+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":Y+="; Priority=Low";break;case"medium":Y+="; Priority=Medium";break;case"high":Y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":Y+="; SameSite=Strict";break;case"lax":Y+="; SameSite=Lax";break;case"none":Y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return Y}function y(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function v(b){return s.call(b)==="[object Date]"}return Kc}XD();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var aS="popstate";function ZD(n={}){function e(r,s){let{pathname:o,search:u,hash:h}=r.location;return Ih("",{pathname:o,search:u,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Da(s)}return e2(e,t,null,n)}function et(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function In(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JD(){return Math.random().toString(36).substring(2,10)}function oS(n,e){return{usr:n.state,key:n.key,idx:e}}function Ih(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?za(e):e,state:t,key:e&&e.key||r||JD()}}function Da({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function za(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function e2(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,u=s.history,h="POP",d=null,p=y();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function y(){return(u.state||{idx:null}).idx}function v(){h="POP";let M=y(),Y=M==null?null:M-p;p=M,d&&d({action:h,location:F.location,delta:Y})}function b(M,Y){h="PUSH";let Z=Ih(F.location,M,Y);p=y()+1;let ee=oS(Z,p),te=F.createHref(Z);try{u.pushState(ee,"",te)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;s.location.assign(te)}o&&d&&d({action:h,location:F.location,delta:1})}function A(M,Y){h="REPLACE";let Z=Ih(F.location,M,Y);p=y();let ee=oS(Z,p),te=F.createHref(Z);u.replaceState(ee,"",te),o&&d&&d({action:h,location:F.location,delta:0})}function C(M){let Y=s.location.origin!=="null"?s.location.origin:s.location.href,Z=typeof M=="string"?M:Da(M);return Z=Z.replace(/ $/,"%20"),et(Y,`No window.location.(origin|href) available to create URL for href: ${Z}`),new URL(Z,Y)}let F={get action(){return h},get location(){return n(s,u)},listen(M){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(aS,v),d=M,()=>{s.removeEventListener(aS,v),d=null}},createHref(M){return e(s,M)},createURL:C,encodeLocation(M){let Y=C(M);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:b,replace:A,go(M){return u.go(M)}};return F}var t2=new Set(["lazy","caseSensitive","path","id","index","children"]);function n2(n){return n.index===!0}function fm(n,e,t=[],r={}){return n.map((s,o)=>{let u=[...t,String(o)],h=typeof s.id=="string"?s.id:u.join("-");if(et(s.index!==!0||!s.children,"Cannot specify children on an index route"),et(!r[h],`Found a route id collision on id "${h}".  Route id's must be globally unique within Data Router usages`),n2(s)){let d={...s,...e(s),id:h};return r[h]=d,d}else{let d={...s,...e(s),id:h,children:void 0};return r[h]=d,s.children&&(d.children=fm(s.children,e,u,r)),d}})}function ga(n,e,t="/"){return Wf(n,e,t,!1)}function Wf(n,e,t,r){let s=typeof e=="string"?za(e):e,o=di(s.pathname||"/",t);if(o==null)return null;let u=yI(n);i2(u);let h=null;for(let d=0;h==null&&d<u.length;++d){let p=p2(o);h=f2(u[d],p,r)}return h}function r2(n,e){let{route:t,pathname:r,params:s}=n;return{id:t.id,pathname:r,params:s,data:e[t.id],handle:t.handle}}function yI(n,e=[],t=[],r=""){let s=(o,u,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};d.relativePath.startsWith("/")&&(et(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let p=Li([r,d.relativePath]),y=t.concat(d);o.children&&o.children.length>0&&(et(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),yI(o.children,e,y,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:h2(p,o.index),routesMeta:y})};return n.forEach((o,u)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,u);else for(let d of _I(o.path))s(o,u,d)}),e}function _I(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let u=_I(r.join("/")),h=[];return h.push(...u.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...u),h.map(d=>n.startsWith("/")&&d===""?"/":d)}function i2(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:d2(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var s2=/^:[\w-]+$/,a2=3,o2=2,l2=1,u2=10,c2=-2,lS=n=>n==="*";function h2(n,e){let t=n.split("/"),r=t.length;return t.some(lS)&&(r+=c2),e&&(r+=o2),t.filter(s=>!lS(s)).reduce((s,o)=>s+(s2.test(o)?a2:o===""?l2:u2),r)}function d2(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function f2(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",u=[];for(let h=0;h<r.length;++h){let d=r[h],p=h===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",v=mm({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},y),b=d.route;if(!v&&p&&t&&!r[r.length-1].route.index&&(v=mm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!v)return null;Object.assign(s,v.params),u.push({params:s,pathname:Li([o,v.pathname]),pathnameBase:_2(Li([o,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(o=Li([o,v.pathnameBase]))}return u}function mm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=m2(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],u=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:v},b)=>{if(y==="*"){let C=h[b]||"";u=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const A=h[b];return v&&!A?p[y]=void 0:p[y]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:u,pattern:n}}function m2(n,e=!1,t=!0){In(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,d)=>(r.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function p2(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return In(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function di(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function g2(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?za(n):n;return{pathname:t?t.startsWith("/")?t:y2(t,e):e,search:v2(r),hash:E2(s)}}function y2(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Ky(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ep(n){let e=vI(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function tp(n,e,t,r=!1){let s;typeof n=="string"?s=za(n):(s={...n},et(!s.pathname||!s.pathname.includes("?"),Ky("?","pathname","search",s)),et(!s.pathname||!s.pathname.includes("#"),Ky("#","pathname","hash",s)),et(!s.search||!s.search.includes("#"),Ky("#","search","hash",s)));let o=n===""||s.pathname==="",u=o?"/":s.pathname,h;if(u==null)h=t;else{let v=e.length-1;if(!r&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),v-=1;s.pathname=b.join("/")}h=v>=0?e[v]:"/"}let d=g2(s,h),p=u&&u!=="/"&&u.endsWith("/"),y=(o||u===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||y)&&(d.pathname+="/"),d}var Li=n=>n.join("/").replace(/\/\/+/g,"/"),_2=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),v2=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,E2=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,pm=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function xh(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var EI=["POST","PUT","PATCH","DELETE"],T2=new Set(EI),b2=["GET",...EI],w2=new Set(b2),S2=new Set([301,302,303,307,308]),A2=new Set([307,308]),Wy={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},R2={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Wc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Qv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,I2=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),TI="remix-router-transitions",bI=Symbol("ResetLoaderData");function x2(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";et(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=n.mapRouteProperties||I2,s={},o=fm(n.routes,r,void 0,s),u,h=n.basename||"/",d=n.dataStrategy||k2,p=n.patchRoutesOnNavigation,y={...n.future},v=null,b=new Set,A=null,C=null,F=null,M=n.hydrationData!=null,Y=ga(o,n.history.location,h),Z=!1,ee=null;if(Y==null&&!p){let P=qr(404,{pathname:n.history.location.pathname}),{matches:H,route:W}=vS(o);Y=H,ee={[W.id]:P}}Y&&!n.hydrationData&&Cn(Y,o,n.history.location.pathname).active&&(Y=null);let te;if(Y)if(Y.some(P=>P.route.lazy))te=!1;else if(!Y.some(P=>P.route.loader))te=!0;else{let P=n.hydrationData?n.hydrationData.loaderData:null,H=n.hydrationData?n.hydrationData.errors:null;if(H){let W=Y.findIndex(ce=>H[ce.route.id]!==void 0);te=Y.slice(0,W+1).every(ce=>!w_(ce.route,P,H))}else te=Y.every(W=>!w_(W.route,P,H))}else{te=!1,Y=[];let P=Cn(null,o,n.history.location.pathname);P.active&&P.matches&&(Z=!0,Y=P.matches)}let se,V={historyAction:n.history.action,location:n.history.location,matches:Y,initialized:te,navigation:Wy,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||ee,fetchers:new Map,blockers:new Map},D="POP",x=!1,I,O=!1,j=new Map,q=null,k=!1,xt=!1,kt=new Set,fe=new Map,Me=0,Ce=-1,Ye=new Map,L=new Set,ue=new Map,Se=new Map,ye=new Set,_e=new Map,Fe,je=null;function Gt(){if(v=n.history.listen(({action:P,location:H,delta:W})=>{if(Fe){Fe(),Fe=void 0;return}In(_e.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ce=Ls({currentLocation:V.location,nextLocation:H,historyAction:P});if(ce&&W!=null){let ve=new Promise(Ae=>{Fe=Ae});n.history.go(W*-1),nn(ce,{state:"blocked",location:H,proceed(){nn(ce,{state:"proceeding",proceed:void 0,reset:void 0,location:H}),ve.then(()=>n.history.go(W))},reset(){let Ae=new Map(V.blockers);Ae.set(ce,Wc),Be({blockers:Ae})}});return}return Mn(P,H)}),t){H2(e,j);let P=()=>G2(e,j);e.addEventListener("pagehide",P),q=()=>e.removeEventListener("pagehide",P)}return V.initialized||Mn("POP",V.location,{initialHydration:!0}),se}function it(){v&&v(),q&&q(),b.clear(),I&&I.abort(),V.fetchers.forEach((P,H)=>Vs(H)),V.blockers.forEach((P,H)=>or(H))}function Ut(P){return b.add(P),()=>b.delete(P)}function Be(P,H={}){V={...V,...P};let W=[],ce=[];V.fetchers.forEach((ve,Ae)=>{ve.state==="idle"&&(ye.has(Ae)?W.push(Ae):ce.push(Ae))}),ye.forEach(ve=>{!V.fetchers.has(ve)&&!fe.has(ve)&&W.push(ve)}),[...b].forEach(ve=>ve(V,{deletedFetchers:W,viewTransitionOpts:H.viewTransitionOpts,flushSync:H.flushSync===!0})),W.forEach(ve=>Vs(ve)),ce.forEach(ve=>V.fetchers.delete(ve))}function $t(P,H,{flushSync:W}={}){var ge,xe;let ce=V.actionData!=null&&V.navigation.formMethod!=null&&si(V.navigation.formMethod)&&V.navigation.state==="loading"&&((ge=P.state)==null?void 0:ge._isRedirect)!==!0,ve;H.actionData?Object.keys(H.actionData).length>0?ve=H.actionData:ve=null:ce?ve=V.actionData:ve=null;let Ae=H.loaderData?yS(V.loaderData,H.loaderData,H.matches||[],H.errors):V.loaderData,Ve=V.blockers;Ve.size>0&&(Ve=new Map(Ve),Ve.forEach((Oe,st)=>Ve.set(st,Wc)));let be=x===!0||V.navigation.formMethod!=null&&si(V.navigation.formMethod)&&((xe=P.state)==null?void 0:xe._isRedirect)!==!0;u&&(o=u,u=void 0),k||D==="POP"||(D==="PUSH"?n.history.push(P,P.state):D==="REPLACE"&&n.history.replace(P,P.state));let we;if(D==="POP"){let Oe=j.get(V.location.pathname);Oe&&Oe.has(P.pathname)?we={currentLocation:V.location,nextLocation:P}:j.has(P.pathname)&&(we={currentLocation:P,nextLocation:V.location})}else if(O){let Oe=j.get(V.location.pathname);Oe?Oe.add(P.pathname):(Oe=new Set([P.pathname]),j.set(V.location.pathname,Oe)),we={currentLocation:V.location,nextLocation:P}}Be({...H,actionData:ve,loaderData:Ae,historyAction:D,location:P,initialized:!0,navigation:Wy,revalidation:"idle",restoreScrollPosition:nr(P,H.matches||V.matches),preventScrollReset:be,blockers:Ve},{viewTransitionOpts:we,flushSync:W===!0}),D="POP",x=!1,O=!1,k=!1,xt=!1,je==null||je.resolve(),je=null}async function wr(P,H){if(typeof P=="number"){n.history.go(P);return}let W=b_(V.location,V.matches,h,P,H==null?void 0:H.fromRouteId,H==null?void 0:H.relative),{path:ce,submission:ve,error:Ae}=uS(!1,W,H),Ve=V.location,be=Ih(V.location,ce,H&&H.state);be={...be,...n.history.encodeLocation(be)};let we=H&&H.replace!=null?H.replace:void 0,ge="PUSH";we===!0?ge="REPLACE":we===!1||ve!=null&&si(ve.formMethod)&&ve.formAction===V.location.pathname+V.location.search&&(ge="REPLACE");let xe=H&&"preventScrollReset"in H?H.preventScrollReset===!0:void 0,Oe=(H&&H.flushSync)===!0,st=Ls({currentLocation:Ve,nextLocation:be,historyAction:ge});if(st){nn(st,{state:"blocked",location:be,proceed(){nn(st,{state:"proceeding",proceed:void 0,reset:void 0,location:be}),wr(P,H)},reset(){let Pt=new Map(V.blockers);Pt.set(st,Wc),Be({blockers:Pt})}});return}await Mn(ge,be,{submission:ve,pendingError:Ae,preventScrollReset:xe,replace:H&&H.replace,enableViewTransition:H&&H.viewTransition,flushSync:Oe})}function tr(){je||(je=$2()),Ms(),Be({revalidation:"loading"});let P=je.promise;return V.navigation.state==="submitting"?P:V.navigation.state==="idle"?(Mn(V.historyAction,V.location,{startUninterruptedRevalidation:!0}),P):(Mn(D||V.historyAction,V.navigation.location,{overrideNavigation:V.navigation,enableViewTransition:O===!0}),P)}async function Mn(P,H,W){I&&I.abort(),I=null,D=P,k=(W&&W.startUninterruptedRevalidation)===!0,_i(V.location,V.matches),x=(W&&W.preventScrollReset)===!0,O=(W&&W.enableViewTransition)===!0;let ce=u||o,ve=W&&W.overrideNavigation,Ae=W!=null&&W.initialHydration&&V.matches&&V.matches.length>0&&!Z?V.matches:ga(ce,H,h),Ve=(W&&W.flushSync)===!0;if(Ae&&V.initialized&&!xt&&U2(V.location,H)&&!(W&&W.submission&&si(W.submission.formMethod))){$t(H,{matches:Ae},{flushSync:Ve});return}let be=Cn(Ae,ce,H.pathname);if(be.active&&be.matches&&(Ae=be.matches),!Ae){let{error:yt,notFoundMatches:Je,route:Mt}=js(H.pathname);$t(H,{matches:Je,loaderData:{},errors:{[Mt.id]:yt}},{flushSync:Ve});return}I=new AbortController;let we=Gl(n.history,H,I.signal,W&&W.submission),ge;if(W&&W.pendingError)ge=[Do(Ae).route.id,{type:"error",error:W.pendingError}];else if(W&&W.submission&&si(W.submission.formMethod)){let yt=await gi(we,H,W.submission,Ae,be.active,{replace:W.replace,flushSync:Ve});if(yt.shortCircuited)return;if(yt.pendingActionResult){let[Je,Mt]=yt.pendingActionResult;if(gr(Mt)&&xh(Mt.error)&&Mt.error.status===404){I=null,$t(H,{matches:yt.matches,loaderData:{},errors:{[Je]:Mt.error}});return}}Ae=yt.matches||Ae,ge=yt.pendingActionResult,ve=Qy(H,W.submission),Ve=!1,be.active=!1,we=Gl(n.history,we.url,we.signal)}let{shortCircuited:xe,matches:Oe,loaderData:st,errors:Pt}=await Qr(we,H,Ae,be.active,ve,W&&W.submission,W&&W.fetcherSubmission,W&&W.replace,W&&W.initialHydration===!0,Ve,ge);xe||(I=null,$t(H,{matches:Oe||Ae,..._S(ge),loaderData:st,errors:Pt}))}async function gi(P,H,W,ce,ve,Ae={}){Ms();let Ve=B2(H,W);if(Be({navigation:Ve},{flushSync:Ae.flushSync===!0}),ve){let ge=await ur(ce,H.pathname,P.signal);if(ge.type==="aborted")return{shortCircuited:!0};if(ge.type==="error"){let xe=Do(ge.partialMatches).route.id;return{matches:ge.partialMatches,pendingActionResult:[xe,{type:"error",error:ge.error}]}}else if(ge.matches)ce=ge.matches;else{let{notFoundMatches:xe,error:Oe,route:st}=js(H.pathname);return{matches:xe,pendingActionResult:[st.id,{type:"error",error:Oe}]}}}let be,we=lh(ce,H);if(!we.route.action&&!we.route.lazy)be={type:"error",error:qr(405,{method:P.method,pathname:H.pathname,routeId:we.route.id})};else if(be=(await Xr("action",V,P,[we],ce,null))[we.route.id],P.signal.aborted)return{shortCircuited:!0};if(Lo(be)){let ge;return Ae&&Ae.replace!=null?ge=Ae.replace:ge=mS(be.response.headers.get("Location"),new URL(P.url),h)===V.location.pathname+V.location.search,await Yr(P,be,!0,{submission:W,replace:ge}),{shortCircuited:!0}}if(gr(be)){let ge=Do(ce,we.route.id);return(Ae&&Ae.replace)!==!0&&(D="PUSH"),{matches:ce,pendingActionResult:[ge.route.id,be]}}return{matches:ce,pendingActionResult:[we.route.id,be]}}async function Qr(P,H,W,ce,ve,Ae,Ve,be,we,ge,xe){let Oe=ve||Qy(H,Ae),st=Ae||Ve||TS(Oe),Pt=!k&&!we;if(ce){if(Pt){let gt=Os(xe);Be({navigation:Oe,...gt!==void 0?{actionData:gt}:{}},{flushSync:ge})}let $e=await ur(W,H.pathname,P.signal);if($e.type==="aborted")return{shortCircuited:!0};if($e.type==="error"){let gt=Do($e.partialMatches).route.id;return{matches:$e.partialMatches,loaderData:{},errors:{[gt]:$e.error}}}else if($e.matches)W=$e.matches;else{let{error:gt,notFoundMatches:yn,route:$i}=js(H.pathname);return{matches:yn,loaderData:{},errors:{[$i.id]:gt}}}}let yt=u||o,[Je,Mt]=hS(n.history,V,W,st,H,we===!0,xt,kt,ye,ue,L,yt,h,xe);if(Ce=++Me,Je.length===0&&Mt.length===0){let $e=Zr();return $t(H,{matches:W,loaderData:{},errors:xe&&gr(xe[1])?{[xe[0]]:xe[1].error}:null,..._S(xe),...$e?{fetchers:new Map(V.fetchers)}:{}},{flushSync:ge}),{shortCircuited:!0}}if(Pt){let $e={};if(!ce){$e.navigation=Oe;let gt=Os(xe);gt!==void 0&&($e.actionData=gt)}Mt.length>0&&($e.fetchers=Ds(Mt)),Be($e,{flushSync:ge})}Mt.forEach($e=>{Ar($e.key),$e.controller&&fe.set($e.key,$e.controller)});let Gn=()=>Mt.forEach($e=>Ar($e.key));I&&I.signal.addEventListener("abort",Gn);let{loaderResults:cr,fetcherResults:Zt}=await xn(V,W,Je,Mt,P);if(P.signal.aborted)return{shortCircuited:!0};I&&I.signal.removeEventListener("abort",Gn),Mt.forEach($e=>fe.delete($e.key));let rn=kf(cr);if(rn)return await Yr(P,rn.result,!0,{replace:be}),{shortCircuited:!0};if(rn=kf(Zt),rn)return L.add(rn.key),await Yr(P,rn.result,!0,{replace:be}),{shortCircuited:!0};let{loaderData:Rr,errors:rr}=gS(V,W,cr,xe,Mt,Zt);we&&V.errors&&(rr={...V.errors,...rr});let pt=Zr(),vi=cn(Ce),Jr=pt||vi||Mt.length>0;return{matches:W,loaderData:Rr,errors:rr,...Jr?{fetchers:new Map(V.fetchers)}:{}}}function Os(P){if(P&&!gr(P[1]))return{[P[0]]:P[1].data};if(V.actionData)return Object.keys(V.actionData).length===0?null:V.actionData}function Ds(P){return P.forEach(H=>{let W=V.fetchers.get(H.key),ce=Qc(void 0,W?W.data:void 0);V.fetchers.set(H.key,ce)}),new Map(V.fetchers)}async function ks(P,H,W,ce){Ar(P);let ve=(ce&&ce.flushSync)===!0,Ae=u||o,Ve=b_(V.location,V.matches,h,W,H,ce==null?void 0:ce.relative),be=ga(Ae,Ve,h),we=Cn(be,Ae,Ve);if(we.active&&we.matches&&(be=we.matches),!be){St(P,H,qr(404,{pathname:Ve}),{flushSync:ve});return}let{path:ge,submission:xe,error:Oe}=uS(!0,Ve,ce);if(Oe){St(P,H,Oe,{flushSync:ve});return}let st=lh(be,ge),Pt=(ce&&ce.preventScrollReset)===!0;if(xe&&si(xe.formMethod)){await Gi(P,H,ge,st,be,we.active,ve,Pt,xe);return}ue.set(P,{routeId:H,path:ge}),await Ps(P,H,ge,st,be,we.active,ve,Pt,xe)}async function Gi(P,H,W,ce,ve,Ae,Ve,be,we){Ms(),ue.delete(P);function ge(Nt){if(!Nt.route.action&&!Nt.route.lazy){let Ir=qr(405,{method:we.formMethod,pathname:W,routeId:H});return St(P,H,Ir,{flushSync:Ve}),!0}return!1}if(!Ae&&ge(ce))return;let xe=V.fetchers.get(P);wt(P,q2(we,xe),{flushSync:Ve});let Oe=new AbortController,st=Gl(n.history,W,Oe.signal,we);if(Ae){let Nt=await ur(ve,W,st.signal);if(Nt.type==="aborted")return;if(Nt.type==="error"){St(P,H,Nt.error,{flushSync:Ve});return}else if(Nt.matches){if(ve=Nt.matches,ce=lh(ve,W),ge(ce))return}else{St(P,H,qr(404,{pathname:W}),{flushSync:Ve});return}}fe.set(P,Oe);let Pt=Me,Je=(await Xr("action",V,st,[ce],ve,P))[ce.route.id];if(st.signal.aborted){fe.get(P)===Oe&&fe.delete(P);return}if(ye.has(P)){if(Lo(Je)||gr(Je)){wt(P,ma(void 0));return}}else{if(Lo(Je))if(fe.delete(P),Ce>Pt){wt(P,ma(void 0));return}else return L.add(P),wt(P,Qc(we)),Yr(st,Je,!1,{fetcherSubmission:we,preventScrollReset:be});if(gr(Je)){St(P,H,Je.error);return}}let Mt=V.navigation.location||V.location,Gn=Gl(n.history,Mt,Oe.signal),cr=u||o,Zt=V.navigation.state!=="idle"?ga(cr,V.navigation.location,h):V.matches;et(Zt,"Didn't find any matches after fetcher action");let rn=++Me;Ye.set(P,rn);let Rr=Qc(we,Je.data);V.fetchers.set(P,Rr);let[rr,pt]=hS(n.history,V,Zt,we,Mt,!1,xt,kt,ye,ue,L,cr,h,[ce.route.id,Je]);pt.filter(Nt=>Nt.key!==P).forEach(Nt=>{let Ir=Nt.key,Ya=V.fetchers.get(Ir),Ei=Qc(void 0,Ya?Ya.data:void 0);V.fetchers.set(Ir,Ei),Ar(Ir),Nt.controller&&fe.set(Ir,Nt.controller)}),Be({fetchers:new Map(V.fetchers)});let vi=()=>pt.forEach(Nt=>Ar(Nt.key));Oe.signal.addEventListener("abort",vi);let{loaderResults:Jr,fetcherResults:$e}=await xn(V,Zt,rr,pt,Gn);if(Oe.signal.aborted)return;Oe.signal.removeEventListener("abort",vi),Ye.delete(P),fe.delete(P),pt.forEach(Nt=>fe.delete(Nt.key));let gt=kf(Jr);if(gt)return Yr(Gn,gt.result,!1,{preventScrollReset:be});if(gt=kf($e),gt)return L.add(gt.key),Yr(Gn,gt.result,!1,{preventScrollReset:be});let{loaderData:yn,errors:$i}=gS(V,Zt,Jr,void 0,pt,$e);if(V.fetchers.has(P)){let Nt=ma(Je.data);V.fetchers.set(P,Nt)}cn(rn),V.navigation.state==="loading"&&rn>Ce?(et(D,"Expected pending action"),I&&I.abort(),$t(V.navigation.location,{matches:Zt,loaderData:yn,errors:$i,fetchers:new Map(V.fetchers)})):(Be({errors:$i,loaderData:yS(V.loaderData,yn,Zt,$i),fetchers:new Map(V.fetchers)}),xt=!1)}async function Ps(P,H,W,ce,ve,Ae,Ve,be,we){let ge=V.fetchers.get(P);wt(P,Qc(we,ge?ge.data:void 0),{flushSync:Ve});let xe=new AbortController,Oe=Gl(n.history,W,xe.signal);if(Ae){let Je=await ur(ve,W,Oe.signal);if(Je.type==="aborted")return;if(Je.type==="error"){St(P,H,Je.error,{flushSync:Ve});return}else if(Je.matches)ve=Je.matches,ce=lh(ve,W);else{St(P,H,qr(404,{pathname:W}),{flushSync:Ve});return}}fe.set(P,xe);let st=Me,yt=(await Xr("loader",V,Oe,[ce],ve,P))[ce.route.id];if(fe.get(P)===xe&&fe.delete(P),!Oe.signal.aborted){if(ye.has(P)){wt(P,ma(void 0));return}if(Lo(yt))if(Ce>st){wt(P,ma(void 0));return}else{L.add(P),await Yr(Oe,yt,!1,{preventScrollReset:be});return}if(gr(yt)){St(P,H,yt.error);return}wt(P,ma(yt.data))}}async function Yr(P,H,W,{submission:ce,fetcherSubmission:ve,preventScrollReset:Ae,replace:Ve}={}){H.response.headers.has("X-Remix-Revalidate")&&(xt=!0);let be=H.response.headers.get("Location");et(be,"Expected a Location header on the redirect Response"),be=mS(be,new URL(P.url),h);let we=Ih(V.location,be,{_isRedirect:!0});if(t){let yt=!1;if(H.response.headers.has("X-Remix-Reload-Document"))yt=!0;else if(Qv.test(be)){const Je=n.history.createURL(be);yt=Je.origin!==e.location.origin||di(Je.pathname,h)==null}if(yt){Ve?e.location.replace(be):e.location.assign(be);return}}I=null;let ge=Ve===!0||H.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:xe,formAction:Oe,formEncType:st}=V.navigation;!ce&&!ve&&xe&&Oe&&st&&(ce=TS(V.navigation));let Pt=ce||ve;if(A2.has(H.response.status)&&Pt&&si(Pt.formMethod))await Mn(ge,we,{submission:{...Pt,formAction:be},preventScrollReset:Ae||x,enableViewTransition:W?O:void 0});else{let yt=Qy(we,ce);await Mn(ge,we,{overrideNavigation:yt,fetcherSubmission:ve,preventScrollReset:Ae||x,enableViewTransition:W?O:void 0})}}async function Xr(P,H,W,ce,ve,Ae){let Ve,be={};try{Ve=await P2(d,P,H,W,ce,ve,Ae,s,r)}catch(we){return ce.forEach(ge=>{be[ge.route.id]={type:"error",error:we}}),be}for(let[we,ge]of Object.entries(Ve))if(z2(ge)){let xe=ge.result;be[we]={type:"redirect",response:L2(xe,W,we,ve,h)}}else be[we]=await V2(ge);return be}async function xn(P,H,W,ce,ve){let Ae=Xr("loader",P,ve,W,H,null),Ve=Promise.all(ce.map(async ge=>{if(ge.matches&&ge.match&&ge.controller){let Oe=(await Xr("loader",P,Gl(n.history,ge.path,ge.controller.signal),[ge.match],ge.matches,ge.key))[ge.match.route.id];return{[ge.key]:Oe}}else return Promise.resolve({[ge.key]:{type:"error",error:qr(404,{pathname:ge.path})}})})),be=await Ae,we=(await Ve).reduce((ge,xe)=>Object.assign(ge,xe),{});return{loaderResults:be,fetcherResults:we}}function Ms(){xt=!0,ue.forEach((P,H)=>{fe.has(H)&&kt.add(H),Ar(H)})}function wt(P,H,W={}){V.fetchers.set(P,H),Be({fetchers:new Map(V.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function St(P,H,W,ce={}){let ve=Do(V.matches,H);Vs(P),Be({errors:{[ve.route.id]:W},fetchers:new Map(V.fetchers)},{flushSync:(ce&&ce.flushSync)===!0})}function Sr(P){return Se.set(P,(Se.get(P)||0)+1),ye.has(P)&&ye.delete(P),V.fetchers.get(P)||R2}function Vs(P){let H=V.fetchers.get(P);fe.has(P)&&!(H&&H.state==="loading"&&Ye.has(P))&&Ar(P),ue.delete(P),Ye.delete(P),L.delete(P),ye.delete(P),kt.delete(P),V.fetchers.delete(P)}function Ka(P){let H=(Se.get(P)||0)-1;H<=0?(Se.delete(P),ye.add(P)):Se.set(P,H),Be({fetchers:new Map(V.fetchers)})}function Ar(P){let H=fe.get(P);H&&(H.abort(),fe.delete(P))}function yi(P){for(let H of P){let W=Sr(H),ce=ma(W.data);V.fetchers.set(H,ce)}}function Zr(){let P=[],H=!1;for(let W of L){let ce=V.fetchers.get(W);et(ce,`Expected fetcher: ${W}`),ce.state==="loading"&&(L.delete(W),P.push(W),H=!0)}return yi(P),H}function cn(P){let H=[];for(let[W,ce]of Ye)if(ce<P){let ve=V.fetchers.get(W);et(ve,`Expected fetcher: ${W}`),ve.state==="loading"&&(Ar(W),Ye.delete(W),H.push(W))}return yi(H),H.length>0}function Wa(P,H){let W=V.blockers.get(P)||Wc;return _e.get(P)!==H&&_e.set(P,H),W}function or(P){V.blockers.delete(P),_e.delete(P)}function nn(P,H){let W=V.blockers.get(P)||Wc;et(W.state==="unblocked"&&H.state==="blocked"||W.state==="blocked"&&H.state==="blocked"||W.state==="blocked"&&H.state==="proceeding"||W.state==="blocked"&&H.state==="unblocked"||W.state==="proceeding"&&H.state==="unblocked",`Invalid blocker state transition: ${W.state} -> ${H.state}`);let ce=new Map(V.blockers);ce.set(P,H),Be({blockers:ce})}function Ls({currentLocation:P,nextLocation:H,historyAction:W}){if(_e.size===0)return;_e.size>1&&In(!1,"A router only supports one blocker at a time");let ce=Array.from(_e.entries()),[ve,Ae]=ce[ce.length-1],Ve=V.blockers.get(ve);if(!(Ve&&Ve.state==="proceeding")&&Ae({currentLocation:P,nextLocation:H,historyAction:W}))return ve}function js(P){let H=qr(404,{pathname:P}),W=u||o,{matches:ce,route:ve}=vS(W);return{notFoundMatches:ce,route:ve,error:H}}function ol(P,H,W){if(A=P,F=H,C=W||null,!M&&V.navigation===Wy){M=!0;let ce=nr(V.location,V.matches);ce!=null&&Be({restoreScrollPosition:ce})}return()=>{A=null,F=null,C=null}}function lr(P,H){return C&&C(P,H.map(ce=>r2(ce,V.loaderData)))||P.key}function _i(P,H){if(A&&F){let W=lr(P,H);A[W]=F()}}function nr(P,H){if(A){let W=lr(P,H),ce=A[W];if(typeof ce=="number")return ce}return null}function Cn(P,H,W){if(p)if(P){if(Object.keys(P[0].params).length>0)return{active:!0,matches:Wf(H,W,h,!0)}}else return{active:!0,matches:Wf(H,W,h,!0)||[]};return{active:!1,matches:null}}async function ur(P,H,W){if(!p)return{type:"success",matches:P};let ce=P;for(;;){let ve=u==null,Ae=u||o,Ve=s;try{await p({signal:W,path:H,matches:ce,patch:(ge,xe)=>{W.aborted||fS(ge,xe,Ae,Ve,r)}})}catch(ge){return{type:"error",error:ge,partialMatches:ce}}finally{ve&&!W.aborted&&(o=[...o])}if(W.aborted)return{type:"aborted"};let be=ga(Ae,H,h);if(be)return{type:"success",matches:be};let we=Wf(Ae,H,h,!0);if(!we||ce.length===we.length&&ce.every((ge,xe)=>ge.route.id===we[xe].route.id))return{type:"success",matches:null};ce=we}}function Us(P){s={},u=fm(P,r,void 0,s)}function Qa(P,H){let W=u==null;fS(P,H,u||o,s,r),W&&(o=[...o],Be({}))}return se={get basename(){return h},get future(){return y},get state(){return V},get routes(){return o},get window(){return e},initialize:Gt,subscribe:Ut,enableScrollRestoration:ol,navigate:wr,fetch:ks,revalidate:tr,createHref:P=>n.history.createHref(P),encodeLocation:P=>n.history.encodeLocation(P),getFetcher:Sr,deleteFetcher:Ka,dispose:it,getBlocker:Wa,deleteBlocker:or,patchRoutes:Qa,_internalFetchControllers:fe,_internalSetRoutes:Us},se}function C2(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function b_(n,e,t,r,s,o){let u,h;if(s){u=[];for(let p of e)if(u.push(p),p.route.id===s){h=p;break}}else u=e,h=e[e.length-1];let d=tp(r||".",ep(u),di(n.pathname,t)||n.pathname,o==="path");if(r==null&&(d.search=n.search,d.hash=n.hash),(r==null||r===""||r===".")&&h){let p=Yv(d.search);if(h.route.index&&!p)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&p){let y=new URLSearchParams(d.search),v=y.getAll("index");y.delete("index"),v.filter(A=>A).forEach(A=>y.append("index",A));let b=y.toString();d.search=b?`?${b}`:""}}return t!=="/"&&(d.pathname=d.pathname==="/"?t:Li([t,d.pathname])),Da(d)}function uS(n,e,t){if(!t||!C2(t))return{path:e};if(t.formMethod&&!F2(t.formMethod))return{path:e,error:qr(405,{method:t.formMethod})};let r=()=>({path:e,error:qr(400,{type:"invalid-body"})}),o=(t.formMethod||"get").toUpperCase(),u=SI(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!si(o))return r();let v=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((b,[A,C])=>`${b}${A}=${C}
`,""):String(t.body);return{path:e,submission:{formMethod:o,formAction:u,formEncType:t.formEncType,formData:void 0,json:void 0,text:v}}}else if(t.formEncType==="application/json"){if(!si(o))return r();try{let v=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:o,formAction:u,formEncType:t.formEncType,formData:void 0,json:v,text:void 0}}}catch{return r()}}}et(typeof FormData=="function","FormData is not available in this environment");let h,d;if(t.formData)h=S_(t.formData),d=t.formData;else if(t.body instanceof FormData)h=S_(t.body),d=t.body;else if(t.body instanceof URLSearchParams)h=t.body,d=pS(h);else if(t.body==null)h=new URLSearchParams,d=new FormData;else try{h=new URLSearchParams(t.body),d=pS(h)}catch{return r()}let p={formMethod:o,formAction:u,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(si(p.formMethod))return{path:e,submission:p};let y=za(e);return n&&y.search&&Yv(y.search)&&h.append("index",""),y.search=`?${h}`,{path:Da(y),submission:p}}function cS(n,e,t=!1){let r=n.findIndex(s=>s.route.id===e);return r>=0?n.slice(0,t?r+1:r):n}function hS(n,e,t,r,s,o,u,h,d,p,y,v,b,A){let C=A?gr(A[1])?A[1].error:A[1].data:void 0,F=n.createURL(e.location),M=n.createURL(s),Y=t;o&&e.errors?Y=cS(t,Object.keys(e.errors)[0],!0):A&&gr(A[1])&&(Y=cS(t,A[0]));let Z=A?A[1].statusCode:void 0,ee=Z&&Z>=400,te=Y.filter((V,D)=>{let{route:x}=V;if(x.lazy)return!0;if(x.loader==null)return!1;if(o)return w_(x,e.loaderData,e.errors);if(N2(e.loaderData,e.matches[D],V))return!0;let I=e.matches[D],O=V;return dS(V,{currentUrl:F,currentParams:I.params,nextUrl:M,nextParams:O.params,...r,actionResult:C,actionStatus:Z,defaultShouldRevalidate:ee?!1:u||F.pathname+F.search===M.pathname+M.search||F.search!==M.search||O2(I,O)})}),se=[];return p.forEach((V,D)=>{if(o||!t.some(q=>q.route.id===V.routeId)||d.has(D))return;let x=ga(v,V.path,b);if(!x){se.push({key:D,routeId:V.routeId,path:V.path,matches:null,match:null,controller:null});return}let I=e.fetchers.get(D),O=lh(x,V.path),j=!1;y.has(D)?j=!1:h.has(D)?(h.delete(D),j=!0):I&&I.state!=="idle"&&I.data===void 0?j=u:j=dS(O,{currentUrl:F,currentParams:e.matches[e.matches.length-1].params,nextUrl:M,nextParams:t[t.length-1].params,...r,actionResult:C,actionStatus:Z,defaultShouldRevalidate:ee?!1:u}),j&&se.push({key:D,routeId:V.routeId,path:V.path,matches:x,match:O,controller:new AbortController})}),[te,se]}function w_(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,s=t!=null&&t[n.id]!==void 0;return!r&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!s}function N2(n,e,t){let r=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return r||s}function O2(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function dS(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function fS(n,e,t,r,s){let o;if(n){let d=r[n];et(d,`No route found to patch children into: routeId = ${n}`),d.children||(d.children=[]),o=d.children}else o=t;let u=e.filter(d=>!o.some(p=>wI(d,p))),h=fm(u,s,[n||"_","patch",String((o==null?void 0:o.length)||"0")],r);o.push(...h)}function wI(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var s;return(s=e.children)==null?void 0:s.some(o=>wI(t,o))}):!1}async function D2(n,e,t){if(!n.lazy)return;let r=await n.lazy();if(!n.lazy)return;let s=t[n.id];et(s,"No route found in manifest");let o={};for(let u in r){let d=s[u]!==void 0&&u!=="hasErrorBoundary";In(!d,`Route "${s.id}" has a static property "${u}" defined but its lazy function is also returning a value for this property. The lazy route property "${u}" will be ignored.`),!d&&!t2.has(u)&&(o[u]=r[u])}Object.assign(s,o),Object.assign(s,{...e(s),lazy:void 0})}async function k2({matches:n}){let e=n.filter(r=>r.shouldLoad);return(await Promise.all(e.map(r=>r.resolve()))).reduce((r,s,o)=>Object.assign(r,{[e[o].route.id]:s}),{})}async function P2(n,e,t,r,s,o,u,h,d,p){let y=o.map(A=>A.route.lazy?D2(A.route,d,h):void 0),v=o.map((A,C)=>{let F=y[C],M=s.some(Z=>Z.route.id===A.route.id);return{...A,shouldLoad:M,resolve:async Z=>(Z&&r.method==="GET"&&(A.route.lazy||A.route.loader)&&(M=!0),M?M2(e,r,A,F,Z,p):Promise.resolve({type:"data",result:void 0}))}}),b=await n({matches:v,request:r,params:o[0].params,fetcherKey:u,context:p});try{await Promise.all(y)}catch{}return b}async function M2(n,e,t,r,s,o){let u,h,d=p=>{let y,v=new Promise((C,F)=>y=F);h=()=>y(),e.signal.addEventListener("abort",h);let b=C=>typeof p!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${n}" [routeId: ${t.route.id}]`)):p({request:e,params:t.params,context:o},...C!==void 0?[C]:[]),A=(async()=>{try{return{type:"data",result:await(s?s(F=>b(F)):b())}}catch(C){return{type:"error",result:C}}})();return Promise.race([A,v])};try{let p=t.route[n];if(r)if(p){let y,[v]=await Promise.all([d(p).catch(b=>{y=b}),r]);if(y!==void 0)throw y;u=v}else if(await r,p=t.route[n],p)u=await d(p);else if(n==="action"){let y=new URL(e.url),v=y.pathname+y.search;throw qr(405,{method:e.method,pathname:v,routeId:t.route.id})}else return{type:"data",result:void 0};else if(p)u=await d(p);else{let y=new URL(e.url),v=y.pathname+y.search;throw qr(404,{pathname:v})}}catch(p){return{type:"error",result:p}}finally{h&&e.signal.removeEventListener("abort",h)}return u}async function V2(n){var r,s,o,u,h,d;let{result:e,type:t}=n;if(AI(e)){let p;try{let y=e.headers.get("Content-Type");y&&/\bapplication\/json\b/.test(y)?e.body==null?p=null:p=await e.json():p=await e.text()}catch(y){return{type:"error",error:y}}return t==="error"?{type:"error",error:new pm(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:"data",data:p,statusCode:e.status,headers:e.headers}}return t==="error"?ES(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new pm(((o=e.init)==null?void 0:o.status)||500,void 0,e.data),statusCode:xh(e)?e.status:void 0,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:xh(e)?e.status:void 0}:ES(e)?{type:"data",data:e.data,statusCode:(h=e.init)==null?void 0:h.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function L2(n,e,t,r,s){let o=n.headers.get("Location");if(et(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Qv.test(o)){let u=r.slice(0,r.findIndex(h=>h.route.id===t)+1);o=b_(new URL(e.url),u,s,o),n.headers.set("Location",o)}return n}function mS(n,e,t){if(Qv.test(n)){let r=n,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=di(s.pathname,t)!=null;if(s.origin===e.origin&&o)return s.pathname+s.search+s.hash}return n}function Gl(n,e,t,r){let s=n.createURL(SI(e)).toString(),o={signal:t};if(r&&si(r.formMethod)){let{formMethod:u,formEncType:h}=r;o.method=u.toUpperCase(),h==="application/json"?(o.headers=new Headers({"Content-Type":h}),o.body=JSON.stringify(r.json)):h==="text/plain"?o.body=r.text:h==="application/x-www-form-urlencoded"&&r.formData?o.body=S_(r.formData):o.body=r.formData}return new Request(s,o)}function S_(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function pS(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function j2(n,e,t,r=!1,s=!1){let o={},u=null,h,d=!1,p={},y=t&&gr(t[1])?t[1].error:void 0;return n.forEach(v=>{if(!(v.route.id in e))return;let b=v.route.id,A=e[b];if(et(!Lo(A),"Cannot handle redirect results in processLoaderData"),gr(A)){let C=A.error;if(y!==void 0&&(C=y,y=void 0),u=u||{},s)u[b]=C;else{let F=Do(n,b);u[F.route.id]==null&&(u[F.route.id]=C)}r||(o[b]=bI),d||(d=!0,h=xh(A.error)?A.error.status:500),A.headers&&(p[b]=A.headers)}else o[b]=A.data,A.statusCode&&A.statusCode!==200&&!d&&(h=A.statusCode),A.headers&&(p[b]=A.headers)}),y!==void 0&&t&&(u={[t[0]]:y},o[t[0]]=void 0),{loaderData:o,errors:u,statusCode:h||200,loaderHeaders:p}}function gS(n,e,t,r,s,o){let{loaderData:u,errors:h}=j2(e,t,r);return s.forEach(d=>{let{key:p,match:y,controller:v}=d,b=o[p];if(et(b,"Did not find corresponding fetcher result"),!(v&&v.signal.aborted))if(gr(b)){let A=Do(n.matches,y==null?void 0:y.route.id);h&&h[A.route.id]||(h={...h,[A.route.id]:b.error}),n.fetchers.delete(p)}else if(Lo(b))et(!1,"Unhandled fetcher revalidation redirect");else{let A=ma(b.data);n.fetchers.set(p,A)}}),{loaderData:u,errors:h}}function yS(n,e,t,r){let s=Object.entries(e).filter(([,o])=>o!==bI).reduce((o,[u,h])=>(o[u]=h,o),{});for(let o of t){let u=o.route.id;if(!e.hasOwnProperty(u)&&n.hasOwnProperty(u)&&o.route.loader&&(s[u]=n[u]),r&&r.hasOwnProperty(u))break}return s}function _S(n){return n?gr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function Do(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function vS(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function qr(n,{pathname:e,routeId:t,method:r,type:s,message:o}={}){let u="Unknown Server Error",h="Unknown @remix-run/router error";return n===400?(u="Bad Request",r&&e&&t?h=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(h="Unable to encode submission body")):n===403?(u="Forbidden",h=`Route "${t}" does not match URL "${e}"`):n===404?(u="Not Found",h=`No route matches URL "${e}"`):n===405&&(u="Method Not Allowed",r&&e&&t?h=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(h=`Invalid request method "${r.toUpperCase()}"`)),new pm(n||500,u,new Error(h),!0)}function kf(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,s]=e[t];if(Lo(s))return{key:r,result:s}}}function SI(n){let e=typeof n=="string"?za(n):n;return Da({...e,hash:""})}function U2(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function z2(n){return AI(n.result)&&S2.has(n.result.status)}function gr(n){return n.type==="error"}function Lo(n){return(n&&n.type)==="redirect"}function ES(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function AI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function F2(n){return w2.has(n.toUpperCase())}function si(n){return T2.has(n.toUpperCase())}function Yv(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function lh(n,e){let t=typeof e=="string"?za(e).search:e.search;if(n[n.length-1].route.index&&Yv(t||""))return n[n.length-1];let r=vI(n);return r[r.length-1]}function TS(n){let{formMethod:e,formAction:t,formEncType:r,text:s,formData:o,json:u}=n;if(!(!e||!t||!r)){if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:s};if(o!=null)return{formMethod:e,formAction:t,formEncType:r,formData:o,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:u,text:void 0}}}function Qy(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function B2(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Qc(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function q2(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function ma(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function H2(n,e){try{let t=n.sessionStorage.getItem(TI);if(t){let r=JSON.parse(t);for(let[s,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(s,new Set(o||[]))}}catch{}}function G2(n,e){if(e.size>0){let t={};for(let[r,s]of e)t[r]=[...s];try{n.sessionStorage.setItem(TI,JSON.stringify(t))}catch(r){In(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function $2(){let n,e,t=new Promise((r,s)=>{n=async o=>{r(o);try{await t}catch{}},e=async o=>{s(o);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var tl=B.createContext(null);tl.displayName="DataRouter";var Zh=B.createContext(null);Zh.displayName="DataRouterState";var Xv=B.createContext({isTransitioning:!1});Xv.displayName="ViewTransition";var RI=B.createContext(new Map);RI.displayName="Fetchers";var K2=B.createContext(null);K2.displayName="Await";var mi=B.createContext(null);mi.displayName="Navigation";var np=B.createContext(null);np.displayName="Location";var pi=B.createContext({outlet:null,matches:[],isDataRoute:!1});pi.displayName="Route";var Zv=B.createContext(null);Zv.displayName="RouteError";function W2(n,{relative:e}={}){et(Vu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=B.useContext(mi),{hash:s,pathname:o,search:u}=ed(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:Li([t,o])),r.createHref({pathname:h,search:u,hash:s})}function Vu(){return B.useContext(np)!=null}function Fa(){return et(Vu(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(np).location}var II="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xI(n){B.useContext(mi).static||B.useLayoutEffect(n)}function Jh(){let{isDataRoute:n}=B.useContext(pi);return n?uk():Q2()}function Q2(){et(Vu(),"useNavigate() may be used only in the context of a <Router> component.");let n=B.useContext(tl),{basename:e,navigator:t}=B.useContext(mi),{matches:r}=B.useContext(pi),{pathname:s}=Fa(),o=JSON.stringify(ep(r)),u=B.useRef(!1);return xI(()=>{u.current=!0}),B.useCallback((d,p={})=>{if(In(u.current,II),!u.current)return;if(typeof d=="number"){t.go(d);return}let y=tp(d,JSON.parse(o),s,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Li([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,o,s,n])}var Y2=B.createContext(null);function X2(n){let e=B.useContext(pi).outlet;return e&&B.createElement(Y2.Provider,{value:n},e)}function ed(n,{relative:e}={}){let{matches:t}=B.useContext(pi),{pathname:r}=Fa(),s=JSON.stringify(ep(t));return B.useMemo(()=>tp(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function Z2(n,e,t,r){et(Vu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=B.useContext(mi),{matches:u}=B.useContext(pi),h=u[u.length-1],d=h?h.params:{},p=h?h.pathname:"/",y=h?h.pathnameBase:"/",v=h&&h.route;{let Z=v&&v.path||"";CI(p,!v||Z.endsWith("*")||Z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${Z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Z}"> to <Route path="${Z==="/"?"*":`${Z}/*`}">.`)}let b=Fa(),A;A=b;let C=A.pathname||"/",F=C;if(y!=="/"){let Z=y.replace(/^\//,"").split("/");F="/"+C.replace(/^\//,"").split("/").slice(Z.length).join("/")}let M=!o&&t&&t.matches&&t.matches.length>0?t.matches:ga(n,{pathname:F});return In(v||M!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),In(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),rk(M&&M.map(Z=>Object.assign({},Z,{params:Object.assign({},d,Z.params),pathname:Li([y,s.encodeLocation?s.encodeLocation(Z.pathname).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?y:Li([y,s.encodeLocation?s.encodeLocation(Z.pathnameBase).pathname:Z.pathnameBase])})),u,t,r)}function J2(){let n=lk(),e=xh(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=B.createElement(B.Fragment,null,B.createElement("p",null,"💿 Hey developer 👋"),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:o},"ErrorBoundary")," or"," ",B.createElement("code",{style:o},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:s},t):null,u)}var ek=B.createElement(J2,null),tk=class extends B.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?B.createElement(pi.Provider,{value:this.props.routeContext},B.createElement(Zv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function nk({routeContext:n,match:e,children:t}){let r=B.useContext(tl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),B.createElement(pi.Provider,{value:n},t)}function rk(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let d=s.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);et(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let u=!1,h=-1;if(t)for(let d=0;d<s.length;d++){let p=s[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=d),p.route.id){let{loaderData:y,errors:v}=t,b=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||b){u=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((d,p,y)=>{let v,b=!1,A=null,C=null;t&&(v=o&&p.route.id?o[p.route.id]:void 0,A=p.route.errorElement||ek,u&&(h<0&&y===0?(CI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,C=null):h===y&&(b=!0,C=p.route.hydrateFallbackElement||null)));let F=e.concat(s.slice(0,y+1)),M=()=>{let Y;return v?Y=A:b?Y=C:p.route.Component?Y=B.createElement(p.route.Component,null):p.route.element?Y=p.route.element:Y=d,B.createElement(nk,{match:p,routeContext:{outlet:d,matches:F,isDataRoute:t!=null},children:Y})};return t&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?B.createElement(tk,{location:t.location,revalidation:t.revalidation,component:A,error:v,children:M(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):M()},null)}function Jv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ik(n){let e=B.useContext(tl);return et(e,Jv(n)),e}function sk(n){let e=B.useContext(Zh);return et(e,Jv(n)),e}function ak(n){let e=B.useContext(pi);return et(e,Jv(n)),e}function e0(n){let e=ak(n),t=e.matches[e.matches.length-1];return et(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function ok(){return e0("useRouteId")}function lk(){var r;let n=B.useContext(Zv),e=sk("useRouteError"),t=e0("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function uk(){let{router:n}=ik("useNavigate"),e=e0("useNavigate"),t=B.useRef(!1);return xI(()=>{t.current=!0}),B.useCallback(async(s,o={})=>{In(t.current,II),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var bS={};function CI(n,e,t){!e&&!bS[n]&&(bS[n]=!0,In(!1,t))}var wS={};function SS(n,e){!n&&!wS[e]&&(wS[e]=!0,console.warn(e))}function ck(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&In(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:B.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&In(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:B.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&In(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:B.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var hk=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function dk({router:n,flushSync:e}){let[t,r]=B.useState(n.state),[s,o]=B.useState(),[u,h]=B.useState({isTransitioning:!1}),[d,p]=B.useState(),[y,v]=B.useState(),[b,A]=B.useState(),C=B.useRef(new Map),F=B.useCallback((ee,{deletedFetchers:te,flushSync:se,viewTransitionOpts:V})=>{ee.fetchers.forEach((x,I)=>{x.data!==void 0&&C.current.set(I,x.data)}),te.forEach(x=>C.current.delete(x)),SS(se===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let D=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(SS(V==null||D,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!V||!D){e&&se?e(()=>r(ee)):B.startTransition(()=>r(ee));return}if(e&&se){e(()=>{y&&(d&&d.resolve(),y.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:V.currentLocation,nextLocation:V.nextLocation})});let x=n.window.document.startViewTransition(()=>{e(()=>r(ee))});x.finished.finally(()=>{e(()=>{p(void 0),v(void 0),o(void 0),h({isTransitioning:!1})})}),e(()=>v(x));return}y?(d&&d.resolve(),y.skipTransition(),A({state:ee,currentLocation:V.currentLocation,nextLocation:V.nextLocation})):(o(ee),h({isTransitioning:!0,flushSync:!1,currentLocation:V.currentLocation,nextLocation:V.nextLocation}))},[n.window,e,y,d]);B.useLayoutEffect(()=>n.subscribe(F),[n,F]),B.useEffect(()=>{u.isTransitioning&&!u.flushSync&&p(new hk)},[u]),B.useEffect(()=>{if(d&&s&&n.window){let ee=s,te=d.promise,se=n.window.document.startViewTransition(async()=>{B.startTransition(()=>r(ee)),await te});se.finished.finally(()=>{p(void 0),v(void 0),o(void 0),h({isTransitioning:!1})}),v(se)}},[s,d,n.window]),B.useEffect(()=>{d&&s&&t.location.key===s.location.key&&d.resolve()},[d,y,t.location,s]),B.useEffect(()=>{!u.isTransitioning&&b&&(o(b.state),h({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}),A(void 0))},[u.isTransitioning,b]);let M=B.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:ee=>n.navigate(ee),push:(ee,te,se)=>n.navigate(ee,{state:te,preventScrollReset:se==null?void 0:se.preventScrollReset}),replace:(ee,te,se)=>n.navigate(ee,{replace:!0,state:te,preventScrollReset:se==null?void 0:se.preventScrollReset})}),[n]),Y=n.basename||"/",Z=B.useMemo(()=>({router:n,navigator:M,static:!1,basename:Y}),[n,M,Y]);return B.createElement(B.Fragment,null,B.createElement(tl.Provider,{value:Z},B.createElement(Zh.Provider,{value:t},B.createElement(RI.Provider,{value:C.current},B.createElement(Xv.Provider,{value:u},B.createElement(pk,{basename:Y,location:t.location,navigationType:t.historyAction,navigator:M},B.createElement(fk,{routes:n.routes,future:n.future,state:t})))))),null)}var fk=B.memo(mk);function mk({routes:n,future:e,state:t}){return Z2(n,void 0,t,e)}function NI({to:n,replace:e,state:t,relative:r}){et(Vu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=B.useContext(mi);In(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=B.useContext(pi),{pathname:u}=Fa(),h=Jh(),d=tp(n,ep(o),u,r==="path"),p=JSON.stringify(d);return B.useEffect(()=>{h(JSON.parse(p),{replace:e,state:t,relative:r})},[h,p,r,e,t]),null}function OI(n){return X2(n.context)}function pk({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){et(!Vu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=B.useMemo(()=>({basename:u,navigator:s,static:o,future:{}}),[u,s,o]);typeof t=="string"&&(t=za(t));let{pathname:d="/",search:p="",hash:y="",state:v=null,key:b="default"}=t,A=B.useMemo(()=>{let C=di(d,u);return C==null?null:{location:{pathname:C,search:p,hash:y,state:v,key:b},navigationType:r}},[u,d,p,y,v,b,r]);return In(A!=null,`<Router basename="${u}"> is not able to match the URL "${d}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:B.createElement(mi.Provider,{value:h},B.createElement(np.Provider,{children:e,value:A}))}var Qf="get",Yf="application/x-www-form-urlencoded";function rp(n){return n!=null&&typeof n.tagName=="string"}function gk(n){return rp(n)&&n.tagName.toLowerCase()==="button"}function yk(n){return rp(n)&&n.tagName.toLowerCase()==="form"}function _k(n){return rp(n)&&n.tagName.toLowerCase()==="input"}function vk(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Ek(n,e){return n.button===0&&(!e||e==="_self")&&!vk(n)}var Pf=null;function Tk(){if(Pf===null)try{new FormData(document.createElement("form"),0),Pf=!1}catch{Pf=!0}return Pf}var bk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yy(n){return n!=null&&!bk.has(n)?(In(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yf}"`),null):n}function wk(n,e){let t,r,s,o,u;if(yk(n)){let h=n.getAttribute("action");r=h?di(h,e):null,t=n.getAttribute("method")||Qf,s=Yy(n.getAttribute("enctype"))||Yf,o=new FormData(n)}else if(gk(n)||_k(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||h.getAttribute("action");if(r=d?di(d,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||Qf,s=Yy(n.getAttribute("formenctype"))||Yy(h.getAttribute("enctype"))||Yf,o=new FormData(h,n),!Tk()){let{name:p,type:y,value:v}=n;if(y==="image"){let b=p?`${p}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else p&&o.append(p,v)}}else{if(rp(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Qf,r=null,s=Yf,u=n}return o&&s==="text/plain"&&(u=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:u}}function t0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Sk(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ak(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Rk(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let u=await Sk(o,t);return u.links?u.links():[]}return[]}));return Nk(r.flat(1).filter(Ak).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function AS(n,e,t,r,s,o){let u=(d,p)=>t[p]?d.route.id!==t[p].route.id:!0,h=(d,p)=>{var y;return t[p].pathname!==d.pathname||((y=t[p].route.path)==null?void 0:y.endsWith("*"))&&t[p].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,p)=>u(d,p)||h(d,p)):o==="data"?e.filter((d,p)=>{var v;let y=r.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(u(d,p)||h(d,p))return!0;if(d.route.shouldRevalidate){let b=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function Ik(n,e,{includeHydrateFallback:t}={}){return xk(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function xk(n){return[...new Set(n)]}function Ck(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function Nk(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(Ck(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function Ok(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function Dk(){let n=B.useContext(tl);return t0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function kk(){let n=B.useContext(Zh);return t0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var n0=B.createContext(void 0);n0.displayName="FrameworkContext";function DI(){let n=B.useContext(n0);return t0(n,"You must render this element inside a <HydratedRouter> element"),n}function Pk(n,e){let t=B.useContext(n0),[r,s]=B.useState(!1),[o,u]=B.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=e,b=B.useRef(null);B.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let F=Y=>{Y.forEach(Z=>{u(Z.isIntersecting)})},M=new IntersectionObserver(F,{threshold:.5});return b.current&&M.observe(b.current),()=>{M.disconnect()}}},[n]),B.useEffect(()=>{if(r){let F=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(F)}}},[r]);let A=()=>{s(!0)},C=()=>{s(!1),u(!1)};return t?n!=="intent"?[o,b,{}]:[o,b,{onFocus:Yc(h,A),onBlur:Yc(d,C),onMouseEnter:Yc(p,A),onMouseLeave:Yc(y,C),onTouchStart:Yc(v,A)}]:[!1,b,{}]}function Yc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Mk({page:n,...e}){let{router:t}=Dk(),r=B.useMemo(()=>ga(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?B.createElement(Lk,{page:n,matches:r,...e}):null}function Vk(n){let{manifest:e,routeModules:t}=DI(),[r,s]=B.useState([]);return B.useEffect(()=>{let o=!1;return Rk(n,e,t).then(u=>{o||s(u)}),()=>{o=!0}},[n,e,t]),r}function Lk({page:n,matches:e,...t}){let r=Fa(),{manifest:s,routeModules:o}=DI(),{loaderData:u,matches:h}=kk(),d=B.useMemo(()=>AS(n,e,h,s,r,"data"),[n,e,h,s,r]),p=B.useMemo(()=>AS(n,e,h,s,r,"assets"),[n,e,h,s,r]),y=B.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let A=new Set,C=!1;if(e.forEach(M=>{var Z;let Y=s.routes[M.route.id];!Y||!Y.hasLoader||(!d.some(ee=>ee.route.id===M.route.id)&&M.route.id in u&&((Z=o[M.route.id])!=null&&Z.shouldRevalidate)||Y.hasClientLoader?C=!0:A.add(M.route.id))}),A.size===0)return[];let F=Ok(n);return C&&A.size>0&&F.searchParams.set("_routes",e.filter(M=>A.has(M.route.id)).map(M=>M.route.id).join(",")),[F.pathname+F.search]},[u,r,s,d,e,n,o]),v=B.useMemo(()=>Ik(p,s),[p,s]),b=Vk(p);return B.createElement(B.Fragment,null,y.map(A=>B.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),v.map(A=>B.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),b.map(({key:A,link:C})=>B.createElement("link",{key:A,...C})))}function jk(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var kI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kI&&(window.__reactRouterVersion="7.2.0")}catch{}function Uk(n,e){return x2({basename:e==null?void 0:e.basename,future:e==null?void 0:e.future,history:ZD({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||zk(),routes:n,mapRouteProperties:ck,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function zk(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:Fk(n.errors)}),n}function Fk(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")t[r]=new pm(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let o=window[s.__subType];if(typeof o=="function")try{let u=new o(s.message);u.stack="",t[r]=u}catch{}}if(t[r]==null){let o=new Error(s.message);o.stack="",t[r]=o}}else t[r]=s;return t}var PI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,MI=B.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:u,state:h,target:d,to:p,preventScrollReset:y,viewTransition:v,...b},A){let{basename:C}=B.useContext(mi),F=typeof p=="string"&&PI.test(p),M,Y=!1;if(typeof p=="string"&&F&&(M=p,kI))try{let I=new URL(window.location.href),O=p.startsWith("//")?new URL(I.protocol+p):new URL(p),j=di(O.pathname,C);O.origin===I.origin&&j!=null?p=j+O.search+O.hash:Y=!0}catch{In(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Z=W2(p,{relative:s}),[ee,te,se]=Pk(r,b),V=Hk(p,{replace:u,state:h,target:d,preventScrollReset:y,relative:s,viewTransition:v});function D(I){e&&e(I),I.defaultPrevented||V(I)}let x=B.createElement("a",{...b,...se,href:M||Z,onClick:Y||o?e:D,ref:jk(A,te),target:d,"data-discover":!F&&t==="render"?"true":void 0});return ee&&!F?B.createElement(B.Fragment,null,x,B.createElement(Mk,{page:Z})):x});MI.displayName="Link";var A_=B.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:u,viewTransition:h,children:d,...p},y){let v=ed(u,{relative:p.relative}),b=Fa(),A=B.useContext(Zh),{navigator:C,basename:F}=B.useContext(mi),M=A!=null&&Qk(v)&&h===!0,Y=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,Z=b.pathname,ee=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(Z=Z.toLowerCase(),ee=ee?ee.toLowerCase():null,Y=Y.toLowerCase()),ee&&F&&(ee=di(ee,F)||ee);const te=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let se=Z===Y||!s&&Z.startsWith(Y)&&Z.charAt(te)==="/",V=ee!=null&&(ee===Y||!s&&ee.startsWith(Y)&&ee.charAt(Y.length)==="/"),D={isActive:se,isPending:V,isTransitioning:M},x=se?e:void 0,I;typeof r=="function"?I=r(D):I=[r,se?"active":null,V?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let O=typeof o=="function"?o(D):o;return B.createElement(MI,{...p,"aria-current":x,className:I,ref:y,style:O,to:u,viewTransition:h},typeof d=="function"?d(D):d)});A_.displayName="NavLink";var Bk=B.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:u=Qf,action:h,onSubmit:d,relative:p,preventScrollReset:y,viewTransition:v,...b},A)=>{let C=Kk(),F=Wk(h,{relative:p}),M=u.toLowerCase()==="get"?"get":"post",Y=typeof h=="string"&&PI.test(h),Z=ee=>{if(d&&d(ee),ee.defaultPrevented)return;ee.preventDefault();let te=ee.nativeEvent.submitter,se=(te==null?void 0:te.getAttribute("formmethod"))||u;C(te||ee.currentTarget,{fetcherKey:e,method:se,navigate:t,replace:s,state:o,relative:p,preventScrollReset:y,viewTransition:v})};return B.createElement("form",{ref:A,method:M,action:F,onSubmit:r?d:Z,...b,"data-discover":!Y&&n==="render"?"true":void 0})});Bk.displayName="Form";function qk(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VI(n){let e=B.useContext(tl);return et(e,qk(n)),e}function Hk(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:u}={}){let h=Jh(),d=Fa(),p=ed(n,{relative:o});return B.useCallback(y=>{if(Ek(y,e)){y.preventDefault();let v=t!==void 0?t:Da(d)===Da(p);h(n,{replace:v,state:r,preventScrollReset:s,relative:o,viewTransition:u})}},[d,h,p,t,r,e,n,s,o,u])}var Gk=0,$k=()=>`__${String(++Gk)}__`;function Kk(){let{router:n}=VI("useSubmit"),{basename:e}=B.useContext(mi),t=ok();return B.useCallback(async(r,s={})=>{let{action:o,method:u,encType:h,formData:d,body:p}=wk(r,e);if(s.navigate===!1){let y=s.fetcherKey||$k();await n.fetch(y,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:p,formMethod:s.method||u,formEncType:s.encType||h,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:p,formMethod:s.method||u,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function Wk(n,{relative:e}={}){let{basename:t}=B.useContext(mi),r=B.useContext(pi);et(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...ed(n||".",{relative:e})},u=Fa();if(n==null){o.search=u.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(y=>y==="")){h.delete("index"),d.filter(v=>v).forEach(v=>h.append("index",v));let y=h.toString();o.search=y?`?${y}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Li([t,o.pathname])),Da(o)}function Qk(n,e={}){let t=B.useContext(Xv);et(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=VI("useViewTransitionState"),s=ed(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=di(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=di(t.nextLocation.pathname,r)||t.nextLocation.pathname;return mm(s.pathname,u)!=null||mm(s.pathname,o)!=null}new TextEncoder;var Yk=gI();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xk(n){return B.createElement(dk,{flushSync:Yk.flushSync,...n})}const Zk=()=>{};var RS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee=function(n,e){if(!n)throw Lu(e)},Lu=function(n){return new Error("Firebase Database ("+LI.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Jk=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],u=n[t++],h=n[t++],d=((s&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return e.join("")},r0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],u=s+1<n.length,h=u?n[s+1]:0,d=s+2<n.length,p=d?n[s+2]:0,y=o>>2,v=(o&3)<<4|h>>4;let b=(h&15)<<2|p>>6,A=p&63;d||(A=64,u||(b=64)),r.push(t[y],t[v],t[b],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(jI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Jk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||h==null||p==null||v==null)throw new eP;const b=o<<2|h>>4;if(r.push(b),p!==64){const A=h<<4&240|p>>2;if(r.push(A),v!==64){const C=p<<6&192|v;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class eP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UI=function(n){const e=jI(n);return r0.encodeByteArray(e,!0)},gm=function(n){return UI(n).replace(/\./g,"")},ym=function(n){try{return r0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(n){return zI(void 0,n)}function zI(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!nP(t)||(n[t]=zI(n[t],e[t]));return n}function nP(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=()=>rP().__FIREBASE_DEFAULTS__,sP=()=>{if(typeof process>"u"||typeof RS>"u")return;const n=RS.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},aP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ym(n[1]);return e&&JSON.parse(e)},ip=()=>{try{return Zk()||iP()||sP()||aP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},FI=n=>{var e,t;return(t=(e=ip())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},BI=n=>{const e=FI(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},qI=()=>{var n;return(n=ip())===null||n===void 0?void 0:n.config},HI=n=>{var e;return(e=ip())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[gm(JSON.stringify(t)),gm(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function s0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function oP(){var n;const e=(n=ip())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $I(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cP(){const n=pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function hP(){return LI.NODE_ADMIN===!0}function KI(){return!oP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WI(){try{return typeof indexedDB=="object"}catch{return!1}}function dP(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP="FirebaseError";class Bi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=fP,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,td.prototype.create)}}class td{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],u=o?mP(o,r):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new Bi(s,h,r)}}function mP(n,e){return n.replace(pP,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const pP=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(n){return JSON.parse(n)}function Pn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=function(n){let e={},t={},r={},s="";try{const o=n.split(".");e=Ch(ym(o[0])||""),t=Ch(ym(o[1])||""),s=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:s}},gP=function(n){const e=QI(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},yP=function(n){const e=QI(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function yu(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function R_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _m(n,e,t){const r={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=e.call(t,n[s],s,n));return r}function ka(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],u=e[s];if(IS(o)&&IS(u)){if(!ka(o,u))return!1}else if(o!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function IS(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function ch(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)r[v]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let v=0;v<16;v++)r[v]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let v=16;v<80;v++){const b=r[v-3]^r[v-8]^r[v-14]^r[v-16];r[v]=(b<<1|b>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],u=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p,y;for(let v=0;v<80;v++){v<40?v<20?(p=h^o&(u^h),y=1518500249):(p=o^u^h,y=1859775393):v<60?(p=o&u|h&(o|u),y=2400959708):(p=o^u^h,y=3395469782);const b=(s<<5|s>>>27)+p+d+y+r[v]&4294967295;d=h,h=u,u=(o<<30|o>>>2)&4294967295,o=s,s=b}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let s=0;const o=this.buf_;let u=this.inbuf_;for(;s<t;){if(u===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(o[u]=e.charCodeAt(s),++u,++s,u===this.blockSize){this.compress_(o),u=0;break}}else for(;s<t;)if(o[u]=e[s],++u,++s,u===this.blockSize){this.compress_(o),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[s]>>o&255,++r;return e}}function vP(n,e){const t=new EP(n,e);return t.subscribe.bind(t)}class EP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");TP(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Xy),s.error===void 0&&(s.error=Xy),s.complete===void 0&&(s.complete=Xy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Xy(){}function bP(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);if(s>=55296&&s<=56319){const o=s-55296;r++,Ee(r<n.length,"Surrogate pair missing trail surrogate.");const u=n.charCodeAt(r)-56320;s=65536+(o<<10)+u}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},sp=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(n){return n&&n._delegate?n._delegate:n}class bs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new i0;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RP(e))try{this.getOrInitializeService({instanceIdentifier:Io})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Io){return this.instances.has(e)}getOptions(e=Io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AP(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Io){return this.component?this.component.multipleInstances?e:Io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AP(n){return n===Io?void 0:n}function RP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new SP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ze||(Ze={}));const xP={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},CP=Ze.INFO,NP={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},OP=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=NP[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ap{constructor(e){this.name=e,this._logLevel=CP,this._logHandler=OP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const DP=(n,e)=>e.some(t=>n instanceof t);let xS,CS;function kP(){return xS||(xS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PP(){return CS||(CS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YI=new WeakMap,I_=new WeakMap,XI=new WeakMap,Zy=new WeakMap,a0=new WeakMap;function MP(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(wa(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&YI.set(t,n)}).catch(()=>{}),a0.set(e,n),e}function VP(n){if(I_.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});I_.set(n,e)}let x_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return I_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||XI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function LP(n){x_=n(x_)}function jP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Jy(this),e,...t);return XI.set(r,e.sort?e.sort():[e]),wa(r)}:PP().includes(n)?function(...e){return n.apply(Jy(this),e),wa(YI.get(this))}:function(...e){return wa(n.apply(Jy(this),e))}}function UP(n){return typeof n=="function"?jP(n):(n instanceof IDBTransaction&&VP(n),DP(n,kP())?new Proxy(n,x_):n)}function wa(n){if(n instanceof IDBRequest)return MP(n);if(Zy.has(n))return Zy.get(n);const e=UP(n);return e!==n&&(Zy.set(n,e),a0.set(e,n)),e}const Jy=n=>a0.get(n);function zP(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const u=indexedDB.open(n,e),h=wa(u);return r&&u.addEventListener("upgradeneeded",d=>{r(wa(u.result),d.oldVersion,d.newVersion,wa(u.transaction),d)}),t&&u.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const FP=["get","getKey","getAll","getAllKeys","count"],BP=["put","add","delete","clear"],e_=new Map;function NS(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(e_.get(e))return e_.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=BP.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||FP.includes(t)))return;const o=async function(u,...h){const d=this.transaction(u,s?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),s&&d.done]))[0]};return e_.set(e,o),o}LP(n=>({...n,get:(e,t,r)=>NS(e,t)||n.get(e,t,r),has:(e,t)=>!!NS(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(HP(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function HP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const C_="@firebase/app",OS="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new ap("@firebase/app"),GP="@firebase/app-compat",$P="@firebase/analytics-compat",KP="@firebase/analytics",WP="@firebase/app-check-compat",QP="@firebase/app-check",YP="@firebase/auth",XP="@firebase/auth-compat",ZP="@firebase/database",JP="@firebase/data-connect",eM="@firebase/database-compat",tM="@firebase/functions",nM="@firebase/functions-compat",rM="@firebase/installations",iM="@firebase/installations-compat",sM="@firebase/messaging",aM="@firebase/messaging-compat",oM="@firebase/performance",lM="@firebase/performance-compat",uM="@firebase/remote-config",cM="@firebase/remote-config-compat",hM="@firebase/storage",dM="@firebase/storage-compat",fM="@firebase/firestore",mM="@firebase/vertexai",pM="@firebase/firestore-compat",gM="firebase",yM="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="[DEFAULT]",_M={[C_]:"fire-core",[GP]:"fire-core-compat",[KP]:"fire-analytics",[$P]:"fire-analytics-compat",[QP]:"fire-app-check",[WP]:"fire-app-check-compat",[YP]:"fire-auth",[XP]:"fire-auth-compat",[ZP]:"fire-rtdb",[JP]:"fire-data-connect",[eM]:"fire-rtdb-compat",[tM]:"fire-fn",[nM]:"fire-fn-compat",[rM]:"fire-iid",[iM]:"fire-iid-compat",[sM]:"fire-fcm",[aM]:"fire-fcm-compat",[oM]:"fire-perf",[lM]:"fire-perf-compat",[uM]:"fire-rc",[cM]:"fire-rc-compat",[hM]:"fire-gcs",[dM]:"fire-gcs-compat",[fM]:"fire-fst",[pM]:"fire-fst-compat",[mM]:"fire-vertex","fire-js":"fire-js",[gM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=new Map,vM=new Map,O_=new Map;function DS(n,e){try{n.container.addComponent(e)}catch(t){ws.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pa(n){const e=n.name;if(O_.has(e))return ws.debug(`There were multiple attempts to register component ${e}.`),!1;O_.set(e,n);for(const t of vm.values())DS(t,n);for(const t of vM.values())DS(t,n);return!0}function nd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _r(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sa=new td("app","Firebase",EM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=yM;function ZI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:N_,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Sa.create("bad-app-name",{appName:String(s)});if(t||(t=qI()),!t)throw Sa.create("no-options");const o=vm.get(s);if(o){if(ka(t,o.options)&&ka(r,o.config))return o;throw Sa.create("duplicate-app",{appName:s})}const u=new IP(s);for(const d of O_.values())u.addComponent(d);const h=new TM(t,r,u);return vm.set(s,h),h}function o0(n=N_){const e=vm.get(n);if(!e&&n===N_&&qI())return ZI();if(!e)throw Sa.create("no-app",{appName:n});return e}function $r(n,e,t){var r;let s=(r=_M[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ws.warn(h.join(" "));return}Pa(new bs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM="firebase-heartbeat-database",wM=1,Nh="firebase-heartbeat-store";let t_=null;function JI(){return t_||(t_=zP(bM,wM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Nh)}catch(t){console.warn(t)}}}}).catch(n=>{throw Sa.create("idb-open",{originalErrorMessage:n.message})})),t_}async function SM(n){try{const t=(await JI()).transaction(Nh),r=await t.objectStore(Nh).get(ex(n));return await t.done,r}catch(e){if(e instanceof Bi)ws.warn(e.message);else{const t=Sa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ws.warn(t.message)}}}async function kS(n,e){try{const r=(await JI()).transaction(Nh,"readwrite");await r.objectStore(Nh).put(e,ex(n)),await r.done}catch(t){if(t instanceof Bi)ws.warn(t.message);else{const r=Sa.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ws.warn(r.message)}}}function ex(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=1024,RM=30;class IM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new CM(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=PS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>RM){const u=NM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ws.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=PS(),{heartbeatsToSend:r,unsentEntries:s}=xM(this._heartbeatsCache.heartbeats),o=gm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ws.warn(t),""}}}function PS(){return new Date().toISOString().substring(0,10)}function xM(n,e=AM){const t=[];let r=n.slice();for(const s of n){const o=t.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),MS(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),MS(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class CM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WI()?dP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await SM(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return kS(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return kS(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function MS(n){return gm(JSON.stringify({version:2,heartbeats:n})).length}function NM(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(n){Pa(new bs("platform-logger",e=>new qP(e),"PRIVATE")),Pa(new bs("heartbeat",e=>new IM(e),"PRIVATE")),$r(C_,OS,n),$r(C_,OS,"esm2017"),$r("fire-js","")}OM("");function l0(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function tx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DM=tx,nx=new td("auth","Firebase",tx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em=new ap("@firebase/auth");function kM(n,...e){Em.logLevel<=Ze.WARN&&Em.warn(`Auth (${Ba}): ${n}`,...e)}function Xf(n,...e){Em.logLevel<=Ze.ERROR&&Em.error(`Auth (${Ba}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(n,...e){throw u0(n,...e)}function ji(n,...e){return u0(n,...e)}function rx(n,e,t){const r=Object.assign(Object.assign({},DM()),{[e]:t});return new td("auth","Firebase",r).create(e,{appName:n.name})}function Aa(n){return rx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function u0(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return nx.create(n,...e)}function Ue(n,e,...t){if(!n)throw u0(e,...t)}function gs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Xf(e),new Error(e)}function Ss(n,e){n||gs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function PM(){return VS()==="http:"||VS()==="https:"}function VS(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PM()||uP()||"connection"in navigator)?navigator.onLine:!0}function VM(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ss(t>e,"Short delay should be less than long delay!"),this.isMobile=s0()||$I()}get(){return MM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(n,e){Ss(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=new rd(3e4,6e4);function nl(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function qa(n,e,t,r,s={}){return sx(n,s,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const h=ju(Object.assign({key:n.config.apiKey},u)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:d},o);return lP()||(p.referrerPolicy="no-referrer"),ix.fetch()(ax(n,n.config.apiHost,t,h),p)})}async function sx(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},LM),e);try{const s=new zM(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Mf(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mf(n,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw Mf(n,"email-already-in-use",u);if(d==="USER_DISABLED")throw Mf(n,"user-disabled",u);const y=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw rx(n,y,p);fi(n,y)}}catch(s){if(s instanceof Bi)throw s;fi(n,"network-request-failed",{message:String(s)})}}async function op(n,e,t,r,s={}){const o=await qa(n,e,t,r,s);return"mfaPendingCredential"in o&&fi(n,"multi-factor-auth-required",{_serverResponse:o}),o}function ax(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?c0(n.config,s):`${n.config.apiScheme}://${s}`}function UM(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ji(this.auth,"network-request-failed")),jM.get())})}}function Mf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=ji(n,e,r);return s.customData._tokenResponse=t,s}function LS(n){return n!==void 0&&n.enterprise!==void 0}class FM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return UM(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function BM(n,e){return qa(n,"GET","/v2/recaptchaConfig",nl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qM(n,e){return qa(n,"POST","/v1/accounts:delete",e)}async function ox(n,e){return qa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HM(n,e=!1){const t=en(n),r=await t.getIdToken(e),s=h0(r);Ue(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:gh(n_(s.auth_time)),issuedAtTime:gh(n_(s.iat)),expirationTime:gh(n_(s.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function n_(n){return Number(n)*1e3}function h0(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Xf("JWT malformed, contained fewer than 3 sections"),null;try{const s=ym(t);return s?JSON.parse(s):(Xf("Failed to decode base64 JWT payload"),null)}catch(s){return Xf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function jS(n){const e=h0(n);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oh(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Bi&&GM(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function GM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gh(this.lastLoginAt),this.creationTime=gh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tm(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Oh(n,ox(t,{idToken:r}));Ue(s==null?void 0:s.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?lx(o.providerUserInfo):[],h=WM(n.providerData,u),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),y=d?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new k_(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function KM(n){const e=en(n);await Tm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WM(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function lx(n){return n.map(e=>{var{providerId:t}=e,r=l0(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QM(n,e){const t=await sx(n,{},async()=>{const r=ju({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,u=ax(n,s,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",ix.fetch()(u,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function YM(n,e){return qa(n,"POST","/v2/accounts:revokeToken",nl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const t=jS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await QM(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,u=new cu;return r&&(Ue(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Ue(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),o&&(Ue(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cu,this.toJSON())}_performRefresh(){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(n,e){Ue(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ys{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=l0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $M(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new k_(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Oh(this,this.stsTokenManager.getToken(this.auth,e));return Ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return HM(this,e)}reload(){return KM(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ys(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Tm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_r(this.auth.app))return Promise.reject(Aa(this.auth));const e=await this.getIdToken();return await Oh(this,qM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,u,h,d,p,y;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,b=(s=t.email)!==null&&s!==void 0?s:void 0,A=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(u=t.photoURL)!==null&&u!==void 0?u:void 0,F=(h=t.tenantId)!==null&&h!==void 0?h:void 0,M=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,Y=(p=t.createdAt)!==null&&p!==void 0?p:void 0,Z=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:ee,emailVerified:te,isAnonymous:se,providerData:V,stsTokenManager:D}=t;Ue(ee&&D,e,"internal-error");const x=cu.fromJSON(this.name,D);Ue(typeof ee=="string",e,"internal-error"),ca(v,e.name),ca(b,e.name),Ue(typeof te=="boolean",e,"internal-error"),Ue(typeof se=="boolean",e,"internal-error"),ca(A,e.name),ca(C,e.name),ca(F,e.name),ca(M,e.name),ca(Y,e.name),ca(Z,e.name);const I=new ys({uid:ee,auth:e,email:b,emailVerified:te,displayName:v,isAnonymous:se,photoURL:C,phoneNumber:A,tenantId:F,stsTokenManager:x,createdAt:Y,lastLoginAt:Z});return V&&Array.isArray(V)&&(I.providerData=V.map(O=>Object.assign({},O))),M&&(I._redirectEventId=M),I}static async _fromIdTokenResponse(e,t,r=!1){const s=new cu;s.updateFromServerResponse(t);const o=new ys({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Tm(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Ue(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?lx(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new cu;h.updateFromIdToken(r);const d=new ys({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:u}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new k_(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=new Map;function _s(n){Ss(n instanceof Function,"Expected a class definition");let e=US.get(n);return e?(Ss(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,US.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ux.type="NONE";const zS=ux;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(n,e,t){return`firebase:${n}:${e}:${t}`}class hu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Zf(this.userKey,s.apiKey,o),this.fullPersistenceKey=Zf("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ys._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new hu(_s(zS),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||_s(zS);const u=Zf(r,e.config.apiKey,e.name);let h=null;for(const p of t)try{const y=await p._get(u);if(y){const v=ys._fromJSON(e,y);p!==o&&(h=v),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new hu(o,e,r):(o=d[0],h&&await o._set(u,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(u)}catch{}})),new hu(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(px(e))return"Blackberry";if(gx(e))return"Webos";if(hx(e))return"Safari";if((e.includes("chrome/")||dx(e))&&!e.includes("edge/"))return"Chrome";if(mx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function cx(n=pn()){return/firefox\//i.test(n)}function hx(n=pn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dx(n=pn()){return/crios\//i.test(n)}function fx(n=pn()){return/iemobile/i.test(n)}function mx(n=pn()){return/android/i.test(n)}function px(n=pn()){return/blackberry/i.test(n)}function gx(n=pn()){return/webos/i.test(n)}function d0(n=pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function XM(n=pn()){var e;return d0(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZM(){return cP()&&document.documentMode===10}function yx(n=pn()){return d0(n)||mx(n)||gx(n)||px(n)||/windows phone/i.test(n)||fx(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(n,e=[]){let t;switch(n){case"Browser":t=FS(pn());break;case"Worker":t=`${FS(pn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ba}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((u,h)=>{try{const d=e(o);u(d)}catch(d){h(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eV(n,e={}){return qa(n,"GET","/v2/passwordPolicy",nl(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV=6;class nV{constructor(e){var t,r,s,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:tV,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,u,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new BS(this),this.idTokenSubscription=new BS(this),this.beforeStateQueue=new JM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_s(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await hu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ox(this,{idToken:e}),r=await ys._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(_r(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===h)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Tm(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_r(this.app))return Promise.reject(Aa(this));const t=e?en(e):null;return t&&Ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _r(this.app)?Promise.reject(Aa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _r(this.app)?Promise.reject(Aa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_s(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await eV(this),t=new nV(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new td("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await YM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_s(e)||this._popupRedirectResolver;Ue(t,this,"argument-error"),this.redirectPersistenceManager=await hu.create(this,[_s(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{u=!0,d()}}else{const d=e.addObserver(t);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_x(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(_r(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&kM(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Uu(n){return en(n)}class BS{constructor(e){this.auth=e,this.observer=null,this.addObserver=vP(t=>this.observer=t)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iV(n){lp=n}function vx(n){return lp.loadJS(n)}function sV(){return lp.recaptchaEnterpriseScript}function aV(){return lp.gapiScript}function oV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class lV{constructor(){this.enterprise=new uV}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class uV{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const cV="recaptcha-enterprise",Ex="NO_RECAPTCHA";class hV{constructor(e){this.type=cV,this.auth=Uu(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,h)=>{BM(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new FM(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,u(p.siteKey)}}).catch(d=>{h(d)})})}function s(o,u,h){const d=window.grecaptcha;LS(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{u(p)}).catch(()=>{u(Ex)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new lV().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(h=>{if(!t&&LS(window.grecaptcha))s(h,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=sV();d.length!==0&&(d+=h),vx(d).then(()=>{s(h,o,u)}).catch(p=>{u(p)})}}).catch(h=>{u(h)})})}}async function qS(n,e,t,r=!1,s=!1){const o=new hV(n);let u;if(s)u=Ex;else try{u=await o.verify(t)}catch{u=await o.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function HS(n,e,t,r,s){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await qS(n,e,t,t==="getOobCode");return r(n,u)}else return r(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await qS(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(n,e){const t=nd(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(ka(o,e??{}))return s;fi(s,"already-initialized")}return t.initialize({options:e})}function fV(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(_s);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function mV(n,e,t){const r=Uu(n);Ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=Tx(e),{host:u,port:h}=pV(e),d=h===null?"":`:${h}`,p={url:`${o}//${u}${d}/`},y=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ue(ka(p,r.config.emulator)&&ka(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,gV()}function Tx(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function pV(n){const e=Tx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:GS(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:GS(u)}}}function GS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function gV(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gs("not implemented")}_getIdTokenResponse(e){return gs("not implemented")}_linkToIdToken(e,t){return gs("not implemented")}_getReauthenticationResolver(e){return gs("not implemented")}}async function yV(n,e){return qa(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _V(n,e){return op(n,"POST","/v1/accounts:signInWithPassword",nl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vV(n,e){return op(n,"POST","/v1/accounts:signInWithEmailLink",nl(n,e))}async function EV(n,e){return op(n,"POST","/v1/accounts:signInWithEmailLink",nl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh extends f0{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Dh(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Dh(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return HS(e,t,"signInWithPassword",_V);case"emailLink":return vV(e,{email:this._email,oobCode:this._password});default:fi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return HS(e,r,"signUpPassword",yV);case"emailLink":return EV(e,{idToken:t,email:this._email,oobCode:this._password});default:fi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(n,e){return op(n,"POST","/v1/accounts:signInWithIdp",nl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV="http://localhost";class qo extends f0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=l0(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new qo(r,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return du(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,du(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,du(e,t)}buildRequest(){const e={requestUri:TV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ju(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wV(n){const e=uh(ch(n)).link,t=e?uh(ch(e)).deep_link_id:null,r=uh(ch(n)).deep_link_id;return(r?uh(ch(r)).link:null)||r||t||e||n}class m0{constructor(e){var t,r,s,o,u,h;const d=uh(ch(e)),p=(t=d.apiKey)!==null&&t!==void 0?t:null,y=(r=d.oobCode)!==null&&r!==void 0?r:null,v=bV((s=d.mode)!==null&&s!==void 0?s:null);Ue(p&&y&&v,"argument-error"),this.apiKey=p,this.operation=v,this.code=y,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=d.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=wV(e);try{return new m0(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(){this.providerId=zu.PROVIDER_ID}static credential(e,t){return Dh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=m0.parseLink(t);return Ue(r,"argument-error"),Dh._fromEmailAndCode(e,r.code,r.tenantId)}}zu.PROVIDER_ID="password";zu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id extends bx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends id{constructor(){super("facebook.com")}static credential(e){return qo._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ya.credential(e.oauthAccessToken)}catch{return null}}}ya.FACEBOOK_SIGN_IN_METHOD="facebook.com";ya.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends id{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qo._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return _a.credential(t,r)}catch{return null}}}_a.GOOGLE_SIGN_IN_METHOD="google.com";_a.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends id{constructor(){super("github.com")}static credential(e){return qo._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return va.credential(e.oauthAccessToken)}catch{return null}}}va.GITHUB_SIGN_IN_METHOD="github.com";va.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends id{constructor(){super("twitter.com")}static credential(e,t){return qo._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ea.credential(t,r)}catch{return null}}}Ea.TWITTER_SIGN_IN_METHOD="twitter.com";Ea.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await ys._fromIdTokenResponse(e,r,s),u=$S(r);return new _u({user:o,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=$S(r);return new _u({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function $S(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm extends Bi{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,bm.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new bm(e,t,r,s)}}function wx(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?bm._fromErrorAndOperation(n,o,e,r):o})}async function SV(n,e,t=!1){const r=await Oh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _u._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AV(n,e,t=!1){const{auth:r}=n;if(_r(r.app))return Promise.reject(Aa(r));const s="reauthenticate";try{const o=await Oh(n,wx(r,s,e,n),t);Ue(o.idToken,r,"internal-error");const u=h0(o.idToken);Ue(u,r,"internal-error");const{sub:h}=u;return Ue(n.uid===h,r,"user-mismatch"),_u._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&fi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sx(n,e,t=!1){if(_r(n.app))return Promise.reject(Aa(n));const r="signIn",s=await wx(n,r,e),o=await _u._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function RV(n,e){return Sx(Uu(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IV(n){const e=Uu(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function xV(n,e,t){return _r(n.app)?Promise.reject(Aa(n)):RV(en(n),zu.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&IV(n),r})}function CV(n,e,t,r){return en(n).onIdTokenChanged(e,t,r)}function NV(n,e,t){return en(n).beforeAuthStateChanged(e,t)}function OV(n,e,t,r){return en(n).onAuthStateChanged(e,t,r)}function DV(n){return en(n).signOut()}const wm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wm,"1"),this.storage.removeItem(wm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=1e3,PV=10;class Rx extends Ax{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);ZM()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,PV):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},kV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Rx.type="LOCAL";const MV=Rx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix extends Ax{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ix.type="SESSION";const xx=Ix;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new up(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(u).map(async p=>p(t.origin,o)),d=await VV(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}up.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((h,d)=>{const p=p0("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(v){const b=v;if(b.data.eventId===p)switch(b.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(b.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(){return window}function jV(n){Ui().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(){return typeof Ui().WorkerGlobalScope<"u"&&typeof Ui().importScripts=="function"}async function UV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function FV(){return Cx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="firebaseLocalStorageDb",BV=1,Sm="firebaseLocalStorage",Ox="fbase_key";class sd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function cp(n,e){return n.transaction([Sm],e?"readwrite":"readonly").objectStore(Sm)}function qV(){const n=indexedDB.deleteDatabase(Nx);return new sd(n).toPromise()}function P_(){const n=indexedDB.open(Nx,BV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Sm,{keyPath:Ox})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Sm)?e(r):(r.close(),await qV(),e(await P_()))})})}async function KS(n,e,t){const r=cp(n,!0).put({[Ox]:e,value:t});return new sd(r).toPromise()}async function HV(n,e){const t=cp(n,!1).get(e),r=await new sd(t).toPromise();return r===void 0?null:r.value}function WS(n,e){const t=cp(n,!0).delete(e);return new sd(t).toPromise()}const GV=800,$V=3;class Dx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await P_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>$V)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Cx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=up._getInstance(FV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await UV(),!this.activeServiceWorker)return;this.sender=new LV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await P_();return await KS(e,wm,"1"),await WS(e,wm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>KS(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>HV(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>WS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=cp(s,!1).getAll();return new sd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Dx.type="LOCAL";const KV=Dx;new rd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(n,e){return e?_s(e):(Ue(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0 extends f0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return du(e,this._buildIdpRequest())}_linkToIdToken(e,t){return du(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return du(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function QV(n){return Sx(n.auth,new g0(n),n.bypassAuthState)}function YV(n){const{auth:e,user:t}=n;return Ue(t,e,"internal-error"),AV(t,new g0(n),n.bypassAuthState)}async function XV(n){const{auth:e,user:t}=n;return Ue(t,e,"internal-error"),SV(t,new g0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:u,type:h}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QV;case"linkViaPopup":case"linkViaRedirect":return XV;case"reauthViaPopup":case"reauthViaRedirect":return YV;default:fi(this.auth,"internal-error")}}resolve(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=new rd(2e3,1e4);class au extends kx{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,au.currentPopupAction&&au.currentPopupAction.cancel(),au.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){Ss(this.filter.length===1,"Popup operations only handle one event");const e=p0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,au.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZV.get())};e()}}au.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV="pendingRedirect",Jf=new Map;class eL extends kx{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Jf.get(this.auth._key());if(!e){try{const r=await tL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Jf.set(this.auth._key(),e)}return this.bypassAuthState||Jf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tL(n,e){const t=iL(e),r=rL(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function nL(n,e){Jf.set(n._key(),e)}function rL(n){return _s(n._redirectPersistence)}function iL(n){return Zf(JV,n.config.apiKey,n.name)}async function sL(n,e,t=!1){if(_r(n.app))return Promise.reject(Aa(n));const r=Uu(n),s=WV(r,e),u=await new eL(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=10*60*1e3;class oL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Px(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ji(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aL&&this.cachedEventUids.clear(),this.cachedEventUids.has(QS(e))}saveEventToCache(e){this.cachedEventUids.add(QS(e)),this.lastProcessedEventTime=Date.now()}}function QS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Px({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Px(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(n,e={}){return qa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hL=/^https?/;async function dL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await uL(n);for(const t of e)try{if(fL(t))return}catch{}fi(n,"unauthorized-domain")}function fL(n){const e=D_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!hL.test(t))return!1;if(cL.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=new rd(3e4,6e4);function YS(){const n=Ui().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function pL(n){return new Promise((e,t)=>{var r,s,o;function u(){YS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{YS(),t(ji(n,"network-request-failed"))},timeout:mL.get()})}if(!((s=(r=Ui().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Ui().gapi)===null||o===void 0)&&o.load)u();else{const h=oV("iframefcb");return Ui()[h]=()=>{gapi.load?u():t(ji(n,"network-request-failed"))},vx(`${aV()}?onload=${h}`).catch(d=>t(d))}}).catch(e=>{throw em=null,e})}let em=null;function gL(n){return em=em||pL(n),em}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=new rd(5e3,15e3),_L="__/auth/iframe",vL="emulator/auth/iframe",EL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bL(n){const e=n.config;Ue(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?c0(e,vL):`https://${n.config.authDomain}/${_L}`,r={apiKey:e.apiKey,appName:n.name,v:Ba},s=TL.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${ju(r).slice(1)}`}async function wL(n){const e=await gL(n),t=Ui().gapi;return Ue(t,n,"internal-error"),e.open({where:document.body,url:bL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:EL,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const u=ji(n,"network-request-failed"),h=Ui().setTimeout(()=>{o(u)},yL.get());function d(){Ui().clearTimeout(h),s(r)}r.ping(d).then(d,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AL=500,RL=600,IL="_blank",xL="http://localhost";class XS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CL(n,e,t,r=AL,s=RL){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const d=Object.assign(Object.assign({},SL),{width:r.toString(),height:s.toString(),top:o,left:u}),p=pn().toLowerCase();t&&(h=dx(p)?IL:t),cx(p)&&(e=e||xL,d.scrollbars="yes");const y=Object.entries(d).reduce((b,[A,C])=>`${b}${A}=${C},`,"");if(XM(p)&&h!=="_self")return NL(e||"",h),new XS(null);const v=window.open(e||"",h,y);Ue(v,n,"popup-blocked");try{v.focus()}catch{}return new XS(v)}function NL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL="__/auth/handler",DL="emulator/auth/handler",kL=encodeURIComponent("fac");async function ZS(n,e,t,r,s,o){Ue(n.config.authDomain,n,"auth-domain-config-required"),Ue(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ba,eventId:s};if(e instanceof bx){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",R_(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))u[y]=v}if(e instanceof id){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const d=await n._getAppCheckToken(),p=d?`#${kL}=${encodeURIComponent(d)}`:"";return`${PL(n)}?${ju(h).slice(1)}${p}`}function PL({config:n}){return n.emulator?c0(n,DL):`https://${n.authDomain}/${OL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="webStorageSupport";class ML{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xx,this._completeRedirectFn=sL,this._overrideRedirectResult=nL}async _openPopup(e,t,r,s){var o;Ss((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await ZS(e,t,r,D_(),s);return CL(e,u,p0())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await ZS(e,t,r,D_(),s);return jV(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Ss(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await wL(e),r=new oL(e);return t.register("authEvent",s=>(Ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(r_,{type:r_},s=>{var o;const u=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[r_];u!==void 0&&t(!!u),fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yx()||hx()||d0()}}const VL=ML;var JS="@firebase/auth",eA="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UL(n){Pa(new bs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;Ue(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_x(n)},p=new rV(r,s,o,d);return fV(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Pa(new bs("auth-internal",e=>{const t=Uu(e.getProvider("auth").getImmediate());return(r=>new LL(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$r(JS,eA,jL(n)),$r(JS,eA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=5*60,FL=HI("authIdTokenMaxAge")||zL;let tA=null;const BL=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>FL)return;const s=t==null?void 0:t.token;tA!==s&&(tA=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function qL(n=o0()){const e=nd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=dV(n,{popupRedirectResolver:VL,persistence:[KV,MV,xx]}),r=HI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=BL(o.toString());NV(t,u,()=>u(t.currentUser)),CV(t,h=>u(h))}}const s=FI("auth");return s&&mV(t,`http://${s}`),t}function HL(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}iV({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=ji("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",HL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UL("Browser");var GL="firebase",$L="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$r(GL,$L,"app");var nA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ra,Mx;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,x){function I(){}I.prototype=x.prototype,D.D=x.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(O,j,q){for(var k=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)k[xt-2]=arguments[xt];return x.prototype[j].apply(O,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,x,I){I||(I=0);var O=Array(16);if(typeof x=="string")for(var j=0;16>j;++j)O[j]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(j=0;16>j;++j)O[j]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=D.g[0],I=D.g[1],j=D.g[2];var q=D.g[3],k=x+(q^I&(j^q))+O[0]+3614090360&4294967295;x=I+(k<<7&4294967295|k>>>25),k=q+(j^x&(I^j))+O[1]+3905402710&4294967295,q=x+(k<<12&4294967295|k>>>20),k=j+(I^q&(x^I))+O[2]+606105819&4294967295,j=q+(k<<17&4294967295|k>>>15),k=I+(x^j&(q^x))+O[3]+3250441966&4294967295,I=j+(k<<22&4294967295|k>>>10),k=x+(q^I&(j^q))+O[4]+4118548399&4294967295,x=I+(k<<7&4294967295|k>>>25),k=q+(j^x&(I^j))+O[5]+1200080426&4294967295,q=x+(k<<12&4294967295|k>>>20),k=j+(I^q&(x^I))+O[6]+2821735955&4294967295,j=q+(k<<17&4294967295|k>>>15),k=I+(x^j&(q^x))+O[7]+4249261313&4294967295,I=j+(k<<22&4294967295|k>>>10),k=x+(q^I&(j^q))+O[8]+1770035416&4294967295,x=I+(k<<7&4294967295|k>>>25),k=q+(j^x&(I^j))+O[9]+2336552879&4294967295,q=x+(k<<12&4294967295|k>>>20),k=j+(I^q&(x^I))+O[10]+4294925233&4294967295,j=q+(k<<17&4294967295|k>>>15),k=I+(x^j&(q^x))+O[11]+2304563134&4294967295,I=j+(k<<22&4294967295|k>>>10),k=x+(q^I&(j^q))+O[12]+1804603682&4294967295,x=I+(k<<7&4294967295|k>>>25),k=q+(j^x&(I^j))+O[13]+4254626195&4294967295,q=x+(k<<12&4294967295|k>>>20),k=j+(I^q&(x^I))+O[14]+2792965006&4294967295,j=q+(k<<17&4294967295|k>>>15),k=I+(x^j&(q^x))+O[15]+1236535329&4294967295,I=j+(k<<22&4294967295|k>>>10),k=x+(j^q&(I^j))+O[1]+4129170786&4294967295,x=I+(k<<5&4294967295|k>>>27),k=q+(I^j&(x^I))+O[6]+3225465664&4294967295,q=x+(k<<9&4294967295|k>>>23),k=j+(x^I&(q^x))+O[11]+643717713&4294967295,j=q+(k<<14&4294967295|k>>>18),k=I+(q^x&(j^q))+O[0]+3921069994&4294967295,I=j+(k<<20&4294967295|k>>>12),k=x+(j^q&(I^j))+O[5]+3593408605&4294967295,x=I+(k<<5&4294967295|k>>>27),k=q+(I^j&(x^I))+O[10]+38016083&4294967295,q=x+(k<<9&4294967295|k>>>23),k=j+(x^I&(q^x))+O[15]+3634488961&4294967295,j=q+(k<<14&4294967295|k>>>18),k=I+(q^x&(j^q))+O[4]+3889429448&4294967295,I=j+(k<<20&4294967295|k>>>12),k=x+(j^q&(I^j))+O[9]+568446438&4294967295,x=I+(k<<5&4294967295|k>>>27),k=q+(I^j&(x^I))+O[14]+3275163606&4294967295,q=x+(k<<9&4294967295|k>>>23),k=j+(x^I&(q^x))+O[3]+4107603335&4294967295,j=q+(k<<14&4294967295|k>>>18),k=I+(q^x&(j^q))+O[8]+1163531501&4294967295,I=j+(k<<20&4294967295|k>>>12),k=x+(j^q&(I^j))+O[13]+2850285829&4294967295,x=I+(k<<5&4294967295|k>>>27),k=q+(I^j&(x^I))+O[2]+4243563512&4294967295,q=x+(k<<9&4294967295|k>>>23),k=j+(x^I&(q^x))+O[7]+1735328473&4294967295,j=q+(k<<14&4294967295|k>>>18),k=I+(q^x&(j^q))+O[12]+2368359562&4294967295,I=j+(k<<20&4294967295|k>>>12),k=x+(I^j^q)+O[5]+4294588738&4294967295,x=I+(k<<4&4294967295|k>>>28),k=q+(x^I^j)+O[8]+2272392833&4294967295,q=x+(k<<11&4294967295|k>>>21),k=j+(q^x^I)+O[11]+1839030562&4294967295,j=q+(k<<16&4294967295|k>>>16),k=I+(j^q^x)+O[14]+4259657740&4294967295,I=j+(k<<23&4294967295|k>>>9),k=x+(I^j^q)+O[1]+2763975236&4294967295,x=I+(k<<4&4294967295|k>>>28),k=q+(x^I^j)+O[4]+1272893353&4294967295,q=x+(k<<11&4294967295|k>>>21),k=j+(q^x^I)+O[7]+4139469664&4294967295,j=q+(k<<16&4294967295|k>>>16),k=I+(j^q^x)+O[10]+3200236656&4294967295,I=j+(k<<23&4294967295|k>>>9),k=x+(I^j^q)+O[13]+681279174&4294967295,x=I+(k<<4&4294967295|k>>>28),k=q+(x^I^j)+O[0]+3936430074&4294967295,q=x+(k<<11&4294967295|k>>>21),k=j+(q^x^I)+O[3]+3572445317&4294967295,j=q+(k<<16&4294967295|k>>>16),k=I+(j^q^x)+O[6]+76029189&4294967295,I=j+(k<<23&4294967295|k>>>9),k=x+(I^j^q)+O[9]+3654602809&4294967295,x=I+(k<<4&4294967295|k>>>28),k=q+(x^I^j)+O[12]+3873151461&4294967295,q=x+(k<<11&4294967295|k>>>21),k=j+(q^x^I)+O[15]+530742520&4294967295,j=q+(k<<16&4294967295|k>>>16),k=I+(j^q^x)+O[2]+3299628645&4294967295,I=j+(k<<23&4294967295|k>>>9),k=x+(j^(I|~q))+O[0]+4096336452&4294967295,x=I+(k<<6&4294967295|k>>>26),k=q+(I^(x|~j))+O[7]+1126891415&4294967295,q=x+(k<<10&4294967295|k>>>22),k=j+(x^(q|~I))+O[14]+2878612391&4294967295,j=q+(k<<15&4294967295|k>>>17),k=I+(q^(j|~x))+O[5]+4237533241&4294967295,I=j+(k<<21&4294967295|k>>>11),k=x+(j^(I|~q))+O[12]+1700485571&4294967295,x=I+(k<<6&4294967295|k>>>26),k=q+(I^(x|~j))+O[3]+2399980690&4294967295,q=x+(k<<10&4294967295|k>>>22),k=j+(x^(q|~I))+O[10]+4293915773&4294967295,j=q+(k<<15&4294967295|k>>>17),k=I+(q^(j|~x))+O[1]+2240044497&4294967295,I=j+(k<<21&4294967295|k>>>11),k=x+(j^(I|~q))+O[8]+1873313359&4294967295,x=I+(k<<6&4294967295|k>>>26),k=q+(I^(x|~j))+O[15]+4264355552&4294967295,q=x+(k<<10&4294967295|k>>>22),k=j+(x^(q|~I))+O[6]+2734768916&4294967295,j=q+(k<<15&4294967295|k>>>17),k=I+(q^(j|~x))+O[13]+1309151649&4294967295,I=j+(k<<21&4294967295|k>>>11),k=x+(j^(I|~q))+O[4]+4149444226&4294967295,x=I+(k<<6&4294967295|k>>>26),k=q+(I^(x|~j))+O[11]+3174756917&4294967295,q=x+(k<<10&4294967295|k>>>22),k=j+(x^(q|~I))+O[2]+718787259&4294967295,j=q+(k<<15&4294967295|k>>>17),k=I+(q^(j|~x))+O[9]+3951481745&4294967295,D.g[0]=D.g[0]+x&4294967295,D.g[1]=D.g[1]+(j+(k<<21&4294967295|k>>>11))&4294967295,D.g[2]=D.g[2]+j&4294967295,D.g[3]=D.g[3]+q&4294967295}r.prototype.u=function(D,x){x===void 0&&(x=D.length);for(var I=x-this.blockSize,O=this.B,j=this.h,q=0;q<x;){if(j==0)for(;q<=I;)s(this,D,q),q+=this.blockSize;if(typeof D=="string"){for(;q<x;)if(O[j++]=D.charCodeAt(q++),j==this.blockSize){s(this,O),j=0;break}}else for(;q<x;)if(O[j++]=D[q++],j==this.blockSize){s(this,O),j=0;break}}this.h=j,this.o+=x},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var x=1;x<D.length-8;++x)D[x]=0;var I=8*this.o;for(x=D.length-8;x<D.length;++x)D[x]=I&255,I/=256;for(this.u(D),D=Array(16),x=I=0;4>x;++x)for(var O=0;32>O;O+=8)D[I++]=this.g[x]>>>O&255;return D};function o(D,x){var I=h;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=x(D)}function u(D,x){this.h=x;for(var I=[],O=!0,j=D.length-1;0<=j;j--){var q=D[j]|0;O&&q==x||(I[j]=q,O=!1)}this.g=I}var h={};function d(D){return-128<=D&&128>D?o(D,function(x){return new u([x|0],0>x?-1:0)}):new u([D|0],0>D?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return v;if(0>D)return M(p(-D));for(var x=[],I=1,O=0;D>=I;O++)x[O]=D/I|0,I*=4294967296;return new u(x,0)}function y(D,x){if(D.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(D.charAt(0)=="-")return M(y(D.substring(1),x));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=p(Math.pow(x,8)),O=v,j=0;j<D.length;j+=8){var q=Math.min(8,D.length-j),k=parseInt(D.substring(j,j+q),x);8>q?(q=p(Math.pow(x,q)),O=O.j(q).add(p(k))):(O=O.j(I),O=O.add(p(k)))}return O}var v=d(0),b=d(1),A=d(16777216);n=u.prototype,n.m=function(){if(F(this))return-M(this).m();for(var D=0,x=1,I=0;I<this.g.length;I++){var O=this.i(I);D+=(0<=O?O:4294967296+O)*x,x*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(C(this))return"0";if(F(this))return"-"+M(this).toString(D);for(var x=p(Math.pow(D,6)),I=this,O="";;){var j=te(I,x).g;I=Y(I,j.j(x));var q=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=j,C(I))return q+O;for(;6>q.length;)q="0"+q;O=q+O}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function C(D){if(D.h!=0)return!1;for(var x=0;x<D.g.length;x++)if(D.g[x]!=0)return!1;return!0}function F(D){return D.h==-1}n.l=function(D){return D=Y(this,D),F(D)?-1:C(D)?0:1};function M(D){for(var x=D.g.length,I=[],O=0;O<x;O++)I[O]=~D.g[O];return new u(I,~D.h).add(b)}n.abs=function(){return F(this)?M(this):this},n.add=function(D){for(var x=Math.max(this.g.length,D.g.length),I=[],O=0,j=0;j<=x;j++){var q=O+(this.i(j)&65535)+(D.i(j)&65535),k=(q>>>16)+(this.i(j)>>>16)+(D.i(j)>>>16);O=k>>>16,q&=65535,k&=65535,I[j]=k<<16|q}return new u(I,I[I.length-1]&-2147483648?-1:0)};function Y(D,x){return D.add(M(x))}n.j=function(D){if(C(this)||C(D))return v;if(F(this))return F(D)?M(this).j(M(D)):M(M(this).j(D));if(F(D))return M(this.j(M(D)));if(0>this.l(A)&&0>D.l(A))return p(this.m()*D.m());for(var x=this.g.length+D.g.length,I=[],O=0;O<2*x;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(var j=0;j<D.g.length;j++){var q=this.i(O)>>>16,k=this.i(O)&65535,xt=D.i(j)>>>16,kt=D.i(j)&65535;I[2*O+2*j]+=k*kt,Z(I,2*O+2*j),I[2*O+2*j+1]+=q*kt,Z(I,2*O+2*j+1),I[2*O+2*j+1]+=k*xt,Z(I,2*O+2*j+1),I[2*O+2*j+2]+=q*xt,Z(I,2*O+2*j+2)}for(O=0;O<x;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=x;O<2*x;O++)I[O]=0;return new u(I,0)};function Z(D,x){for(;(D[x]&65535)!=D[x];)D[x+1]+=D[x]>>>16,D[x]&=65535,x++}function ee(D,x){this.g=D,this.h=x}function te(D,x){if(C(x))throw Error("division by zero");if(C(D))return new ee(v,v);if(F(D))return x=te(M(D),x),new ee(M(x.g),M(x.h));if(F(x))return x=te(D,M(x)),new ee(M(x.g),x.h);if(30<D.g.length){if(F(D)||F(x))throw Error("slowDivide_ only works with positive integers.");for(var I=b,O=x;0>=O.l(D);)I=se(I),O=se(O);var j=V(I,1),q=V(O,1);for(O=V(O,2),I=V(I,2);!C(O);){var k=q.add(O);0>=k.l(D)&&(j=j.add(I),q=k),O=V(O,1),I=V(I,1)}return x=Y(D,j.j(x)),new ee(j,x)}for(j=v;0<=D.l(x);){for(I=Math.max(1,Math.floor(D.m()/x.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),q=p(I),k=q.j(x);F(k)||0<k.l(D);)I-=O,q=p(I),k=q.j(x);C(q)&&(q=b),j=j.add(q),D=Y(D,k)}return new ee(j,D)}n.A=function(D){return te(this,D).h},n.and=function(D){for(var x=Math.max(this.g.length,D.g.length),I=[],O=0;O<x;O++)I[O]=this.i(O)&D.i(O);return new u(I,this.h&D.h)},n.or=function(D){for(var x=Math.max(this.g.length,D.g.length),I=[],O=0;O<x;O++)I[O]=this.i(O)|D.i(O);return new u(I,this.h|D.h)},n.xor=function(D){for(var x=Math.max(this.g.length,D.g.length),I=[],O=0;O<x;O++)I[O]=this.i(O)^D.i(O);return new u(I,this.h^D.h)};function se(D){for(var x=D.g.length+1,I=[],O=0;O<x;O++)I[O]=D.i(O)<<1|D.i(O-1)>>>31;return new u(I,D.h)}function V(D,x){var I=x>>5;x%=32;for(var O=D.g.length-I,j=[],q=0;q<O;q++)j[q]=0<x?D.i(q+I)>>>x|D.i(q+I+1)<<32-x:D.i(q+I);return new u(j,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Mx=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=y,Ra=u}).apply(typeof nA<"u"?nA:typeof self<"u"?self:typeof window<"u"?window:{});var Vf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vx,hh,Lx,tm,M_,jx,Ux,zx;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,E){return f==Array.prototype||f==Object.prototype||(f[_]=E.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vf=="object"&&Vf];for(var _=0;_<f.length;++_){var E=f[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function s(f,_){if(_)e:{var E=r;f=f.split(".");for(var R=0;R<f.length-1;R++){var $=f[R];if(!($ in E))break e;E=E[$]}f=f[f.length-1],R=E[f],_=_(R),_!=R&&_!=null&&e(E,f,{configurable:!0,writable:!0,value:_})}}function o(f,_){f instanceof String&&(f+="");var E=0,R=!1,$={next:function(){if(!R&&E<f.length){var J=E++;return{value:_(J,f[J]),done:!1}}return R=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}s("Array.prototype.values",function(f){return f||function(){return o(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function d(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function p(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function y(f,_,E){return f.call.apply(f.bind,arguments)}function v(f,_,E){if(!f)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,R),f.apply(_,$)}}return function(){return f.apply(_,arguments)}}function b(f,_,E){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,b.apply(null,arguments)}function A(f,_){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),f.apply(this,R)}}function C(f,_){function E(){}E.prototype=_.prototype,f.aa=_.prototype,f.prototype=new E,f.prototype.constructor=f,f.Qb=function(R,$,J){for(var pe=Array(arguments.length-2),at=2;at<arguments.length;at++)pe[at-2]=arguments[at];return _.prototype[$].apply(R,pe)}}function F(f){const _=f.length;if(0<_){const E=Array(_);for(let R=0;R<_;R++)E[R]=f[R];return E}return[]}function M(f,_){for(let E=1;E<arguments.length;E++){const R=arguments[E];if(d(R)){const $=f.length||0,J=R.length||0;f.length=$+J;for(let pe=0;pe<J;pe++)f[$+pe]=R[pe]}else f.push(R)}}class Y{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function Z(f){return/^[\s\xa0]*$/.test(f)}function ee(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function te(f){return te[" "](f),f}te[" "]=function(){};var se=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function V(f,_,E){for(const R in f)_.call(E,f[R],R,f)}function D(f,_){for(const E in f)_.call(void 0,f[E],E,f)}function x(f){const _={};for(const E in f)_[E]=f[E];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(f,_){let E,R;for(let $=1;$<arguments.length;$++){R=arguments[$];for(E in R)f[E]=R[E];for(let J=0;J<I.length;J++)E=I[J],Object.prototype.hasOwnProperty.call(R,E)&&(f[E]=R[E])}}function j(f){var _=1;f=f.split(":");const E=[];for(;0<_&&f.length;)E.push(f.shift()),_--;return f.length&&E.push(f.join(":")),E}function q(f){h.setTimeout(()=>{throw f},0)}function k(){var f=Ye;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class xt{constructor(){this.h=this.g=null}add(_,E){const R=kt.get();R.set(_,E),this.h?this.h.next=R:this.g=R,this.h=R}}var kt=new Y(()=>new fe,f=>f.reset());class fe{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,Ce=!1,Ye=new xt,L=()=>{const f=h.Promise.resolve(void 0);Me=()=>{f.then(ue)}};var ue=()=>{for(var f;f=k();){try{f.h.call(f.g)}catch(E){q(E)}var _=kt;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}Ce=!1};function Se(){this.s=this.s,this.C=this.C}Se.prototype.s=!1,Se.prototype.ma=function(){this.s||(this.s=!0,this.N())},Se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};h.addEventListener("test",E,_),h.removeEventListener("test",E,_)}catch{}return f}();function Fe(f,_){if(ye.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var E=this.type=f.type,R=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(se){e:{try{te(_.nodeName);var $=!0;break e}catch{}$=!1}$||(_=null)}}else E=="mouseover"?_=f.fromElement:E=="mouseout"&&(_=f.toElement);this.relatedTarget=_,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:je[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Fe.aa.h.call(this)}}C(Fe,ye);var je={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Gt="closure_listenable_"+(1e6*Math.random()|0),it=0;function Ut(f,_,E,R,$){this.listener=f,this.proxy=null,this.src=_,this.type=E,this.capture=!!R,this.ha=$,this.key=++it,this.da=this.fa=!1}function Be(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function $t(f){this.src=f,this.g={},this.h=0}$t.prototype.add=function(f,_,E,R,$){var J=f.toString();f=this.g[J],f||(f=this.g[J]=[],this.h++);var pe=tr(f,_,R,$);return-1<pe?(_=f[pe],E||(_.fa=!1)):(_=new Ut(_,this.src,J,!!R,$),_.fa=E,f.push(_)),_};function wr(f,_){var E=_.type;if(E in f.g){var R=f.g[E],$=Array.prototype.indexOf.call(R,_,void 0),J;(J=0<=$)&&Array.prototype.splice.call(R,$,1),J&&(Be(_),f.g[E].length==0&&(delete f.g[E],f.h--))}}function tr(f,_,E,R){for(var $=0;$<f.length;++$){var J=f[$];if(!J.da&&J.listener==_&&J.capture==!!E&&J.ha==R)return $}return-1}var Mn="closure_lm_"+(1e6*Math.random()|0),gi={};function Qr(f,_,E,R,$){if(Array.isArray(_)){for(var J=0;J<_.length;J++)Qr(f,_[J],E,R,$);return null}return E=Ms(E),f&&f[Gt]?f.K(_,E,p(R)?!!R.capture:!1,$):Os(f,_,E,!1,R,$)}function Os(f,_,E,R,$,J){if(!_)throw Error("Invalid event type");var pe=p($)?!!$.capture:!!$,at=Xr(f);if(at||(f[Mn]=at=new $t(f)),E=at.add(_,E,R,pe,J),E.proxy)return E;if(R=Ds(),E.proxy=R,R.src=f,R.listener=E,f.addEventListener)_e||($=pe),$===void 0&&($=!1),f.addEventListener(_.toString(),R,$);else if(f.attachEvent)f.attachEvent(Ps(_.toString()),R);else if(f.addListener&&f.removeListener)f.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ds(){function f(E){return _.call(f.src,f.listener,E)}const _=Yr;return f}function ks(f,_,E,R,$){if(Array.isArray(_))for(var J=0;J<_.length;J++)ks(f,_[J],E,R,$);else R=p(R)?!!R.capture:!!R,E=Ms(E),f&&f[Gt]?(f=f.i,_=String(_).toString(),_ in f.g&&(J=f.g[_],E=tr(J,E,R,$),-1<E&&(Be(J[E]),Array.prototype.splice.call(J,E,1),J.length==0&&(delete f.g[_],f.h--)))):f&&(f=Xr(f))&&(_=f.g[_.toString()],f=-1,_&&(f=tr(_,E,R,$)),(E=-1<f?_[f]:null)&&Gi(E))}function Gi(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[Gt])wr(_.i,f);else{var E=f.type,R=f.proxy;_.removeEventListener?_.removeEventListener(E,R,f.capture):_.detachEvent?_.detachEvent(Ps(E),R):_.addListener&&_.removeListener&&_.removeListener(R),(E=Xr(_))?(wr(E,f),E.h==0&&(E.src=null,_[Mn]=null)):Be(f)}}}function Ps(f){return f in gi?gi[f]:gi[f]="on"+f}function Yr(f,_){if(f.da)f=!0;else{_=new Fe(_,this);var E=f.listener,R=f.ha||f.src;f.fa&&Gi(f),f=E.call(R,_)}return f}function Xr(f){return f=f[Mn],f instanceof $t?f:null}var xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ms(f){return typeof f=="function"?f:(f[xn]||(f[xn]=function(_){return f.handleEvent(_)}),f[xn])}function wt(){Se.call(this),this.i=new $t(this),this.M=this,this.F=null}C(wt,Se),wt.prototype[Gt]=!0,wt.prototype.removeEventListener=function(f,_,E,R){ks(this,f,_,E,R)};function St(f,_){var E,R=f.F;if(R)for(E=[];R;R=R.F)E.push(R);if(f=f.M,R=_.type||_,typeof _=="string")_=new ye(_,f);else if(_ instanceof ye)_.target=_.target||f;else{var $=_;_=new ye(R,f),O(_,$)}if($=!0,E)for(var J=E.length-1;0<=J;J--){var pe=_.g=E[J];$=Sr(pe,R,!0,_)&&$}if(pe=_.g=f,$=Sr(pe,R,!0,_)&&$,$=Sr(pe,R,!1,_)&&$,E)for(J=0;J<E.length;J++)pe=_.g=E[J],$=Sr(pe,R,!1,_)&&$}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var E=f.g[_],R=0;R<E.length;R++)Be(E[R]);delete f.g[_],f.h--}}this.F=null},wt.prototype.K=function(f,_,E,R){return this.i.add(String(f),_,!1,E,R)},wt.prototype.L=function(f,_,E,R){return this.i.add(String(f),_,!0,E,R)};function Sr(f,_,E,R){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var $=!0,J=0;J<_.length;++J){var pe=_[J];if(pe&&!pe.da&&pe.capture==E){var at=pe.listener,hn=pe.ha||pe.src;pe.fa&&wr(f.i,pe),$=at.call(hn,R)!==!1&&$}}return $&&!R.defaultPrevented}function Vs(f,_,E){if(typeof f=="function")E&&(f=b(f,E));else if(f&&typeof f.handleEvent=="function")f=b(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:h.setTimeout(f,_||0)}function Ka(f){f.g=Vs(()=>{f.g=null,f.i&&(f.i=!1,Ka(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class Ar extends Se{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ka(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yi(f){Se.call(this),this.h=f,this.g={}}C(yi,Se);var Zr=[];function cn(f){V(f.g,function(_,E){this.g.hasOwnProperty(E)&&Gi(_)},f),f.g={}}yi.prototype.N=function(){yi.aa.N.call(this),cn(this)},yi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wa=h.JSON.stringify,or=h.JSON.parse,nn=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function Ls(){}Ls.prototype.h=null;function js(f){return f.h||(f.h=f.i())}function ol(){}var lr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _i(){ye.call(this,"d")}C(_i,ye);function nr(){ye.call(this,"c")}C(nr,ye);var Cn={},ur=null;function Us(){return ur=ur||new wt}Cn.La="serverreachability";function Qa(f){ye.call(this,Cn.La,f)}C(Qa,ye);function P(f){const _=Us();St(_,new Qa(_))}Cn.STAT_EVENT="statevent";function H(f,_){ye.call(this,Cn.STAT_EVENT,f),this.stat=_}C(H,ye);function W(f){const _=Us();St(_,new H(_,f))}Cn.Ma="timingevent";function ce(f,_){ye.call(this,Cn.Ma,f),this.size=_}C(ce,ye);function ve(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},_)}function Ae(){this.g=!0}Ae.prototype.xa=function(){this.g=!1};function Ve(f,_,E,R,$,J){f.info(function(){if(f.g)if(J)for(var pe="",at=J.split("&"),hn=0;hn<at.length;hn++){var ot=at[hn].split("=");if(1<ot.length){var vn=ot[0];ot=ot[1];var dn=vn.split("_");pe=2<=dn.length&&dn[1]=="type"?pe+(vn+"="+ot+"&"):pe+(vn+"=redacted&")}}else pe=null;else pe=J;return"XMLHTTP REQ ("+R+") [attempt "+$+"]: "+_+`
`+E+`
`+pe})}function be(f,_,E,R,$,J,pe){f.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+$+"]: "+_+`
`+E+`
`+J+" "+pe})}function we(f,_,E,R){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+xe(f,E)+(R?" "+R:"")})}function ge(f,_){f.info(function(){return"TIMEOUT: "+_})}Ae.prototype.info=function(){};function xe(f,_){if(!f.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(f=0;f<E.length;f++)if(Array.isArray(E[f])){var R=E[f];if(!(2>R.length)){var $=R[1];if(Array.isArray($)&&!(1>$.length)){var J=$[0];if(J!="noop"&&J!="stop"&&J!="close")for(var pe=1;pe<$.length;pe++)$[pe]=""}}}}return Wa(E)}catch{return _}}var Oe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},st={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pt;function yt(){}C(yt,Ls),yt.prototype.g=function(){return new XMLHttpRequest},yt.prototype.i=function(){return{}},Pt=new yt;function Je(f,_,E,R){this.j=f,this.i=_,this.l=E,this.R=R||1,this.U=new yi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mt}function Mt(){this.i=null,this.g="",this.h=!1}var Gn={},cr={};function Zt(f,_,E){f.L=1,f.v=Ja(Kt(_)),f.m=E,f.P=!0,rn(f,null)}function rn(f,_){f.F=Date.now(),pt(f),f.A=Kt(f.v);var E=f.A,R=f.R;Array.isArray(R)||(R=[String(R)]),Qi(E.i,"t",R),f.C=0,E=f.j.J,f.h=new Mt,f.g=Od(f.j,E?_:null,!f.m),0<f.O&&(f.M=new Ar(b(f.Y,f,f.g),f.O)),_=f.U,E=f.g,R=f.ca;var $="readystatechange";Array.isArray($)||($&&(Zr[0]=$.toString()),$=Zr);for(var J=0;J<$.length;J++){var pe=Qr(E,$[J],R||_.handleEvent,!1,_.h||_);if(!pe)break;_.g[pe.key]=pe}_=f.H?x(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),P(),Ve(f.i,f.u,f.A,f.l,f.R,f.m)}Je.prototype.ca=function(f){f=f.target;const _=this.M;_&&Dr(f)==3?_.j():this.Y(f)},Je.prototype.Y=function(f){try{if(f==this.g)e:{const dn=Dr(this.g);var _=this.g.Ba();const Ji=this.g.Z();if(!(3>dn)&&(dn!=3||this.g&&(this.h.h||this.g.oa()||wd(this.g)))){this.J||dn!=4||_==7||(_==8||0>=Ji?P(3):P(2)),Jr(this);var E=this.g.Z();this.X=E;t:if(Rr(this)){var R=wd(this.g);f="";var $=R.length,J=Dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gt(this),$e(this);var pe="";break t}this.h.i=new h.TextDecoder}for(_=0;_<$;_++)this.h.h=!0,f+=this.h.i.decode(R[_],{stream:!(J&&_==$-1)});R.length=0,this.h.g+=f,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=E==200,be(this.i,this.u,this.A,this.l,this.R,dn,E),this.o){if(this.T&&!this.K){t:{if(this.g){var at,hn=this.g;if((at=hn.g?hn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(at)){var ot=at;break t}}ot=null}if(E=ot)we(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yn(this,E);else{this.o=!1,this.s=3,W(12),gt(this),$e(this);break e}}if(this.P){E=!0;let Nn;for(;!this.J&&this.C<pe.length;)if(Nn=rr(this,pe),Nn==cr){dn==4&&(this.s=4,W(14),E=!1),we(this.i,this.l,null,"[Incomplete Response]");break}else if(Nn==Gn){this.s=4,W(15),we(this.i,this.l,pe,"[Invalid Chunk]"),E=!1;break}else we(this.i,this.l,Nn,null),yn(this,Nn);if(Rr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dn!=4||pe.length!=0||this.h.h||(this.s=1,W(16),E=!1),this.o=this.o&&E,!E)we(this.i,this.l,pe,"[Invalid Chunked Response]"),gt(this),$e(this);else if(0<pe.length&&!this.W){this.W=!0;var vn=this.j;vn.g==this&&vn.ba&&!vn.M&&(vn.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),ao(vn),vn.M=!0,W(11))}}else we(this.i,this.l,pe,null),yn(this,pe);dn==4&&gt(this),this.o&&!this.J&&(dn==4?xd(this.j,this):(this.o=!1,pt(this)))}else Yp(this.g),E==400&&0<pe.indexOf("Unknown SID")?(this.s=3,W(12)):(this.s=0,W(13)),gt(this),$e(this)}}}catch{}finally{}};function Rr(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function rr(f,_){var E=f.C,R=_.indexOf(`
`,E);return R==-1?cr:(E=Number(_.substring(E,R)),isNaN(E)?Gn:(R+=1,R+E>_.length?cr:(_=_.slice(R,R+E),f.C=R+E,_)))}Je.prototype.cancel=function(){this.J=!0,gt(this)};function pt(f){f.S=Date.now()+f.I,vi(f,f.I)}function vi(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=ve(b(f.ba,f),_)}function Jr(f){f.B&&(h.clearTimeout(f.B),f.B=null)}Je.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ge(this.i,this.A),this.L!=2&&(P(),W(17)),gt(this),this.s=2,$e(this)):vi(this,this.S-f)};function $e(f){f.j.G==0||f.J||xd(f.j,f)}function gt(f){Jr(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,cn(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function yn(f,_){try{var E=f.j;if(E.G!=0&&(E.g==f||Ei(E.h,f))){if(!f.K&&Ei(E.h,f)&&E.G==3){try{var R=E.Da.g.parse(_)}catch{R=null}if(Array.isArray(R)&&R.length==3){var $=R;if($[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<f.F)yl(E),pl(E);else break e;ic(E),W(18)}}else E.za=$[1],0<E.za-E.T&&37500>$[2]&&E.F&&E.v==0&&!E.C&&(E.C=ve(b(E.Za,E),6e3));if(1>=Ya(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Zi(E,11)}else if((f.K||E.g==f)&&yl(E),!Z(_))for($=E.Da.g.parse(_),_=0;_<$.length;_++){let ot=$[_];if(E.T=ot[0],ot=ot[1],E.G==2)if(ot[0]=="c"){E.K=ot[1],E.ia=ot[2];const vn=ot[3];vn!=null&&(E.la=vn,E.j.info("VER="+E.la));const dn=ot[4];dn!=null&&(E.Aa=dn,E.j.info("SVER="+E.Aa));const Ji=ot[5];Ji!=null&&typeof Ji=="number"&&0<Ji&&(R=1.5*Ji,E.L=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const Nn=f.g;if(Nn){const Ii=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ii){var J=R.h;J.g||Ii.indexOf("spdy")==-1&&Ii.indexOf("quic")==-1&&Ii.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(zs(J,J.h),J.h=null))}if(R.D){const ac=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;ac&&(R.ya=ac,dt(R.I,R.D,ac))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-f.F,E.j.info("Handshake RTT: "+E.R+"ms")),R=E;var pe=f;if(R.qa=Nd(R,R.J?R.ia:null,R.W),pe.K){xr(R.h,pe);var at=pe,hn=R.L;hn&&(at.I=hn),at.B&&(Jr(at),pt(at)),R.g=pe}else Rd(R);0<E.i.length&&gl(E)}else ot[0]!="stop"&&ot[0]!="close"||Zi(E,7);else E.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?Zi(E,7):nc(E):ot[0]!="noop"&&E.l&&E.l.ta(ot),E.v=0)}}P(4)}catch{}}var $i=class{constructor(f,_){this.g=f,this.map=_}};function Nt(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ir(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ya(f){return f.h?1:f.g?f.g.size:0}function Ei(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function zs(f,_){f.g?f.g.add(_):f.h=_}function xr(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}Nt.prototype.cancel=function(){if(this.i=$n(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function $n(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const E of f.g.values())_=_.concat(E.D);return _}return F(f.i)}function vd(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(d(f)){for(var _=[],E=f.length,R=0;R<E;R++)_.push(f[R]);return _}_=[],E=0;for(R in f)_[E++]=f[R];return _}function $p(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(d(f)||typeof f=="string"){var _=[];f=f.length;for(var E=0;E<f;E++)_.push(E);return _}_=[],E=0;for(const R in f)_[E++]=R;return _}}}function Xa(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(d(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var E=$p(f),R=vd(f),$=R.length,J=0;J<$;J++)_.call(void 0,R[J],E&&E[J],f)}var Yu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ll(f,_){if(f){f=f.split("&");for(var E=0;E<f.length;E++){var R=f[E].indexOf("="),$=null;if(0<=R){var J=f[E].substring(0,R);$=f[E].substring(R+1)}else J=f[E];_(J,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Ki(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ki){this.h=f.h,Fs(this,f.j),this.o=f.o,this.g=f.g,Za(this,f.s),this.l=f.l;var _=f.i,E=new Ti;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),ul(this,E),this.m=f.m}else f&&(_=String(f).match(Yu))?(this.h=!1,Fs(this,_[1]||"",!0),this.o=Bs(_[2]||""),this.g=Bs(_[3]||"",!0),Za(this,_[4]),this.l=Bs(_[5]||"",!0),ul(this,_[6]||"",!0),this.m=Bs(_[7]||"")):(this.h=!1,this.i=new Ti(null,this.h))}Ki.prototype.toString=function(){var f=[],_=this.j;_&&f.push(Cr(_,Xu,!0),":");var E=this.g;return(E||_=="file")&&(f.push("//"),(_=this.o)&&f.push(Cr(_,Xu,!0),"@"),f.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&f.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(Cr(E,E.charAt(0)=="/"?Zu:Ed,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",Cr(E,Qp)),f.join("")};function Kt(f){return new Ki(f)}function Fs(f,_,E){f.j=E?Bs(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function Za(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function ul(f,_,E){_ instanceof Ti?(f.i=_,Ju(f.i,f.h)):(E||(_=Cr(_,Wp)),f.i=new Ti(_,f.h))}function dt(f,_,E){f.i.set(_,E)}function Ja(f){return dt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Bs(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Cr(f,_,E){return typeof f=="string"?(f=encodeURI(f).replace(_,Kp),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Kp(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Xu=/[#\/\?@]/g,Ed=/[#\?:]/g,Zu=/[#\?]/g,Wp=/[#\?@]/g,Qp=/#/g;function Ti(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function Nr(f){f.g||(f.g=new Map,f.h=0,f.i&&ll(f.i,function(_,E){f.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Ti.prototype,n.add=function(f,_){Nr(this),this.i=null,f=Yi(this,f);var E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(_),this.h+=1,this};function cl(f,_){Nr(f),_=Yi(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function Wi(f,_){return Nr(f),_=Yi(f,_),f.g.has(_)}n.forEach=function(f,_){Nr(this),this.g.forEach(function(E,R){E.forEach(function($){f.call(_,$,R,this)},this)},this)},n.na=function(){Nr(this);const f=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let R=0;R<_.length;R++){const $=f[R];for(let J=0;J<$.length;J++)E.push(_[R])}return E},n.V=function(f){Nr(this);let _=[];if(typeof f=="string")Wi(this,f)&&(_=_.concat(this.g.get(Yi(this,f))));else{f=Array.from(this.g.values());for(let E=0;E<f.length;E++)_=_.concat(f[E])}return _},n.set=function(f,_){return Nr(this),this.i=null,f=Yi(this,f),Wi(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},n.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function Qi(f,_,E){cl(f,_),0<E.length&&(f.i=null,f.g.set(Yi(f,_),F(E)),f.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var R=_[E];const J=encodeURIComponent(String(R)),pe=this.V(R);for(R=0;R<pe.length;R++){var $=J;pe[R]!==""&&($+="="+encodeURIComponent(String(pe[R]))),f.push($)}}return this.i=f.join("&")};function Yi(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function Ju(f,_){_&&!f.j&&(Nr(f),f.i=null,f.g.forEach(function(E,R){var $=R.toLowerCase();R!=$&&(cl(this,R),Qi(this,$,E))},f)),f.j=_}function Td(f,_){const E=new Ae;if(h.Image){const R=new Image;R.onload=A(Or,E,"TestLoadImage: loaded",!0,_,R),R.onerror=A(Or,E,"TestLoadImage: error",!1,_,R),R.onabort=A(Or,E,"TestLoadImage: abort",!1,_,R),R.ontimeout=A(Or,E,"TestLoadImage: timeout",!1,_,R),h.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=f}else _(!1)}function eo(f,_){const E=new Ae,R=new AbortController,$=setTimeout(()=>{R.abort(),Or(E,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:R.signal}).then(J=>{clearTimeout($),J.ok?Or(E,"TestPingServer: ok",!0,_):Or(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout($),Or(E,"TestPingServer: error",!1,_)})}function Or(f,_,E,R,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),R(E)}catch{}}function to(){this.g=new nn}function bi(f,_,E){const R=E||"";try{Xa(f,function($,J){let pe=$;p($)&&(pe=Wa($)),_.push(R+J+"="+encodeURIComponent(pe))})}catch($){throw _.push(R+"type="+encodeURIComponent("_badmap")),$}}function qs(f){this.l=f.Ub||null,this.j=f.eb||!1}C(qs,Ls),qs.prototype.g=function(){return new Xi(this.l,this.j)},qs.prototype.i=function(f){return function(){return f}}({});function Xi(f,_){wt.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Xi,wt),n=Xi.prototype,n.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,Si(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||h).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wi(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Si(this)),this.g&&(this.readyState=3,Si(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ec(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function ec(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?wi(this):Si(this),this.readyState==3&&ec(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,wi(this))},n.Qa=function(f){this.g&&(this.response=f,wi(this))},n.ga=function(){this.g&&wi(this)};function wi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Si(f)}n.setRequestHeader=function(f,_){this.u.append(f,_)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=_.next();return f.join(`\r
`)};function Si(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function tc(f){let _="";return V(f,function(E,R){_+=R,_+=":",_+=E,_+=`\r
`}),_}function _n(f,_,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=tc(E),typeof f=="string"?E!=null&&encodeURIComponent(String(E)):dt(f,_,E))}function _t(f){wt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(_t,wt);var hl=/^https?$/i,no=["POST","PUT"];n=_t.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,_,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pt.g(),this.v=this.o?js(this.o):js(Pt),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(J){bd(this,J);return}if(f=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var $ in R)E.set($,R[$]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const J of R.keys())E.set(J,R.get(J));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(J=>J.toLowerCase()=="content-type"),$=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(no,_,void 0))||R||$||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,pe]of E)this.g.setRequestHeader(J,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ro(this),this.u=!0,this.g.send(f),this.u=!1}catch(J){bd(this,J)}};function bd(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,dl(f),Ai(f)}function dl(f){f.A||(f.A=!0,St(f,"complete"),St(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,St(this,"complete"),St(this,"abort"),Ai(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ai(this,!0)),_t.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?fl(this):this.bb())},n.bb=function(){fl(this)};function fl(f){if(f.h&&typeof u<"u"&&(!f.v[1]||Dr(f)!=4||f.Z()!=2)){if(f.u&&Dr(f)==4)Vs(f.Ea,0,f);else if(St(f,"readystatechange"),Dr(f)==4){f.h=!1;try{const pe=f.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var R;if(R=pe===0){var $=String(f.D).match(Yu)[1]||null;!$&&h.self&&h.self.location&&($=h.self.location.protocol.slice(0,-1)),R=!hl.test($?$.toLowerCase():"")}E=R}if(E)St(f,"complete"),St(f,"success");else{f.m=6;try{var J=2<Dr(f)?f.g.statusText:""}catch{J=""}f.l=J+" ["+f.Z()+"]",dl(f)}}finally{Ai(f)}}}}function Ai(f,_){if(f.g){ro(f);const E=f.g,R=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||St(f,"ready");try{E.onreadystatechange=R}catch{}}}function ro(f){f.I&&(h.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Dr(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Dr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),or(_)}};function wd(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Yp(f){const _={};f=(f.g&&2<=Dr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<f.length;R++){if(Z(f[R]))continue;var E=j(f[R]);const $=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const J=_[$]||[];_[$]=J,J.push(E)}D(_,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function io(f,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||_}function ml(f){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=io("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=io("baseRetryDelayMs",5e3,f),this.cb=io("retryDelaySeedMs",1e4,f),this.Wa=io("forwardChannelMaxRetries",2,f),this.wa=io("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Nt(f&&f.concurrentRequestLimit),this.Da=new to,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ml.prototype,n.la=8,n.G=1,n.connect=function(f,_,E,R){W(0),this.W=f,this.H=_||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.I=Nd(this,null,this.W),gl(this)};function nc(f){if(Sd(f),f.G==3){var _=f.U++,E=Kt(f.I);if(dt(E,"SID",f.K),dt(E,"RID",_),dt(E,"TYPE","terminate"),so(f,E),_=new Je(f,f.j,_),_.L=2,_.v=Ja(Kt(E)),E=!1,h.navigator&&h.navigator.sendBeacon)try{E=h.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&h.Image&&(new Image().src=_.v,E=!0),E||(_.g=Od(_.j,null),_.g.ea(_.v)),_.F=Date.now(),pt(_)}Cd(f)}function pl(f){f.g&&(ao(f),f.g.cancel(),f.g=null)}function Sd(f){pl(f),f.u&&(h.clearTimeout(f.u),f.u=null),yl(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function gl(f){if(!Ir(f.h)&&!f.s){f.s=!0;var _=f.Ga;Me||L(),Ce||(Me(),Ce=!0),Ye.add(_,f),f.B=0}}function Xp(f,_){return Ya(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=ve(b(f.Ga,f,_),sc(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const $=new Je(this,this.j,f);let J=this.o;if(this.S&&(J?(J=x(J),O(J,this.S)):J=this.S),this.m!==null||this.O||($.H=J,J=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(_+=R,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Ad(this,$,_),E=Kt(this.I),dt(E,"RID",f),dt(E,"CVER",22),this.D&&dt(E,"X-HTTP-Session-Id",this.D),so(this,E),J&&(this.O?_="headers="+encodeURIComponent(String(tc(J)))+"&"+_:this.m&&_n(E,this.m,J)),zs(this.h,$),this.Ua&&dt(E,"TYPE","init"),this.P?(dt(E,"$req",_),dt(E,"SID","null"),$.T=!0,Zt($,E,null)):Zt($,E,_),this.G=2}}else this.G==3&&(f?rc(this,f):this.i.length==0||Ir(this.h)||rc(this))};function rc(f,_){var E;_?E=_.l:E=f.U++;const R=Kt(f.I);dt(R,"SID",f.K),dt(R,"RID",E),dt(R,"AID",f.T),so(f,R),f.m&&f.o&&_n(R,f.m,f.o),E=new Je(f,f.j,E,f.B+1),f.m===null&&(E.H=f.o),_&&(f.i=_.D.concat(f.i)),_=Ad(f,E,1e3),E.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),zs(f.h,E),Zt(E,R,_)}function so(f,_){f.H&&V(f.H,function(E,R){dt(_,R,E)}),f.l&&Xa({},function(E,R){dt(_,R,E)})}function Ad(f,_,E){E=Math.min(f.i.length,E);var R=f.l?b(f.l.Na,f.l,f):null;e:{var $=f.i;let J=-1;for(;;){const pe=["count="+E];J==-1?0<E?(J=$[0].g,pe.push("ofs="+J)):J=0:pe.push("ofs="+J);let at=!0;for(let hn=0;hn<E;hn++){let ot=$[hn].g;const vn=$[hn].map;if(ot-=J,0>ot)J=Math.max(0,$[hn].g-100),at=!1;else try{bi(vn,pe,"req"+ot+"_")}catch{R&&R(vn)}}if(at){R=pe.join("&");break e}}}return f=f.i.splice(0,E),_.D=f,R}function Rd(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;Me||L(),Ce||(Me(),Ce=!0),Ye.add(_,f),f.v=0}}function ic(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=ve(b(f.Fa,f),sc(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Id(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=ve(b(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,W(10),pl(this),Id(this))};function ao(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function Id(f){f.g=new Je(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=Kt(f.qa);dt(_,"RID","rpc"),dt(_,"SID",f.K),dt(_,"AID",f.T),dt(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&dt(_,"TO",f.ja),dt(_,"TYPE","xmlhttp"),so(f,_),f.m&&f.o&&_n(_,f.m,f.o),f.L&&(f.g.I=f.L);var E=f.g;f=f.ia,E.L=1,E.v=Ja(Kt(_)),E.m=null,E.P=!0,rn(E,f)}n.Za=function(){this.C!=null&&(this.C=null,pl(this),ic(this),W(19))};function yl(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function xd(f,_){var E=null;if(f.g==_){yl(f),ao(f),f.g=null;var R=2}else if(Ei(f.h,_))E=_.D,xr(f.h,_),R=1;else return;if(f.G!=0){if(_.o)if(R==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var $=f.B;R=Us(),St(R,new ce(R,E)),gl(f)}else Rd(f);else if($=_.s,$==3||$==0&&0<_.X||!(R==1&&Xp(f,_)||R==2&&ic(f)))switch(E&&0<E.length&&(_=f.h,_.i=_.i.concat(E)),$){case 1:Zi(f,5);break;case 4:Zi(f,10);break;case 3:Zi(f,6);break;default:Zi(f,2)}}}function sc(f,_){let E=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(E*=2),E*_}function Zi(f,_){if(f.j.info("Error code "+_),_==2){var E=b(f.fb,f),R=f.Xa;const $=!R;R=new Ki(R||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Fs(R,"https"),Ja(R),$?Td(R.toString(),E):eo(R.toString(),E)}else W(2);f.G=0,f.l&&f.l.sa(_),Cd(f),Sd(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),W(2)):(this.j.info("Failed to ping google.com"),W(1))};function Cd(f){if(f.G=0,f.ka=[],f.l){const _=$n(f.h);(_.length!=0||f.i.length!=0)&&(M(f.ka,_),M(f.ka,f.i),f.h.i.length=0,F(f.i),f.i.length=0),f.l.ra()}}function Nd(f,_,E){var R=E instanceof Ki?Kt(E):new Ki(E);if(R.g!="")_&&(R.g=_+"."+R.g),Za(R,R.s);else{var $=h.location;R=$.protocol,_=_?_+"."+$.hostname:$.hostname,$=+$.port;var J=new Ki(null);R&&Fs(J,R),_&&(J.g=_),$&&Za(J,$),E&&(J.l=E),R=J}return E=f.D,_=f.ya,E&&_&&dt(R,E,_),dt(R,"VER",f.la),so(f,R),R}function Od(f,_,E){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new _t(new qs({eb:E})):new _t(f.pa),_.Ha(f.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dd(){}n=Dd.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function _l(){}_l.prototype.g=function(f,_){return new Kn(f,_)};function Kn(f,_){wt.call(this),this.g=new ml(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!Z(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!Z(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new Ri(this)}C(Kn,wt),Kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){nc(this.g)},Kn.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.u&&(E={},E.__data__=Wa(f),f=E);_.i.push(new $i(_.Ya++,f)),_.G==3&&gl(_)},Kn.prototype.N=function(){this.g.l=null,delete this.j,nc(this.g),delete this.g,Kn.aa.N.call(this)};function kd(f){_i.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const E in _){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}C(kd,_i);function Pd(){nr.call(this),this.status=1}C(Pd,nr);function Ri(f){this.g=f}C(Ri,Dd),Ri.prototype.ua=function(){St(this.g,"a")},Ri.prototype.ta=function(f){St(this.g,new kd(f))},Ri.prototype.sa=function(f){St(this.g,new Pd)},Ri.prototype.ra=function(){St(this.g,"b")},_l.prototype.createWebChannel=_l.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,zx=function(){return new _l},Ux=function(){return Us()},jx=Cn,M_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oe.NO_ERROR=0,Oe.TIMEOUT=8,Oe.HTTP_ERROR=6,tm=Oe,st.COMPLETE="complete",Lx=st,ol.EventType=lr,lr.OPEN="a",lr.CLOSE="b",lr.ERROR="c",lr.MESSAGE="d",wt.prototype.listen=wt.prototype.K,hh=ol,_t.prototype.listenOnce=_t.prototype.L,_t.prototype.getLastError=_t.prototype.Ka,_t.prototype.getLastErrorCode=_t.prototype.Ba,_t.prototype.getStatus=_t.prototype.Z,_t.prototype.getResponseJson=_t.prototype.Oa,_t.prototype.getResponseText=_t.prototype.oa,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Ha,Vx=_t}).apply(typeof Vf<"u"?Vf:typeof self<"u"?self:typeof window<"u"?window:{});const rA="@firebase/firestore",iA="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Yn.UNAUTHENTICATED=new Yn(null),Yn.GOOGLE_CREDENTIALS=new Yn("google-credentials-uid"),Yn.FIRST_PARTY=new Yn("first-party-uid"),Yn.MOCK_USER=new Yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fu="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=new ap("@firebase/firestore");function eu(){return Ho.logLevel}function de(n,...e){if(Ho.logLevel<=Ze.DEBUG){const t=e.map(y0);Ho.debug(`Firestore (${Fu}): ${n}`,...t)}}function Xn(n,...e){if(Ho.logLevel<=Ze.ERROR){const t=e.map(y0);Ho.error(`Firestore (${Fu}): ${n}`,...t)}}function vu(n,...e){if(Ho.logLevel<=Ze.WARN){const t=e.map(y0);Ho.warn(`Firestore (${Fu}): ${n}`,...t)}}function y0(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n="Unexpected state"){const e=`FIRESTORE (${Fu}) INTERNAL ASSERTION FAILED: `+n;throw Xn(e),new Error(e)}function De(n,e){n||Ie()}function ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Bi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yn.UNAUTHENTICATED))}shutdown(){}}class QL{constructor(e){this.t=e,this.currentUser=Yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){De(this.o===void 0);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new ci;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ci,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ci)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new KL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new Yn(e)}}class YL{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Yn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class XL{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new YL(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZL{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,_r(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){De(this.o===void 0);const r=o=>{o.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.R;return this.R=o.token,de("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new sA(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(De(typeof t.token=="string"),this.R=t.token,new sA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=JL(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function He(n,e){return n<e?-1:n>e?1:0}function Eu(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function Bx(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=-62135596800,oA=1e6;class Ht{static now(){return Ht.fromMillis(Date.now())}static fromDate(e){return Ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*oA);return new Ht(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<aA)throw new me(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oA}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-aA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new Ht(0,0))}static max(){return new Pe(new Ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="__name__";class ki{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ie(),r===void 0?r=e.length-t:r>e.length-t&&Ie(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ki.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ki?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=ki.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=ki.isNumericId(e),s=ki.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?ki.extractNumericId(e).compare(ki.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ra.fromString(e.substring(4,e.length-2))}}class vt extends ki{construct(e,t,r){return new vt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new vt(t)}static emptyPath(){return new vt([])}}const e4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends ki{construct(e,t,r){return new qt(e,t,r)}static isValidIdentifier(e){return e4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lA}static keyField(){return new qt([lA])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new me(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new me(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new me(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(r+=h,s++):(o(),s++)}if(o(),u)throw new me(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qt(t)}static emptyPath(){return new qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(vt.fromString(e))}static fromName(e){return new Te(vt.fromString(e).popFirst(5))}static empty(){return new Te(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new vt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=-1;class Am{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function V_(n){return n.fields.find(e=>e.kind===2)}function xo(n){return n.fields.filter(e=>e.kind!==2)}Am.UNKNOWN_ID=-1;class nm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ph{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ph(0,Tr.min())}}function t4(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Pe.fromTimestamp(r===1e9?new Ht(t+1,0):new Ht(t,r));return new Tr(s,Te.empty(),e)}function qx(n){return new Tr(n.readTime,n.key,kh)}class Tr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Tr(Pe.min(),Te.empty(),kh)}static max(){return new Tr(Pe.max(),Te.empty(),kh)}}function _0(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==Hx)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,r)=>{t(e)})}static reject(e){return new K((t,r)=>{r(e)})}static waitFor(e){return new K((t,r)=>{let s=0,o=0,u=!1;e.forEach(h=>{++s,h.next(()=>{++o,u&&o===s&&t()},d=>r(d))}),u=!0,o===s&&t()})}static or(e){let t=K.resolve(!1);for(const r of e)t=t.next(s=>s?K.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new K((r,s)=>{const o=e.length,u=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;t(e[p]).next(y=>{u[p]=y,++h,h===o&&r(u)},y=>s(y))}})}static doWhile(e,t){return new K((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr="SimpleDb";class hp{static open(e,t,r,s){try{return new hp(t,e.transaction(s,r))}catch(o){throw new yh(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new ci,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new yh(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{const s=v0(r.target.error);this.m.reject(new yh(e,s))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(de(yr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new r4(t)}}class Ia{static delete(e){return de(yr,"Removing database:",e),ko(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!WI())return!1;if(Ia.v())return!0;const e=pn(),t=Ia.C(e),r=0<t&&t<10,s=$x(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,Ia.C(pn())===12.2&&Xn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(de(yr,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const u=o.target.result;t(u)},s.onblocked=()=>{r(new yh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const u=o.target.error;u.name==="VersionError"?r(new me(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new me(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new yh(e,u))},s.onupgradeneeded=o=>{de(yr,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const u=o.target.result;this.O.B(u,s.transaction,o.oldVersion,this.version).next(()=>{de(yr,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const o=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.N(e);const h=hp.open(this.db,e,o?"readonly":"readwrite",r),d=s(h).next(p=>(h.S(),p)).catch(p=>(h.abort(p),K.reject(p))).toPromise();return d.catch(()=>{}),await h.p,d}catch(h){const d=h,p=d.name!=="FirebaseError"&&u<3;if(de(yr,"Transaction failed with error:",d.message,"Retrying:",p),this.close(),!p)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function $x(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class n4{constructor(e){this.q=e,this.$=!1,this.K=null}get isDone(){return this.$}get U(){return this.K}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.K=e}delete(){return ko(this.q.delete())}}class yh extends me{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ha(n){return n.name==="IndexedDbTransactionError"}class r4{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(de(yr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(de(yr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ko(r)}add(e){return de(yr,"ADD",this.store.name,e,e),ko(this.store.add(e))}get(e){return ko(this.store.get(e)).next(t=>(t===void 0&&(t=null),de(yr,"GET",this.store.name,e,t),t))}delete(e){return de(yr,"DELETE",this.store.name,e),ko(this.store.delete(e))}count(){return de(yr,"COUNT",this.store.name),ko(this.store.count())}G(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(r.range);return new K((u,h)=>{o.onerror=d=>{h(d.target.error)},o.onsuccess=d=>{u(d.target.result)}})}{const o=this.cursor(r),u=[];return this.j(o,(h,d)=>{u.push(d)}).next(()=>u)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new K((s,o)=>{r.onerror=u=>{o(u.target.error)},r.onsuccess=u=>{s(u.target.result)}})}J(e,t){de(yr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.j(s,(o,u,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.j(s,t)}X(e){const t=this.cursor({});return new K((r,s)=>{t.onerror=o=>{const u=v0(o.target.error);s(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}j(e,t){const r=[];return new K((s,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void s();const d=new n4(h),p=t(h.primaryKey,h.value,d);if(p instanceof K){const y=p.catch(v=>(d.done(),K.reject(v)));r.push(y)}d.isDone?s():d.U===null?h.continue():h.continue(d.U)}}).next(()=>K.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ko(n){return new K((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=v0(r.target.error);t(s)}})}let uA=!1;function v0(n){const e=Ia.C(pn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return uA||(uA=!0,setTimeout(()=>{throw r},0)),r}}return n}const _h="IndexBackfiller";class i4{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){de(_h,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();de(_h,`Documents written: ${t}`)}catch(t){Ha(t)?de(_h,"Ignoring IndexedDB error during index backfill: ",t):await rl(t)}await this.te(6e4)})}}class s4{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const r=new Set;let s=t,o=!0;return K.doWhile(()=>o===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(u!==null&&!r.has(u))return de(_h,`Processing collection: ${u}`),this.ie(e,u,s).next(h=>{s-=h,r.add(u)});o=!1})).next(()=>t-s)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.se(s,o)).next(h=>(de(_h,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}se(e,t){let r=e;return t.changes.forEach((s,o)=>{const u=qx(o);_0(u,r)>0&&(r=u)}),new Tr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Hr.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=-1;function dp(n){return n==null}function Mh(n){return n===0&&1/n==-1/0}function a4(n){return typeof n=="number"&&Number.isInteger(n)&&!Mh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="";function Hn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=cA(e)),e=o4(n.get(t),e);return cA(e)}function o4(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Rm:t+="";break;default:t+=o}}return t}function cA(n){return n+Rm+""}function Pi(n){const e=n.length;if(De(e>=2),e===2)return De(n.charAt(0)===Rm&&n.charAt(1)===""),vt.emptyPath();const t=e-2,r=[];let s="";for(let o=0;o<e;){const u=n.indexOf(Rm,o);switch((u<0||u>t)&&Ie(),n.charAt(u+1)){case"":const h=n.substring(o,u);let d;s.length===0?d=h:(s+=h,d=s,s=""),r.push(d);break;case"":s+=n.substring(o,u),s+="\0";break;case"":s+=n.substring(o,u+1);break;default:Ie()}o=u+2}return new vt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co="remoteDocuments",ad="owner",$l="owner",Vh="mutationQueues",l4="userId",ai="mutations",hA="batchId",jo="userMutationsIndex",dA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(n,e){return[n,Hn(e)]}function Kx(n,e,t){return[n,Hn(e),t]}const u4={},Tu="documentMutations",Im="remoteDocumentsV14",c4=["prefixPath","collectionGroup","readTime","documentId"],im="documentKeyIndex",h4=["prefixPath","collectionGroup","documentId"],Wx="collectionGroupIndex",d4=["collectionGroup","readTime","prefixPath","documentId"],Lh="remoteDocumentGlobal",L_="remoteDocumentGlobalKey",bu="targets",Qx="queryTargetsIndex",f4=["canonicalId","targetId"],wu="targetDocuments",m4=["targetId","path"],E0="documentTargetsIndex",p4=["path","targetId"],xm="targetGlobalKey",zo="targetGlobal",jh="collectionParents",g4=["collectionId","parent"],Su="clientMetadata",y4="clientId",fp="bundles",_4="bundleId",mp="namedQueries",v4="name",T0="indexConfiguration",E4="indexId",j_="collectionGroupIndex",T4="collectionGroup",Cm="indexState",b4=["indexId","uid"],Yx="sequenceNumberIndex",w4=["uid","sequenceNumber"],Nm="indexEntries",S4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Xx="documentKeyIndex",A4=["indexId","uid","orderedDocumentKey"],pp="documentOverlays",R4=["userId","collectionPath","documentId"],U_="collectionPathOverlayIndex",I4=["userId","collectionPath","largestBatchId"],Zx="collectionGroupOverlayIndex",x4=["userId","collectionGroup","largestBatchId"],b0="globals",C4="name",Jx=[Vh,ai,Tu,Co,bu,ad,zo,wu,Su,Lh,jh,fp,mp],N4=[...Jx,pp],eC=[Vh,ai,Tu,Im,bu,ad,zo,wu,Su,Lh,jh,fp,mp,pp],tC=eC,w0=[...tC,T0,Cm,Nm],O4=w0,D4=[...w0,b0];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_ extends Gx{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function gn(n,e){const t=ze(n);return Ia.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ga(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function nC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tn=class F_{constructor(e,t){this.comparator=e,this.root=t||Ca.EMPTY}insert(e,t){return new F_(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ca.BLACK,null,null))}remove(e){return new F_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ca.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lf(this.root,e,this.comparator,!0)}},Lf=class{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ca=class ps{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??ps.RED,this.left=s??ps.EMPTY,this.right=o??ps.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new ps(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ps.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return ps.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ps.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ps.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const e=this.left.check();if(e!==this.right.check())throw Ie();return e+(this.isRed()?0:1)}};Ca.EMPTY=null,Ca.RED=!0,Ca.BLACK=!1;Ca.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(e,t,r,s,o){return this}insert(e,t,r){return new Ca(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mA(this.data.getIterator())}getIteratorFrom(e){return new mA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bt(this.comparator);return t.data=e,t}}class mA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Kl(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new sr([])}unionWith(e){let t=new bt(qt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new sr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Eu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new rC("Invalid base64 string: "+o):o}}(e);return new un(t)}static fromUint8Array(e){const t=function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o}(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const k4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(n){if(De(!!n),typeof n=="string"){let e=0;const t=k4.exec(n);if(De(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zt(n.seconds),nanos:zt(n.nanos)}}function zt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Rs(n){return typeof n=="string"?un.fromBase64String(n):un.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="server_timestamp",sC="__type__",aC="__previous_value__",oC="__local_write_time__";function S0(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[sC])===null||t===void 0?void 0:t.stringValue)===iC}function gp(n){const e=n.mapValue.fields[aC];return S0(e)?gp(e):e}function Uh(n){const e=As(n.mapValue.fields[oC].timestampValue);return new Ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,t,r,s,o,u,h,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p}}const Om="(default)";class Go{constructor(e,t){this.projectId=e,this.database=t||Om}static empty(){return new Go("","")}get isDefaultDatabase(){return this.database===Om}isEqual(e){return e instanceof Go&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="__type__",lC="__max__",ba={mapValue:{fields:{__type__:{stringValue:lC}}}},R0="__vector__",Au="value",sm={nullValue:"NULL_VALUE"};function Ma(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?S0(n)?4:uC(n)?9007199254740991:yp(n)?10:11:Ie()}function zi(n,e){if(n===e)return!0;const t=Ma(n);if(t!==Ma(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uh(n).isEqual(Uh(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=As(s.timestampValue),h=As(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return Rs(s.bytesValue).isEqual(Rs(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return zt(s.geoPointValue.latitude)===zt(o.geoPointValue.latitude)&&zt(s.geoPointValue.longitude)===zt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return zt(s.integerValue)===zt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=zt(s.doubleValue),h=zt(o.doubleValue);return u===h?Mh(u)===Mh(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return Eu(n.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return function(s,o){const u=s.mapValue.fields||{},h=o.mapValue.fields||{};if(fA(u)!==fA(h))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(h[d]===void 0||!zi(u[d],h[d])))return!1;return!0}(n,e);default:return Ie()}}function zh(n,e){return(n.values||[]).find(t=>zi(t,e))!==void 0}function Va(n,e){if(n===e)return 0;const t=Ma(n),r=Ma(e);if(t!==r)return He(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=zt(o.integerValue||o.doubleValue),d=zt(u.integerValue||u.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(n,e);case 3:return pA(n.timestampValue,e.timestampValue);case 4:return pA(Uh(n),Uh(e));case 5:return He(n.stringValue,e.stringValue);case 6:return function(o,u){const h=Rs(o),d=Rs(u);return h.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),d=u.split("/");for(let p=0;p<h.length&&p<d.length;p++){const y=He(h[p],d[p]);if(y!==0)return y}return He(h.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=He(zt(o.latitude),zt(u.latitude));return h!==0?h:He(zt(o.longitude),zt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return gA(n.arrayValue,e.arrayValue);case 10:return function(o,u){var h,d,p,y;const v=o.fields||{},b=u.fields||{},A=(h=v[Au])===null||h===void 0?void 0:h.arrayValue,C=(d=b[Au])===null||d===void 0?void 0:d.arrayValue,F=He(((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0,((y=C==null?void 0:C.values)===null||y===void 0?void 0:y.length)||0);return F!==0?F:gA(A,C)}(n.mapValue,e.mapValue);case 11:return function(o,u){if(o===ba.mapValue&&u===ba.mapValue)return 0;if(o===ba.mapValue)return 1;if(u===ba.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=u.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let v=0;v<d.length&&v<y.length;++v){const b=He(d[v],y[v]);if(b!==0)return b;const A=Va(h[d[v]],p[y[v]]);if(A!==0)return A}return He(d.length,y.length)}(n.mapValue,e.mapValue);default:throw Ie()}}function pA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);const t=As(n),r=As(e),s=He(t.seconds,r.seconds);return s!==0?s:He(t.nanos,r.nanos)}function gA(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=Va(t[s],r[s]);if(o)return o}return He(t.length,r.length)}function Ru(n){return B_(n)}function B_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=As(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Rs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=B_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const u of r)o?o=!1:s+=",",s+=`${u}:${B_(t.fields[u])}`;return s+"}"}(n.mapValue):Ie()}function am(n){switch(Ma(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gp(n);return e?16+am(e):16;case 5:return 2*n.stringValue.length;case 6:return Rs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+am(o),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Ga(r.fields,(o,u)=>{s+=o.length+am(u)}),s}(n.mapValue);default:throw Ie()}}function Fh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function q_(n){return!!n&&"integerValue"in n}function Bh(n){return!!n&&"arrayValue"in n}function yA(n){return!!n&&"nullValue"in n}function _A(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function om(n){return!!n&&"mapValue"in n}function yp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[A0])===null||t===void 0?void 0:t.stringValue)===R0}function vh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ga(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function uC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===lC}const cC={mapValue:{fields:{[A0]:{stringValue:R0},[Au]:{arrayValue:{}}}}};function M4(n){return"nullValue"in n?sm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fh(Go.empty(),Te.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?yp(n)?cC:{mapValue:{}}:Ie()}function V4(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fh(Go.empty(),Te.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?cC:"mapValue"in n?yp(n)?{mapValue:{}}:ba:Ie()}function vA(n,e){const t=Va(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function EA(n,e){const t=Va(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!om(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vh(t)}setAll(e){let t=qt.emptyPath(),r={},s=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=h.popLast()}u?r[h.lastSegment()]=vh(u):s.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());om(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];om(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ga(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Bn(vh(this.value))}}function hC(n){const e=[];return Ga(n.fields,(t,r)=>{const s=new qt([t]);if(om(r)){const o=hC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const u of o)e.push(s.child(u))}else e.push(s)}),new sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,t,r,s,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Xt(e,0,Pe.min(),Pe.min(),Pe.min(),Bn.empty(),0)}static newFoundDocument(e,t,r,s){return new Xt(e,1,t,Pe.min(),r,s,0)}static newNoDocument(e,t){return new Xt(e,2,t,Pe.min(),Pe.min(),Bn.empty(),0)}static newUnknownDocument(e,t){return new Xt(e,3,t,Pe.min(),Pe.min(),Bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,t){this.position=e,this.inclusive=t}}function TA(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],u=n.position[s];if(o.field.isKeyField()?r=Te.comparator(Te.fromName(u.referenceValue),t.key):r=Va(u,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function bA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t="asc"){this.field=e,this.dir=t}}function L4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dC=class{};class tt extends dC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new j4(e,t,r):t==="array-contains"?new F4(e,r):t==="in"?new _C(e,r):t==="not-in"?new B4(e,r):t==="array-contains-any"?new q4(e,r):new tt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new U4(e,r):new z4(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Va(t,this.value)):t!==null&&Ma(this.value)===Ma(t)&&this.matchesComparison(Va(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tt extends dC{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Tt(e,t)}matches(e){return xu(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function xu(n){return n.op==="and"}function H_(n){return n.op==="or"}function I0(n){return fC(n)&&xu(n)}function fC(n){for(const e of n.filters)if(e instanceof Tt)return!1;return!0}function G_(n){if(n instanceof tt)return n.field.canonicalString()+n.op.toString()+Ru(n.value);if(I0(n))return n.filters.map(e=>G_(e)).join(",");{const e=n.filters.map(t=>G_(t)).join(",");return`${n.op}(${e})`}}function mC(n,e){return n instanceof tt?function(r,s){return s instanceof tt&&r.op===s.op&&r.field.isEqual(s.field)&&zi(r.value,s.value)}(n,e):n instanceof Tt?function(r,s){return s instanceof Tt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,u,h)=>o&&mC(u,s.filters[h]),!0):!1}(n,e):void Ie()}function pC(n,e){const t=n.filters.concat(e);return Tt.create(t,n.op)}function gC(n){return n instanceof tt?function(t){return`${t.field.canonicalString()} ${t.op} ${Ru(t.value)}`}(n):n instanceof Tt?function(t){return t.op.toString()+" {"+t.getFilters().map(gC).join(" ,")+"}"}(n):"Filter"}class j4 extends tt{constructor(e,t,r){super(e,t,r),this.key=Te.fromName(r.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class U4 extends tt{constructor(e,t){super(e,"in",t),this.keys=yC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class z4 extends tt{constructor(e,t){super(e,"not-in",t),this.keys=yC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Te.fromName(r.referenceValue))}class F4 extends tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bh(t)&&zh(t.arrayValue,this.value)}}class _C extends tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&zh(this.value.arrayValue,t)}}class B4 extends tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(zh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!zh(this.value.arrayValue,t)}}class q4 extends tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e,t=null,r=[],s=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=u,this.endAt=h,this.le=null}}function $_(n,e=null,t=[],r=[],s=null,o=null,u=null){return new H4(n,e,t,r,s,o,u)}function $o(n){const e=ze(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>G_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),dp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ru(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ru(r)).join(",")),e.le=t}return e.le}function od(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!L4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!mC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bA(n.startAt,e.startAt)&&bA(n.endAt,e.endAt)}function Dm(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function km(n,e){return n.filters.filter(t=>t instanceof tt&&t.field.isEqual(e))}function wA(n,e,t){let r=sm,s=!0;for(const o of km(n,e)){let u=sm,h=!0;switch(o.op){case"<":case"<=":u=M4(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,h=!1;break;case"!=":case"not-in":u=sm}vA({value:r,inclusive:s},{value:u,inclusive:h})<0&&(r=u,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];vA({value:r,inclusive:s},{value:u,inclusive:t.inclusive})<0&&(r=u,s=t.inclusive);break}}return{value:r,inclusive:s}}function SA(n,e,t){let r=ba,s=!0;for(const o of km(n,e)){let u=ba,h=!0;switch(o.op){case">=":case">":u=V4(o.value),h=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,h=!1;break;case"!=":case"not-in":u=ba}EA({value:r,inclusive:s},{value:u,inclusive:h})>0&&(r=u,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];EA({value:r,inclusive:s},{value:u,inclusive:t.inclusive})>0&&(r=u,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t=null,r=[],s=[],o=null,u="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function G4(n,e,t,r,s,o,u,h){return new Bu(n,e,t,r,s,o,u,h)}function _p(n){return new Bu(n)}function AA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function vC(n){return n.collectionGroup!==null}function Eh(n){const e=ze(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new bt(qt.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new qh(o,r))}),t.has(qt.keyField().canonicalString())||e.he.push(new qh(qt.keyField(),r))}return e.he}function Kr(n){const e=ze(n);return e.Pe||(e.Pe=$4(e,Eh(n))),e.Pe}function $4(n,e){if(n.limitType==="F")return $_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new qh(s.field,o)});const t=n.endAt?new Iu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Iu(n.startAt.position,n.startAt.inclusive):null;return $_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function K_(n,e){const t=n.filters.concat([e]);return new Bu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function W_(n,e,t){return new Bu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vp(n,e){return od(Kr(n),Kr(e))&&n.limitType===e.limitType}function EC(n){return`${$o(Kr(n))}|lt:${n.limitType}`}function tu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>gC(s)).join(", ")}]`),dp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Ru(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Ru(s)).join(",")),`Target(${r})`}(Kr(n))}; limitType=${n.limitType})`}function ld(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Te.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of Eh(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(u,h,d){const p=TA(u,h,d);return u.inclusive?p<=0:p<0}(r.startAt,Eh(r),s)||r.endAt&&!function(u,h,d){const p=TA(u,h,d);return u.inclusive?p>=0:p>0}(r.endAt,Eh(r),s))}(n,e)}function K4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function TC(n){return(e,t)=>{let r=!1;for(const s of Eh(n)){const o=W4(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function W4(n,e,t){const r=n.field.isKeyField()?Te.comparator(e.key,t.key):function(o,u,h){const d=u.data.field(o),p=h.data.field(o);return d!==null&&p!==null?Va(d,p):Ie()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ga(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return nC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=new tn(Te.comparator);function vr(){return Q4}const bC=new tn(Te.comparator);function dh(...n){let e=bC;for(const t of n)e=e.insert(t.key,t);return e}function wC(n){let e=bC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Mi(){return Th()}function SC(){return Th()}function Th(){return new Cs(n=>n.toString(),(n,e)=>n.isEqual(e))}const Y4=new tn(Te.comparator),X4=new bt(Te.comparator);function We(...n){let e=X4;for(const t of n)e=e.add(t);return e}const Z4=new bt(He);function J4(){return Z4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mh(e)?"-0":e}}function AC(n){return{integerValue:""+n}}function ej(n,e){return a4(e)?AC(e):x0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(){this._=void 0}}function tj(n,e,t){return n instanceof Hh?function(s,o){const u={fields:{[sC]:{stringValue:iC},[oC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&S0(o)&&(o=gp(o)),o&&(u.fields[aC]=o),{mapValue:u}}(t,e):n instanceof Cu?IC(n,e):n instanceof Nu?xC(n,e):function(s,o){const u=RC(s,o),h=RA(u)+RA(s.Ie);return q_(u)&&q_(s.Ie)?AC(h):x0(s.serializer,h)}(n,e)}function nj(n,e,t){return n instanceof Cu?IC(n,e):n instanceof Nu?xC(n,e):t}function RC(n,e){return n instanceof Gh?function(r){return q_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Hh extends Ep{}class Cu extends Ep{constructor(e){super(),this.elements=e}}function IC(n,e){const t=CC(e);for(const r of n.elements)t.some(s=>zi(s,r))||t.push(r);return{arrayValue:{values:t}}}class Nu extends Ep{constructor(e){super(),this.elements=e}}function xC(n,e){let t=CC(e);for(const r of n.elements)t=t.filter(s=>!zi(s,r));return{arrayValue:{values:t}}}class Gh extends Ep{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function RA(n){return zt(n.integerValue||n.doubleValue)}function CC(n){return Bh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,t){this.field=e,this.transform=t}}function ij(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Cu&&s instanceof Cu||r instanceof Nu&&s instanceof Nu?Eu(r.elements,s.elements,zi):r instanceof Gh&&s instanceof Gh?zi(r.Ie,s.Ie):r instanceof Hh&&s instanceof Hh}(n.transform,e.transform)}class sj{constructor(e,t){this.version=e,this.transformResults=t}}class Zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Tp{}function NC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new bp(n.key,Zn.none()):new qu(n.key,n.data,Zn.none());{const t=n.data,r=Bn.empty();let s=new bt(qt.comparator);for(let o of e.fields)if(!s.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?r.delete(o):r.set(o,u),s=s.add(o)}return new Ns(n.key,r,new sr(s.toArray()),Zn.none())}}function aj(n,e,t){n instanceof qu?function(s,o,u){const h=s.value.clone(),d=xA(s.fieldTransforms,o,u.transformResults);h.setAll(d),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Ns?function(s,o,u){if(!lm(s.precondition,o))return void o.convertToUnknownDocument(u.version);const h=xA(s.fieldTransforms,o,u.transformResults),d=o.data;d.setAll(OC(s)),d.setAll(h),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function bh(n,e,t,r){return n instanceof qu?function(o,u,h,d){if(!lm(o.precondition,u))return h;const p=o.value.clone(),y=CA(o.fieldTransforms,d,u);return p.setAll(y),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ns?function(o,u,h,d){if(!lm(o.precondition,u))return h;const p=CA(o.fieldTransforms,d,u),y=u.data;return y.setAll(OC(o)),y.setAll(p),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(o,u,h){return lm(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function oj(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=RC(r.transform,s||null);o!=null&&(t===null&&(t=Bn.empty()),t.set(r.field,o))}return t||null}function IA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Eu(r,s,(o,u)=>ij(o,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class qu extends Tp{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ns extends Tp{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function OC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function xA(n,e,t){const r=new Map;De(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],u=o.transform,h=e.data.field(o.field);r.set(o.field,nj(u,h,t[s]))}return r}function CA(n,e,t){const r=new Map;for(const s of n){const o=s.transform,u=t.data.field(s.field);r.set(s.field,tj(o,u,e))}return r}class bp extends Tp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DC extends Tp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&aj(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=bh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=bh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=SC();return this.mutations.forEach(s=>{const o=e.get(s.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=t.has(s.key)?null:h;const d=NC(u,h);d!==null&&r.set(s.key,d),u.isValidDocument()||u.convertToNoDocument(Pe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),We())}isEqual(e){return this.batchId===e.batchId&&Eu(this.mutations,e.mutations,(t,r)=>IA(t,r))&&Eu(this.baseMutations,e.baseMutations,(t,r)=>IA(t,r))}}class N0{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){De(e.mutations.length===r.length);let s=function(){return Y4}();const o=e.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,r[u].version);return new N0(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln,ut;function uj(n){switch(n){case re.OK:return Ie();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ie()}}function kC(n){if(n===void 0)return Xn("GRPC error has no .code"),re.UNKNOWN;switch(n){case ln.OK:return re.OK;case ln.CANCELLED:return re.CANCELLED;case ln.UNKNOWN:return re.UNKNOWN;case ln.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case ln.INTERNAL:return re.INTERNAL;case ln.UNAVAILABLE:return re.UNAVAILABLE;case ln.UNAUTHENTICATED:return re.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case ln.NOT_FOUND:return re.NOT_FOUND;case ln.ALREADY_EXISTS:return re.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return re.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case ln.ABORTED:return re.ABORTED;case ln.OUT_OF_RANGE:return re.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return re.UNIMPLEMENTED;case ln.DATA_LOSS:return re.DATA_LOSS;default:return Ie()}}(ut=ln||(ln={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=new Ra([4294967295,4294967295],0);function NA(n){const e=cj().encode(n),t=new Mx;return t.update(e),new Uint8Array(t.digest())}function OA(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ra([t,r],0),new Ra([s,o],0)]}class D0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fh(`Invalid padding: ${t}`);if(r<0)throw new fh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fh(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Ra.fromNumber(this.Ee)}Ae(e,t,r){let s=e.add(t.multiply(Ra.fromNumber(r)));return s.compare(hj)===1&&(s=new Ra([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=NA(e),[r,s]=OA(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(r,s,o);if(!this.Re(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new D0(o,s,t);return r.forEach(h=>u.insert(h)),u}insert(e){if(this.Ee===0)return;const t=NA(e),[r,s]=OA(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(r,s,o);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class fh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,ud.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new wp(Pe.min(),s,new tn(He),vr(),We())}}class ud{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ud(r,t,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,t,r,s){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=s}}class PC{constructor(e,t){this.targetId=e,this.ge=t}}class MC{constructor(e,t,r=un.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class DA{constructor(){this.pe=0,this.ye=kA(),this.we=un.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=We(),t=We(),r=We();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ie()}}),new ud(this.we,this.be,e,t,r)}Me(){this.Se=!1,this.ye=kA()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,De(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class dj{constructor(e){this.ke=e,this.qe=new Map,this.Qe=vr(),this.$e=jf(),this.Ke=jf(),this.Ue=new tn(He)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Ie()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,r=e.ge.count,s=this.Xe(t);if(s){const o=s.target;if(Dm(o))if(r===0){const u=new Te(o.path);this.ze(t,u,Xt.newNoDocument(u,Pe.min()))}else De(r===1);else{const u=this.et(t);if(u!==r){const h=this.tt(e),d=h?this.nt(h,e,u):1;if(d!==0){this.Ye(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let u,h;try{u=Rs(r).toUint8Array()}catch(d){if(d instanceof rC)return vu("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new D0(u,s,o)}catch(d){return vu(d instanceof fh?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ee===0?null:h}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const u=this.ke.it(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.ze(t,o,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((o,u)=>{const h=this.Xe(u);if(h){if(o.current&&Dm(h.target)){const d=new Te(h.target.path);this._t(d).has(u)||this.ut(u,d)||this.ze(u,d,Xt.newNoDocument(d,e))}o.ve&&(t.set(u,o.Fe()),o.Me())}});let r=We();this.Ke.forEach((o,u)=>{let h=!0;u.forEachWhile(d=>{const p=this.Xe(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.Qe.forEach((o,u)=>u.setReadTime(e));const s=new wp(e,t,this.Ue,this.Qe,r);return this.Qe=vr(),this.$e=jf(),this.Ke=jf(),this.Ue=new tn(He),s}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new DA,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new bt(He),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new bt(He),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new DA),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function jf(){return new tn(Te.comparator)}function kA(){return new tn(Te.comparator)}const fj={asc:"ASCENDING",desc:"DESCENDING"},mj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pj={and:"AND",or:"OR"};class gj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Q_(n,e){return n.useProto3Json||dp(e)?e:{value:e}}function Ou(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yj(n,e){return Ou(n,e.toTimestamp())}function Jn(n){return De(!!n),Pe.fromTimestamp(function(t){const r=As(t);return new Ht(r.seconds,r.nanos)}(n))}function k0(n,e){return Y_(n,e).canonicalString()}function Y_(n,e){const t=function(s){return new vt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function LC(n){const e=vt.fromString(n);return De($C(e)),e}function Pm(n,e){return k0(n.databaseId,e.path)}function Fo(n,e){const t=LC(e);if(t.get(1)!==n.databaseId.projectId)throw new me(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(zC(t))}function jC(n,e){return k0(n.databaseId,e)}function UC(n){const e=LC(n);return e.length===4?vt.emptyPath():zC(e)}function X_(n){return new vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zC(n){return De(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function PA(n,e,t){return{name:Pm(n,e),fields:t.value.mapValue.fields}}function _j(n,e,t){const r=Fo(n,e.name),s=Jn(e.updateTime),o=e.createTime?Jn(e.createTime):Pe.min(),u=new Bn({mapValue:{fields:e.fields}}),h=Xt.newFoundDocument(r,s,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function vj(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,y){return p.useProto3Json?(De(y===void 0||typeof y=="string"),un.fromBase64String(y||"")):(De(y===void 0||y instanceof Buffer||y instanceof Uint8Array),un.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(p){const y=p.code===void 0?re.UNKNOWN:kC(p.code);return new me(y,p.message||"")}(u);t=new MC(r,s,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Fo(n,r.document.name),o=Jn(r.document.updateTime),u=r.document.createTime?Jn(r.document.createTime):Pe.min(),h=new Bn({mapValue:{fields:r.document.fields}}),d=Xt.newFoundDocument(s,o,u,h),p=r.targetIds||[],y=r.removedTargetIds||[];t=new um(p,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Fo(n,r.document),o=r.readTime?Jn(r.readTime):Pe.min(),u=Xt.newNoDocument(s,o),h=r.removedTargetIds||[];t=new um([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Fo(n,r.document),o=r.removedTargetIds||[];t=new um([],o,s,null)}else{if(!("filter"in e))return Ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,u=new lj(s,o),h=r.targetId;t=new PC(h,u)}}return t}function Mm(n,e){let t;if(e instanceof qu)t={update:PA(n,e.key,e.value)};else if(e instanceof bp)t={delete:Pm(n,e.key)};else if(e instanceof Ns)t={update:PA(n,e.key,e.data),updateMask:Aj(e.fieldMask)};else{if(!(e instanceof DC))return Ie();t={verify:Pm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const h=u.transform;if(h instanceof Hh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Cu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Nu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Gh)return{fieldPath:u.field.canonicalString(),increment:h.Ie};throw Ie()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:yj(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ie()}(n,e.precondition)),t}function Z_(n,e){const t=e.currentDocument?function(o){return o.updateTime!==void 0?Zn.updateTime(Jn(o.updateTime)):o.exists!==void 0?Zn.exists(o.exists):Zn.none()}(e.currentDocument):Zn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,h){let d=null;if("setToServerValue"in h)De(h.setToServerValue==="REQUEST_TIME"),d=new Hh;else if("appendMissingElements"in h){const y=h.appendMissingElements.values||[];d=new Cu(y)}else if("removeAllFromArray"in h){const y=h.removeAllFromArray.values||[];d=new Nu(y)}else"increment"in h?d=new Gh(u,h.increment):Ie();const p=qt.fromServerFormat(h.fieldPath);return new rj(p,d)}(n,s)):[];if(e.update){e.update.name;const s=Fo(n,e.update.name),o=new Bn({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=function(d){const p=d.fieldPaths||[];return new sr(p.map(y=>qt.fromServerFormat(y)))}(e.updateMask);return new Ns(s,o,u,t,r)}return new qu(s,o,t,r)}if(e.delete){const s=Fo(n,e.delete);return new bp(s,t)}if(e.verify){const s=Fo(n,e.verify);return new DC(s,t)}return Ie()}function Ej(n,e){return n&&n.length>0?(De(e!==void 0),n.map(t=>function(s,o){let u=s.updateTime?Jn(s.updateTime):Jn(o);return u.isEqual(Pe.min())&&(u=Jn(o)),new sj(u,s.transformResults||[])}(t,e))):[]}function FC(n,e){return{documents:[jC(n,e.path)]}}function BC(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=jC(n,s);const o=function(p){if(p.length!==0)return GC(Tt.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(p){if(p.length!==0)return p.map(y=>function(b){return{field:nu(b.field),direction:bj(b.dir)}}(y))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=Q_(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:s}}function qC(n){let e=UC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){De(r===1);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=function(v){const b=HC(v);return b instanceof Tt&&I0(b)?b.getFilters():[b]}(t.where));let u=[];t.orderBy&&(u=function(v){return v.map(b=>function(C){return new qh(ru(C.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(b))}(t.orderBy));let h=null;t.limit&&(h=function(v){let b;return b=typeof v=="object"?v.value:v,dp(b)?null:b}(t.limit));let d=null;t.startAt&&(d=function(v){const b=!!v.before,A=v.values||[];return new Iu(A,b)}(t.startAt));let p=null;return t.endAt&&(p=function(v){const b=!v.before,A=v.values||[];return new Iu(A,b)}(t.endAt)),G4(e,s,u,o,h,"F",d,p)}function Tj(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HC(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ru(t.unaryFilter.field);return tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ru(t.unaryFilter.field);return tt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ru(t.unaryFilter.field);return tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ru(t.unaryFilter.field);return tt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}}(n):n.fieldFilter!==void 0?function(t){return tt.create(ru(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Tt.create(t.compositeFilter.filters.map(r=>HC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ie()}}(t.compositeFilter.op))}(n):Ie()}function bj(n){return fj[n]}function wj(n){return mj[n]}function Sj(n){return pj[n]}function nu(n){return{fieldPath:n.canonicalString()}}function ru(n){return qt.fromServerFormat(n.fieldPath)}function GC(n){return n instanceof tt?function(t){if(t.op==="=="){if(_A(t.value))return{unaryFilter:{field:nu(t.field),op:"IS_NAN"}};if(yA(t.value))return{unaryFilter:{field:nu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_A(t.value))return{unaryFilter:{field:nu(t.field),op:"IS_NOT_NAN"}};if(yA(t.value))return{unaryFilter:{field:nu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nu(t.field),op:wj(t.op),value:t.value}}}(n):n instanceof Tt?function(t){const r=t.getFilters().map(s=>GC(s));return r.length===1?r[0]:{compositeFilter:{op:Sj(t.op),filters:r}}}(n):Ie()}function Aj(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $C(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t,r,s,o=Pe.min(),u=Pe.min(),h=un.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.Tt=e}}function Rj(n,e){let t;if(e.document)t=_j(n.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Te.fromSegments(e.noDocument.path),s=Wo(e.noDocument.readTime);t=Xt.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ie();{const r=Te.fromSegments(e.unknownDocument.path),s=Wo(e.unknownDocument.version);t=Xt.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const o=new Ht(s[0],s[1]);return Pe.fromTimestamp(o)}(e.readTime)),t}function MA(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Vm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,u){return{name:Pm(o,u.key),fields:u.data.value.mapValue.fields,updateTime:Ou(o,u.version.toTimestamp()),createTime:Ou(o,u.createTime.toTimestamp())}}(n.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ko(e.version)};else{if(!e.isUnknownDocument())return Ie();r.unknownDocument={path:t.path.toArray(),version:Ko(e.version)}}return r}function Vm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ko(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wo(n){const e=new Ht(n.seconds,n.nanoseconds);return Pe.fromTimestamp(e)}function Po(n,e){const t=(e.baseMutations||[]).map(o=>Z_(n.Tt,o));for(let o=0;o<e.mutations.length-1;++o){const u=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const h=e.mutations[o+1];u.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>Z_(n.Tt,o)),s=Ht.fromMillis(e.localWriteTimeMs);return new C0(e.batchId,s,t,r)}function mh(n){const e=Wo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Wo(n.lastLimboFreeSnapshotVersion):Pe.min();let r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return De(o.documents.length===1),Kr(_p(UC(o.documents[0])))}(n.query):function(o){return Kr(qC(o))}(n.query),new vs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,un.fromBase64String(n.resumeToken))}function WC(n,e){const t=Ko(e.snapshotVersion),r=Ko(e.lastLimboFreeSnapshotVersion);let s;s=Dm(e.target)?FC(n.Tt,e.target):BC(n.Tt,e.target).ht;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$o(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function QC(n){const e=qC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?W_(e,e.limit,"L"):e}function i_(n,e){return new O0(e.largestBatchId,Z_(n.Tt,e.overlayMutation))}function VA(n,e){const t=e.path.lastSegment();return[n,Hn(e.path.popLast()),t]}function LA(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ko(r.readTime),documentKey:Hn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{getBundleMetadata(e,t){return jA(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Wo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return jA(e).put(function(s){return{bundleId:s.id,createTime:Ko(Jn(s.createTime)),version:s.version}}(t))}getNamedQuery(e,t){return UA(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:QC(o.bundledQuery),readTime:Wo(o.readTime)}}(r)})}saveNamedQuery(e,t){return UA(e).put(function(s){return{name:s.name,readTime:Ko(Jn(s.readTime)),bundledQuery:s.bundledQuery}}(t))}}function jA(n){return gn(n,fp)}function UA(n){return gn(n,mp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const r=t.uid||"";return new Sp(e,r)}getOverlay(e,t){return Xc(e).get(VA(this.userId,t)).next(r=>r?i_(this.serializer,r):null)}getOverlays(e,t){const r=Mi();return K.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((o,u)=>{const h=new O0(t,u);s.push(this.Et(e,h))}),K.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(u=>s.add(Hn(u.getCollectionPath())));const o=[];return s.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);o.push(Xc(e).J(U_,h))}),K.waitFor(o)}getOverlaysForCollection(e,t,r){const s=Mi(),o=Hn(t),u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Xc(e).G(U_,u).next(h=>{for(const d of h){const p=i_(this.serializer,d);s.set(p.getKey(),p)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const o=Mi();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xc(e).Z({index:Zx,range:h},(d,p,y)=>{const v=i_(this.serializer,p);o.size()<s||v.largestBatchId===u?(o.set(v.getKey(),v),u=v.largestBatchId):y.done()}).next(()=>o)}Et(e,t){return Xc(e).put(function(s,o,u){const[h,d,p]=VA(o,u.mutation.key);return{userId:o,collectionPath:d,documentId:p,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Mm(s.Tt,u.mutation)}}(this.serializer,this.userId,t))}}function Xc(n){return gn(n,pp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{dt(e){return gn(e,b0)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?un.fromUint8Array(r):un.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(zt(e.integerValue));else if("doubleValue"in e){const r=zt(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),Mh(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=As(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.bt(t);else if("bytesValue"in e)this.ft(t,30),t.St(Rs(e.bytesValue)),this.bt(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?uC(e)?this.ft(t,Number.MAX_SAFE_INTEGER):yp(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.bt(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.bt(t)):Ie()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const r=e.fields||{};this.ft(t,55);for(const s of Object.keys(r))this.wt(s,t),this.Rt(r[s],t)}vt(e,t){var r,s;const o=e.fields||{};this.ft(t,53);const u=Au,h=((s=(r=o[u].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.ft(t,15),t.gt(zt(h)),this.wt(u,t),this.Rt(o[u],t)}Ft(e,t){const r=e.values||[];this.ft(t,50);for(const s of r)this.Rt(s,t)}Dt(e,t){this.ft(t,37),Te.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}bt(e){e.gt(2)}}Mo.xt=new Mo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=255;function Cj(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function zA(n){const e=64-function(r){let s=0;for(let o=0;o<8;++o){const u=Cj(255&r[o]);if(s+=u,u!==8)break}return s}(n);return Math.ceil(e/8)}class Nj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const s=t.codePointAt(0);this.Nt(240|s>>>18),this.Nt(128|63&s>>>12),this.Nt(128|63&s>>>6),this.Nt(128|63&s)}}this.Bt()}$t(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const s=t.codePointAt(0);this.kt(240|s>>>18),this.kt(128|63&s>>>12),this.kt(128|63&s>>>6),this.kt(128|63&s)}}this.qt()}Kt(e){const t=this.Ut(e),r=zA(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Gt(e){const t=this.Ut(e),r=zA(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}zt(){this.jt(Wl),this.jt(255)}Ht(){this.Jt(Wl),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Ut(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===Wl?(this.jt(Wl),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===Wl?(this.Jt(Wl),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class Oj{constructor(e){this.Zt=e}St(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Kt(e)}Vt(){this.Zt.zt()}}class Dj{constructor(e){this.Zt=e}St(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class Zc{constructor(){this.Zt=new Nj,this.Xt=new Oj(this.Zt),this.en=new Dj(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Vo(this.indexId,this.documentKey,this.arrayValue,r)}}function ha(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=FA(n.arrayValue,e.arrayValue),t!==0?t:(t=FA(n.directionalValue,e.directionalValue),t!==0?t:Te.comparator(n.documentKey,e.documentKey)))}function FA(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.rn=new bt((t,r)=>qt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(De(e.collectionGroup===this.collectionId),this.an)return!1;const t=V_(e);if(t!==void 0&&!this.cn(t))return!1;const r=xo(e);let s=new Set,o=0,u=0;for(;o<r.length&&this.cn(r[o]);++o)s=s.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.rn.size>0){const h=this.rn.getIterator().getNext();if(!s.has(h.field.canonicalString())){const d=r[o];if(!this.ln(h,d)||!this.hn(this.sn[u++],d))return!1}++o}for(;o<r.length;++o){const h=r[o];if(u>=this.sn.length||!this.hn(this.sn[u++],h))return!1}return!0}Pn(){if(this.an)return null;let e=new bt(qt.comparator);const t=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new nm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new nm(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new nm(r.field,r.dir==="asc"?0:1)));return new Am(Am.UNKNOWN_ID,this.collectionId,t,Ph.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(n){var e,t;if(De(n instanceof tt||n instanceof Tt),n instanceof tt){if(n instanceof _C){const s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>tt.create(n.field,"==",o)))||[];return Tt.create(s,"or")}return n}const r=n.filters.map(s=>YC(s));return Tt.create(r,n.op)}function kj(n){if(n.getFilters().length===0)return[];const e=tv(YC(n));return De(XC(e)),J_(e)||ev(e)?[e]:e.getFilters()}function J_(n){return n instanceof tt}function ev(n){return n instanceof Tt&&I0(n)}function XC(n){return J_(n)||ev(n)||function(t){if(t instanceof Tt&&H_(t)){for(const r of t.getFilters())if(!J_(r)&&!ev(r))return!1;return!0}return!1}(n)}function tv(n){if(De(n instanceof tt||n instanceof Tt),n instanceof tt)return n;if(n.filters.length===1)return tv(n.filters[0]);const e=n.filters.map(r=>tv(r));let t=Tt.create(e,n.op);return t=Lm(t),XC(t)?t:(De(t instanceof Tt),De(xu(t)),De(t.filters.length>1),t.filters.reduce((r,s)=>P0(r,s)))}function P0(n,e){let t;return De(n instanceof tt||n instanceof Tt),De(e instanceof tt||e instanceof Tt),t=n instanceof tt?e instanceof tt?function(s,o){return Tt.create([s,o],"and")}(n,e):qA(n,e):e instanceof tt?qA(e,n):function(s,o){if(De(s.filters.length>0&&o.filters.length>0),xu(s)&&xu(o))return pC(s,o.getFilters());const u=H_(s)?s:o,h=H_(s)?o:s,d=u.filters.map(p=>P0(p,h));return Tt.create(d,"or")}(n,e),Lm(t)}function qA(n,e){if(xu(e))return pC(e,n.getFilters());{const t=e.filters.map(r=>P0(n,r));return Tt.create(t,"or")}}function Lm(n){if(De(n instanceof tt||n instanceof Tt),n instanceof tt)return n;const e=n.getFilters();if(e.length===1)return Lm(e[0]);if(fC(n))return n;const t=e.map(s=>Lm(s)),r=[];return t.forEach(s=>{s instanceof tt?r.push(s):s instanceof Tt&&(s.op===n.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Tt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(){this.Tn=new M0}addToCollectionParentIndex(e,t){return this.Tn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(Tr.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(Tr.min())}updateCollectionGroup(e,t,r){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class M0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new bt(vt.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new bt(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="IndexedDbIndexManager",Uf=new Uint8Array(0);class Mj{constructor(e,t){this.databaseId=t,this.In=new M0,this.En=new Cs(r=>$o(r),(r,s)=>od(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const o={collectionId:r,parent:Hn(s)};return GA(e).put(o)}return K.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[Bx(t),""],!1,!0);return GA(e).G(s).next(o=>{for(const u of o){if(u.collectionId!==t)break;r.push(Pi(u.parent))}return r})}addFieldIndex(e,t){const r=Jc(e),s=function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])}}(t);delete s.indexId;const o=r.add(s);if(t.indexState){const u=Yl(e);return o.next(h=>{u.put(LA(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=Jc(e),s=Yl(e),o=Ql(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Jc(e),r=Ql(e),s=Yl(e);return t.J().next(()=>r.J()).next(()=>s.J())}createTargetIndexes(e,t){return K.forEach(this.dn(t),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const o=new BA(r).Pn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=Ql(e);let s=!0;const o=new Map;return K.forEach(this.dn(t),u=>this.An(e,u).next(h=>{s&&(s=!!h),o.set(u,h)})).next(()=>{if(s){let u=We();const h=[];return K.forEach(o,(d,p)=>{de(HA,`Using index ${function(ee){return`id=${ee.indexId}|cg=${ee.collectionGroup}|f=${ee.fields.map(te=>`${te.fieldPath}:${te.kind}`).join(",")}`}(d)} to execute ${$o(t)}`);const y=function(ee,te){const se=V_(te);if(se===void 0)return null;for(const V of km(ee,se.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(p,d),v=function(ee,te){const se=new Map;for(const V of xo(te))for(const D of km(ee,V.fieldPath))switch(D.op){case"==":case"in":se.set(V.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return se.set(V.fieldPath.canonicalString(),D.value),Array.from(se.values())}return null}(p,d),b=function(ee,te){const se=[];let V=!0;for(const D of xo(te)){const x=D.kind===0?wA(ee,D.fieldPath,ee.startAt):SA(ee,D.fieldPath,ee.startAt);se.push(x.value),V&&(V=x.inclusive)}return new Iu(se,V)}(p,d),A=function(ee,te){const se=[];let V=!0;for(const D of xo(te)){const x=D.kind===0?SA(ee,D.fieldPath,ee.endAt):wA(ee,D.fieldPath,ee.endAt);se.push(x.value),V&&(V=x.inclusive)}return new Iu(se,V)}(p,d),C=this.Rn(d,p,b),F=this.Rn(d,p,A),M=this.Vn(d,p,v),Y=this.mn(d.indexId,y,C,b.inclusive,F,A.inclusive,M);return K.forEach(Y,Z=>r.H(Z,t.limit).next(ee=>{ee.forEach(te=>{const se=Te.fromSegments(te.documentKey);u.has(se)||(u=u.add(se),h.push(se))})}))}).next(()=>h)}return K.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=kj(Tt.create(e.filters,"and")).map(r=>$_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,s,o,u,h){const d=(t!=null?t.length:1)*Math.max(r.length,o.length),p=d/(t!=null?t.length:1),y=[];for(let v=0;v<d;++v){const b=t?this.fn(t[v/p]):Uf,A=this.gn(e,b,r[v%p],s),C=this.pn(e,b,o[v%p],u),F=h.map(M=>this.gn(e,b,M,!0));y.push(...this.createRange(A,C,F))}return y}gn(e,t,r,s){const o=new Vo(e,Te.empty(),t,r);return s?o:o.nn()}pn(e,t,r,s){const o=new Vo(e,Te.empty(),t,r);return s?o.nn():o}An(e,t){const r=new BA(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(o=>{let u=null;for(const h of o)r.un(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;const s=this.dn(t);return K.forEach(s,o=>this.An(e,o).next(u=>{u?r!==0&&u.fields.length<function(d){let p=new bt(qt.comparator),y=!1;for(const v of d.filters)for(const b of v.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?y=!0:p=p.add(b.field));for(const v of d.orderBy)v.field.isKeyField()||(p=p.add(v.field));return p.size+(y?1:0)}(o)&&(r=1):r=0})).next(()=>function(u){return u.limit!==null}(t)&&s.length>1&&r===2?1:r)}yn(e,t){const r=new Zc;for(const s of xo(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const u=r.tn(s.kind);Mo.xt.At(o,u)}return r.Yt()}fn(e){const t=new Zc;return Mo.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const r=new Zc;return Mo.xt.At(Fh(this.databaseId,t),r.tn(function(o){const u=xo(o);return u.length===0?0:u[u.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let s=[];s.push(new Zc);let o=0;for(const u of xo(e)){const h=r[o++];for(const d of s)if(this.bn(t,u.fieldPath)&&Bh(h))s=this.Sn(s,u,h);else{const p=d.tn(u.kind);Mo.xt.At(h,p)}}return this.Dn(s)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}Sn(e,t,r){const s=[...e],o=[];for(const u of r.arrayValue.values||[])for(const h of s){const d=new Zc;d.seed(h.Yt()),Mo.xt.At(u,d.tn(t.kind)),o.push(d)}return o}bn(e,t){return!!e.filters.find(r=>r instanceof tt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Jc(e),s=Yl(e);return(t?r.G(j_,IDBKeyRange.bound(t,t)):r.G()).next(o=>{const u=[];return K.forEach(o,h=>s.get([h.indexId,this.uid]).next(d=>{u.push(function(y,v){const b=v?new Ph(v.sequenceNumber,new Tr(Wo(v.readTime),new Te(Pi(v.documentKey)),v.largestBatchId)):Ph.empty(),A=y.fields.map(([C,F])=>new nm(qt.fromServerFormat(C),F));return new Am(y.indexId,y.collectionGroup,A,b)}(h,d))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,s)=>{const o=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:He(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Jc(e),o=Yl(e);return this.vn(e).next(u=>s.G(j_,IDBKeyRange.bound(t,t)).next(h=>K.forEach(h,d=>o.put(LA(d.indexId,this.uid,u,r)))))}updateIndexEntries(e,t){const r=new Map;return K.forEach(t,(s,o)=>{const u=r.get(s.collectionGroup);return(u?K.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next(h=>(r.set(s.collectionGroup,h),K.forEach(h,d=>this.Cn(e,s,d).next(p=>{const y=this.Fn(o,d);return p.isEqual(y)?K.resolve():this.Mn(e,o,d,p,y)}))))})}xn(e,t,r,s){return Ql(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,s){return Ql(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){const s=Ql(e);let o=new bt(ha);return s.Z({index:Xx,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(u,h)=>{o=o.add(new Vo(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>o)}Fn(e,t){let r=new bt(ha);const s=this.yn(t,e);if(s==null)return r;const o=V_(t);if(o!=null){const u=e.data.field(o.fieldPath);if(Bh(u))for(const h of u.arrayValue.values||[])r=r.add(new Vo(t.indexId,e.key,this.fn(h),s))}else r=r.add(new Vo(t.indexId,e.key,Uf,s));return r}Mn(e,t,r,s,o){de(HA,"Updating index entries for document '%s'",t.key);const u=[];return function(d,p,y,v,b){const A=d.getIterator(),C=p.getIterator();let F=Kl(A),M=Kl(C);for(;F||M;){let Y=!1,Z=!1;if(F&&M){const ee=y(F,M);ee<0?Z=!0:ee>0&&(Y=!0)}else F!=null?Z=!0:Y=!0;Y?(v(M),M=Kl(C)):Z?(b(F),F=Kl(A)):(F=Kl(A),M=Kl(C))}}(s,o,ha,h=>{u.push(this.xn(e,t,r,h))},h=>{u.push(this.On(e,t,r,h))}),K.waitFor(u)}vn(e){let t=1;return Yl(e).Z({index:Yx,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,o)=>{o.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>ha(u,h)).filter((u,h,d)=>!h||ha(u,d[h-1])!==0);const s=[];s.push(e);for(const u of r){const h=ha(u,e),d=ha(u,t);if(h===0)s[0]=e.nn();else if(h>0&&d<0)s.push(u),s.push(u.nn());else if(d>0)break}s.push(t);const o=[];for(let u=0;u<s.length;u+=2){if(this.Nn(s[u],s[u+1]))return[];const h=[s[u].indexId,this.uid,s[u].arrayValue,s[u].directionalValue,Uf,[]],d=[s[u+1].indexId,this.uid,s[u+1].arrayValue,s[u+1].directionalValue,Uf,[]];o.push(IDBKeyRange.bound(h,d))}return o}Nn(e,t){return ha(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next($A)}getMinOffset(e,t){return K.mapArray(this.dn(t),r=>this.An(e,r).next(s=>s||Ie())).next($A)}}function GA(n){return gn(n,jh)}function Ql(n){return gn(n,Nm)}function Jc(n){return gn(n,T0)}function Yl(n){return gn(n,Cm)}function $A(n){De(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;_0(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Tr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZC=41943040;class Un{static withCacheSize(e){return new Un(e,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(n,e,t){const r=n.store(ai),s=n.store(Tu),o=[],u=IDBKeyRange.only(t.batchId);let h=0;const d=r.Z({range:u},(y,v,b)=>(h++,b.delete()));o.push(d.next(()=>{De(h===1)}));const p=[];for(const y of t.mutations){const v=Kx(e,y.key.path,t.batchId);o.push(s.delete(v)),p.push(y.key)}return K.waitFor(o).next(()=>p)}function jm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ie();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(ZC,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);class Ap{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Bn={}}static It(e,t,r,s){De(e.uid!=="");const o=e.isAuthenticated()?e.uid:"";return new Ap(o,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return da(e).Z({index:jo,range:r},(s,o,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const o=iu(e),u=da(e);return u.add({}).next(h=>{De(typeof h=="number");const d=new C0(h,t,r,s),p=function(A,C,F){const M=F.baseMutations.map(Z=>Mm(A.Tt,Z)),Y=F.mutations.map(Z=>Mm(A.Tt,Z));return{userId:C,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:M,mutations:Y}}(this.serializer,this.userId,d),y=[];let v=new bt((b,A)=>He(b.canonicalString(),A.canonicalString()));for(const b of s){const A=Kx(this.userId,b.key.path,h);v=v.add(b.key.path.popLast()),y.push(u.put(p)),y.push(o.put(A,u4))}return v.forEach(b=>{y.push(this.indexManager.addToCollectionParentIndex(e,b))}),e.addOnCommittedListener(()=>{this.Bn[h]=d.keys()}),K.waitFor(y).next(()=>d)})}lookupMutationBatch(e,t){return da(e).get(t).next(r=>r?(De(r.userId===this.userId),Po(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?K.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Bn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return da(e).Z({index:jo,range:s},(u,h,d)=>{h.userId===this.userId&&(De(h.batchId>=r),o=Po(this.serializer,h)),d.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=xa;return da(e).Z({index:jo,range:t,reverse:!0},(s,o,u)=>{r=o.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,xa],[this.userId,Number.POSITIVE_INFINITY]);return da(e).G(jo,t).next(r=>r.map(s=>Po(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=rm(this.userId,t.path),s=IDBKeyRange.lowerBound(r),o=[];return iu(e).Z({range:s},(u,h,d)=>{const[p,y,v]=u,b=Pi(y);if(p===this.userId&&t.path.isEqual(b))return da(e).get(v).next(A=>{if(!A)throw Ie();De(A.userId===this.userId),o.push(Po(this.serializer,A))});d.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bt(He);const s=[];return t.forEach(o=>{const u=rm(this.userId,o.path),h=IDBKeyRange.lowerBound(u),d=iu(e).Z({range:h},(p,y,v)=>{const[b,A,C]=p,F=Pi(A);b===this.userId&&o.path.isEqual(F)?r=r.add(C):v.done()});s.push(d)}),K.waitFor(s).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,o=rm(this.userId,r),u=IDBKeyRange.lowerBound(o);let h=new bt(He);return iu(e).Z({range:u},(d,p,y)=>{const[v,b,A]=d,C=Pi(b);v===this.userId&&r.isPrefixOf(C)?C.length===s&&(h=h.add(A)):y.done()}).next(()=>this.kn(e,h))}kn(e,t){const r=[],s=[];return t.forEach(o=>{s.push(da(e).get(o).next(u=>{if(u===null)throw Ie();De(u.userId===this.userId),r.push(Po(this.serializer,u))}))}),K.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return JC(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),K.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return K.resolve();const r=IDBKeyRange.lowerBound(function(u){return[u]}(this.userId)),s=[];return iu(e).Z({range:r},(o,u,h)=>{if(o[0]===this.userId){const d=Pi(o[1]);s.push(d)}else h.done()}).next(()=>{De(s.length===0)})})}containsKey(e,t){return e1(e,this.userId,t)}Qn(e){return t1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:xa,lastStreamToken:""})}}function e1(n,e,t){const r=rm(e,t.path),s=r[1],o=IDBKeyRange.lowerBound(r);let u=!1;return iu(n).Z({range:o,Y:!0},(h,d,p)=>{const[y,v,b]=h;y===e&&v===s&&(u=!0),p.done()}).next(()=>u)}function da(n){return gn(n,ai)}function iu(n){return gn(n,Tu)}function t1(n){return gn(n,Vh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Qo(0)}static Un(){return new Qo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const r=new Qo(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>Pe.fromTimestamp(new Ht(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Gn(e,s)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Xl(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(De(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let s=0;const o=[];return Xl(e).Z((u,h)=>{const d=mh(h);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))}).next(()=>K.waitFor(o)).next(()=>s)}forEachTarget(e,t){return Xl(e).Z((r,s)=>{const o=mh(s);t(o)})}Wn(e){return WA(e).get(xm).next(t=>(De(t!==null),t))}Gn(e,t){return WA(e).put(xm,t)}zn(e,t){return Xl(e).put(WC(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=$o(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Xl(e).Z({range:s,index:Qx},(u,h,d)=>{const p=mh(h);od(t,p.target)&&(o=p,d.done())}).next(()=>o)}addMatchingKeys(e,t,r){const s=[],o=Ta(e);return t.forEach(u=>{const h=Hn(u.path);s.push(o.put({targetId:r,path:h})),s.push(this.referenceDelegate.addReference(e,r,u))}),K.waitFor(s)}removeMatchingKeys(e,t,r){const s=Ta(e);return K.forEach(t,o=>{const u=Hn(o.path);return K.waitFor([s.delete([r,u]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Ta(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Ta(e);let o=We();return s.Z({range:r,Y:!0},(u,h,d)=>{const p=Pi(u[1]),y=new Te(p);o=o.add(y)}).next(()=>o)}containsKey(e,t){const r=Hn(t.path),s=IDBKeyRange.bound([r],[Bx(r)],!1,!0);let o=0;return Ta(e).Z({index:E0,Y:!0,range:s},([u,h],d,p)=>{u!==0&&(o++,p.done())}).next(()=>o>0)}lt(e,t){return Xl(e).get(t).next(r=>r?mh(r):null)}}function Xl(n){return gn(n,bu)}function WA(n){return gn(n,zo)}function Ta(n){return gn(n,wu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="LruGarbageCollector",n1=1048576;function YA([n,e],[t,r]){const s=He(n,t);return s===0?He(e,r):s}class Lj{constructor(e){this.Hn=e,this.buffer=new bt(YA),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();YA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class r1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){de(QA,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ha(t)?de(QA,"Ignoring IndexedDB error during garbage collection: ",t):await rl(t)}await this.er(3e5)})}}class jj{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return K.resolve(Hr.ae);const r=new Lj(t);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(KA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KA):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,s,o,u,h,d,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,u=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,h=Date.now(),this.removeTargets(e,r,t))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(p=Date.now(),eu()<=Ze.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${s} in `+(h-u)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function i1(n,e){return new jj(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,t){this.db=e,this.garbageCollector=i1(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,s)=>t(s))}addReference(e,t,r){return zf(e,r)}removeReference(e,t,r){return zf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return zf(e,t)}ar(e,t){return function(s,o){let u=!1;return t1(s).X(h=>e1(s,h,o).next(d=>(d&&(u=!0),K.resolve(!d)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this._r(e,(u,h)=>{if(h<=t){const d=this.ar(e,u).next(p=>{if(!p)return o++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Pe.min()),Ta(e).delete(function(v){return[0,Hn(v.path)]}(u))))});s.push(d)}}).next(()=>K.waitFor(s)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return zf(e,t)}_r(e,t){const r=Ta(e);let s,o=Hr.ae;return r.Z({index:E0},([u,h],{path:d,sequenceNumber:p})=>{u===0?(o!==Hr.ae&&t(new Te(Pi(s)),o),o=p,s=d):o=Hr.ae}).next(()=>{o!==Hr.ae&&t(new Te(Pi(s)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zf(n,e){return Ta(n).put(function(r,s){return{targetId:0,path:Hn(r.path),sequenceNumber:s}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.changes=new Cs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?K.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ro(e).put(r)}removeEntry(e,t,r){return Ro(e).delete(function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Vm(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=Xt.newInvalidDocument(t);return Ro(e).Z({index:im,range:IDBKeyRange.only(eh(t))},(s,o)=>{r=this.cr(t,o)}).next(()=>r)}lr(e,t){let r={size:0,document:Xt.newInvalidDocument(t)};return Ro(e).Z({index:im,range:IDBKeyRange.only(eh(t))},(s,o)=>{r={document:this.cr(t,o),size:jm(o)}}).next(()=>r)}getEntries(e,t){let r=vr();return this.hr(e,t,(s,o)=>{const u=this.cr(s,o);r=r.insert(s,u)}).next(()=>r)}Pr(e,t){let r=vr(),s=new tn(Te.comparator);return this.hr(e,t,(o,u)=>{const h=this.cr(o,u);r=r.insert(o,h),s=s.insert(o,jm(u))}).next(()=>({documents:r,Tr:s}))}hr(e,t,r){if(t.isEmpty())return K.resolve();let s=new bt(JA);t.forEach(d=>s=s.add(d));const o=IDBKeyRange.bound(eh(s.first()),eh(s.last())),u=s.getIterator();let h=u.getNext();return Ro(e).Z({index:im,range:o},(d,p,y)=>{const v=Te.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;h&&JA(h,v)<0;)r(h,null),h=u.getNext();h&&h.isEqual(v)&&(r(h,p),h=u.hasNext()?u.getNext():null),h?y.W(eh(h)):y.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,o){const u=t.path,h=[u.popLast().toArray(),u.lastSegment(),Vm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ro(e).G(IDBKeyRange.bound(h,d,!0)).next(p=>{o==null||o.incrementDocumentReadCount(p.length);let y=vr();for(const v of p){const b=this.cr(Te.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);b.isFoundDocument()&&(ld(t,b)||s.has(b.key))&&(y=y.insert(b.key,b))}return y})}getAllFromCollectionGroup(e,t,r,s){let o=vr();const u=ZA(t,r),h=ZA(t,Tr.max());return Ro(e).Z({index:Wx,range:IDBKeyRange.bound(u,h,!0)},(d,p,y)=>{const v=this.cr(Te.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);o=o.insert(v.key,v),o.size===s&&y.done()}).next(()=>o)}newChangeBuffer(e){return new Fj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return XA(e).get(L_).next(t=>(De(!!t),t))}ur(e,t){return XA(e).put(L_,t)}cr(e,t){if(t){const r=Rj(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Pe.min())))return r}return Xt.newInvalidDocument(e)}}function a1(n){return new zj(n)}class Fj extends s1{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new Cs(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new bt((o,u)=>He(o.canonicalString(),u.canonicalString()));return this.changes.forEach((o,u)=>{const h=this.Er.get(o);if(t.push(this.Ir.removeEntry(e,o,h.readTime)),u.isValidDocument()){const d=MA(this.Ir.serializer,u);s=s.add(o.path.popLast());const p=jm(d);r+=p-h.size,t.push(this.Ir.addEntry(e,o,d))}else if(r-=h.size,this.trackRemovals){const d=MA(this.Ir.serializer,u.convertToNoDocument(Pe.min()));t.push(this.Ir.addEntry(e,o,d))}}),s.forEach(o=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Ir.updateMetadata(e,r)),K.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:s})=>(s.forEach((o,u)=>{this.Er.set(o,{size:u,readTime:r.get(o).readTime})}),r))}}function XA(n){return gn(n,Lh)}function Ro(n){return gn(n,Im)}function eh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ZA(n,e){const t=e.documentKey.path.toArray();return[n,Vm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function JA(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(s=He(t[o],r[o]),s)return s;return s=He(t.length,r.length),s||(s=He(t[t.length-2],r[r.length-2]),s||He(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&bh(r.mutation,s,sr.empty(),Ht.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,t,r=We()){const s=Mi();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let u=dh();return o.forEach((h,d)=>{u=u.insert(h,d.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Mi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,We()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,s){let o=vr();const u=Th(),h=function(){return Th()}();return t.forEach((d,p)=>{const y=r.get(p.key);s.has(p.key)&&(y===void 0||y.mutation instanceof Ns)?o=o.insert(p.key,p):y!==void 0?(u.set(p.key,y.mutation.getFieldMask()),bh(y.mutation,p,y.mutation.getFieldMask(),Ht.now())):u.set(p.key,sr.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,y)=>u.set(p,y)),t.forEach((p,y)=>{var v;return h.set(p,new Bj(y,(v=u.get(p))!==null&&v!==void 0?v:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Th();let s=new tn((u,h)=>u-h),o=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(d=>{const p=t.get(d);if(p===null)return;let y=r.get(d)||sr.empty();y=h.applyToLocalView(p,y),r.set(d,y);const v=(s.get(h.batchId)||We()).add(d);s=s.insert(h.batchId,v)})}).next(()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,y=d.value,v=SC();y.forEach(b=>{if(!o.has(b)){const A=NC(t.get(b),r.get(b));A!==null&&v.set(b,A),o=o.add(b)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,v))}return K.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(u){return Te.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):K.resolve(Mi());let h=kh,d=o;return u.next(p=>K.forEach(p,(y,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(y)?K.resolve():this.remoteDocumentCache.getEntry(e,y).next(b=>{d=d.insert(y,b)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,We())).next(y=>({batchId:h,changes:wC(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(r=>{let s=dh();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let u=dh();return this.indexManager.getCollectionParents(e,o).next(h=>K.forEach(h,d=>{const p=function(v,b){return new Bu(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next(y=>{y.forEach((v,b)=>{u=u.insert(v,b)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(u=>{o.forEach((d,p)=>{const y=p.getKey();u.get(y)===null&&(u=u.insert(y,Xt.newInvalidDocument(y)))});let h=dh();return u.forEach((d,p)=>{const y=o.get(d);y!==void 0&&bh(y.mutation,p,sr.empty(),Ht.now()),ld(t,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return K.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Jn(s.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:QC(s.bundledQuery),readTime:Jn(s.readTime)}}(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this.overlays=new tn(Te.comparator),this.Rr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Mi();return K.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.Et(e,t,o)}),K.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),K.resolve()}getOverlaysForCollection(e,t,r){const s=Mi(),o=t.length+1,u=new Te(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return K.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new tn((p,y)=>p-y);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let y=o.get(p.largestBatchId);y===null&&(y=Mi(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=Mi(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,y)=>h.set(p,y)),!(h.size()>=s)););return K.resolve(h)}Et(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new O0(t,r));let o=this.Rr.get(t);o===void 0&&(o=We(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(){this.Vr=new bt(Sn.mr),this.gr=new bt(Sn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new Sn(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Sn(e,t))}br(e,t){e.forEach(r=>this.removeReference(r,t))}Sr(e){const t=new Te(new vt([])),r=new Sn(t,e),s=new Sn(t,e+1),o=[];return this.gr.forEachInRange([r,s],u=>{this.wr(u),o.push(u.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Te(new vt([])),r=new Sn(t,e),s=new Sn(t,e+1);let o=We();return this.gr.forEachInRange([r,s],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new Sn(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Sn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Te.comparator(e.key,t.key)||He(e.Cr,t.Cr)}static pr(e,t){return He(e.Cr,t.Cr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new bt(Sn.mr)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new C0(o,t,r,s);this.mutationQueue.push(u);for(const h of s)this.Mr=this.Mr.add(new Sn(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return K.resolve(u)}lookupMutationBatch(e,t){return K.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Nr(r),o=s<0?0:s;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?xa:this.Fr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Sn(t,0),s=new Sn(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,s],u=>{const h=this.Or(u.Cr);o.push(h)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bt(He);return t.forEach(s=>{const o=new Sn(s,0),u=new Sn(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,u],h=>{r=r.add(h.Cr)})}),K.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;Te.isDocumentKey(o)||(o=o.child(""));const u=new Sn(new Te(o),0);let h=new bt(He);return this.Mr.forEachWhile(d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(h=h.add(d.Cr)),!0)},u),K.resolve(this.Br(h))}Br(e){const t=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){De(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return K.forEach(t.mutations,s=>{const o=new Sn(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new Sn(t,0),s=this.Mr.firstAfterOrEqual(r);return K.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e){this.kr=e,this.docs=function(){return new tn(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,u=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return K.resolve(r?r.document.mutableCopy():Xt.newInvalidDocument(t))}getEntries(e,t){let r=vr();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Xt.newInvalidDocument(s))}),K.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=vr();const u=t.path,h=new Te(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||_0(qx(y),r)<=0||(s.has(y.key)||ld(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Ie()}qr(e,t){return K.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Wj(this)}getSize(e){return K.resolve(this.size)}}class Wj extends s1{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),K.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e){this.persistence=e,this.Qr=new Cs(t=>$o(t),od),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.$r=0,this.Kr=new V0,this.targetCount=0,this.Ur=Qo.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,s)=>t(s)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),K.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new Qo(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.zn(t),K.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.Qr.forEach((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Qr.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),K.waitFor(o).next(()=>s)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return K.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),K.resolve()}removeMatchingKeys(e,t,r){this.Kr.br(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(u=>{o.push(s.markPotentiallyOrphaned(e,u))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Kr.vr(t);return K.resolve(r)}containsKey(e,t){return K.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Hr(0),this.zr=!1,this.zr=!0,this.jr=new Gj,this.referenceDelegate=e(this),this.Hr=new Qj(this),this.indexManager=new Pj,this.remoteDocumentCache=function(s){return new Kj(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new KC(t),this.Yr=new qj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Hj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new $j(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){de("MemoryPersistence","Starting transaction:",e);const s=new Yj(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,t){return K.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class Yj extends Gx{constructor(e){super(),this.currentSequenceNumber=e}}class Rp{constructor(e){this.persistence=e,this.ti=new V0,this.ni=null}static ri(e){return new Rp(e)}get ii(){if(this.ni)return this.ni;throw Ie()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),K.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),K.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.ii,r=>{const s=Te.fromPath(r);return this.si(e,s).next(o=>{o||t.removeEntry(s,Pe.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return K.or([()=>K.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Um{constructor(e,t){this.persistence=e,this.oi=new Cs(r=>Hn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=i1(this,t)}static ri(e,t){return new Um(e,t)}Zr(){}Xr(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return K.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(o=>o?K.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,u=>this.ar(e,u,t).next(h=>{h||(r++,o.removeEntry(u,Pe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),K.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),K.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=am(e.data.value)),t}ar(e,t,r){return K.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return K.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.serializer=e}B(e,t,r,s){const o=new hp("createOrUpgrade",t);r<1&&s>=1&&(function(d){d.createObjectStore(ad)}(e),function(d){d.createObjectStore(Vh,{keyPath:l4}),d.createObjectStore(ai,{keyPath:hA,autoIncrement:!0}).createIndex(jo,dA,{unique:!0}),d.createObjectStore(Tu)}(e),eR(e),function(d){d.createObjectStore(Co)}(e));let u=K.resolve();return r<3&&s>=3&&(r!==0&&(function(d){d.deleteObjectStore(wu),d.deleteObjectStore(bu),d.deleteObjectStore(zo)}(e),eR(e)),u=u.next(()=>function(d){const p=d.store(zo),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pe.min().toTimestamp(),targetCount:0};return p.put(xm,y)}(o))),r<4&&s>=4&&(r!==0&&(u=u.next(()=>function(d,p){return p.store(ai).G().next(v=>{d.deleteObjectStore(ai),d.createObjectStore(ai,{keyPath:hA,autoIncrement:!0}).createIndex(jo,dA,{unique:!0});const b=p.store(ai),A=v.map(C=>b.put(C));return K.waitFor(A)})}(e,o))),u=u.next(()=>{(function(d){d.createObjectStore(Su,{keyPath:y4})})(e)})),r<5&&s>=5&&(u=u.next(()=>this._i(o))),r<6&&s>=6&&(u=u.next(()=>(function(d){d.createObjectStore(Lh)}(e),this.ai(o)))),r<7&&s>=7&&(u=u.next(()=>this.ui(o))),r<8&&s>=8&&(u=u.next(()=>this.ci(e,o))),r<9&&s>=9&&(u=u.next(()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(u=u.next(()=>this.li(o))),r<11&&s>=11&&(u=u.next(()=>{(function(d){d.createObjectStore(fp,{keyPath:_4})})(e),function(d){d.createObjectStore(mp,{keyPath:v4})}(e)})),r<12&&s>=12&&(u=u.next(()=>{(function(d){const p=d.createObjectStore(pp,{keyPath:R4});p.createIndex(U_,I4,{unique:!1}),p.createIndex(Zx,x4,{unique:!1})})(e)})),r<13&&s>=13&&(u=u.next(()=>function(d){const p=d.createObjectStore(Im,{keyPath:c4});p.createIndex(im,h4),p.createIndex(Wx,d4)}(e)).next(()=>this.hi(e,o)).next(()=>e.deleteObjectStore(Co))),r<14&&s>=14&&(u=u.next(()=>this.Pi(e,o))),r<15&&s>=15&&(u=u.next(()=>function(d){d.createObjectStore(T0,{keyPath:E4,autoIncrement:!0}).createIndex(j_,T4,{unique:!1}),d.createObjectStore(Cm,{keyPath:b4}).createIndex(Yx,w4,{unique:!1}),d.createObjectStore(Nm,{keyPath:S4}).createIndex(Xx,A4,{unique:!1})}(e))),r<16&&s>=16&&(u=u.next(()=>{t.objectStore(Cm).clear()}).next(()=>{t.objectStore(Nm).clear()})),r<17&&s>=17&&(u=u.next(()=>{(function(d){d.createObjectStore(b0,{keyPath:C4})})(e)})),u}ai(e){let t=0;return e.store(Co).Z((r,s)=>{t+=jm(s)}).next(()=>{const r={byteSize:t};return e.store(Lh).put(L_,r)})}_i(e){const t=e.store(Vh),r=e.store(ai);return t.G().next(s=>K.forEach(s,o=>{const u=IDBKeyRange.bound([o.userId,xa],[o.userId,o.lastAcknowledgedBatchId]);return r.G(jo,u).next(h=>K.forEach(h,d=>{De(d.userId===o.userId);const p=Po(this.serializer,d);return JC(e,o.userId,p).next(()=>{})}))}))}ui(e){const t=e.store(wu),r=e.store(Co);return e.store(zo).get(xm).next(s=>{const o=[];return r.Z((u,h)=>{const d=new vt(u),p=function(v){return[0,Hn(v)]}(d);o.push(t.get(p).next(y=>y?K.resolve():(v=>t.put({targetId:0,path:Hn(v),sequenceNumber:s.highestListenSequenceNumber}))(d)))}).next(()=>K.waitFor(o))})}ci(e,t){e.createObjectStore(jh,{keyPath:g4});const r=t.store(jh),s=new M0,o=u=>{if(s.add(u)){const h=u.lastSegment(),d=u.popLast();return r.put({collectionId:h,parent:Hn(d)})}};return t.store(Co).Z({Y:!0},(u,h)=>{const d=new vt(u);return o(d.popLast())}).next(()=>t.store(Tu).Z({Y:!0},([u,h,d],p)=>{const y=Pi(h);return o(y.popLast())}))}li(e){const t=e.store(bu);return t.Z((r,s)=>{const o=mh(s),u=WC(this.serializer,o);return t.put(u)})}hi(e,t){const r=t.store(Co),s=[];return r.Z((o,u)=>{const h=t.store(Im),d=function(v){return v.document?new Te(vt.fromString(v.document.name).popFirst(5)):v.noDocument?Te.fromSegments(v.noDocument.path):v.unknownDocument?Te.fromSegments(v.unknownDocument.path):Ie()}(u).path.toArray(),p={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};s.push(h.put(p))}).next(()=>K.waitFor(s))}Pi(e,t){const r=t.store(ai),s=a1(this.serializer),o=new L0(Rp.ri,this.serializer.Tt);return r.G().next(u=>{const h=new Map;return u.forEach(d=>{var p;let y=(p=h.get(d.userId))!==null&&p!==void 0?p:We();Po(this.serializer,d).keys().forEach(v=>y=y.add(v)),h.set(d.userId,y)}),K.forEach(h,(d,p)=>{const y=new Yn(p),v=Sp.It(this.serializer,y),b=o.getIndexManager(y),A=Ap.It(y,this.serializer,b,o.referenceDelegate);return new o1(s,A,v,b).recalculateAndSaveOverlaysForDocumentKeys(new z_(t,Hr.ae),d).next()})})}}function eR(n){n.createObjectStore(wu,{keyPath:m4}).createIndex(E0,p4,{unique:!0}),n.createObjectStore(bu,{keyPath:"targetId"}).createIndex(Qx,f4,{unique:!0}),n.createObjectStore(zo)}const fa="IndexedDbPersistence",s_=18e5,a_=5e3,o_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Zj="main";class j0{constructor(e,t,r,s,o,u,h,d,p,y,v=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=o,this.window=u,this.document=h,this.Ii=p,this.Ei=y,this.di=v,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=b=>Promise.resolve(),!j0.D())throw new me(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Uj(this,s),this.gi=t+Zj,this.serializer=new KC(d),this.pi=new Ia(this.gi,this.di,new Xj(this.serializer)),this.jr=new xj,this.Hr=new Vj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=a1(this.serializer),this.Yr=new Ij,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,y===!1&&Xn(fa,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new me(re.FAILED_PRECONDITION,o_);return this.bi(),this.Si(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new Hr(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ff(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(Ha(e))return de(fa,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return de(fa,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return th(e).get($l).next(t=>K.resolve(this.Ni(t)))}Bi(e){return Ff(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,s_)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=gn(t,Su);return r.G().next(s=>{const o=this.qi(s,s_),u=s.filter(h=>o.indexOf(h)===-1);return K.forEach(u,h=>r.delete(h.clientId)).next(()=>u)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?K.resolve(!0):th(e).get($l).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,a_)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new me(re.FAILED_PRECONDITION,o_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ff(e).G().next(r=>this.qi(r,a_).find(s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,u=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(o||u&&h)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&de(fa,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ki(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ui(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[ad,Su],e=>{const t=new z_(e,Hr.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>Ff(e).G().next(t=>this.qi(t,s_).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Ap.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Mj(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Sp.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){de(fa,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=function(d){return d===17?D4:d===16?O4:d===15?w0:d===14?tC:d===13?eC:d===12?N4:d===11?Jx:void Ie()}(this.di);let u;return this.pi.runTransaction(e,s,o,h=>(u=new z_(h,this.Gr?this.Gr.next():Hr.ae),t==="readwrite-primary"?this.Fi(u).next(d=>!!d||this.Mi(u)).next(d=>{if(!d)throw Xn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new me(re.FAILED_PRECONDITION,Hx);return r(u)}).next(d=>this.Oi(u).next(()=>d)):this.ji(u).next(()=>r(u)))).then(h=>(u.raiseOnCommittedEvent(),h))}ji(e){return th(e).get($l).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,a_)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new me(re.FAILED_PRECONDITION,o_)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return th(e).put($l,t)}static D(){return Ia.D()}xi(e){const t=th(e);return t.get($l).next(r=>this.Ni(r)?(de(fa,"Releasing primary lease."),t.delete($l)):K.resolve())}ki(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Xn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}bi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ui(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}Si(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ki();const t=/(?:Version|Mobile)\/1[456]/;KI()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return de(fa,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xn(fa,"Failed to get zombied client id.",r),!1}}Ki(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){Xn("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function th(n){return gn(n,ad)}function Ff(n){return gn(n,Su)}function Jj(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=s}static Yi(e,t){let r=We(),s=We();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new U0(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return KI()?8:$x(pn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.rs(e,t).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.ss(e,t,s,r).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new eU;return this._s(e,t,u).next(h=>{if(o.result=h,this.Xi)return this.us(e,t,u,h.size)})}).next(()=>o.result)}us(e,t,r,s){return r.documentReadCount<this.es?(eu()<=Ze.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",tu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),K.resolve()):(eu()<=Ze.DEBUG&&de("QueryEngine","Query:",tu(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(eu()<=Ze.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",tu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kr(t))):K.resolve())}rs(e,t){if(AA(t))return K.resolve(null);let r=Kr(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=W_(t,null,"F"),r=Kr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=We(...o);return this.ns.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(d=>{const p=this.cs(t,h);return this.ls(t,p,u,d.readTime)?this.rs(e,W_(t,null,"F")):this.hs(e,p,t,d)}))})))}ss(e,t,r,s){return AA(t)||s.isEqual(Pe.min())?K.resolve(null):this.ns.getDocuments(e,r).next(o=>{const u=this.cs(t,o);return this.ls(t,u,r,s)?K.resolve(null):(eu()<=Ze.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),tu(t)),this.hs(e,u,t,t4(s,kh)).next(h=>h))})}cs(e,t){let r=new bt(TC(e));return t.forEach((s,o)=>{ld(e,o)&&(r=r.add(o))}),r}ls(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,t,r){return eu()<=Ze.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",tu(t)),this.ns.getDocumentsMatchingQuery(e,t,Tr.min(),r)}hs(e,t,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="LocalStore",tU=3e8;class nU{constructor(e,t,r,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new tn(He),this.Is=new Cs(o=>$o(o),od),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o1(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function u1(n,e,t,r){return new nU(n,e,t,r)}async function c1(n,e){const t=ze(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],h=[];let d=We();for(const p of s){u.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of o){h.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return t.localDocuments.getDocuments(r,d).next(p=>({Rs:p,removedBatchIds:u,addedBatchIds:h}))})})}function rU(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(h,d,p,y){const v=p.batch,b=v.keys();let A=K.resolve();return b.forEach(C=>{A=A.next(()=>y.getEntry(d,C)).next(F=>{const M=p.docVersions.get(C);De(M!==null),F.version.compareTo(M)<0&&(v.applyToRemoteDocument(F,p),F.isValidDocument()&&(F.setReadTime(p.commitVersion),y.addEntry(F)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(d,v))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let d=We();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function h1(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function iU(n,e){const t=ze(n),r=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const h=[];e.targetChanges.forEach((y,v)=>{const b=s.get(v);if(!b)return;h.push(t.Hr.removeMatchingKeys(o,y.removedDocuments,v).next(()=>t.Hr.addMatchingKeys(o,y.addedDocuments,v)));let A=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?A=A.withResumeToken(un.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,r)),s=s.insert(v,A),function(F,M,Y){return F.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=tU?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(b,A,y)&&h.push(t.Hr.updateTargetData(o,A))});let d=vr(),p=We();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(sU(o,u,e.documentUpdates).next(y=>{d=y.Vs,p=y.fs})),!r.isEqual(Pe.min())){const y=t.Hr.getLastRemoteSnapshotVersion(o).next(v=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(y)}return K.waitFor(h).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(t.Ts=s,o))}function sU(n,e,t){let r=We(),s=We();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=vr();return t.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(Pe.min())?(e.removeEntry(h,d.readTime),u=u.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),u=u.insert(h,d)):de(z0,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{Vs:u,fs:s}})}function aU(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=xa),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oU(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Hr.getTargetData(r,e).next(o=>o?(s=o,K.resolve(s)):t.Hr.allocateTargetId(r).next(u=>(s=new vs(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function nv(n,e,t){const r=ze(n),s=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!Ha(u))throw u;de(z0,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function tR(n,e,t){const r=ze(n);let s=Pe.min(),o=We();return r.persistence.runTransaction("Execute query","readwrite",u=>function(d,p,y){const v=ze(d),b=v.Is.get(y);return b!==void 0?K.resolve(v.Ts.get(b)):v.Hr.getTargetData(p,y)}(r,u,Kr(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(u,h.targetId).next(d=>{o=d})}).next(()=>r.Ps.getDocumentsMatchingQuery(u,e,t?s:Pe.min(),t?o:We())).next(h=>(lU(r,K4(e),h),{documents:h,gs:o})))}function lU(n,e,t){let r=n.Es.get(e)||Pe.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}class nR{constructor(){this.activeTargetIds=J4()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class d1{constructor(){this.ho=new nR,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new nR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="ConnectivityMonitor";class iR{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){de(rR,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){de(rR,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bf=null;function rv(){return Bf===null?Bf=function(){return 268435456+Math.round(2147483648*Math.random())}():Bf++,"0x"+Bf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="RestConnection",cU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hU{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===Om?`project_id=${r}`:`project_id=${r}&database_id=${s}`}bo(e,t,r,s,o){const u=rv(),h=this.So(e,t.toUriEncodedString());de(l_,`Sending RPC '${e}' ${u}:`,h,r);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,s,o),this.vo(e,h,d,r).then(p=>(de(l_,`Received RPC '${e}' ${u}: `,p),p),p=>{throw vu(l_,`RPC '${e}' ${u} failed with error: `,p,"url: ",h,"request:",r),p})}Co(e,t,r,s,o,u){return this.bo(e,t,r,s,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}So(e,t){const r=cU[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="WebChannelConnection";class fU extends hU{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,s){const o=rv();return new Promise((u,h)=>{const d=new Vx;d.setWithCredentials(!0),d.listenOnce(Lx.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case tm.NO_ERROR:const y=d.getResponseJson();de(jn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),u(y);break;case tm.TIMEOUT:de(jn,`RPC '${e}' ${o} timed out`),h(new me(re.DEADLINE_EXCEEDED,"Request time out"));break;case tm.HTTP_ERROR:const v=d.getStatus();if(de(jn,`RPC '${e}' ${o} failed with status:`,v,"response text:",d.getResponseText()),v>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const A=b==null?void 0:b.error;if(A&&A.status&&A.message){const C=function(M){const Y=M.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(Y)>=0?Y:re.UNKNOWN}(A.status);h(new me(C,A.message))}else h(new me(re.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new me(re.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{de(jn,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(s);de(jn,`RPC '${e}' ${o} sending request:`,s),d.send(t,"POST",p,r,15)})}Wo(e,t,r){const s=rv(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=zx(),h=Ux(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const y=o.join("");de(jn,`Creating RPC '${e}' stream ${s}: ${y}`,d);const v=u.createWebChannel(y,d);let b=!1,A=!1;const C=new dU({Fo:M=>{A?de(jn,`Not sending because RPC '${e}' stream ${s} is closed:`,M):(b||(de(jn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),b=!0),de(jn,`RPC '${e}' stream ${s} sending:`,M),v.send(M))},Mo:()=>v.close()}),F=(M,Y,Z)=>{M.listen(Y,ee=>{try{Z(ee)}catch(te){setTimeout(()=>{throw te},0)}})};return F(v,hh.EventType.OPEN,()=>{A||(de(jn,`RPC '${e}' stream ${s} transport opened.`),C.Qo())}),F(v,hh.EventType.CLOSE,()=>{A||(A=!0,de(jn,`RPC '${e}' stream ${s} transport closed`),C.Ko())}),F(v,hh.EventType.ERROR,M=>{A||(A=!0,vu(jn,`RPC '${e}' stream ${s} transport errored:`,M),C.Ko(new me(re.UNAVAILABLE,"The operation could not be completed")))}),F(v,hh.EventType.MESSAGE,M=>{var Y;if(!A){const Z=M.data[0];De(!!Z);const ee=Z,te=(ee==null?void 0:ee.error)||((Y=ee[0])===null||Y===void 0?void 0:Y.error);if(te){de(jn,`RPC '${e}' stream ${s} received error:`,te);const se=te.status;let V=function(I){const O=ln[I];if(O!==void 0)return kC(O)}(se),D=te.message;V===void 0&&(V=re.INTERNAL,D="Unknown error status: "+se+" with message "+te.message),A=!0,C.Ko(new me(V,D)),v.close()}else de(jn,`RPC '${e}' stream ${s} received:`,Z),C.Uo(Z)}}),F(h,jx.STAT_EVENT,M=>{M.stat===M_.PROXY?de(jn,`RPC '${e}' stream ${s} detected buffering proxy`):M.stat===M_.NOPROXY&&de(jn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.$o()},0),C}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mU(){return typeof window<"u"?window:null}function cm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(n){return new gj(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-r);s>0&&de("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="PersistentStream";class m1{constructor(e,t,r,s,o,u,h,d){this.Ti=e,this.n_=r,this.r_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new f1(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Xn(t.toString()),Xn("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===t&&this.V_(r,s)},r=>{e(()=>{const s=new me(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return de(sR,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(de(sR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pU extends m1{constructor(e,t,r,s,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=vj(this.serializer,e),r=function(o){if(!("targetChange"in o))return Pe.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Pe.min():u.readTime?Jn(u.readTime):Pe.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=X_(this.serializer),t.addTarget=function(o,u){let h;const d=u.target;if(h=Dm(d)?{documents:FC(o,d)}:{query:BC(o,d).ht},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=VC(o,u.resumeToken);const p=Q_(o,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(Pe.min())>0){h.readTime=Ou(o,u.snapshotVersion.toTimestamp());const p=Q_(o,u.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const r=Tj(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=X_(this.serializer),t.removeTarget=e,this.I_(t)}}class gU extends m1{constructor(e,t,r,s,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=o}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=Ej(e.writeResults,e.commitTime),r=Jn(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=X_(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Mm(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{}class _U extends yU{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new me(re.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.bo(e,Y_(t,r),s,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new me(re.UNKNOWN,o.toString())})}Co(e,t,r,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Co(e,Y_(t,r),s,u,h,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(re.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class vU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Xn(t),this.N_=!1):de("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo="RemoteStore";class EU{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(u=>{r.enqueueAndForget(async()=>{$a(this)&&(de(Yo,"Restarting streams for network reachability change."),await async function(d){const p=ze(d);p.W_.add(4),await Hu(p),p.j_.set("Unknown"),p.W_.delete(4),await cd(p)}(this))})}),this.j_=new vU(r,s)}}async function cd(n){if($a(n))for(const e of n.G_)await e(!0)}async function Hu(n){for(const e of n.G_)await e(!1)}function p1(n,e){const t=ze(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),H0(t)?q0(t):Gu(t).c_()&&B0(t,e))}function F0(n,e){const t=ze(n),r=Gu(t);t.U_.delete(e),r.c_()&&g1(t,e),t.U_.size===0&&(r.c_()?r.P_():$a(t)&&t.j_.set("Unknown"))}function B0(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gu(n).y_(e)}function g1(n,e){n.H_.Ne(e),Gu(n).w_(e)}function q0(n){n.H_=new dj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Gu(n).start(),n.j_.B_()}function H0(n){return $a(n)&&!Gu(n).u_()&&n.U_.size>0}function $a(n){return ze(n).W_.size===0}function y1(n){n.H_=void 0}async function TU(n){n.j_.set("Online")}async function bU(n){n.U_.forEach((e,t)=>{B0(n,e)})}async function wU(n,e){y1(n),H0(n)?(n.j_.q_(e),q0(n)):n.j_.set("Unknown")}async function SU(n,e,t){if(n.j_.set("Online"),e instanceof MC&&e.state===2&&e.cause)try{await async function(s,o){const u=o.cause;for(const h of o.targetIds)s.U_.has(h)&&(await s.remoteSyncer.rejectListen(h,u),s.U_.delete(h),s.H_.removeTarget(h))}(n,e)}catch(r){de(Yo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zm(n,r)}else if(e instanceof um?n.H_.We(e):e instanceof PC?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Pe.min()))try{const r=await h1(n.localStore);t.compareTo(r)>=0&&await function(o,u){const h=o.H_.ot(u);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.U_.get(p);y&&o.U_.set(p,y.withResumeToken(d.resumeToken,u))}}),h.targetMismatches.forEach((d,p)=>{const y=o.U_.get(d);if(!y)return;o.U_.set(d,y.withResumeToken(un.EMPTY_BYTE_STRING,y.snapshotVersion)),g1(o,d);const v=new vs(y.target,d,p,y.sequenceNumber);B0(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){de(Yo,"Failed to raise snapshot:",r),await zm(n,r)}}async function zm(n,e,t){if(!Ha(e))throw e;n.W_.add(1),await Hu(n),n.j_.set("Offline"),t||(t=()=>h1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{de(Yo,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await cd(n)})}function _1(n,e){return e().catch(t=>zm(n,t,e))}async function hd(n){const e=ze(n),t=La(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:xa;for(;AU(e);)try{const s=await aU(e.localStore,r);if(s===null){e.K_.length===0&&t.P_();break}r=s.batchId,RU(e,s)}catch(s){await zm(e,s)}v1(e)&&E1(e)}function AU(n){return $a(n)&&n.K_.length<10}function RU(n,e){n.K_.push(e);const t=La(n);t.c_()&&t.b_&&t.S_(e.mutations)}function v1(n){return $a(n)&&!La(n).u_()&&n.K_.length>0}function E1(n){La(n).start()}async function IU(n){La(n).C_()}async function xU(n){const e=La(n);for(const t of n.K_)e.S_(t.mutations)}async function CU(n,e,t){const r=n.K_.shift(),s=N0.from(r,e,t);await _1(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await hd(n)}async function NU(n,e){e&&La(n).b_&&await async function(r,s){if(function(u){return uj(u)&&u!==re.ABORTED}(s.code)){const o=r.K_.shift();La(r).h_(),await _1(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await hd(r)}}(n,e),v1(n)&&E1(n)}async function aR(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),de(Yo,"RemoteStore received new credentials");const r=$a(t);t.W_.add(3),await Hu(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await cd(t)}async function OU(n,e){const t=ze(n);e?(t.W_.delete(2),await cd(t)):e||(t.W_.add(2),await Hu(t),t.j_.set("Unknown"))}function Gu(n){return n.J_||(n.J_=function(t,r,s){const o=ze(t);return o.M_(),new pU(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:TU.bind(null,n),No:bU.bind(null,n),Lo:wU.bind(null,n),p_:SU.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),H0(n)?q0(n):n.j_.set("Unknown")):(await n.J_.stop(),y1(n))})),n.J_}function La(n){return n.Y_||(n.Y_=function(t,r,s){const o=ze(t);return o.M_(),new gU(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:IU.bind(null,n),Lo:NU.bind(null,n),D_:xU.bind(null,n),v_:CU.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await hd(n)):(await n.Y_.stop(),n.K_.length>0&&(de(Yo,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const u=Date.now()+r,h=new G0(e,t,u,s,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xp(n,e){if(Xn("AsyncQueue",`${e}: ${n}`),Ha(n))return new me(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{static emptySet(e){return new fu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Te.comparator(t.key,r.key):(t,r)=>Te.comparator(t.key,r.key),this.keyedMap=dh(),this.sortedSet=new tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new fu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.Z_=new tn(Te.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ie():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Du{constructor(e,t,r,s,o,u,h,d,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new Du(e,t,fu.emptySet(t),u,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class kU{constructor(){this.queries=lR(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const s=ze(t),o=s.queries;s.queries=lR(),o.forEach((u,h)=>{for(const d of h.ta)d.onError(r)})})(this,new me(re.ABORTED,"Firestore shutting down"))}}function lR(){return new Cs(n=>EC(n),vp)}async function T1(n,e){const t=ze(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.na()&&e.ra()&&(r=2):(o=new DU,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await t.onListen(s,!0);break;case 1:o.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const h=xp(u,`Initialization of query '${tu(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&$0(t)}async function b1(n,e){const t=ze(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const u=o.ta.indexOf(e);u>=0&&(o.ta.splice(u,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function PU(n,e){const t=ze(n);let r=!1;for(const s of e){const o=s.query,u=t.queries.get(o);if(u){for(const h of u.ta)h.oa(s)&&(r=!0);u.ea=s}}r&&$0(t)}function MU(n,e,t){const r=ze(n),s=r.queries.get(e);if(s)for(const o of s.ta)o.onError(t);r.queries.delete(e)}function $0(n){n.ia.forEach(e=>{e.next()})}var iv,uR;(uR=iv||(iv={}))._a="default",uR.Cache="cache";class w1{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Du(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Du.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==iv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e){this.key=e}}class A1{constructor(e){this.key=e}}class VU{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=We(),this.mutatedKeys=We(),this.ya=TC(e),this.wa=new fu(this.ya)}get ba(){return this.fa}Sa(e,t){const r=t?t.Da:new oR,s=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,u=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,v)=>{const b=s.get(y),A=ld(this.query,v)?v:null,C=!!b&&this.mutatedKeys.has(b.key),F=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let M=!1;b&&A?b.data.isEqual(A.data)?C!==F&&(r.track({type:3,doc:A}),M=!0):this.va(b,A)||(r.track({type:2,doc:A}),M=!0,(d&&this.ya(A,d)>0||p&&this.ya(A,p)<0)&&(h=!0)):!b&&A?(r.track({type:0,doc:A}),M=!0):b&&!A&&(r.track({type:1,doc:b}),M=!0,(d||p)&&(h=!0)),M&&(A?(u=u.add(A),o=F?o.add(y):o.delete(y)):(u=u.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{wa:u,Da:r,ls:h,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((y,v)=>function(A,C){const F=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return F(A)-F(C)}(y.type,v.type)||this.ya(y.doc,v.doc)),this.Ca(r),s=s!=null&&s;const h=t&&!s?this.Fa():[],d=this.pa.size===0&&this.current&&!s?1:0,p=d!==this.ga;return this.ga=d,u.length!==0||p?{snapshot:new Du(this.query,e.wa,o,u,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new oR,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=We(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new A1(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new S1(r))}),t}Oa(e){this.fa=e.gs,this.pa=We();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return Du.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Cp="SyncEngine";class LU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jU{constructor(e){this.key=e,this.Ba=!1}}class UU{constructor(e,t,r,s,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new Cs(h=>EC(h),vp),this.qa=new Map,this.Qa=new Set,this.$a=new tn(Te.comparator),this.Ka=new Map,this.Ua=new V0,this.Wa={},this.Ga=new Map,this.za=Qo.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function zU(n,e,t=!0){const r=O1(n);let s;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await R1(r,e,t,!0),s}async function FU(n,e){const t=O1(n);await R1(t,e,!0,!1)}async function R1(n,e,t,r){const s=await oU(n.localStore,Kr(e)),o=s.targetId,u=n.sharedClientState.addLocalQueryTarget(o,t);let h;return r&&(h=await BU(n,e,o,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&p1(n.remoteStore,s),h}async function BU(n,e,t,r,s){n.Ha=(v,b,A)=>async function(F,M,Y,Z){let ee=M.view.Sa(Y);ee.ls&&(ee=await tR(F.localStore,M.query,!1).then(({documents:D})=>M.view.Sa(D,ee)));const te=Z&&Z.targetChanges.get(M.targetId),se=Z&&Z.targetMismatches.get(M.targetId)!=null,V=M.view.applyChanges(ee,F.isPrimaryClient,te,se);return hR(F,M.targetId,V.Ma),V.snapshot}(n,v,b,A);const o=await tR(n.localStore,e,!0),u=new VU(e,o.gs),h=u.Sa(o.documents),d=ud.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=u.applyChanges(h,n.isPrimaryClient,d);hR(n,t,p.Ma);const y=new LU(e,t,u);return n.ka.set(e,y),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),p.snapshot}async function qU(n,e,t){const r=ze(n),s=r.ka.get(e),o=r.qa.get(s.targetId);if(o.length>1)return r.qa.set(s.targetId,o.filter(u=>!vp(u,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await nv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&F0(r.remoteStore,s.targetId),sv(r,s.targetId)}).catch(rl)):(sv(r,s.targetId),await nv(r.localStore,s.targetId,!0))}async function HU(n,e){const t=ze(n),r=t.ka.get(e),s=t.qa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),F0(t.remoteStore,r.targetId))}async function GU(n,e,t){const r=D1(n);try{const s=await function(u,h){const d=ze(u),p=Ht.now(),y=h.reduce((A,C)=>A.add(C.key),We());let v,b;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let C=vr(),F=We();return d.ds.getEntries(A,y).next(M=>{C=M,C.forEach((Y,Z)=>{Z.isValidDocument()||(F=F.add(Y))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,C)).next(M=>{v=M;const Y=[];for(const Z of h){const ee=oj(Z,v.get(Z.key).overlayedDocument);ee!=null&&Y.push(new Ns(Z.key,ee,hC(ee.value.mapValue),Zn.exists(!0)))}return d.mutationQueue.addMutationBatch(A,p,Y,h)}).next(M=>{b=M;const Y=M.applyToLocalDocumentSet(v,F);return d.documentOverlayCache.saveOverlays(A,M.batchId,Y)})}).then(()=>({batchId:b.batchId,changes:wC(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,h,d){let p=u.Wa[u.currentUser.toKey()];p||(p=new tn(He)),p=p.insert(h,d),u.Wa[u.currentUser.toKey()]=p}(r,s.batchId,t),await dd(r,s.changes),await hd(r.remoteStore)}catch(s){const o=xp(s,"Failed to persist write");t.reject(o)}}async function I1(n,e){const t=ze(n);try{const r=await iU(t.localStore,e);e.targetChanges.forEach((s,o)=>{const u=t.Ka.get(o);u&&(De(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.Ba=!0:s.modifiedDocuments.size>0?De(u.Ba):s.removedDocuments.size>0&&(De(u.Ba),u.Ba=!1))}),await dd(t,r,e)}catch(r){await rl(r)}}function cR(n,e,t){const r=ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ka.forEach((o,u)=>{const h=u.view.sa(e);h.snapshot&&s.push(h.snapshot)}),function(u,h){const d=ze(u);d.onlineState=h;let p=!1;d.queries.forEach((y,v)=>{for(const b of v.ta)b.sa(h)&&(p=!0)}),p&&$0(d)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $U(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ka.get(e),o=s&&s.key;if(o){let u=new tn(Te.comparator);u=u.insert(o,Xt.newNoDocument(o,Pe.min()));const h=We().add(o),d=new wp(Pe.min(),new Map,new tn(He),u,h);await I1(r,d),r.$a=r.$a.remove(o),r.Ka.delete(e),K0(r)}else await nv(r.localStore,e,!1).then(()=>sv(r,e,t)).catch(rl)}async function KU(n,e){const t=ze(n),r=e.batch.batchId;try{const s=await rU(t.localStore,e);C1(t,r,null),x1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await dd(t,s)}catch(s){await rl(s)}}async function WU(n,e,t){const r=ze(n);try{const s=await function(u,h){const d=ze(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,h).next(v=>(De(v!==null),y=v.keys(),d.mutationQueue.removeMutationBatch(p,v))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(r.localStore,e);C1(r,e,t),x1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await dd(r,s)}catch(s){await rl(s)}}async function QU(n,e){const t=ze(n);$a(t.remoteStore)||de(Cp,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(u){const h=ze(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>h.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(r===xa)return void e.resolve();const s=t.Ga.get(r)||[];s.push(e),t.Ga.set(r,s)}catch(r){const s=xp(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function x1(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function C1(n,e,t){const r=ze(n);let s=r.Wa[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function sv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(r=>{n.Ua.containsKey(r)||N1(n,r)})}function N1(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(F0(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),K0(n))}function hR(n,e,t){for(const r of t)r instanceof S1?(n.Ua.addReference(r.key,e),YU(n,r)):r instanceof A1?(de(Cp,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||N1(n,r.key)):Ie()}function YU(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(de(Cp,"New document in limbo: "+t),n.Qa.add(r),K0(n))}function K0(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Te(vt.fromString(e)),r=n.za.next();n.Ka.set(r,new jU(t)),n.$a=n.$a.insert(t,r),p1(n.remoteStore,new vs(Kr(_p(t.path)),r,"TargetPurposeLimboResolution",Hr.ae))}}async function dd(n,e,t){const r=ze(n),s=[],o=[],u=[];r.ka.isEmpty()||(r.ka.forEach((h,d)=>{u.push(r.Ha(d,e,t).then(p=>{var y;if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(p){s.push(p);const v=U0.Yi(d.targetId,p);o.push(v)}}))}),await Promise.all(u),r.La.p_(s),await async function(d,p){const y=ze(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>K.forEach(p,b=>K.forEach(b.Hi,A=>y.persistence.referenceDelegate.addReference(v,b.targetId,A)).next(()=>K.forEach(b.Ji,A=>y.persistence.referenceDelegate.removeReference(v,b.targetId,A)))))}catch(v){if(!Ha(v))throw v;de(z0,"Failed to update sequence numbers: "+v)}for(const v of p){const b=v.targetId;if(!v.fromCache){const A=y.Ts.get(b),C=A.snapshotVersion,F=A.withLastLimboFreeSnapshotVersion(C);y.Ts=y.Ts.insert(b,F)}}}(r.localStore,o))}async function XU(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){de(Cp,"User change. New user:",e.toKey());const r=await c1(t.localStore,e);t.currentUser=e,function(o,u){o.Ga.forEach(h=>{h.forEach(d=>{d.reject(new me(re.CANCELLED,u))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await dd(t,r.Rs)}}function ZU(n,e){const t=ze(n),r=t.Ka.get(e);if(r&&r.Ba)return We().add(r.key);{let s=We();const o=t.qa.get(e);if(!o)return s;for(const u of o){const h=t.ka.get(u);s=s.unionWith(h.view.ba)}return s}}function O1(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=I1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$U.bind(null,e),e.La.p_=PU.bind(null,e.eventManager),e.La.Ja=MU.bind(null,e.eventManager),e}function D1(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WU.bind(null,e),e}class $h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ip(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return u1(this.persistence,new l1,e.initialUser,this.serializer)}Xa(e){return new L0(Rp.ri,this.serializer)}Za(e){return new d1}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$h.provider={build:()=>new $h};class JU extends $h{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){De(this.persistence.referenceDelegate instanceof Um);const r=this.persistence.referenceDelegate.garbageCollector;return new r1(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new L0(r=>Um.ri(r,t),this.serializer)}}class e6 extends $h{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await D1(this.ru.syncEngine),await hd(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return u1(this.persistence,new l1,e.initialUser,this.serializer)}tu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new r1(r,e.asyncQueue,t)}nu(e,t){const r=new s4(t,this.persistence);return new i4(e.asyncQueue,r)}Xa(e){const t=Jj(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new j0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,mU(),cm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new d1}}class Fm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XU.bind(null,this.syncEngine),await OU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kU}()}createDatastore(e){const t=Ip(e.databaseInfo.databaseId),r=function(o){return new fU(o)}(e.databaseInfo);return function(o,u,h,d){return new _U(o,u,h,d)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,u,h){return new EU(r,s,o,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>cR(this.syncEngine,t,0),function(){return iR.D()?new iR:new uU}())}createSyncEngine(e,t){return function(s,o,u,h,d,p,y){const v=new UU(s,o,u,h,d,p);return y&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=ze(s);de(Yo,"RemoteStore shutting down."),o.W_.add(5),await Hu(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Fm.provider={build:()=>new Fm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Xn("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="FirestoreClient";class t6{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Yn.UNAUTHENTICATED,this.clientId=Fx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async u=>{de(ja,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(de(ja,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=xp(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function u_(n,e){n.asyncQueue.verifyOperationInProgress(),de(ja,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await c1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function dR(n,e){n.asyncQueue.verifyOperationInProgress();const t=await P1(n);de(ja,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>aR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>aR(e.remoteStore,s)),n._onlineComponents=e}async function P1(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(ja,"Using user provided OfflineComponentProvider");try{await u_(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;vu("Error using user provided cache. Falling back to memory cache: "+t),await u_(n,new $h)}}else de(ja,"Using default OfflineComponentProvider"),await u_(n,new JU(void 0));return n._offlineComponents}async function W0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(ja,"Using user provided OnlineComponentProvider"),await dR(n,n._uninitializedComponentsProvider._online)):(de(ja,"Using default OnlineComponentProvider"),await dR(n,new Fm))),n._onlineComponents}function M1(n){return P1(n).then(e=>e.persistence)}function V1(n){return W0(n).then(e=>e.remoteStore)}function L1(n){return W0(n).then(e=>e.syncEngine)}async function j1(n){const e=await W0(n),t=e.eventManager;return t.onListen=zU.bind(null,e.syncEngine),t.onUnlisten=qU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=FU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=HU.bind(null,e.syncEngine),t}function n6(n){return n.asyncQueue.enqueue(async()=>{const e=await M1(n),t=await V1(n);return e.setNetworkEnabled(!0),function(s){const o=ze(s);return o.W_.delete(0),cd(o)}(t)})}function r6(n){return n.asyncQueue.enqueue(async()=>{const e=await M1(n),t=await V1(n);return e.setNetworkEnabled(!1),async function(s){const o=ze(s);o.W_.add(0),await Hu(o),o.j_.set("Offline")}(t)})}function i6(n,e,t={}){const r=new ci;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,d,p){const y=new k1({next:b=>{y.su(),u.enqueueAndForget(()=>b1(o,v));const A=b.docs.has(h);!A&&b.fromCache?p.reject(new me(re.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&b.fromCache&&d&&d.source==="server"?p.reject(new me(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(b)},error:b=>p.reject(b)}),v=new w1(_p(h.path),y,{includeMetadataChanges:!0,Ta:!0});return T1(o,v)}(await j1(n),n.asyncQueue,e,t,r)),r.promise}function s6(n,e,t={}){const r=new ci;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,d,p){const y=new k1({next:b=>{y.su(),u.enqueueAndForget(()=>b1(o,v)),b.fromCache&&d.source==="server"?p.reject(new me(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),v=new w1(h,y,{includeMetadataChanges:!0,Ta:!0});return T1(o,v)}(await j1(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(n,e,t){if(!t)throw new me(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function a6(n,e,t,r){if(e===!0&&r===!0)throw new me(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mR(n){if(!Te.isDocumentKey(n))throw new me(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pR(n){if(Te.isDocumentKey(n))throw new me(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Np(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie()}function br(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Np(n);throw new me(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6="firestore.googleapis.com",gR=!0;class yR{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new me(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=o6,this.ssl=gR}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:gR;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ZC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<n1)throw new me(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}a6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=U1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new me(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new me(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new me(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Q0{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yR({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yR(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new WL;switch(r.type){case"firstParty":return new XL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=fR.get(t);r&&(de("ComponentProvider","Removing Datastore"),fR.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new il(this.firestore,e,this._query)}}class er{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new er(this.firestore,e,this._key)}}class Na extends il{constructor(e,t,r){super(e,t,_p(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new er(this.firestore,null,new Te(e))}withConverter(e){return new Na(this.firestore,e,this._path)}}function l6(n,e,...t){if(n=en(n),z1("collection","path",e),n instanceof Q0){const r=vt.fromString(e,...t);return pR(r),new Na(n,null,r)}{if(!(n instanceof er||n instanceof Na))throw new me(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vt.fromString(e,...t));return pR(r),new Na(n.firestore,null,r)}}function qf(n,e,...t){if(n=en(n),arguments.length===1&&(e=Fx.newId()),z1("doc","path",e),n instanceof Q0){const r=vt.fromString(e,...t);return mR(r),new er(n,null,new Te(r))}{if(!(n instanceof er||n instanceof Na))throw new me(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vt.fromString(e,...t));return mR(r),new er(n.firestore,n instanceof Na?n.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="AsyncQueue";class vR{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new f1(this,"async_queue_retry"),this.bu=()=>{const r=cm();r&&de(_R,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const t=cm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=cm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new ci;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ha(e))throw e;de(_R,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(r);throw Xn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.Su=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=G0.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Ie()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=-1;class qi extends Q0{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new vR,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vR(e),this._firestoreClient=void 0,await e}}}function c6(n,e,t){t||(t=Om);const r=nd(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),o=r.getOptions(t);if(ka(o,e))return s;throw new me(re.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new me(re.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<n1)throw new me(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:t})}function $u(n){if(n._terminated)throw new me(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||F1(n),n._firestoreClient}function F1(n){var e,t,r;const s=n._freezeSettings(),o=function(h,d,p,y){return new P4(h,d,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,U1(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new t6(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(n._componentsProvider))}function h6(n,e){vu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return d6(n,Fm.provider,{build:r=>new e6(r,t.cacheSizeBytes,void 0)}),Promise.resolve()}function d6(n,e,t){if((n=br(n,qi))._firestoreClient||n._terminated)throw new me(re.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new me(re.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},F1(n)}function f6(n){return function(t){const r=new ci;return t.asyncQueue.enqueueAndForget(async()=>QU(await L1(t),r)),r.promise}($u(n=br(n,qi)))}function m6(n){return n6($u(n=br(n,qi)))}function p6(n){return r6($u(n=br(n,qi)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ku(un.fromBase64String(e))}catch(t){throw new me(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ku(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6=/^__.*__$/;class y6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ns(e,this.data,this.fieldMask,t,this.fieldTransforms):new qu(e,this.data,t,this.fieldTransforms)}}class B1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ns(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function q1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class J0{constructor(e,t,r,s,o,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new J0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Ku(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Bm(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(q1(this.Lu)&&g6.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class _6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ip(e)}ju(e,t,r,s=!1){return new J0({Lu:e,methodName:t,zu:r,path:qt.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eE(n){const e=n._freezeSettings(),t=Ip(n._databaseId);return new _6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function v6(n,e,t,r,s,o={}){const u=n.ju(o.merge||o.mergeFields?2:0,e,t,s);tE("Data must be an object, but it was:",u,r);const h=H1(r,u);let d,p;if(o.merge)d=new sr(u.fieldMask),p=u.fieldTransforms;else if(o.mergeFields){const y=[];for(const v of o.mergeFields){const b=av(e,v,t);if(!u.contains(b))throw new me(re.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);$1(y,b)||y.push(b)}d=new sr(y),p=u.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,p=u.fieldTransforms;return new y6(new Bn(h),d,p)}class Dp extends Y0{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dp}}function E6(n,e,t,r){const s=n.ju(1,e,t);tE("Data must be an object, but it was:",s,r);const o=[],u=Bn.empty();Ga(r,(d,p)=>{const y=nE(e,d,t);p=en(p);const v=s.Ku(y);if(p instanceof Dp)o.push(y);else{const b=fd(p,v);b!=null&&(o.push(y),u.set(y,b))}});const h=new sr(o);return new B1(u,h,s.fieldTransforms)}function T6(n,e,t,r,s,o){const u=n.ju(1,e,t),h=[av(e,r,t)],d=[s];if(o.length%2!=0)throw new me(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)h.push(av(e,o[b])),d.push(o[b+1]);const p=[],y=Bn.empty();for(let b=h.length-1;b>=0;--b)if(!$1(p,h[b])){const A=h[b];let C=d[b];C=en(C);const F=u.Ku(A);if(C instanceof Dp)p.push(A);else{const M=fd(C,F);M!=null&&(p.push(A),y.set(A,M))}}const v=new sr(p);return new B1(y,v,u.fieldTransforms)}function b6(n,e,t,r=!1){return fd(t,n.ju(r?4:3,e))}function fd(n,e){if(G1(n=en(n)))return tE("Unsupported field value:",e,n),H1(n,e);if(n instanceof Y0)return function(r,s){if(!q1(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const o=[];let u=0;for(const h of r){let d=fd(h,s.Uu(u));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),u++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=en(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ej(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ht.fromDate(r);return{timestampValue:Ou(s.serializer,o)}}if(r instanceof Ht){const o=new Ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ou(s.serializer,o)}}if(r instanceof X0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ku)return{bytesValue:VC(s.serializer,r._byteString)};if(r instanceof er){const o=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw s.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:k0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Z0)return function(u,h){return{mapValue:{fields:{[A0]:{stringValue:R0},[Au]:{arrayValue:{values:u.toArray().map(p=>{if(typeof p!="number")throw h.Wu("VectorValues must only contain numeric values.");return x0(h.serializer,p)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${Np(r)}`)}(n,e)}function H1(n,e){const t={};return nC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ga(n,(r,s)=>{const o=fd(s,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function G1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ht||n instanceof X0||n instanceof ku||n instanceof er||n instanceof Y0||n instanceof Z0)}function tE(n,e,t){if(!G1(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=Np(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function av(n,e,t){if((e=en(e))instanceof Op)return e._internalPath;if(typeof e=="string")return nE(n,e);throw Bm("Field path arguments must be of type string or ",n,!1,void 0,t)}const w6=new RegExp("[~\\*/\\[\\]]");function nE(n,e,t){if(e.search(w6)>=0)throw Bm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Op(...e.split("."))._internalPath}catch{throw Bm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Bm(n,e,t,r,s){const o=r&&!r.isEmpty(),u=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||u)&&(d+=" (found",o&&(d+=` in field ${r}`),u&&(d+=` in document ${s}`),d+=")"),new me(re.INVALID_ARGUMENT,h+n+d)}function $1(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new er(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new S6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class S6 extends K1{data(){return super.data()}}function kp(n,e){return typeof e=="string"?nE(n,e):e instanceof Op?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new me(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rE{}class W1 extends rE{}function nh(n,e,...t){let r=[];e instanceof rE&&r.push(e),r=r.concat(t),function(o){const u=o.filter(d=>d instanceof iE).length,h=o.filter(d=>d instanceof Pp).length;if(u>1||u>0&&h>0)throw new me(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Pp extends W1{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Pp(e,t,r)}_apply(e){const t=this._parse(e);return Q1(e._query,t),new il(e.firestore,e.converter,K_(e._query,t))}_parse(e){const t=eE(e.firestore);return function(o,u,h,d,p,y,v){let b;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new me(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){TR(v,y);const C=[];for(const F of v)C.push(ER(d,o,F));b={arrayValue:{values:C}}}else b=ER(d,o,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||TR(v,y),b=b6(h,u,v,y==="in"||y==="not-in");return tt.create(p,y,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Zl(n,e,t){const r=e,s=kp("where",n);return Pp._create(s,r,t)}class iE extends rE{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new iE(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Tt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,o){let u=s;const h=o.getFlattenedFilters();for(const d of h)Q1(u,d),u=K_(u,d)}(e._query,t),new il(e.firestore,e.converter,K_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sE extends W1{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sE(e,t)}_apply(e){const t=function(s,o,u){if(s.startAt!==null)throw new me(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new me(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qh(o,u)}(e._query,this._field,this._direction);return new il(e.firestore,e.converter,function(s,o){const u=s.explicitOrderBy.concat([o]);return new Bu(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function rh(n,e="asc"){const t=e,r=kp("orderBy",n);return sE._create(r,t)}function ER(n,e,t){if(typeof(t=en(t))=="string"){if(t==="")throw new me(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vC(e)&&t.indexOf("/")!==-1)throw new me(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(vt.fromString(t));if(!Te.isDocumentKey(r))throw new me(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fh(n,new Te(r))}if(t instanceof er)return Fh(n,t._key);throw new me(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Np(t)}.`)}function TR(n,e){if(!Array.isArray(n)||n.length===0)throw new me(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Q1(n,e){const t=function(s,o){for(const u of s)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new me(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class R6{convertValue(e,t="none"){switch(Ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ga(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Au].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>zt(u.doubleValue));return new Z0(o)}convertGeoPoint(e){return new X0(zt(e.latitude),zt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Uh(e));default:return null}}convertTimestamp(e){const t=As(e);return new Ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=vt.fromString(e);De($C(r));const s=new Go(r.get(1),r.get(3)),o=new Te(r.popFirst(5));return s.isEqual(t)||Xn(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Y1 extends K1{constructor(e,t,r,s,o,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(kp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class hm extends Y1{data(e={}){return super.data(e)}}class x6{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new ph(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hm(this._firestore,this._userDataWriter,r.key,r,new ph(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(h=>{const d=new hm(s._firestore,s._userDataWriter,h.doc.key,h.doc,new ph(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new hm(s._firestore,s._userDataWriter,h.doc.key,h.doc,new ph(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,y=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:C6(h.type),doc:d,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function C6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(n){n=br(n,er);const e=br(n.firestore,qi);return i6($u(e),n._key).then(t=>k6(e,n,t))}class X1 extends R6{constructor(e){super(),this.firestore=e}convertBytes(e){return new ku(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,t)}}function su(n){n=br(n,il);const e=br(n.firestore,qi),t=$u(e),r=new X1(e);return A6(n._query),s6(t,n._query).then(s=>new x6(e,r,n,s))}function N6(n,e,t){n=br(n,er);const r=br(n.firestore,qi),s=I6(n.converter,e);return aE(r,[v6(eE(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Zn.none())])}function O6(n,e,t,...r){n=br(n,er);const s=br(n.firestore,qi),o=eE(s);let u;return u=typeof(e=en(e))=="string"||e instanceof Op?T6(o,"updateDoc",n._key,e,t,r):E6(o,"updateDoc",n._key,e),aE(s,[u.toMutation(n._key,Zn.exists(!0))])}function D6(n){return aE(br(n.firestore,qi),[new bp(n._key,Zn.none())])}function aE(n,e){return function(r,s){const o=new ci;return r.asyncQueue.enqueueAndForget(async()=>GU(await L1(r),s,o)),o.promise}($u(n),e)}function k6(n,e,t){const r=t.docs.get(e._key),s=new X1(n);return new Y1(n,s,e._key,r,new ph(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){Fu=s})(Ba),Pa(new bs("firestore",(r,{instanceIdentifier:s,options:o})=>{const u=r.getProvider("app").getImmediate(),h=new qi(new QL(r.getProvider("auth-internal")),new ZL(u,r.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new me(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Go(p.options.projectId,y)}(u,s),u);return o=Object.assign({useFetchStreams:t},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),$r(rA,iA,e),$r(rA,iA,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="firebasestorage.googleapis.com",P6="storageBucket",M6=2*60*1e3,V6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Bi{constructor(e,t,r=0){super(c_(e),`Firebase Storage: ${t} (${c_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return c_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Fi;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Fi||(Fi={}));function c_(n){return"storage/"+n}function L6(){const n="An unknown error occurred, please check the error payload for server response.";return new Hi(Fi.UNKNOWN,n)}function j6(){return new Hi(Fi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function U6(){return new Hi(Fi.CANCELED,"User canceled the upload/download.")}function z6(n){return new Hi(Fi.INVALID_URL,"Invalid URL '"+n+"'.")}function F6(n){return new Hi(Fi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function wR(n){return new Hi(Fi.INVALID_ARGUMENT,n)}function J1(){return new Hi(Fi.APP_DELETED,"The Firebase app was deleted.")}function B6(n){return new Hi(Fi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=li.makeFromUrl(e,t)}catch{return new li(e,"")}if(r.path==="")return r;throw F6(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+s+u,"i"),d={bucket:1,path:3};function p(te){te.path_=decodeURIComponent(te.path)}const y="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",A=new RegExp(`^https?://${v}/${y}/b/${s}/o${b}`,"i"),C={bucket:1,path:3},F=t===Z1?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",Y=new RegExp(`^https?://${F}/${s}/${M}`,"i"),ee=[{regex:h,indices:d,postModify:o},{regex:A,indices:C,postModify:p},{regex:Y,indices:{bucket:1,path:2},postModify:p}];for(let te=0;te<ee.length;te++){const se=ee[te],V=se.regex.exec(e);if(V){const D=V[se.indices.bucket];let x=V[se.indices.path];x||(x=""),r=new li(D,x),se.postModify(r);break}}if(r==null)throw z6(e);return r}}class q6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(n,e,t){let r=1,s=null,o=null,u=!1,h=0;function d(){return h===2}let p=!1;function y(...M){p||(p=!0,e.apply(null,M))}function v(M){s=setTimeout(()=>{s=null,n(A,d())},M)}function b(){o&&clearTimeout(o)}function A(M,...Y){if(p){b();return}if(M){b(),y.call(null,M,...Y);return}if(d()||u){b(),y.call(null,M,...Y);return}r<64&&(r*=2);let ee;h===1?(h=2,ee=0):ee=(r+Math.random())*1e3,v(ee)}let C=!1;function F(M){C||(C=!0,b(),!p&&(s!==null?(M||(h=2),clearTimeout(s),v(0)):M||(h=1)))}return v(0),o=setTimeout(()=>{u=!0,F(!0)},t),F}function G6(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(n){return n!==void 0}function SR(n,e,t,r){if(r<e)throw wR(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw wR(`Invalid value for '${n}'. Expected ${t} or less.`)}function K6(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var qm;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(qm||(qm={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,t,r,s,o,u,h,d,p,y,v,b=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=v,this.retry=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,C)=>{this.resolve_=A,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Hf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const u=h=>{const d=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const h=o.getErrorCode()===qm.NO_ERROR,d=o.getStatus();if(!h||W6(d,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===qm.ABORT;r(!1,new Hf(!1,null,y));return}const p=this.successCodes_.indexOf(d)!==-1;r(!0,new Hf(p,o))})},t=(r,s)=>{const o=this.resolve_,u=this.reject_,h=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(h,h.getResponse());$6(d)?o(d):o()}catch(d){u(d)}else if(h!==null){const d=L6();d.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,d)):u(d)}else if(s.canceled){const d=this.appDelete_?J1():U6();u(d)}else{const d=j6();u(d)}};this.canceled_?t(!1,new Hf(!1,null,!0)):this.backoffId_=H6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&G6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Hf{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Y6(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function X6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Z6(n,e){e&&(n["X-Firebase-GMPID"]=e)}function J6(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function ez(n,e,t,r,s,o,u=!0){const h=K6(n.urlParams),d=n.url+h,p=Object.assign({},n.headers);return Z6(p,e),Y6(p,t),X6(p,o),J6(p,r),new Q6(d,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tz(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function nz(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t){this._service=e,t instanceof li?this._location=t:this._location=li.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Hm(e,t)}get root(){const e=new li(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nz(this._location.path)}get storage(){return this._service}get parent(){const e=tz(this._location.path);if(e===null)return null;const t=new li(this._location.bucket,e);return new Hm(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw B6(e)}}function AR(n,e){const t=e==null?void 0:e[P6];return t==null?null:li.makeFromBucketSpec(t,n)}function rz(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:GI(s,n.app.options.projectId))}class iz{constructor(e,t,r,s,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=Z1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=M6,this._maxUploadRetryTime=V6,this._requests=new Set,s!=null?this._bucket=li.makeFromBucketSpec(s,this._host):this._bucket=AR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=li.makeFromBucketSpec(this._url,e):this._bucket=AR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){SR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){SR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(_r(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Hm(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new q6(J1());{const u=ez(e,this._appId,r,s,t,this._firebaseVersion,o);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const RR="@firebase/storage",IR="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="storage";function sz(n=o0(),e){n=en(n);const r=nd(n,eN).getImmediate({identifier:e}),s=BI("storage");return s&&az(r,...s),r}function az(n,e,t,r={}){rz(n,e,t,r)}function oz(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new iz(t,r,s,e,Ba)}function lz(){Pa(new bs(eN,oz,"PUBLIC").setMultipleInstances(!0)),$r(RR,IR,""),$r(RR,IR,"esm2017")}lz();var xR={};const CR="@firebase/database",NR="1.0.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tN="";function uz(n){tN=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Pn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Ch(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return xs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new cz(e)}}catch{}return new hz},Uo=nN("localStorage"),dz=nN("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=new ap("@firebase/database"),fz=function(){let n=1;return function(){return n++}}(),rN=function(n){const e=wP(n),t=new _P;t.update(e);const r=t.digest();return r0.encodeByteArray(r)},md=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=md.apply(null,r):typeof r=="object"?e+=Pn(r):e+=r,e+=" "}return e};let wh=null,OR=!0;const mz=function(n,e){Ee(!0,"Can't turn on custom loggers persistently."),mu.logLevel=Ze.VERBOSE,wh=mu.log.bind(mu)},zn=function(...n){if(OR===!0&&(OR=!1,wh===null&&dz.get("logging_enabled")===!0&&mz()),wh){const e=md.apply(null,n);wh(e)}},pd=function(n){return function(...e){zn(n,...e)}},ov=function(...n){const e="FIREBASE INTERNAL ERROR: "+md(...n);mu.error(e)},Is=function(...n){const e=`FIREBASE FATAL ERROR: ${md(...n)}`;throw mu.error(e),new Error(e)},Er=function(...n){const e="FIREBASE WARNING: "+md(...n);mu.warn(e)},pz=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Er("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},iN=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},gz=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Pu="[MIN_NAME]",Xo="[MAX_NAME]",Ku=function(n,e){if(n===e)return 0;if(n===Pu||e===Xo)return-1;if(e===Pu||n===Xo)return 1;{const t=DR(n),r=DR(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},yz=function(n,e){return n===e?0:n<e?-1:1},ih=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Pn(e))},oE=function(n){if(typeof n!="object"||n===null)return Pn(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Pn(e[r]),t+=":",t+=oE(n[e[r]]);return t+="}",t},sN=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)s+e>t?r.push(n.substring(s,t)):r.push(n.substring(s,s+e));return r};function Wr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const aN=function(n){Ee(!iN(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let s,o,u,h,d;n===0?(o=0,u=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=h+r,u=Math.round(n*Math.pow(2,t-h)-Math.pow(2,t))):(o=0,u=Math.round(n/Math.pow(2,1-r-t))));const p=[];for(d=t;d;d-=1)p.push(u%2?1:0),u=Math.floor(u/2);for(d=e;d;d-=1)p.push(o%2?1:0),o=Math.floor(o/2);p.push(s?1:0),p.reverse();const y=p.join("");let v="";for(d=0;d<64;d+=8){let b=parseInt(y.substr(d,8),2).toString(16);b.length===1&&(b="0"+b),v=v+b}return v.toLowerCase()},_z=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},vz=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},Ez=new RegExp("^-?(0*)\\d{1,10}$"),Tz=-2147483648,bz=2147483647,DR=function(n){if(Ez.test(n)){const e=Number(n);if(e>=Tz&&e<=bz)return e}return null},gd=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Er("Exception was thrown by user callback.",t),e},Math.floor(0))}},wz=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Sh=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,_r(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Er(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(zn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Er(e)}}class dm{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}dm.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="5",oN="v",lN="s",uN="r",cN="f",hN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,dN="ls",fN="p",lv="ac",mN="websocket",pN="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,t,r,s,o=!1,u="",h=!1,d=!1,p=null){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=d,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Uo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Uo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Rz(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function yN(n,e,t){Ee(typeof e=="string","typeof type must == string"),Ee(typeof t=="object","typeof params must == object");let r;if(e===mN)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===pN)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Rz(n)&&(t.ns=n.namespace);const s=[];return Wr(t,(o,u)=>{s.push(o+"="+u)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(){this.counters_={}}incrementCounter(e,t=1){xs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return tP(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_={},d_={};function uE(n){const e=n.toString();return h_[e]||(h_[e]=new Iz),h_[e]}function xz(n,e){const t=n.toString();return d_[t]||(d_[t]=e()),d_[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&gd(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR="start",Nz="close",Oz="pLPCommand",Dz="pRTLPCB",_N="id",vN="pw",EN="ser",kz="cb",Pz="seg",Mz="ts",Vz="d",Lz="dframe",TN=1870,bN=30,jz=TN-bN,Uz=25e3,zz=3e4;class ou{constructor(e,t,r,s,o,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pd(e),this.stats_=uE(t),this.urlFn=d=>(this.appCheckToken&&(d[lv]=this.appCheckToken),yN(t,pN,d))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Cz(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(zz)),gz(()=>{if(this.isClosed_)return;this.scriptTagHolder=new cE((...o)=>{const[u,h,d,p,y]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===kR)this.id=h,this.password=d;else if(u===Nz)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...o)=>{const[u,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={};r[kR]="t",r[EN]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[kz]=this.scriptTagHolder.uniqueCallbackIdentifier),r[oN]=lE,this.transportSessionId&&(r[lN]=this.transportSessionId),this.lastSessionId&&(r[dN]=this.lastSessionId),this.applicationId&&(r[fN]=this.applicationId),this.appCheckToken&&(r[lv]=this.appCheckToken),typeof location<"u"&&location.hostname&&hN.test(location.hostname)&&(r[uN]=cN);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ou.forceAllow_=!0}static forceDisallow(){ou.forceDisallow_=!0}static isAvailable(){return ou.forceAllow_?!0:!ou.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!_z()&&!vz()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Pn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=UI(t),s=sN(r,jz);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[Lz]="t",r[_N]=e,r[vN]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Pn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class cE{constructor(e,t,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=fz(),window[Oz+this.uniqueCallbackIdentifier]=e,window[Dz+this.uniqueCallbackIdentifier]=t,this.myIFrame=cE.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){zn("frame writing exception"),h.stack&&zn(h.stack),zn(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||zn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[_N]=this.myID,e[vN]=this.myPW,e[EN]=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+bN+r.length<=TN;){const u=this.pendingSegs.shift();r=r+"&"+Pz+s+"="+u.seg+"&"+Mz+s+"="+u.ts+"&"+Vz+s+"="+u.d,s++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(Uz)),o=()=>{clearTimeout(s),r()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{zn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fz=16384,Bz=45e3;let Gm=null;typeof MozWebSocket<"u"?Gm=MozWebSocket:typeof WebSocket<"u"&&(Gm=WebSocket);class oi{constructor(e,t,r,s,o,u,h){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pd(this.connId),this.stats_=uE(t),this.connURL=oi.connectionURL_(t,u,h,s,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,s,o){const u={};return u[oN]=lE,typeof location<"u"&&location.hostname&&hN.test(location.hostname)&&(u[uN]=cN),t&&(u[lN]=t),r&&(u[dN]=r),s&&(u[lv]=s),o&&(u[fN]=o),yN(e,mN,u)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Uo.set("previous_websocket_failure",!0);try{let r;hP(),this.mySock=new Gm(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){oi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Gm!==null&&!oi.forceDisallow_}static previouslyFailed(){return Uo.isInMemoryStorage||Uo.get("previous_websocket_failure")===!0}markConnectionHealthy(){Uo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=Ch(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ee(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=Pn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=sN(t,Fz);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Bz))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}oi.responsesRequiredToBeHealthy=2;oi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{static get ALL_TRANSPORTS(){return[ou,oi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=oi&&oi.isAvailable();let r=t&&!oi.previouslyFailed();if(e.webSocketOnly&&(t||Er("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[oi];else{const s=this.transports_=[];for(const o of Kh.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);Kh.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Kh.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz=6e4,Hz=5e3,Gz=10*1024,$z=100*1024,f_="t",PR="d",Kz="s",MR="r",Wz="e",VR="o",LR="a",jR="n",UR="p",Qz="h";class Yz{constructor(e,t,r,s,o,u,h,d,p,y){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=d,this.onKill_=p,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pd("c:"+this.id+":"),this.transportManager_=new Kh(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Sh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>$z?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Gz?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(f_ in e){const t=e[f_];t===LR?this.upgradeIfSecondaryHealthy_():t===MR?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===VR&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ih("t",e),r=ih("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:UR,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:LR,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:jR,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ih("t",e),r=ih("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ih(f_,e);if(PR in e){const r=e[PR];if(t===Qz){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===jR){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Kz?this.onConnectionShutdown_(r):t===MR?this.onReset_(r):t===Wz?ov("Server Error: "+r):t===VR?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ov("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),lE!==r&&Er("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Sh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(qz))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Sh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Hz))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:UR,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Uo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.allowedEvents_=e,this.listeners_={},Ee(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let o=0;o<s.length;o++)if(s[o].callback===t&&(!r||r===s[o].context)){s.splice(o,1);return}}validateEventType_(e){Ee(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m extends SN{static getInstance(){return new $m}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!s0()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Ee(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=32,FR=768;class jt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function It(){return new jt("")}function ct(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ua(n){return n.pieces_.length-n.pieceNum_}function Lt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new jt(n.pieces_,e)}function AN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Xz(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function RN(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function IN(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new jt(e,0)}function Rn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof jt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new jt(t,0)}function rt(n){return n.pieceNum_>=n.pieces_.length}function Gr(n,e){const t=ct(n),r=ct(e);if(t===null)return e;if(t===r)return Gr(Lt(n),Lt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function xN(n,e){if(Ua(n)!==Ua(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ui(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ua(n)>Ua(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Zz{constructor(e,t){this.errorPrefix_=t,this.parts_=RN(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=sp(this.parts_[r]);CN(this)}}function Jz(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=sp(e),CN(n)}function e5(n){const e=n.parts_.pop();n.byteLength_-=sp(e),n.parts_.length>0&&(n.byteLength_-=1)}function CN(n){if(n.byteLength_>FR)throw new Error(n.errorPrefix_+"has a key path longer than "+FR+" bytes ("+n.byteLength_+").");if(n.parts_.length>zR)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+zR+") or object contains a cycle "+No(n))}function No(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE extends SN{static getInstance(){return new hE}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return Ee(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=1e3,t5=60*5*1e3,BR=30*1e3,n5=1.3,r5=3e4,i5="server_kill",qR=3;class Ts extends wN{constructor(e,t,r,s,o,u,h,d){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=u,this.appCheckTokenProvider_=h,this.authOverride_=d,this.id=Ts.nextPersistentConnectionId_++,this.log_=pd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=sh,this.maxReconnectDelay_=t5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");hE.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&$m.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const s=++this.requestNumber_,o={r:s,a:e,b:t};this.log_(Pn(o)),Ee(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const t=new i0,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const h=u.d;u.s==="ok"?t.resolve(h):t.reject(h)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,r,s){this.initConnection_();const o=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+o),this.listens.has(u)||this.listens.set(u,new Map),Ee(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ee(!this.listens.get(u).has(o),"listen() called twice for same path/queryId.");const h={onComplete:s,hashFn:t,query:e,tag:r};this.listens.get(u).set(o,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r},u="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(u,o,h=>{const d=h.d,p=h.s;Ts.warnOnListenWarnings_(d,t),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",h),p!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(p,d))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&xs(e,"w")){const r=yu(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();Er(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||yP(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=BR)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=gP(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,s=>{const o=s.s,u=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Ee(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,t)}sendUnlisten_(e,t,r,s){this.log_("Unlisten on "+e+" for "+t);const o={p:e},u="n";s&&(o.q=r,o.t=s),this.sendRequest(u,o)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,s){const o={p:t,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,u=>{s&&setTimeout(()=>{s(u.s,u.d)},Math.floor(0))})}put(e,t,r,s){this.putInternal("p",e,t,r,s)}merge(e,t,r,s){this.putInternal("m",e,t,r,s)}putInternal(e,t,r,s,o){this.initConnection_();const u={p:t,d:r};o!==void 0&&(u.h=o),this.outstandingPuts_.push({action:e,request:u,onComplete:s}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Pn(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):ov("Unrecognized action received from server: "+Pn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ee(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=sh,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=sh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>r5&&(this.reconnectDelay_=sh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*n5)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Ts.nextConnectionId_++,o=this.lastSessionId;let u=!1,h=null;const d=function(){h?h.close():(u=!0,r())},p=function(v){Ee(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(v)};this.realtime_={close:d,sendRequest:p};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,b]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);u?zn("getToken() completed but was canceled"):(zn("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=b&&b.token,h=new Yz(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,A=>{Er(A+" ("+this.repoInfo_.toString()+")"),this.interrupt(i5)},o))}catch(v){this.log_("Failed to get token: "+v),u||(this.repoInfo_.nodeAdmin&&Er(v),d())}}}interrupt(e){zn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){zn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],R_(this.interruptReasons_)&&(this.reconnectDelay_=sh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(o=>oE(o)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const r=new jt(e).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(t),o.delete(t),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,t){zn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=qR&&(this.reconnectDelay_=BR,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){zn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=qR&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+tN.replace(/\./g,"-")]=1,s0()?e["framework.cordova"]=1:$I()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=$m.getInstance().currentlyOnline();return R_(this.interruptReasons_)&&e}}Ts.nextPersistentConnectionId_=0;Ts.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ht(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new ht(Pu,e),s=new ht(Pu,t);return this.compare(r,s)!==0}minPost(){return ht.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf;class NN extends Mp{static get __EMPTY_NODE(){return Gf}static set __EMPTY_NODE(e){Gf=e}compare(e,t){return Ku(e.name,t.name)}isDefinedOn(e){throw Lu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ht.MIN}maxPost(){return new ht(Xo,Gf)}makePost(e,t){return Ee(typeof e=="string","KeyIndex indexValue must always be a string."),new ht(e,Gf)}toString(){return".key"}}const pu=new NN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,t,r,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,s&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class An{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??An.RED,this.left=s??ar.EMPTY_NODE,this.right=o??ar.EMPTY_NODE}copy(e,t,r,s,o){return new An(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ar.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,s;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return ar.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,An.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,An.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}An.RED=!0;An.BLACK=!1;class s5{copy(e,t,r,s,o){return this}insert(e,t,r){return new An(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ar{constructor(e,t=ar.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ar(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,An.BLACK,null,null))}remove(e){return new ar(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,An.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $f(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new $f(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new $f(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new $f(this.root_,null,this.comparator_,!0,e)}}ar.EMPTY_NODE=new s5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5(n,e){return Ku(n.name,e.name)}function dE(n,e){return Ku(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uv;function o5(n){uv=n}const ON=function(n){return typeof n=="number"?"number:"+aN(n):"string:"+n},DN=function(n){if(n.isLeafNode()){const e=n.val();Ee(typeof e=="string"||typeof e=="number"||typeof e=="object"&&xs(e,".sv"),"Priority must be a string or number.")}else Ee(n===uv||n.isEmpty(),"priority of unexpected type.");Ee(n===uv||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HR;class wn{static set __childrenNodeConstructor(e){HR=e}static get __childrenNodeConstructor(){return HR}constructor(e,t=wn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Ee(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),DN(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new wn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:wn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return rt(e)?this:ct(e)===".priority"?this.priorityNode_:wn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:wn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=ct(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(Ee(r!==".priority"||Ua(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,wn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Lt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+ON(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=aN(this.value_):e+=this.value_,this.lazyHash_=rN(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===wn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof wn.__childrenNodeConstructor?-1:(Ee(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,s=wn.VALUE_TYPE_ORDER.indexOf(t),o=wn.VALUE_TYPE_ORDER.indexOf(r);return Ee(s>=0,"Unknown leaf type: "+t),Ee(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}wn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kN,PN;function l5(n){kN=n}function u5(n){PN=n}class c5 extends Mp{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),o=r.compareTo(s);return o===0?Ku(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ht.MIN}maxPost(){return new ht(Xo,new wn("[PRIORITY-POST]",PN))}makePost(e,t){const r=kN(e);return new ht(t,new wn("[PRIORITY-POST]",r))}toString(){return".priority"}}const qn=new c5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5=Math.log(2);class d5{constructor(e){const t=o=>parseInt(Math.log(o)/h5,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Km=function(n,e,t,r){n.sort(e);const s=function(d,p){const y=p-d;let v,b;if(y===0)return null;if(y===1)return v=n[d],b=t?t(v):v,new An(b,v.node,An.BLACK,null,null);{const A=parseInt(y/2,10)+d,C=s(d,A),F=s(A+1,p);return v=n[A],b=t?t(v):v,new An(b,v.node,An.BLACK,C,F)}},o=function(d){let p=null,y=null,v=n.length;const b=function(C,F){const M=v-C,Y=v;v-=C;const Z=s(M+1,Y),ee=n[M],te=t?t(ee):ee;A(new An(te,ee.node,F,null,Z))},A=function(C){p?(p.left=C,p=C):(y=C,p=C)};for(let C=0;C<d.count;++C){const F=d.nextBitIsOne(),M=Math.pow(2,d.count-(C+1));F?b(M,An.BLACK):(b(M,An.BLACK),b(M,An.RED))}return y},u=new d5(n.length),h=o(u);return new ar(r||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m_;const Jl={};class Es{static get Default(){return Ee(Jl&&qn,"ChildrenNode.ts has not been loaded"),m_=m_||new Es({".priority":Jl},{".priority":qn}),m_}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=yu(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ar?t:null}hasIndex(e){return xs(this.indexSet_,e.toString())}addIndex(e,t){Ee(e!==pu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const o=t.getIterator(ht.Wrap);let u=o.getNext();for(;u;)s=s||e.isDefinedOn(u.node),r.push(u),u=o.getNext();let h;s?h=Km(r,e.getCompare()):h=Jl;const d=e.toString(),p=Object.assign({},this.indexSet_);p[d]=e;const y=Object.assign({},this.indexes_);return y[d]=h,new Es(y,p)}addToIndexes(e,t){const r=_m(this.indexes_,(s,o)=>{const u=yu(this.indexSet_,o);if(Ee(u,"Missing index implementation for "+o),s===Jl)if(u.isDefinedOn(e.node)){const h=[],d=t.getIterator(ht.Wrap);let p=d.getNext();for(;p;)p.name!==e.name&&h.push(p),p=d.getNext();return h.push(e),Km(h,u.getCompare())}else return Jl;else{const h=t.get(e.name);let d=s;return h&&(d=d.remove(new ht(e.name,h))),d.insert(e,e.node)}});return new Es(r,this.indexSet_)}removeFromIndexes(e,t){const r=_m(this.indexes_,s=>{if(s===Jl)return s;{const o=t.get(e.name);return o?s.remove(new ht(e.name,o)):s}});return new Es(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ah;class Et{static get EMPTY_NODE(){return ah||(ah=new Et(new ar(dE),null,Es.Default))}constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&DN(this.priorityNode_),this.children_.isEmpty()&&Ee(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ah}updatePriority(e){return this.children_.isEmpty()?this:new Et(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?ah:t}}getChild(e){const t=ct(e);return t===null?this:this.getImmediateChild(t).getChild(Lt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(Ee(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new ht(e,t);let s,o;t.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(r,this.children_));const u=s.isEmpty()?ah:this.priorityNode_;return new Et(s,u,o)}}updateChild(e,t){const r=ct(e);if(r===null)return t;{Ee(ct(e)!==".priority"||Ua(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Lt(e),t);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,s=0,o=!0;if(this.forEachChild(qn,(u,h)=>{t[u]=h.val(e),r++,o&&Et.INTEGER_REGEXP_.test(u)?s=Math.max(s,Number(u)):o=!1}),!e&&o&&s<2*r){const u=[];for(const h in t)u[h]=t[h];return u}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+ON(this.getPriority().val())+":"),this.forEachChild(qn,(t,r)=>{const s=r.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":rN(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new ht(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new ht(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new ht(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,ht.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,ht.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===yd?-1:0}withIndex(e){if(e===pu||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Et(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===pu||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(qn),s=t.getIterator(qn);let o=r.getNext(),u=s.getNext();for(;o&&u;){if(o.name!==u.name||!o.node.equals(u.node))return!1;o=r.getNext(),u=s.getNext()}return o===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===pu?null:this.indexMap_.get(e.toString())}}Et.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class f5 extends Et{constructor(){super(new ar(dE),Et.EMPTY_NODE,Es.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Et.EMPTY_NODE}isEmpty(){return!1}}const yd=new f5;Object.defineProperties(ht,{MIN:{value:new ht(Pu,Et.EMPTY_NODE)},MAX:{value:new ht(Xo,yd)}});NN.__EMPTY_NODE=Et.EMPTY_NODE;wn.__childrenNodeConstructor=Et;o5(yd);u5(yd);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=!0;function Fn(n,e=null){if(n===null)return Et.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),Ee(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new wn(t,Fn(e))}if(!(n instanceof Array)&&m5){const t=[];let r=!1;if(Wr(n,(u,h)=>{if(u.substring(0,1)!=="."){const d=Fn(h);d.isEmpty()||(r=r||!d.getPriority().isEmpty(),t.push(new ht(u,d)))}}),t.length===0)return Et.EMPTY_NODE;const o=Km(t,a5,u=>u.name,dE);if(r){const u=Km(t,qn.getCompare());return new Et(o,Fn(e),new Es({".priority":u},{".priority":qn}))}else return new Et(o,Fn(e),Es.Default)}else{let t=Et.EMPTY_NODE;return Wr(n,(r,s)=>{if(xs(n,r)&&r.substring(0,1)!=="."){const o=Fn(s);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Fn(e))}}l5(Fn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5 extends Mp{constructor(e){super(),this.indexPath_=e,Ee(!rt(e)&&ct(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),o=r.compareTo(s);return o===0?Ku(e.name,t.name):o}makePost(e,t){const r=Fn(e),s=Et.EMPTY_NODE.updateChild(this.indexPath_,r);return new ht(t,s)}maxPost(){const e=Et.EMPTY_NODE.updateChild(this.indexPath_,yd);return new ht(Xo,e)}toString(){return RN(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5 extends Mp{compare(e,t){const r=e.node.compareTo(t.node);return r===0?Ku(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ht.MIN}maxPost(){return ht.MAX}makePost(e,t){const r=Fn(e);return new ht(t,r)}toString(){return".value"}}const y5=new g5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(n){return{type:"value",snapshotNode:n}}function v5(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function E5(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function GR(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function T5(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=qn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ee(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ee(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Pu}hasEnd(){return this.endSet_}getIndexEndValue(){return Ee(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ee(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ee(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===qn}copy(){const e=new fE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function $R(n){const e={};if(n.isDefault())return e;let t;if(n.index_===qn?t="$priority":n.index_===y5?t="$value":n.index_===pu?t="$key":(Ee(n.index_ instanceof p5,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Pn(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=Pn(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Pn(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Pn(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Pn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function KR(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==qn&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm extends wN{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(Ee(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=pd("p:rest:"),this.listens_={}}listen(e,t,r,s){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const u=Wm.getListenId_(e,r),h={};this.listens_[u]=h;const d=$R(e._queryParams);this.restRequest_(o+".json",d,(p,y)=>{let v=y;if(p===404&&(v=null,p=null),p===null&&this.onDataUpdate_(o,v,!1,r),yu(this.listens_,u)===h){let b;p?p===401?b="permission_denied":b="rest_error:"+p:b="ok",s(b,null)}})}unlisten(e,t){const r=Wm.getListenId_(e,t);delete this.listens_[r]}get(e){const t=$R(e._queryParams),r=e._path.toString(),s=new i0;return this.restRequest_(r+".json",t,(o,u)=>{let h=u;o===404&&(h=null,o=null),o===null?(this.onDataUpdate_(r,h,!1,null),s.resolve(h)):s.reject(new Error(h))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(t.auth=s.accessToken),o&&o.token&&(t.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ju(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&h.readyState===4){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let d=null;if(h.status>=200&&h.status<300){try{d=Ch(h.responseText)}catch{Er("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,d)}else h.status!==401&&h.status!==404&&Er("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(){this.rootNode_=Et.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(){return{value:null,children:new Map}}function MN(n,e,t){if(rt(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=ct(e);n.children.has(r)||n.children.set(r,Qm());const s=n.children.get(r);e=Lt(e),MN(s,e,t)}}function cv(n,e,t){n.value!==null?t(e,n.value):w5(n,(r,s)=>{const o=new jt(e.toString()+"/"+r);cv(s,o,t)})}function w5(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Wr(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=10*1e3,A5=30*1e3,R5=5*60*1e3;class I5{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new S5(e);const r=WR+(A5-WR)*Math.random();Sh(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Wr(e,(s,o)=>{o>0&&xs(this.statsToReport_,s)&&(t[s]=o,r=!0)}),r&&this.server_.reportStats(t),Sh(this.reportStats_.bind(this),Math.floor(Math.random()*2*R5))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vi;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Vi||(Vi={}));function VN(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function LN(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function jN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Vi.ACK_USER_WRITE,this.source=VN()}operationForChild(e){if(rt(this.path)){if(this.affectedTree.value!=null)return Ee(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new jt(e));return new Ym(It(),t,this.revert)}}else return Ee(ct(this.path)===e,"operationForChild called for unrelated child."),new Ym(Lt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Vi.OVERWRITE}operationForChild(e){return rt(this.path)?new Zo(this.source,It(),this.snap.getImmediateChild(e)):new Zo(this.source,Lt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Vi.MERGE}operationForChild(e){if(rt(this.path)){const t=this.children.subtree(new jt(e));return t.isEmpty()?null:t.value?new Zo(this.source,It(),t.value):new Wh(this.source,It(),t)}else return Ee(ct(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Wh(this.source,Lt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(rt(e))return this.isFullyInitialized()&&!this.filtered_;const t=ct(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function x5(n,e,t,r){const s=[],o=[];return e.forEach(u=>{u.type==="child_changed"&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(T5(u.childName,u.snapshotNode))}),oh(n,s,"child_removed",e,r,t),oh(n,s,"child_added",e,r,t),oh(n,s,"child_moved",o,r,t),oh(n,s,"child_changed",e,r,t),oh(n,s,"value",e,r,t),s}function oh(n,e,t,r,s,o){const u=r.filter(h=>h.type===t);u.sort((h,d)=>N5(n,h,d)),u.forEach(h=>{const d=C5(n,h,o);s.forEach(p=>{p.respondsTo(h.type)&&e.push(p.createEvent(d,n.query_))})})}function C5(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function N5(n,e,t){if(e.childName==null||t.childName==null)throw Lu("Should only compare child_ events.");const r=new ht(e.childName,e.snapshotNode),s=new ht(t.childName,t.snapshotNode);return n.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(n,e){return{eventCache:n,serverCache:e}}function Ah(n,e,t,r){return UN(new mE(e,t,r),n.serverCache)}function zN(n,e,t,r){return UN(n.eventCache,new mE(e,t,r))}function hv(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Jo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p_;const O5=()=>(p_||(p_=new ar(yz)),p_);class Vt{static fromObject(e){let t=new Vt(null);return Wr(e,(r,s)=>{t=t.set(new jt(r),s)}),t}constructor(e,t=O5()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:It(),value:this.value};if(rt(e))return null;{const r=ct(e),s=this.children.get(r);if(s!==null){const o=s.findRootMostMatchingPathAndValue(Lt(e),t);return o!=null?{path:Rn(new jt(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(rt(e))return this;{const t=ct(e),r=this.children.get(t);return r!==null?r.subtree(Lt(e)):new Vt(null)}}set(e,t){if(rt(e))return new Vt(t,this.children);{const r=ct(e),o=(this.children.get(r)||new Vt(null)).set(Lt(e),t),u=this.children.insert(r,o);return new Vt(this.value,u)}}remove(e){if(rt(e))return this.children.isEmpty()?new Vt(null):new Vt(null,this.children);{const t=ct(e),r=this.children.get(t);if(r){const s=r.remove(Lt(e));let o;return s.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,s),this.value===null&&o.isEmpty()?new Vt(null):new Vt(this.value,o)}else return this}}get(e){if(rt(e))return this.value;{const t=ct(e),r=this.children.get(t);return r?r.get(Lt(e)):null}}setTree(e,t){if(rt(e))return t;{const r=ct(e),o=(this.children.get(r)||new Vt(null)).setTree(Lt(e),t);let u;return o.isEmpty()?u=this.children.remove(r):u=this.children.insert(r,o),new Vt(this.value,u)}}fold(e){return this.fold_(It(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,o)=>{r[s]=o.fold_(Rn(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,It(),t)}findOnPath_(e,t,r){const s=this.value?r(t,this.value):!1;if(s)return s;if(rt(e))return null;{const o=ct(e),u=this.children.get(o);return u?u.findOnPath_(Lt(e),Rn(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,It(),t)}foreachOnPath_(e,t,r){if(rt(e))return this;{this.value&&r(t,this.value);const s=ct(e),o=this.children.get(s);return o?o.foreachOnPath_(Lt(e),Rn(t,s),r):new Vt(null)}}foreach(e){this.foreach_(It(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(Rn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.writeTree_=e}static empty(){return new hi(new Vt(null))}}function Rh(n,e,t){if(rt(e))return new hi(new Vt(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let o=r.value;const u=Gr(s,e);return o=o.updateChild(u,t),new hi(n.writeTree_.set(s,o))}else{const s=new Vt(t),o=n.writeTree_.setTree(e,s);return new hi(o)}}}function QR(n,e,t){let r=n;return Wr(t,(s,o)=>{r=Rh(r,Rn(e,s),o)}),r}function YR(n,e){if(rt(e))return hi.empty();{const t=n.writeTree_.setTree(e,new Vt(null));return new hi(t)}}function dv(n,e){return sl(n,e)!=null}function sl(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Gr(t.path,e)):null}function XR(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(qn,(r,s)=>{e.push(new ht(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new ht(r,s.value))}),e}function Oa(n,e){if(rt(e))return n;{const t=sl(n,e);return t!=null?new hi(new Vt(t)):new hi(n.writeTree_.subtree(e))}}function fv(n){return n.writeTree_.isEmpty()}function Mu(n,e){return FN(It(),n.writeTree_,e)}function FN(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,o)=>{s===".priority"?(Ee(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=FN(Rn(n,s),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Rn(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(n,e){return KN(e,n)}function D5(n,e,t,r,s){Ee(r>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=Rh(n.visibleWrites,e,t)),n.lastWriteId=r}function k5(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function P5(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);Ee(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,o=!1,u=n.allWrites.length-1;for(;s&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&M5(h,r.path)?s=!1:ui(r.path,h.path)&&(o=!0)),u--}if(s){if(o)return V5(n),!0;if(r.snap)n.visibleWrites=YR(n.visibleWrites,r.path);else{const h=r.children;Wr(h,d=>{n.visibleWrites=YR(n.visibleWrites,Rn(r.path,d))})}return!0}else return!1}function M5(n,e){if(n.snap)return ui(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ui(Rn(n.path,t),e))return!0;return!1}function V5(n){n.visibleWrites=qN(n.allWrites,L5,It()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function L5(n){return n.visible}function qN(n,e,t){let r=hi.empty();for(let s=0;s<n.length;++s){const o=n[s];if(e(o)){const u=o.path;let h;if(o.snap)ui(t,u)?(h=Gr(t,u),r=Rh(r,h,o.snap)):ui(u,t)&&(h=Gr(u,t),r=Rh(r,It(),o.snap.getChild(h)));else if(o.children){if(ui(t,u))h=Gr(t,u),r=QR(r,h,o.children);else if(ui(u,t))if(h=Gr(u,t),rt(h))r=QR(r,It(),o.children);else{const d=yu(o.children,ct(h));if(d){const p=d.getChild(Lt(h));r=Rh(r,It(),p)}}}else throw Lu("WriteRecord should have .snap or .children")}}return r}function HN(n,e,t,r,s){if(!r&&!s){const o=sl(n.visibleWrites,e);if(o!=null)return o;{const u=Oa(n.visibleWrites,e);if(fv(u))return t;if(t==null&&!dv(u,It()))return null;{const h=t||Et.EMPTY_NODE;return Mu(u,h)}}}else{const o=Oa(n.visibleWrites,e);if(!s&&fv(o))return t;if(!s&&t==null&&!dv(o,It()))return null;{const u=function(p){return(p.visible||s)&&(!r||!~r.indexOf(p.writeId))&&(ui(p.path,e)||ui(e,p.path))},h=qN(n.allWrites,u,e),d=t||Et.EMPTY_NODE;return Mu(h,d)}}}function j5(n,e,t){let r=Et.EMPTY_NODE;const s=sl(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(qn,(o,u)=>{r=r.updateImmediateChild(o,u)}),r;if(t){const o=Oa(n.visibleWrites,e);return t.forEachChild(qn,(u,h)=>{const d=Mu(Oa(o,new jt(u)),h);r=r.updateImmediateChild(u,d)}),XR(o).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}else{const o=Oa(n.visibleWrites,e);return XR(o).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}}function U5(n,e,t,r,s){Ee(r||s,"Either existingEventSnap or existingServerSnap must exist");const o=Rn(e,t);if(dv(n.visibleWrites,o))return null;{const u=Oa(n.visibleWrites,o);return fv(u)?s.getChild(t):Mu(u,s.getChild(t))}}function z5(n,e,t,r){const s=Rn(e,t),o=sl(n.visibleWrites,s);if(o!=null)return o;if(r.isCompleteForChild(t)){const u=Oa(n.visibleWrites,s);return Mu(u,r.getNode().getImmediateChild(t))}else return null}function F5(n,e){return sl(n.visibleWrites,e)}function B5(n,e,t,r,s,o,u){let h;const d=Oa(n.visibleWrites,e),p=sl(d,It());if(p!=null)h=p;else if(t!=null)h=Mu(d,t);else return[];if(h=h.withIndex(u),!h.isEmpty()&&!h.isLeafNode()){const y=[],v=u.getCompare(),b=o?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let A=b.getNext();for(;A&&y.length<s;)v(A,r)!==0&&y.push(A),A=b.getNext();return y}else return[]}function q5(){return{visibleWrites:hi.empty(),allWrites:[],lastWriteId:-1}}function mv(n,e,t,r){return HN(n.writeTree,n.treePath,e,t,r)}function GN(n,e){return j5(n.writeTree,n.treePath,e)}function ZR(n,e,t,r){return U5(n.writeTree,n.treePath,e,t,r)}function Xm(n,e){return F5(n.writeTree,Rn(n.treePath,e))}function H5(n,e,t,r,s,o){return B5(n.writeTree,n.treePath,e,t,r,s,o)}function pE(n,e,t){return z5(n.writeTree,n.treePath,e,t)}function $N(n,e){return KN(Rn(n.treePath,e),n.writeTree)}function KN(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;Ee(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),Ee(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const o=s.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,GR(r,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,E5(r,s.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,v5(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,GR(r,e.snapshotNode,s.oldSnap));else throw Lu("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const WN=new $5;class gE{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new mE(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pE(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Jo(this.viewCache_),o=H5(this.writes_,s,t,1,r,e);return o.length===0?null:o[0]}}function K5(n,e){Ee(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Ee(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function W5(n,e,t,r,s){const o=new G5;let u,h;if(t.type===Vi.OVERWRITE){const p=t;p.source.fromUser?u=pv(n,e,p.path,p.snap,r,s,o):(Ee(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered()&&!rt(p.path),u=Zm(n,e,p.path,p.snap,r,s,h,o))}else if(t.type===Vi.MERGE){const p=t;p.source.fromUser?u=Y5(n,e,p.path,p.children,r,s,o):(Ee(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered(),u=gv(n,e,p.path,p.children,r,s,h,o))}else if(t.type===Vi.ACK_USER_WRITE){const p=t;p.revert?u=J5(n,e,p.path,r,s,o):u=X5(n,e,p.path,p.affectedTree,r,s,o)}else if(t.type===Vi.LISTEN_COMPLETE)u=Z5(n,e,t.path,r,o);else throw Lu("Unknown operation type: "+t.type);const d=o.getChanges();return Q5(e,u,d),{viewCache:u,changes:d}}function Q5(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=hv(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(_5(hv(e)))}}function QN(n,e,t,r,s,o){const u=e.eventCache;if(Xm(r,t)!=null)return e;{let h,d;if(rt(t))if(Ee(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=Jo(e),y=p instanceof Et?p:Et.EMPTY_NODE,v=GN(r,y);h=n.filter.updateFullNode(e.eventCache.getNode(),v,o)}else{const p=mv(r,Jo(e));h=n.filter.updateFullNode(e.eventCache.getNode(),p,o)}else{const p=ct(t);if(p===".priority"){Ee(Ua(t)===1,"Can't have a priority with additional path components");const y=u.getNode();d=e.serverCache.getNode();const v=ZR(r,t,y,d);v!=null?h=n.filter.updatePriority(y,v):h=u.getNode()}else{const y=Lt(t);let v;if(u.isCompleteForChild(p)){d=e.serverCache.getNode();const b=ZR(r,t,u.getNode(),d);b!=null?v=u.getNode().getImmediateChild(p).updateChild(y,b):v=u.getNode().getImmediateChild(p)}else v=pE(r,p,e.serverCache);v!=null?h=n.filter.updateChild(u.getNode(),p,v,y,s,o):h=u.getNode()}}return Ah(e,h,u.isFullyInitialized()||rt(t),n.filter.filtersNodes())}}function Zm(n,e,t,r,s,o,u,h){const d=e.serverCache;let p;const y=u?n.filter:n.filter.getIndexedFilter();if(rt(t))p=y.updateFullNode(d.getNode(),r,null);else if(y.filtersNodes()&&!d.isFiltered()){const A=d.getNode().updateChild(t,r);p=y.updateFullNode(d.getNode(),A,null)}else{const A=ct(t);if(!d.isCompleteForPath(t)&&Ua(t)>1)return e;const C=Lt(t),M=d.getNode().getImmediateChild(A).updateChild(C,r);A===".priority"?p=y.updatePriority(d.getNode(),M):p=y.updateChild(d.getNode(),A,M,C,WN,null)}const v=zN(e,p,d.isFullyInitialized()||rt(t),y.filtersNodes()),b=new gE(s,v,o);return QN(n,v,t,s,b,h)}function pv(n,e,t,r,s,o,u){const h=e.eventCache;let d,p;const y=new gE(s,e,o);if(rt(t))p=n.filter.updateFullNode(e.eventCache.getNode(),r,u),d=Ah(e,p,!0,n.filter.filtersNodes());else{const v=ct(t);if(v===".priority")p=n.filter.updatePriority(e.eventCache.getNode(),r),d=Ah(e,p,h.isFullyInitialized(),h.isFiltered());else{const b=Lt(t),A=h.getNode().getImmediateChild(v);let C;if(rt(b))C=r;else{const F=y.getCompleteChild(v);F!=null?AN(b)===".priority"&&F.getChild(IN(b)).isEmpty()?C=F:C=F.updateChild(b,r):C=Et.EMPTY_NODE}if(A.equals(C))d=e;else{const F=n.filter.updateChild(h.getNode(),v,C,b,y,u);d=Ah(e,F,h.isFullyInitialized(),n.filter.filtersNodes())}}}return d}function JR(n,e){return n.eventCache.isCompleteForChild(e)}function Y5(n,e,t,r,s,o,u){let h=e;return r.foreach((d,p)=>{const y=Rn(t,d);JR(e,ct(y))&&(h=pv(n,h,y,p,s,o,u))}),r.foreach((d,p)=>{const y=Rn(t,d);JR(e,ct(y))||(h=pv(n,h,y,p,s,o,u))}),h}function eI(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function gv(n,e,t,r,s,o,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let d=e,p;rt(t)?p=r:p=new Vt(null).setTree(t,r);const y=e.serverCache.getNode();return p.children.inorderTraversal((v,b)=>{if(y.hasChild(v)){const A=e.serverCache.getNode().getImmediateChild(v),C=eI(n,A,b);d=Zm(n,d,new jt(v),C,s,o,u,h)}}),p.children.inorderTraversal((v,b)=>{const A=!e.serverCache.isCompleteForChild(v)&&b.value===null;if(!y.hasChild(v)&&!A){const C=e.serverCache.getNode().getImmediateChild(v),F=eI(n,C,b);d=Zm(n,d,new jt(v),F,s,o,u,h)}}),d}function X5(n,e,t,r,s,o,u){if(Xm(s,t)!=null)return e;const h=e.serverCache.isFiltered(),d=e.serverCache;if(r.value!=null){if(rt(t)&&d.isFullyInitialized()||d.isCompleteForPath(t))return Zm(n,e,t,d.getNode().getChild(t),s,o,h,u);if(rt(t)){let p=new Vt(null);return d.getNode().forEachChild(pu,(y,v)=>{p=p.set(new jt(y),v)}),gv(n,e,t,p,s,o,h,u)}else return e}else{let p=new Vt(null);return r.foreach((y,v)=>{const b=Rn(t,y);d.isCompleteForPath(b)&&(p=p.set(y,d.getNode().getChild(b)))}),gv(n,e,t,p,s,o,h,u)}}function Z5(n,e,t,r,s){const o=e.serverCache,u=zN(e,o.getNode(),o.isFullyInitialized()||rt(t),o.isFiltered());return QN(n,u,t,r,WN,s)}function J5(n,e,t,r,s,o){let u;if(Xm(r,t)!=null)return e;{const h=new gE(r,e,s),d=e.eventCache.getNode();let p;if(rt(t)||ct(t)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=mv(r,Jo(e));else{const v=e.serverCache.getNode();Ee(v instanceof Et,"serverChildren would be complete if leaf node"),y=GN(r,v)}y=y,p=n.filter.updateFullNode(d,y,o)}else{const y=ct(t);let v=pE(r,y,e.serverCache);v==null&&e.serverCache.isCompleteForChild(y)&&(v=d.getImmediateChild(y)),v!=null?p=n.filter.updateChild(d,y,v,Lt(t),h,o):e.eventCache.getNode().hasChild(y)?p=n.filter.updateChild(d,y,Et.EMPTY_NODE,Lt(t),h,o):p=d,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=mv(r,Jo(e)),u.isLeafNode()&&(p=n.filter.updateFullNode(p,u,o)))}return u=e.serverCache.isFullyInitialized()||Xm(r,It())!=null,Ah(e,p,u,n.filter.filtersNodes())}}function e3(n,e){const t=Jo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!rt(e)&&!t.getImmediateChild(ct(e)).isEmpty())?t.getChild(e):null}function tI(n,e,t,r){e.type===Vi.MERGE&&e.source.queryId!==null&&(Ee(Jo(n.viewCache_),"We should always have a full cache before handling merges"),Ee(hv(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=W5(n.processor_,s,e,t,r);return K5(n.processor_,o.viewCache),Ee(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,t3(n,o.changes,o.viewCache.eventCache.getNode())}function t3(n,e,t,r){const s=n.eventRegistrations_;return x5(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nI;function n3(n){Ee(!nI,"__referenceConstructor has already been defined"),nI=n}function yE(n,e,t,r){const s=e.source.queryId;if(s!==null){const o=n.views.get(s);return Ee(o!=null,"SyncTree gave us an op for an invalid query."),tI(o,e,t,r)}else{let o=[];for(const u of n.views.values())o=o.concat(tI(u,e,t,r));return o}}function _E(n,e){let t=null;for(const r of n.views.values())t=t||e3(r,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rI;function r3(n){Ee(!rI,"__referenceConstructor has already been defined"),rI=n}class iI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Vt(null),this.pendingWriteTree_=q5(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function i3(n,e,t,r,s){return D5(n.pendingWriteTree_,e,t,r,s),s?Lp(n,new Zo(VN(),e,t)):[]}function lu(n,e,t=!1){const r=k5(n.pendingWriteTree_,e);if(P5(n.pendingWriteTree_,e)){let o=new Vt(null);return r.snap!=null?o=o.set(It(),!0):Wr(r.children,u=>{o=o.set(new jt(u),!0)}),Lp(n,new Ym(r.path,o,t))}else return[]}function Vp(n,e,t){return Lp(n,new Zo(LN(),e,t))}function s3(n,e,t){const r=Vt.fromObject(t);return Lp(n,new Wh(LN(),e,r))}function a3(n,e,t,r){const s=JN(n,r);if(s!=null){const o=eO(s),u=o.path,h=o.queryId,d=Gr(u,e),p=new Zo(jN(h),d,t);return tO(n,u,p)}else return[]}function o3(n,e,t,r){const s=JN(n,r);if(s){const o=eO(s),u=o.path,h=o.queryId,d=Gr(u,e),p=Vt.fromObject(t),y=new Wh(jN(h),d,p);return tO(n,u,y)}else return[]}function YN(n,e,t){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(u,h)=>{const d=Gr(u,e),p=_E(h,d);if(p)return p});return HN(s,e,o,t,!0)}function Lp(n,e){return XN(e,n.syncPointTree_,null,BN(n.pendingWriteTree_,It()))}function XN(n,e,t,r){if(rt(n.path))return ZN(n,e,t,r);{const s=e.get(It());t==null&&s!=null&&(t=_E(s,It()));let o=[];const u=ct(n.path),h=n.operationForChild(u),d=e.children.get(u);if(d&&h){const p=t?t.getImmediateChild(u):null,y=$N(r,u);o=o.concat(XN(h,d,p,y))}return s&&(o=o.concat(yE(s,n,r,t))),o}}function ZN(n,e,t,r){const s=e.get(It());t==null&&s!=null&&(t=_E(s,It()));let o=[];return e.children.inorderTraversal((u,h)=>{const d=t?t.getImmediateChild(u):null,p=$N(r,u),y=n.operationForChild(u);y&&(o=o.concat(ZN(y,h,d,p)))}),s&&(o=o.concat(yE(s,n,r,t))),o}function JN(n,e){return n.tagToQueryMap.get(e)}function eO(n){const e=n.indexOf("$");return Ee(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new jt(n.substr(0,e))}}function tO(n,e,t){const r=n.syncPointTree_.get(e);Ee(r,"Missing sync point for query tag that we're tracking");const s=BN(n.pendingWriteTree_,e);return yE(r,t,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new vE(t)}node(){return this.node_}}class EE{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Rn(this.path_,e);return new EE(this.syncTree_,t)}node(){return YN(this.syncTree_,this.path_)}}const l3=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},sI=function(n,e,t){if(!n||typeof n!="object")return n;if(Ee(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return u3(n[".sv"],e,t);if(typeof n[".sv"]=="object")return c3(n[".sv"],e);Ee(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},u3=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:Ee(!1,"Unexpected server value: "+n)}},c3=function(n,e,t){n.hasOwnProperty("increment")||Ee(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&Ee(!1,"Unexpected increment value: "+r);const s=e.node();if(Ee(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const u=s.getValue();return typeof u!="number"?r:u+r},h3=function(n,e,t,r){return TE(e,new EE(t,n),r)},d3=function(n,e,t){return TE(n,new vE(e),t)};function TE(n,e,t){const r=n.getPriority().val(),s=sI(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const u=n,h=sI(u.getValue(),e,t);return h!==u.getValue()||s!==u.getPriority().val()?new wn(h,Fn(s)):n}else{const u=n;return o=u,s!==u.getPriority().val()&&(o=o.updatePriority(new wn(s))),u.forEachChild(qn,(h,d)=>{const p=TE(d,e.getImmediateChild(h),t);p!==d&&(o=o.updateImmediateChild(h,p))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function wE(n,e){let t=e instanceof jt?e:new jt(e),r=n,s=ct(t);for(;s!==null;){const o=yu(r.node.children,s)||{children:{},childCount:0};r=new bE(s,r,o),t=Lt(t),s=ct(t)}return r}function Wu(n){return n.node.value}function nO(n,e){n.node.value=e,yv(n)}function rO(n){return n.node.childCount>0}function f3(n){return Wu(n)===void 0&&!rO(n)}function jp(n,e){Wr(n.node.children,(t,r)=>{e(new bE(t,n,r))})}function iO(n,e,t,r){t&&e(n),jp(n,s=>{iO(s,e,!0)})}function m3(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function _d(n){return new jt(n.parent===null?n.name:_d(n.parent)+"/"+n.name)}function yv(n){n.parent!==null&&p3(n.parent,n.name,n)}function p3(n,e,t){const r=f3(t),s=xs(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,yv(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,yv(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=/[\[\].#$\/\u0000-\u001F\u007F]/,y3=/[\[\].#$\u0000-\u001F\u007F]/,g_=10*1024*1024,sO=function(n){return typeof n=="string"&&n.length!==0&&!g3.test(n)},_3=function(n){return typeof n=="string"&&n.length!==0&&!y3.test(n)},v3=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),_3(n)},aO=function(n,e,t){const r=t instanceof jt?new Zz(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+No(r));if(typeof e=="function")throw new Error(n+"contains a function "+No(r)+" with contents = "+e.toString());if(iN(e))throw new Error(n+"contains "+e.toString()+" "+No(r));if(typeof e=="string"&&e.length>g_/3&&sp(e)>g_)throw new Error(n+"contains a string greater than "+g_+" utf8 bytes "+No(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,o=!1;if(Wr(e,(u,h)=>{if(u===".value")s=!0;else if(u!==".priority"&&u!==".sv"&&(o=!0,!sO(u)))throw new Error(n+" contains an invalid key ("+u+") "+No(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Jz(r,u),aO(n,h,r),e5(r)}),s&&o)throw new Error(n+' contains ".value" child '+No(r)+" in addition to actual children.")}},E3=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!sO(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!v3(t))throw new Error(bP(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function b3(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],o=s.getPath();t!==null&&!xN(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(s)}t&&n.eventLists_.push(t)}function al(n,e,t){b3(n,t),w3(n,r=>ui(r,e)||ui(e,r))}function w3(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];if(s){const o=s.path;e(o)?(S3(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function S3(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();wh&&zn("event: "+t.toString()),gd(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3="repo_interrupt",R3=25;class I3{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new T3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Qm(),this.transactionQueueTree_=new bE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function x3(n,e,t){if(n.stats_=uE(n.repoInfo_),n.forceRestClient_||wz())n.server_=new Wm(n.repoInfo_,(r,s,o,u)=>{aI(n,r,s,o,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>oI(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Pn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ts(n.repoInfo_,e,(r,s,o,u)=>{aI(n,r,s,o,u)},r=>{oI(n,r)},r=>{N3(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=xz(n.repoInfo_,()=>new I5(n.stats_,n.server_)),n.infoData_=new b5,n.infoSyncTree_=new iI({startListening:(r,s,o,u)=>{let h=[];const d=n.infoData_.getNode(r._path);return d.isEmpty()||(h=Vp(n.infoSyncTree_,r._path,d),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),SE(n,"connected",!1),n.serverSyncTree_=new iI({startListening:(r,s,o,u)=>(n.server_.listen(r,o,s,(h,d)=>{const p=u(h,d);al(n.eventQueue_,r._path,p)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}function C3(n){const t=n.infoData_.getNode(new jt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function oO(n){return l3({timestamp:C3(n)})}function aI(n,e,t,r,s){n.dataUpdateCount++;const o=new jt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(s)if(r){const d=_m(t,p=>Fn(p));u=o3(n.serverSyncTree_,o,d,s)}else{const d=Fn(t);u=a3(n.serverSyncTree_,o,d,s)}else if(r){const d=_m(t,p=>Fn(p));u=s3(n.serverSyncTree_,o,d)}else{const d=Fn(t);u=Vp(n.serverSyncTree_,o,d)}let h=o;u.length>0&&(h=RE(n,o)),al(n.eventQueue_,h,u)}function oI(n,e){SE(n,"connected",e),e===!1&&D3(n)}function N3(n,e){Wr(e,(t,r)=>{SE(n,t,r)})}function SE(n,e,t){const r=new jt("/.info/"+e),s=Fn(t);n.infoData_.updateSnapshot(r,s);const o=Vp(n.infoSyncTree_,r,s);al(n.eventQueue_,r,o)}function O3(n){return n.nextWriteId_++}function D3(n){lO(n,"onDisconnectEvents");const e=oO(n),t=Qm();cv(n.onDisconnect_,It(),(s,o)=>{const u=h3(s,o,n.serverSyncTree_,e);MN(t,s,u)});let r=[];cv(t,It(),(s,o)=>{r=r.concat(Vp(n.serverSyncTree_,s,o));const u=V3(n,s);RE(n,u)}),n.onDisconnect_=Qm(),al(n.eventQueue_,It(),r)}function k3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(A3)}function lO(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),zn(t,...e)}function uO(n,e,t){return YN(n.serverSyncTree_,e,t)||Et.EMPTY_NODE}function AE(n,e=n.transactionQueueTree_){if(e||Up(n,e),Wu(e)){const t=hO(n,e);Ee(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&P3(n,_d(e),t)}else rO(e)&&jp(e,t=>{AE(n,t)})}function P3(n,e,t){const r=t.map(p=>p.currentWriteId),s=uO(n,e,r);let o=s;const u=s.hash();for(let p=0;p<t.length;p++){const y=t[p];Ee(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const v=Gr(e,y.path);o=o.updateChild(v,y.currentOutputSnapshotRaw)}const h=o.val(!0),d=e;n.server_.put(d.toString(),h,p=>{lO(n,"transaction put response",{path:d.toString(),status:p});let y=[];if(p==="ok"){const v=[];for(let b=0;b<t.length;b++)t[b].status=2,y=y.concat(lu(n.serverSyncTree_,t[b].currentWriteId)),t[b].onComplete&&v.push(()=>t[b].onComplete(null,!0,t[b].currentOutputSnapshotResolved)),t[b].unwatcher();Up(n,wE(n.transactionQueueTree_,e)),AE(n,n.transactionQueueTree_),al(n.eventQueue_,e,y);for(let b=0;b<v.length;b++)gd(v[b])}else{if(p==="datastale")for(let v=0;v<t.length;v++)t[v].status===3?t[v].status=4:t[v].status=0;else{Er("transaction at "+d.toString()+" failed: "+p);for(let v=0;v<t.length;v++)t[v].status=4,t[v].abortReason=p}RE(n,e)}},u)}function RE(n,e){const t=cO(n,e),r=_d(t),s=hO(n,t);return M3(n,s,r),r}function M3(n,e,t){if(e.length===0)return;const r=[];let s=[];const u=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const d=e[h],p=Gr(t,d.path);let y=!1,v;if(Ee(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)y=!0,v=d.abortReason,s=s.concat(lu(n.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=R3)y=!0,v="maxretry",s=s.concat(lu(n.serverSyncTree_,d.currentWriteId,!0));else{const b=uO(n,d.path,u);d.currentInputSnapshot=b;const A=e[h].update(b.val());if(A!==void 0){aO("transaction failed: Data returned ",A,d.path);let C=Fn(A);typeof A=="object"&&A!=null&&xs(A,".priority")||(C=C.updatePriority(b.getPriority()));const M=d.currentWriteId,Y=oO(n),Z=d3(C,b,Y);d.currentOutputSnapshotRaw=C,d.currentOutputSnapshotResolved=Z,d.currentWriteId=O3(n),u.splice(u.indexOf(M),1),s=s.concat(i3(n.serverSyncTree_,d.path,Z,d.currentWriteId,d.applyLocally)),s=s.concat(lu(n.serverSyncTree_,M,!0))}else y=!0,v="nodata",s=s.concat(lu(n.serverSyncTree_,d.currentWriteId,!0))}al(n.eventQueue_,t,s),s=[],y&&(e[h].status=2,function(b){setTimeout(b,Math.floor(0))}(e[h].unwatcher),e[h].onComplete&&(v==="nodata"?r.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):r.push(()=>e[h].onComplete(new Error(v),!1,null))))}Up(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)gd(r[h]);AE(n,n.transactionQueueTree_)}function cO(n,e){let t,r=n.transactionQueueTree_;for(t=ct(e);t!==null&&Wu(r)===void 0;)r=wE(r,t),e=Lt(e),t=ct(e);return r}function hO(n,e){const t=[];return dO(n,e,t),t.sort((r,s)=>r.order-s.order),t}function dO(n,e,t){const r=Wu(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);jp(e,s=>{dO(n,s,t)})}function Up(n,e){const t=Wu(e);if(t){let r=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[r]=t[s],r++);t.length=r,nO(e,t.length>0?t:void 0)}jp(e,r=>{Up(n,r)})}function V3(n,e){const t=_d(cO(n,e)),r=wE(n.transactionQueueTree_,e);return m3(r,s=>{y_(n,s)}),y_(n,r),iO(r,s=>{y_(n,s)}),t}function y_(n,e){const t=Wu(e);if(t){const r=[];let s=[],o=-1;for(let u=0;u<t.length;u++)t[u].status===3||(t[u].status===1?(Ee(o===u-1,"All SENT items should be at beginning of queue."),o=u,t[u].status=3,t[u].abortReason="set"):(Ee(t[u].status===0,"Unexpected transaction status in abort"),t[u].unwatcher(),s=s.concat(lu(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));o===-1?nO(e,void 0):t.length=o+1,al(n.eventQueue_,_d(e),s);for(let u=0;u<r.length;u++)gd(r[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function j3(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Er(`Invalid query segment '${t}' in query '${n}'`)}return e}const lI=function(n,e){const t=U3(n),r=t.namespace;t.domain==="firebase.com"&&Is(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Is("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||pz();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new gN(t.host,t.secure,r,s,e,"",r!==t.subdomain),path:new jt(t.pathString)}},U3=function(n){let e="",t="",r="",s="",o="",u=!0,h="https",d=443;if(typeof n=="string"){let p=n.indexOf("//");p>=0&&(h=n.substring(0,p-1),n=n.substring(p+2));let y=n.indexOf("/");y===-1&&(y=n.length);let v=n.indexOf("?");v===-1&&(v=n.length),e=n.substring(0,Math.min(y,v)),y<v&&(s=L3(n.substring(y,v)));const b=j3(n.substring(Math.min(n.length,v)));p=e.indexOf(":"),p>=0?(u=h==="https"||h==="wss",d=parseInt(e.substring(p+1),10)):p=e.length;const A=e.slice(0,p);if(A.toLowerCase()==="localhost")t="localhost";else if(A.split(".").length<=2)t=A;else{const C=e.indexOf(".");r=e.substring(0,C).toLowerCase(),t=e.substring(C+1),o=r}"ns"in b&&(o=b.ns)}return{host:e,port:d,domain:t,subdomain:r,secure:u,scheme:h,pathString:s,namespace:o}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return rt(this._path)?null:AN(this._path)}get ref(){return new Qu(this._repo,this._path)}get _queryIdentifier(){const e=KR(this._queryParams),t=oE(e);return t==="{}"?"default":t}get _queryObject(){return KR(this._queryParams)}isEqual(e){if(e=en(e),!(e instanceof IE))return!1;const t=this._repo===e._repo,r=xN(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Xz(this._path)}}class Qu extends IE{constructor(e,t){super(e,t,new fE,!1)}get parent(){const e=IN(this._path);return e===null?null:new Qu(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}n3(Qu);r3(Qu);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3="FIREBASE_DATABASE_EMULATOR_HOST",_v={};let F3=!1;function B3(n,e,t,r){n.repoInfo_=new gN(e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function q3(n,e,t,r,s){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||Is("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let u=lI(o,s),h=u.repoInfo,d;typeof process<"u"&&xR&&(d=xR[z3]),d?(o=`http://${d}?ns=${h.namespace}`,u=lI(o,s),h=u.repoInfo):u.repoInfo.secure;const p=new Az(n.name,n.options,e);E3("Invalid Firebase Database URL",u),rt(u.path)||Is("Database URL must point to the root of a Firebase Database (not including a child path).");const y=G3(h,n,p,new Sz(n,t));return new $3(y,n)}function H3(n,e){const t=_v[e];(!t||t[n.key]!==n)&&Is(`Database ${e}(${n.repoInfo_}) has already been deleted.`),k3(n),delete t[n.key]}function G3(n,e,t,r){let s=_v[e.name];s||(s={},_v[e.name]=s);let o=s[n.toURLString()];return o&&Is("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new I3(n,F3,t,r),s[n.toURLString()]=o,o}class $3{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(x3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Qu(this._repo,It())),this._rootInternal}_delete(){return this._rootInternal!==null&&(H3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Is("Cannot call "+e+" on a deleted database.")}}function K3(n=o0(),e){const t=nd(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=BI("database");r&&W3(t,...r)}return t}function W3(n,e,t,r={}){n=en(n),n._checkNotDeleted("useEmulator");const s=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&ka(r,o.repoInfo_.emulatorOptions))return;Is("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Is('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new dm(dm.OWNER);else if(r.mockUserToken){const h=typeof r.mockUserToken=="string"?r.mockUserToken:GI(r.mockUserToken,n.app.options.projectId);u=new dm(h)}B3(o,s,r,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(n){uz(Ba),Pa(new bs("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return q3(r,s,o,t)},"PUBLIC").setMultipleInstances(!0)),$r(CR,NR,n),$r(CR,NR,"esm2017")}Ts.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Ts.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};Q3();const Y3={apiKey:"AIzaSyCrq7Am9kiE3levq6hOGBuh_wb3lGxfdT0",authDomain:"nrd-sgo.firebaseapp.com",projectId:"nrd-sgo",storageBucket:"nrd-sgo.appspot.com",messagingSenderId:"386786255981",appId:"1:386786255981:web:95cabd428cf0ca17c58b64"},zp=ZI(Y3),Bo=qL(zp),fO=c6(zp,{cacheSizeBytes:u6,experimentalForceLongPolling:!0});h6(fO).catch(n=>{n.code==="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."):n.code==="unimplemented"?console.warn("The current browser does not support offline persistence"):console.warn("Error enabling offline persistence:",n)});sz(zp);K3(zp);const uu=class uu{constructor(){ii(this,"currentUser",null);ii(this,"authStateReady");ii(this,"authStateResolver");if(uu.instance)return uu.instance;this.authStateReady=new Promise(e=>{this.authStateResolver=e}),OV(Bo,e=>{this.currentUser=e,console.log("Auth state initialized:",{user:e==null?void 0:e.email,isAuthenticated:!!e}),this.authStateResolver()}),uu.instance=this}async login(e,t){try{await xV(Bo,e,t)}catch(r){throw console.error("Login error:",r),r}}async logout(){try{await DV(Bo)}catch(e){throw console.error("Logout error:",e),e}}getCurrentUser(){return this.currentUser}async isAuthenticated(){return await this.authStateReady,!!this.currentUser}async waitForAuthReady(){return this.authStateReady}};ii(uu,"instance");let el=uu;var __={exports:{}},v_,uI;function X3(){if(uI)return v_;uI=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return v_=n,v_}var E_,cI;function Z3(){if(cI)return E_;cI=1;var n=X3();function e(){}function t(){}return t.resetWarningCache=e,E_=function(){function r(u,h,d,p,y,v){if(v!==n){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}r.isRequired=r;function s(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},E_}var hI;function J3(){return hI||(hI=1,__.exports=Z3()()),__.exports}var e9=J3();const oe=Kv(e9);function vv(){return vv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},vv.apply(this,arguments)}function t9(n,e){if(n==null)return{};var t=n9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function n9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var xE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=t9(n,["color","size"]);return he.createElement("svg",vv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"}))});xE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};xE.displayName="Activity";function Ev(){return Ev=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ev.apply(this,arguments)}function r9(n,e){if(n==null)return{};var t=i9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function i9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var CE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=r9(n,["color","size"]);return he.createElement("svg",Ev({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("circle",{cx:"12",cy:"12",r:"10"}),he.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),he.createElement("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"}))});CE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};CE.displayName="AlertCircle";function Tv(){return Tv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Tv.apply(this,arguments)}function s9(n,e){if(n==null)return{};var t=a9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function a9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Qh=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=s9(n,["color","size"]);return he.createElement("svg",Tv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),he.createElement("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),he.createElement("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"}))});Qh.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};Qh.displayName="AlertTriangle";function bv(){return bv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bv.apply(this,arguments)}function o9(n,e){if(n==null)return{};var t=l9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function l9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var NE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=o9(n,["color","size"]);return he.createElement("svg",bv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),he.createElement("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),he.createElement("line",{x1:"6",y1:"20",x2:"6",y2:"14"}))});NE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};NE.displayName="BarChart2";function wv(){return wv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wv.apply(this,arguments)}function u9(n,e){if(n==null)return{};var t=c9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function c9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var OE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=u9(n,["color","size"]);return he.createElement("svg",wv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),he.createElement("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"}))});OE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};OE.displayName="Bell";function Sv(){return Sv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Sv.apply(this,arguments)}function h9(n,e){if(n==null)return{};var t=d9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function d9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Fp=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=h9(n,["color","size"]);return he.createElement("svg",Sv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),he.createElement("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),he.createElement("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),he.createElement("line",{x1:"3",y1:"10",x2:"21",y2:"10"}))});Fp.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};Fp.displayName="Calendar";function Av(){return Av=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Av.apply(this,arguments)}function f9(n,e){if(n==null)return{};var t=m9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function m9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var DE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=f9(n,["color","size"]);return he.createElement("svg",Av({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("circle",{cx:"12",cy:"12",r:"10"}),he.createElement("polyline",{points:"12 6 12 12 16 14"}))});DE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};DE.displayName="Clock";function Rv(){return Rv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Rv.apply(this,arguments)}function p9(n,e){if(n==null)return{};var t=g9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function g9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var kE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=p9(n,["color","size"]);return he.createElement("svg",Rv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),he.createElement("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}))});kE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};kE.displayName="DollarSign";function Iv(){return Iv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Iv.apply(this,arguments)}function y9(n,e){if(n==null)return{};var t=_9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function _9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var PE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=y9(n,["color","size"]);return he.createElement("svg",Iv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"}))});PE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};PE.displayName="Edit2";function xv(){return xv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xv.apply(this,arguments)}function v9(n,e){if(n==null)return{};var t=E9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function E9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var ME=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=v9(n,["color","size"]);return he.createElement("svg",xv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),he.createElement("polyline",{points:"14 2 14 8 20 8"}),he.createElement("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),he.createElement("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),he.createElement("polyline",{points:"10 9 9 9 8 9"}))});ME.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};ME.displayName="FileText";function Cv(){return Cv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Cv.apply(this,arguments)}function T9(n,e){if(n==null)return{};var t=b9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function b9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var VE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=T9(n,["color","size"]);return he.createElement("svg",Cv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}))});VE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};VE.displayName="Filter";function Nv(){return Nv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Nv.apply(this,arguments)}function w9(n,e){if(n==null)return{};var t=S9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function S9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var LE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=w9(n,["color","size"]);return he.createElement("svg",Nv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),he.createElement("polyline",{points:"9 22 9 12 15 12 15 22"}))});LE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};LE.displayName="Home";function Ov(){return Ov=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ov.apply(this,arguments)}function A9(n,e){if(n==null)return{};var t=R9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function R9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var jE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=A9(n,["color","size"]);return he.createElement("svg",Ov({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),he.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}))});jE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};jE.displayName="Lock";function Dv(){return Dv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Dv.apply(this,arguments)}function I9(n,e){if(n==null)return{};var t=x9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function x9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var UE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=I9(n,["color","size"]);return he.createElement("svg",Dv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),he.createElement("polyline",{points:"16 17 21 12 16 7"}),he.createElement("line",{x1:"21",y1:"12",x2:"9",y2:"12"}))});UE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};UE.displayName="LogOut";function kv(){return kv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},kv.apply(this,arguments)}function C9(n,e){if(n==null)return{};var t=N9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function N9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var zE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=C9(n,["color","size"]);return he.createElement("svg",kv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),he.createElement("polyline",{points:"22,6 12,13 2,6"}))});zE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};zE.displayName="Mail";function Pv(){return Pv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Pv.apply(this,arguments)}function O9(n,e){if(n==null)return{};var t=D9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function D9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var FE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=O9(n,["color","size"]);return he.createElement("svg",Pv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),he.createElement("circle",{cx:"12",cy:"10",r:"3"}))});FE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};FE.displayName="MapPin";function Mv(){return Mv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Mv.apply(this,arguments)}function k9(n,e){if(n==null)return{};var t=P9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function P9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var BE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=k9(n,["color","size"]);return he.createElement("svg",Mv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),he.createElement("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),he.createElement("line",{x1:"3",y1:"18",x2:"21",y2:"18"}))});BE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};BE.displayName="Menu";function Vv(){return Vv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Vv.apply(this,arguments)}function M9(n,e){if(n==null)return{};var t=V9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function V9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var qE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=M9(n,["color","size"]);return he.createElement("svg",Vv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}))});qE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};qE.displayName="Moon";function Lv(){return Lv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Lv.apply(this,arguments)}function L9(n,e){if(n==null)return{};var t=j9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function j9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Yh=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=L9(n,["color","size"]);return he.createElement("svg",Lv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("line",{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"}),he.createElement("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),he.createElement("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),he.createElement("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"}))});Yh.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};Yh.displayName="Package";function jv(){return jv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jv.apply(this,arguments)}function U9(n,e){if(n==null)return{};var t=z9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function z9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var HE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=U9(n,["color","size"]);return he.createElement("svg",jv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),he.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))});HE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};HE.displayName="Plus";function Uv(){return Uv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Uv.apply(this,arguments)}function F9(n,e){if(n==null)return{};var t=B9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function B9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Bp=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=F9(n,["color","size"]);return he.createElement("svg",Uv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("circle",{cx:"12",cy:"12",r:"3"}),he.createElement("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}))});Bp.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};Bp.displayName="Settings";function zv(){return zv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zv.apply(this,arguments)}function q9(n,e){if(n==null)return{};var t=H9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function H9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var GE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=q9(n,["color","size"]);return he.createElement("svg",zv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),he.createElement("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),he.createElement("path",{d:"M16 10a4 4 0 0 1-8 0"}))});GE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};GE.displayName="ShoppingBag";function Fv(){return Fv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Fv.apply(this,arguments)}function G9(n,e){if(n==null)return{};var t=$9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function $9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var $E=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=G9(n,["color","size"]);return he.createElement("svg",Fv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("circle",{cx:"12",cy:"12",r:"5"}),he.createElement("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),he.createElement("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),he.createElement("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),he.createElement("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),he.createElement("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),he.createElement("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),he.createElement("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),he.createElement("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}))});$E.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};$E.displayName="Sun";function Bv(){return Bv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bv.apply(this,arguments)}function K9(n,e){if(n==null)return{};var t=W9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function W9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var KE=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=K9(n,["color","size"]);return he.createElement("svg",Bv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"}))});KE.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};KE.displayName="Tool";function qv(){return qv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qv.apply(this,arguments)}function Q9(n,e){if(n==null)return{};var t=Y9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Y9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var qp=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=Q9(n,["color","size"]);return he.createElement("svg",qv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),he.createElement("circle",{cx:"12",cy:"7",r:"4"}))});qp.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};qp.displayName="User";function Hv(){return Hv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Hv.apply(this,arguments)}function X9(n,e){if(n==null)return{};var t=Z9(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Z9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Hp=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=X9(n,["color","size"]);return he.createElement("svg",Hv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),he.createElement("circle",{cx:"9",cy:"7",r:"4"}),he.createElement("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),he.createElement("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}))});Hp.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};Hp.displayName="Users";function Gv(){return Gv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Gv.apply(this,arguments)}function J9(n,e){if(n==null)return{};var t=eF(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function eF(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Gp=B.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=n.size,o=s===void 0?24:s,u=J9(n,["color","size"]);return he.createElement("svg",Gv({ref:e,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),he.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),he.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))});Gp.propTypes={color:oe.string,size:oe.oneOfType([oe.string,oe.number])};Gp.displayName="X";const tF=({isOpen:n,onClose:e})=>{const t=[{title:"Dashboard",icon:w.jsx(LE,{className:"h-5 w-5"}),path:"/",badge:null},{title:"Incidentes",icon:w.jsx(Qh,{className:"h-5 w-5"}),path:"/incidents",badge:"3"},{title:"Personal",icon:w.jsx(Hp,{className:"h-5 w-5"}),path:"/employees",badge:null},{title:"Inventario",icon:w.jsx(Yh,{className:"h-5 w-5"}),path:"/inventory",badge:null},{title:"Producción",icon:w.jsx(NE,{className:"h-5 w-5"}),path:"/production",badge:null},{title:"Mantenimiento",icon:w.jsx(KE,{className:"h-5 w-5"}),path:"/maintenance",badge:"2"},{title:"Calendario",icon:w.jsx(Fp,{className:"h-5 w-5"}),path:"/calendar",badge:null},{title:"Reportes",icon:w.jsx(ME,{className:"h-5 w-5"}),path:"/reports",badge:null}];return w.jsxs("div",{className:"h-full w-64 bg-white dark:bg-gray-800 flex flex-col",children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-5 border-b border-gray-200 dark:border-gray-700",children:[w.jsxs("div",{className:"flex items-center space-x-3",children:[w.jsx("div",{className:"h-8 w-8 rounded bg-gradient-to-r from-blue-600 to-indigo-600 flex items-center justify-center",children:w.jsx("span",{className:"text-white font-bold text-xl",children:"S"})}),w.jsx("span",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"SGO App"})]}),w.jsx("button",{onClick:e,className:"lg:hidden p-2 rounded-lg text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:w.jsx(Gp,{className:"h-5 w-5"})})]}),w.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:w.jsx("div",{className:"px-3 space-y-1",children:t.map(r=>w.jsxs(A_,{to:r.path,className:({isActive:s})=>`flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-colors duration-200 relative group ${s?"text-blue-600 dark:text-blue-500 bg-blue-50 dark:bg-blue-900/20":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:[w.jsxs("span",{className:"flex items-center",children:[r.icon,w.jsx("span",{className:"ml-3",children:r.title})]}),r.badge&&w.jsx("span",{className:"ml-auto bg-blue-100 dark:bg-blue-900/40 text-blue-600 dark:text-blue-500 px-2 py-0.5 rounded-full text-xs font-medium",children:r.badge}),w.jsx("div",{className:"absolute inset-y-0 left-0 w-1 rounded-r-lg bg-blue-600 dark:bg-blue-500 transform scale-y-0 transition-transform duration-200 origin-left group-hover:scale-y-100"})]},r.path))})}),w.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:w.jsxs(A_,{to:"/settings",className:({isActive:r})=>`flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-colors duration-200 ${r?"text-blue-600 dark:text-blue-500 bg-blue-50 dark:bg-blue-900/20":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:[w.jsx(Bp,{className:"h-5 w-5"}),w.jsx("span",{className:"ml-3",children:"Configuración"})]})})]})},nF=({onMenuClick:n,onLogout:e,userName:t})=>{const[r,s]=B.useState(!1),[o,u]=B.useState(!1),[h,d]=B.useState(!1),p=()=>{s(!r),document.documentElement.classList.toggle("dark")};return w.jsx("nav",{className:"px-4 py-3",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("div",{className:"flex items-center",children:w.jsx("button",{onClick:n,className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200",children:w.jsx(BE,{className:"h-6 w-6"})})}),w.jsxs("div",{className:"flex items-center space-x-4",children:[w.jsx("button",{onClick:p,className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200",children:r?w.jsx($E,{className:"h-5 w-5"}):w.jsx(qE,{className:"h-5 w-5"})}),w.jsxs("div",{className:"relative",children:[w.jsxs("button",{onClick:()=>d(!h),className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200",children:[w.jsx(OE,{className:"h-5 w-5"}),w.jsx("span",{className:"absolute top-1 right-1 h-2 w-2 rounded-full bg-red-500"})]}),h&&w.jsxs("div",{className:"absolute right-0 mt-2 w-80 rounded-lg bg-white dark:bg-gray-800 shadow-lg py-2 border border-gray-200 dark:border-gray-700",children:[w.jsx("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:w.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Notificaciones"})}),w.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[w.jsx(dI,{title:"Nuevo incidente reportado",description:"Se ha reportado un incidente de seguridad en el área de producción",time:"Hace 5 minutos"}),w.jsx(dI,{title:"Mantenimiento programado",description:"Recordatorio: Mantenimiento programado para mañana",time:"Hace 1 hora"})]})]})]}),w.jsxs("div",{className:"relative",children:[w.jsxs("button",{onClick:()=>u(!o),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200",children:[w.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 flex items-center justify-center",children:w.jsx("span",{className:"text-white font-medium",children:t.charAt(0).toUpperCase()})}),w.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:t})]}),o&&w.jsxs("div",{className:"absolute right-0 mt-2 w-48 rounded-lg bg-white dark:bg-gray-800 shadow-lg py-2 border border-gray-200 dark:border-gray-700",children:[w.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2",children:[w.jsx(qp,{className:"h-4 w-4"}),w.jsx("span",{children:"Perfil"})]}),w.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2",children:[w.jsx(Bp,{className:"h-4 w-4"}),w.jsx("span",{children:"Configuración"})]}),w.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),w.jsxs("button",{onClick:e,className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 flex items-center space-x-2",children:[w.jsx(UE,{className:"h-4 w-4"}),w.jsx("span",{children:"Cerrar Sesión"})]})]})]})]})]})})},dI=({title:n,description:e,time:t})=>w.jsxs("div",{className:"px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors duration-200",children:[w.jsxs("div",{className:"flex justify-between items-start",children:[w.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n}),w.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:t})]}),w.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:e})]}),rF=({children:n})=>{const e=Jh(),[t,r]=B.useState(!0),[s,o]=B.useState(!1);return new el,B.useEffect(()=>{const u=Bo.onAuthStateChanged(async h=>{console.log("Auth state changed in RequireAuth:",{user:h==null?void 0:h.email,isAuthenticated:!!h}),h?o(!0):e("/login",{replace:!0}),r(!1)});return()=>u()},[e]),t?w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:w.jsx("div",{className:"animate-pulse text-gray-600 dark:text-gray-300",children:"Cargando..."})}):s?w.jsx(w.Fragment,{children:n}):null},iF=()=>{var u;const[n,e]=B.useState(!0),t=Jh(),r=new el;B.useEffect(()=>{const h=Bo.onAuthStateChanged(d=>{console.log("Auth state changed:",{isAuthenticated:!!d,uid:d==null?void 0:d.uid,email:d==null?void 0:d.email})});return()=>h()},[]);const s=async()=>{try{await r.logout(),t("/login")}catch(h){console.error("Logout error:",h)}},o=()=>{e(!n)};return w.jsx(rF,{children:w.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 transition-colors duration-300",children:[w.jsxs("div",{className:`fixed inset-y-0 left-0 z-30 transform ${n?"translate-x-0":"-translate-x-full"} lg:relative lg:translate-x-0 transition-transform duration-300 ease-in-out`,children:[w.jsx("div",{className:"absolute inset-0 bg-white/30 dark:bg-gray-900/30 backdrop-blur-xl -z-10"}),w.jsx(tF,{isOpen:n,onClose:()=>e(!1)})]}),w.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[w.jsx("div",{className:"sticky top-0 z-20 bg-white/70 dark:bg-gray-900/70 backdrop-blur-lg border-b border-gray-200 dark:border-gray-700",children:w.jsx(nF,{onMenuClick:o,onLogout:s,userName:((u=r.getCurrentUser())==null?void 0:u.displayName)||"Usuario"})}),w.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent",children:w.jsx("div",{className:"container mx-auto px-4 py-6 transition-all duration-300 ease-in-out",children:w.jsx("div",{className:"animate-fadeIn",children:w.jsx(OI,{})})})})]}),n&&w.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm z-20 lg:hidden",onClick:()=>e(!1)})]})})},sF=()=>{const[n,e]=B.useState(""),[t,r]=B.useState(""),[s,o]=B.useState(null),[u,h]=B.useState(!1),d=Jh(),p=new el,y=async v=>{v.preventDefault(),o(null),h(!0);try{await p.login(n,t),d("/")}catch{o("Credenciales inválidas. Por favor, intente nuevamente.")}finally{h(!1)}};return w.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 p-4",children:[w.jsxs("div",{className:"absolute inset-0 z-0 opacity-40 dark:opacity-20",children:[w.jsx("div",{className:"absolute inset-y-0 left-0 w-1/2 bg-gradient-to-r from-blue-400 to-transparent blur-3xl"}),w.jsx("div",{className:"absolute inset-y-0 right-0 w-1/2 bg-gradient-to-l from-indigo-400 to-transparent blur-3xl"})]}),w.jsxs("div",{className:"relative w-full max-w-md",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("div",{className:"inline-flex items-center justify-center h-16 w-16 rounded-full bg-gradient-to-r from-blue-600 to-indigo-600 mb-4 animate-pulse-slow",children:w.jsx("span",{className:"text-3xl font-bold text-white",children:"S"})}),w.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"SGO App"}),w.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Sistema de Gestión Operativa"})]}),w.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl shadow-glass-lg rounded-2xl p-8 space-y-6 animate-fadeIn",children:[w.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white text-center",children:"Iniciar Sesión"}),s&&w.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 p-4 rounded-lg flex items-start space-x-2",children:[w.jsx(CE,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),w.jsx("span",{className:"text-sm",children:s})]}),w.jsxs("form",{onSubmit:y,className:"space-y-6",children:[w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Correo Electrónico"}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:w.jsx(zE,{className:"h-5 w-5 text-gray-400"})}),w.jsx("input",{id:"email",type:"email",value:n,onChange:v=>e(v.target.value),required:!0,className:"block w-full pl-10 pr-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white/50 dark:bg-gray-900/50 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",placeholder:"usuario@empresa.com"})]})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Contraseña"}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:w.jsx(jE,{className:"h-5 w-5 text-gray-400"})}),w.jsx("input",{id:"password",type:"password",value:t,onChange:v=>r(v.target.value),required:!0,className:"block w-full pl-10 pr-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white/50 dark:bg-gray-900/50 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",placeholder:"••••••••"})]})]})]}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center",children:[w.jsx("input",{id:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors duration-200"}),w.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Recordarme"})]}),w.jsx("button",{type:"button",className:"text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 transition-colors duration-200",children:"¿Olvidó su contraseña?"})]}),w.jsx("button",{type:"submit",disabled:u,className:"w-full flex items-center justify-center px-4 py-2.5 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:u?w.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[w.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),w.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Iniciar Sesión"})]})]}),w.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["¿No tiene una cuenta?"," ",w.jsx("button",{className:"font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 transition-colors duration-200",children:"Contacte al administrador"})]})]})]})},aF=()=>w.jsxs("div",{className:"space-y-6",children:[w.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Dashboard"}),w.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[w.jsx(Kf,{title:"Trabajadores",value:"24",icon:w.jsx(Hp,{className:"h-6 w-6"}),trend:"+2.5%",trendUp:!0}),w.jsx(Kf,{title:"Órdenes",value:"156",icon:w.jsx(GE,{className:"h-6 w-6"}),trend:"+12.3%",trendUp:!0}),w.jsx(Kf,{title:"Productos",value:"89",icon:w.jsx(Yh,{className:"h-6 w-6"}),trend:"-0.8%",trendUp:!1}),w.jsx(Kf,{title:"Incidentes",value:"3",icon:w.jsx(Qh,{className:"h-6 w-6"}),trend:"-25%",trendUp:!0})]}),w.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[w.jsx(fI,{title:"Ventas Diarias",value:"$12,458",trend:"+8.2%",icon:w.jsx(kE,{className:"h-6 w-6"})}),w.jsx(fI,{title:"Eficiencia de Producción",value:"94.2%",trend:"+2.1%",icon:w.jsx(xE,{className:"h-6 w-6"})})]}),w.jsx("div",{className:"bg-white shadow rounded-lg",children:w.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[w.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Actividad Reciente"}),w.jsx("div",{className:"mt-6 flow-root",children:w.jsxs("ul",{className:"-mb-8",children:[w.jsx(T_,{title:"Nueva orden de producción",description:"Orden #1234 creada por Juan Pérez",time:"Hace 5 minutos",icon:w.jsx(Fp,{className:"h-5 w-5"})}),w.jsx(T_,{title:"Incidente reportado",description:"Mantenimiento requerido en línea 2",time:"Hace 2 horas",icon:w.jsx(Qh,{className:"h-5 w-5"})}),w.jsx(T_,{title:"Actualización de inventario",description:"Stock actualizado por María González",time:"Hace 4 horas",icon:w.jsx(Yh,{className:"h-5 w-5"})})]})})]})})]}),Kf=({title:n,value:e,icon:t,trend:r,trendUp:s})=>w.jsx("div",{className:"bg-white shadow rounded-lg px-4 py-5 sm:p-6",children:w.jsxs("div",{className:"flex items-center",children:[w.jsx("div",{className:"flex-shrink-0 bg-blue-500 rounded-md p-3",children:w.jsx("span",{className:"text-white",children:t})}),w.jsx("div",{className:"ml-5 w-0 flex-1",children:w.jsxs("dl",{children:[w.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:n}),w.jsxs("dd",{className:"flex items-baseline",children:[w.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:e}),w.jsx("div",{className:`ml-2 flex items-baseline text-sm font-semibold ${s?"text-green-600":"text-red-600"}`,children:r})]})]})})]})}),fI=({title:n,value:e,trend:t,icon:r})=>w.jsxs("div",{className:"bg-white shadow rounded-lg px-4 py-5 sm:p-6",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:n}),w.jsxs("div",{className:"mt-2 flex items-baseline",children:[w.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e}),w.jsx("p",{className:"ml-2 text-sm font-medium text-green-600",children:t})]})]}),w.jsx("div",{className:"bg-blue-500 rounded-md p-3",children:w.jsx("span",{className:"text-white",children:r})})]}),w.jsx("div",{className:"mt-6",children:w.jsx("div",{className:"h-48 bg-gray-50 rounded"})})]}),T_=({title:n,description:e,time:t,icon:r})=>w.jsx("li",{children:w.jsx("div",{className:"relative pb-8",children:w.jsxs("div",{className:"relative flex space-x-3",children:[w.jsx("div",{children:w.jsx("span",{className:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center",children:w.jsx("span",{className:"text-white",children:r})})}),w.jsxs("div",{className:"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4",children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-sm text-gray-900",children:n}),w.jsx("p",{className:"text-sm text-gray-500",children:e})]}),w.jsx("div",{className:"text-right text-sm whitespace-nowrap text-gray-500",children:w.jsx("time",{children:t})})]})]})})});class oF{constructor(){ii(this,"db");ii(this,"_collectionRef",null);ii(this,"retryAttempts",5);ii(this,"retryDelay",2e3);this.db=fO}async ensureAuthenticated(){let e=0;for(;e<this.retryAttempts;){if(Bo.currentUser)return;console.log(`Authentication attempt ${e+1}/${this.retryAttempts}`),await new Promise(t=>setTimeout(t,this.retryDelay)),e++}throw new Error("Usuario no autenticado. Por favor, inicie sesión nuevamente.")}async toggleNetwork(e){try{e?(await m6(this.db),console.log("Firestore network connection enabled")):(await p6(this.db),console.log("Firestore network connection disabled"))}catch(t){t instanceof me&&console.warn("Error toggling network:",t.message)}}async withRetry(e,t=!1){let r=null,s=0;const o=1e4;for(;s<this.retryAttempts;)try{t&&await this.toggleNetwork(!0);const u=await e();return t&&await f6(this.db),u}catch(u){if(console.warn(`Operation failed, attempt ${s+1}/${this.retryAttempts}:`,u),r=u instanceof me?u:new Error(String(u)),u instanceof me){if(u.code==="permission-denied")throw new Error("No tiene permisos para realizar esta operación");(u.code==="unavailable"||u.code==="internal")&&(console.log("Problema de conexión detectado, reintentando..."),await this.toggleNetwork(!1),await new Promise(d=>setTimeout(d,1e3)),await this.toggleNetwork(!0))}const h=Math.min(this.retryDelay*Math.pow(2,s),o);await new Promise(d=>setTimeout(d,h)),this.resetCollectionRef(),s++}if(r instanceof me){if(r.code==="permission-denied")throw new Error("No tiene permisos para realizar esta operación");if(r.code==="unavailable"||r.code==="internal")throw new Error("Problema de conexión. Por favor, verifique su conexión e intente nuevamente.")}throw new Error("La operación falló después de varios intentos. Por favor, intente nuevamente.")}get collectionRef(){if(!this._collectionRef){if(!this.collectionName)throw new Error("El nombre de la colección debe estar definido en la clase derivada");this._collectionRef=l6(this.db,this.collectionName)}return this._collectionRef}resetCollectionRef(){this._collectionRef=null}async create(e){return this.withRetry(async()=>{await this.ensureAuthenticated(),console.log("Creating document in collection:",this.collectionName);const t=qf(this.collectionRef),r=new Date,s={...e,id:t.id,lastUpdated:r,creation:r};try{return await N6(t,s),console.log("Document created successfully:",t.id),s}catch(o){throw console.error("Error creating document:",o),o}},!0)}async update(e,t){return this.withRetry(async()=>{await this.ensureAuthenticated();const r=qf(this.collectionRef,e);if(!(await bR(r)).exists())throw new Error(`Document with id ${e} not found`);await O6(r,{...t,lastUpdated:new Date})},!0)}async delete(e){return this.withRetry(async()=>{await this.ensureAuthenticated();const t=qf(this.collectionRef,e);await D6(t)},!0)}async getById(e){return this.withRetry(async()=>{await this.ensureAuthenticated();const t=qf(this.collectionRef,e),r=await bR(t);return r.exists()?r.data():null})}async getAll(){return this.withRetry(async()=>{await this.ensureAuthenticated();const e=await su(this.collectionRef);return this.convertQuerySnapshot(e)})}convertQuerySnapshot(e){return e.docs.map(t=>t.data())}}class lF extends oF{constructor(){super();ii(this,"unsubscribe",null);Bo.onAuthStateChanged(t=>{console.log("Auth state changed in IncidentRepository:",{user:t==null?void 0:t.email,isAuthenticated:!!t,timestamp:new Date().toISOString()}),this.resetCollectionRef(),this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)})}get collectionName(){return"incidents"}async create(t){console.log("Creating incident with data:",{...t,timestamp:new Date().toISOString()});try{const r=await super.create(t);return console.log("Incident created successfully:",{id:r.id,type:r.type,timestamp:new Date().toISOString()}),r}catch(r){if(console.error("Error creating incident:",{error:r,data:{...t,timestamp:new Date().toISOString()}}),r instanceof me)switch(r.code){case"permission-denied":throw new Error("No tiene permisos para crear incidentes");case"unavailable":throw new Error("Servicio no disponible. Por favor, intente nuevamente");default:throw new Error(`Error al crear el incidente: ${r.message}`)}throw new Error("Error al crear el incidente. Por favor, intente nuevamente.")}}async getByDateRange(t,r){return this.withRetry(async()=>{await this.ensureAuthenticated(),console.log("Getting incidents by date range:",{startDate:t,endDate:r});const s=nh(this.collectionRef,Zl("reportDate",">=",t),Zl("reportDate","<=",r),rh("reportDate","desc")),o=await su(s),u=this.convertQuerySnapshot(o);return console.log(`Found ${u.length} incidents in date range`),u})}async getByType(t){return this.withRetry(async()=>{await this.ensureAuthenticated(),console.log("Getting incidents by type:",t);const r=nh(this.collectionRef,Zl("type","==",t),rh("reportDate","desc")),s=await su(r);return this.convertQuerySnapshot(s)})}async getByStatus(t){return this.withRetry(async()=>{await this.ensureAuthenticated(),console.log("Getting incidents by status:",t);const r=nh(this.collectionRef,Zl("status","==",t),rh("reportDate","desc")),s=await su(r);return this.convertQuerySnapshot(s)})}async getByReporter(t){return this.withRetry(async()=>{await this.ensureAuthenticated(),console.log("Getting incidents by reporter:",t);const r=nh(this.collectionRef,Zl("reporterId","==",t),rh("reportDate","desc")),s=await su(r);return this.convertQuerySnapshot(s)})}async getByClassification(t){return this.withRetry(async()=>{await this.ensureAuthenticated(),console.log("Getting incidents by classification:",t);const r=nh(this.collectionRef,Zl("classification","==",t),rh("reportDate","desc")),s=await su(r);return this.convertQuerySnapshot(s)})}async updateStatus(t,r){return this.withRetry(async()=>{await this.ensureAuthenticated(),console.log("Updating incident status:",{incidentId:t,status:r}),await this.update(t,{status:r})})}}const uF=({title:n,subtitle:e,actions:t})=>w.jsxs("div",{className:"md:flex md:items-center md:justify-between mb-8",children:[w.jsxs("div",{className:"min-w-0 flex-1",children:[w.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight",children:n}),e&&w.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e})]}),t&&w.jsx("div",{className:"mt-4 flex md:ml-4 md:mt-0",children:t})]}),Xh=({children:n,variant:e="primary",size:t="md",isLoading:r=!1,icon:s,className:o="",disabled:u,...h})=>{const d="inline-flex items-center justify-center font-medium rounded-md focus:outline-none transition-colors",p={primary:"text-white bg-blue-600 hover:bg-blue-700 focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",secondary:"text-gray-700 bg-gray-100 hover:bg-gray-200 focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",danger:"text-white bg-red-600 hover:bg-red-700 focus:ring-2 focus:ring-offset-2 focus:ring-red-500",success:"text-white bg-green-600 hover:bg-green-700 focus:ring-2 focus:ring-offset-2 focus:ring-green-500",warning:"text-white bg-yellow-600 hover:bg-yellow-700 focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500"},y={sm:"px-2.5 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return w.jsx("button",{className:`
        ${d}
        ${p[e]}
        ${y[t]}
        ${u||r?"opacity-50 cursor-not-allowed":""}
        ${o}
      `,disabled:u||r,...h,children:r?w.jsxs(w.Fragment,{children:[w.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[w.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),w.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cargando..."]}):w.jsxs(w.Fragment,{children:[s&&w.jsx("span",{className:"mr-2",children:s}),n]})})},cF=({columns:n,data:e,isLoading:t=!1,emptyMessage:r="No hay datos disponibles",onRowClick:s})=>t?w.jsx("div",{className:"min-h-[200px] flex items-center justify-center",children:w.jsxs("div",{className:"text-center",children:[w.jsxs("svg",{className:"animate-spin h-8 w-8 mx-auto text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[w.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),w.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),w.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Cargando..."})]})}):e.length?w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[w.jsx("thead",{className:"bg-gray-50",children:w.jsx("tr",{children:n.map((o,u)=>w.jsx("th",{scope:"col",className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${o.className||""}`,children:o.header},u))})}),w.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((o,u)=>w.jsx("tr",{onClick:()=>s==null?void 0:s(o),className:s?"cursor-pointer hover:bg-gray-50":"",children:n.map((h,d)=>{const p=typeof h.accessor=="function"?h.accessor(o):String(o[h.accessor]);return w.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 ${h.className||""}`,children:p},d)})},u))})]})}):w.jsx("div",{className:"min-h-[200px] flex items-center justify-center",children:w.jsx("p",{className:"text-gray-500",children:r})}),Jm=({children:n,className:e="",title:t,subtitle:r,actions:s})=>w.jsxs("div",{className:`bg-white shadow rounded-lg overflow-hidden ${e}`,children:[(t||s)&&w.jsx("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{children:[t&&w.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:t}),r&&w.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:r})]}),s&&w.jsx("div",{children:s})]})}),w.jsx("div",{className:"px-4 py-5 sm:p-6",children:n})]}),$v=({isOpen:n,onClose:e,title:t,children:r,size:s="md",footer:o})=>{if(!n)return null;const u={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return w.jsxs(B.Fragment,{children:[w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity z-40",onClick:e}),w.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:w.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:w.jsxs("div",{className:`relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 w-full ${u[s]}`,children:[w.jsx("div",{className:"bg-white px-4 py-4 sm:px-6 border-b border-gray-200",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:t}),w.jsxs("button",{type:"button",className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none",onClick:e,children:[w.jsx("span",{className:"sr-only",children:"Cerrar"}),w.jsx(Gp,{className:"h-6 w-6"})]})]})}),w.jsx("div",{className:"bg-white px-4 py-5 sm:p-6",children:r}),o&&w.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 border-t border-gray-200",children:o})]})})})]})},mI=({label:n,error:e,helper:t,className:r="",...s})=>w.jsxs("div",{children:[n&&w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),w.jsx("input",{className:`
          block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm
          ${e?"border-red-300":""}
          ${r}
        `,...s}),(e||t)&&w.jsx("p",{className:`mt-1 text-sm ${e?"text-red-600":"text-gray-500"}`,children:e||t})]}),gu=({label:n,error:e,helper:t,options:r,className:s="",...o})=>w.jsxs("div",{children:[n&&w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),w.jsx("select",{className:`
          block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm
          ${e?"border-red-300":""}
          ${s}
        `,...o,children:r.map(u=>w.jsx("option",{value:u.value,children:u.label},u.value))}),(e||t)&&w.jsx("p",{className:`mt-1 text-sm ${e?"text-red-600":"text-gray-500"}`,children:e||t})]}),pI=({label:n,error:e,helper:t,className:r="",...s})=>w.jsxs("div",{children:[n&&w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),w.jsx("textarea",{className:`
          block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm
          ${e?"border-red-300":""}
          ${r}
        `,...s}),(e||t)&&w.jsx("p",{className:`mt-1 text-sm ${e?"text-red-600":"text-gray-500"}`,children:e||t})]}),pa=({children:n,className:e=""})=>w.jsx("div",{className:`space-y-4 ${e}`,children:n}),mO=({incident:n,onSubmit:e,onCancel:t,isLoading:r=!1})=>{const[s,o]=B.useState(n?{type:n.type,description:n.description,classification:n.classification,status:n.status,reportDate:n.reportDate,location:n.location,affectedArea:n.affectedArea,immediateActions:n.immediateActions,reporterId:n.reporterId,reporterName:n.reporterName}:{type:"safety",description:"",classification:1,status:"pending",reportDate:new Date().toISOString(),location:"",affectedArea:"",immediateActions:"",reporterId:"",reporterName:""}),u=async h=>{h.preventDefault(),await e(s)};return w.jsxs("form",{onSubmit:u,className:"space-y-6",children:[w.jsx(pa,{children:w.jsx(gu,{label:"Tipo de Incidente",value:s.type,onChange:h=>o({...s,type:h.target.value}),required:!0,options:[{value:"safety",label:"Seguridad"},{value:"maintenance",label:"Mantenimiento"},{value:"quality",label:"Calidad"}]})}),w.jsx(pa,{children:w.jsx(gu,{label:"Clasificación",value:s.classification,onChange:h=>o({...s,classification:Number(h.target.value)}),required:!0,options:[{value:"1",label:"Nivel 1"},{value:"2",label:"Nivel 2"},{value:"3",label:"Nivel 3"}]})}),w.jsx(pa,{children:w.jsx(mI,{label:"Ubicación",value:s.location,onChange:h=>o({...s,location:h.target.value}),required:!0})}),w.jsx(pa,{children:w.jsx(mI,{label:"Área Afectada",value:s.affectedArea,onChange:h=>o({...s,affectedArea:h.target.value}),required:!0})}),w.jsx(pa,{children:w.jsx(pI,{label:"Descripción",value:s.description,onChange:h=>o({...s,description:h.target.value}),required:!0,rows:4})}),w.jsx(pa,{children:w.jsx(pI,{label:"Acciones Inmediatas",value:s.immediateActions||"",onChange:h=>o({...s,immediateActions:h.target.value}),rows:4})}),n&&w.jsx(pa,{children:w.jsx(gu,{label:"Estado",value:s.status,onChange:h=>o({...s,status:h.target.value}),required:!0,options:[{value:"pending",label:"Pendiente"},{value:"in_progress",label:"En Progreso"},{value:"resolved",label:"Resuelto"}]})}),w.jsxs("div",{className:"flex justify-end space-x-4",children:[w.jsx(Xh,{type:"button",variant:"secondary",onClick:t,disabled:r,children:"Cancelar"}),w.jsxs(Xh,{type:"submit",isLoading:r,children:[n?"Actualizar":"Crear"," Incidente"]})]})]})},hF=({incident:n,onUpdate:e})=>{const[t,r]=B.useState(!1),[s,o]=B.useState(!1),u=async y=>{o(!0);try{await e(y),r(!1)}catch(v){console.error("Error updating incident:",v)}finally{o(!1)}},h=y=>{switch(y){case"pending":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},d=y=>{switch(y){case"pending":return"Pendiente";case"in_progress":return"En Progreso";case"resolved":return"Resuelto";default:return y}},p=y=>{switch(y){case"safety":return"Seguridad";case"maintenance":return"Mantenimiento";case"quality":return"Calidad";default:return y}};return w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center space-x-4",children:[w.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${h(n.status)}`,children:d(n.status)}),w.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",n.id.slice(0,8)]})]}),w.jsx(Xh,{variant:"secondary",size:"sm",icon:w.jsx(PE,{}),onClick:()=>r(!0),children:"Editar"})]}),w.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[w.jsx(Jm,{children:w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Detalles del Incidente"}),w.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Información principal del incidente reportado"})]}),w.jsx("div",{className:"border-t border-gray-200 pt-4",children:w.jsxs("dl",{className:"divide-y divide-gray-200",children:[w.jsxs("div",{className:"py-3 flex justify-between",children:[w.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Tipo"}),w.jsx("dd",{className:"text-sm text-gray-900",children:p(n.type)})]}),w.jsxs("div",{className:"py-3 flex justify-between",children:[w.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Clasificación"}),w.jsxs("dd",{className:"text-sm text-gray-900",children:["Nivel ",n.classification]})]}),w.jsxs("div",{className:"py-3",children:[w.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Descripción"}),w.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:n.description})]}),w.jsxs("div",{className:"py-3",children:[w.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Acciones Inmediatas"}),w.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:n.immediateActions||"No se registraron acciones inmediatas"})]})]})})]})}),w.jsx(Jm,{children:w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Información Adicional"}),w.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Detalles sobre la ubicación y el reporte"})]}),w.jsx("div",{className:"border-t border-gray-200 pt-4",children:w.jsxs("dl",{className:"divide-y divide-gray-200",children:[w.jsxs("div",{className:"py-3",children:[w.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[w.jsx(FE,{className:"h-4 w-4 mr-2"}),"Ubicación"]}),w.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:n.location})]}),w.jsxs("div",{className:"py-3",children:[w.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Área Afectada"}),w.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:n.affectedArea})]}),w.jsxs("div",{className:"py-3",children:[w.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[w.jsx(qp,{className:"h-4 w-4 mr-2"}),"Reportado por"]}),w.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:n.reporterName})]}),w.jsxs("div",{className:"py-3",children:[w.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[w.jsx(DE,{className:"h-4 w-4 mr-2"}),"Fecha de Reporte"]}),w.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(n.reportDate).toLocaleString()})]})]})})]})})]}),w.jsx($v,{isOpen:t,onClose:()=>r(!1),title:"Editar Incidente",size:"lg",children:w.jsx(mO,{incident:n,onSubmit:u,onCancel:()=>r(!1),isLoading:s})})]})},dF=()=>{const[n,e]=B.useState([]),[t,r]=B.useState(null),[s,o]=B.useState(!0),[u,h]=B.useState(!1),[d,p]=B.useState(!1),[y,v]=B.useState(null),[b,A]=B.useState({status:"all",type:"all",classification:"all"}),C=new lF,F=new el,M=async()=>{try{if(o(!0),v(null),await F.waitForAuthReady(),!await F.isAuthenticated())throw new Error("Usuario no autenticado");let se=await C.getAll();b.status!=="all"&&(se=se.filter(V=>V.status===b.status)),b.type!=="all"&&(se=se.filter(V=>V.type===b.type)),b.classification!=="all"&&(se=se.filter(V=>V.classification===Number(b.classification))),e(se)}catch(te){console.error("Error loading incidents:",te),v(te instanceof Error?te.message:"Error al cargar los incidentes")}finally{o(!1)}};B.useEffect(()=>{M()},[b]);const Y=async te=>{h(!0),v(null);try{const se=F.getCurrentUser();if(!se)throw new Error("Usuario no autenticado");const V={...te,reporterId:se.uid,reporterName:se.displayName||"Usuario",type:te.type||"safety",description:te.description||"",classification:te.classification||1,status:"pending",reportDate:new Date().toISOString(),location:te.location||"",affectedArea:te.affectedArea||""};await C.create(V),p(!1),M()}catch(se){console.error("Error creating incident:",se),v("Error al crear el incidente. Por favor, intente nuevamente.")}finally{h(!1)}},Z=async te=>{if(t)try{await C.update(t.id,te),r(null),M()}catch(se){console.error("Error updating incident:",se),v("Error al actualizar el incidente. Por favor, intente nuevamente.")}},ee=[{header:"Fecha",accessor:te=>new Date(te.reportDate).toLocaleDateString()},{header:"Tipo",accessor:te=>({safety:"Seguridad",maintenance:"Mantenimiento",quality:"Calidad"})[te.type]},{header:"Descripción",accessor:te=>te.description},{header:"Estado",accessor:te=>w.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${te.status==="pending"?"bg-yellow-100 text-yellow-800":te.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:te.status==="pending"?"Pendiente":te.status==="in_progress"?"En Progreso":"Resuelto"})},{header:"Clasificación",accessor:te=>`Nivel ${te.classification}`},{header:"Reportado por",accessor:te=>te.reporterName}];return s?w.jsx("div",{className:"min-h-screen flex items-center justify-center",children:w.jsx("div",{className:"animate-pulse text-gray-600 dark:text-gray-300",children:"Cargando incidentes..."})}):y?w.jsx("div",{className:"min-h-screen flex items-center justify-center",children:w.jsxs("div",{className:"text-red-600 dark:text-red-400",children:[y,w.jsx(Xh,{variant:"primary",className:"mt-4",onClick:()=>M(),children:"Reintentar"})]})}):w.jsxs("div",{className:"space-y-6",children:[w.jsx(uF,{title:"Incidentes",subtitle:"Gestiona los incidentes reportados",actions:w.jsx(Xh,{variant:"primary",icon:w.jsx(HE,{className:"w-4 h-4"}),onClick:()=>p(!0),children:"Nuevo Incidente"})}),y&&w.jsx("div",{className:"rounded-md bg-red-50 p-4",children:w.jsx("div",{className:"flex",children:w.jsx("div",{className:"ml-3",children:w.jsx("h3",{className:"text-sm font-medium text-red-800",children:y})})})}),w.jsx(Jm,{children:w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(VE,{className:"text-gray-400"}),w.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtros"})]}),w.jsx(pa,{children:w.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[w.jsx(gu,{label:"Estado",value:b.status,onChange:te=>A({...b,status:te.target.value}),options:[{value:"all",label:"Todos"},{value:"pending",label:"Pendiente"},{value:"in_progress",label:"En Progreso"},{value:"resolved",label:"Resuelto"}]}),w.jsx(gu,{label:"Tipo",value:b.type,onChange:te=>A({...b,type:te.target.value}),options:[{value:"all",label:"Todos"},{value:"safety",label:"Seguridad"},{value:"maintenance",label:"Mantenimiento"},{value:"quality",label:"Calidad"}]}),w.jsx(gu,{label:"Clasificación",value:b.classification,onChange:te=>A({...b,classification:te.target.value}),options:[{value:"all",label:"Todos"},{value:"1",label:"Nivel 1"},{value:"2",label:"Nivel 2"},{value:"3",label:"Nivel 3"}]})]})})]})}),w.jsx(Jm,{children:w.jsx(cF,{columns:ee,data:n,isLoading:s,emptyMessage:"No hay incidentes que mostrar",onRowClick:te=>r(te)})}),w.jsx($v,{isOpen:d,onClose:()=>p(!1),title:"Nuevo Incidente",size:"lg",children:w.jsx(mO,{onSubmit:Y,onCancel:()=>p(!1),isLoading:u})}),t&&w.jsx($v,{isOpen:!0,onClose:()=>r(null),title:"Detalles del Incidente",size:"xl",children:w.jsx(hF,{incident:t,onUpdate:Z})})]})};class Oo extends B.Component{constructor(){super(...arguments);ii(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Uncaught error:",t,r)}render(){var t;return this.state.hasError?this.props.fallback?this.props.fallback:w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:w.jsx("div",{className:"max-w-md w-full space-y-8 p-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:w.jsxs("div",{className:"text-center",children:[w.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Oops! Algo salió mal"}),w.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:((t=this.state.error)==null?void 0:t.message)||"Se ha producido un error inesperado."}),w.jsx("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Recargar la página"})]})})}):this.props.children}}const fF=new el,mF=()=>fF.getCurrentUser()!==null?w.jsx(OI,{}):w.jsx(NI,{to:"/login",replace:!0}),pF=()=>w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:w.jsx("div",{className:"max-w-md w-full space-y-8 p-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:w.jsxs("div",{className:"text-center",children:[w.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"404 - Página no encontrada"}),w.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"La página que estás buscando no existe."}),w.jsx("a",{href:"/sgo-app",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Volver al inicio"})]})})}),gF=Uk([{path:"/login",element:w.jsx(Oo,{children:w.jsx(sF,{})})},{element:w.jsx(Oo,{children:w.jsx(mF,{})}),children:[{path:"/",element:w.jsx(Oo,{children:w.jsx(iF,{})}),children:[{index:!0,element:w.jsx(NI,{to:"/dashboard",replace:!0})},{path:"dashboard",element:w.jsx(Oo,{children:w.jsx(aF,{})})},{path:"incidents",element:w.jsx(Oo,{children:w.jsx(dF,{})})}]}]},{path:"*",element:w.jsx(Oo,{children:w.jsx(pF,{})})}],{basename:"/nrd-sgo"});YD.createRoot(document.getElementById("root")).render(w.jsx(he.StrictMode,{children:w.jsx(Oo,{children:w.jsx(Xk,{router:gF})})}));
//# sourceMappingURL=index-YOFI2WQZ.js.map
